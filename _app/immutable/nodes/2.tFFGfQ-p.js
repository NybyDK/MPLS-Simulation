var sn=Object.defineProperty;var an=(l,e,t)=>e in l?sn(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var K=(l,e,t)=>(an(l,typeof e!="symbol"?e+"":e,t),t);import{r as Me,x as Wt,s as ae,a as Kt,u as Jt,g as Qt,b as Zt,y as en,e as me,i as tn,n as de,z as $e,c as be,o as nn,A as Ae,B as Je}from"../chunks/scheduler.DYvwBUv9.js";import{n as B,m as P,S as ue,i as fe,e as L,c as I,a as x,d as b,l as k,g as C,z as J,t as te,b as ne,h as $,j as ke,s as F,v as V,A as se,f as H,w as X,x as q,r as pe,p as _e,B as xe,y as G,C as he,D as Le,E as Ce,o as oe,q as Ye,F as Pe,G as Te,H as un,I as _t}from"../chunks/index.CEZ_BoqP.js";import{w as Qe}from"../chunks/index.DX-KyX9r.js";function le(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function rt(l,e){B(l,1,1,()=>{e.delete(l.key)})}function ot(l,e,t,n,i,r,o,s,a,f,u,_){let p=l.length,g=r.length,h=p;const E={};for(;h--;)E[l[h].key]=h;const d=[],c=new Map,m=new Map,v=[];for(h=g;h--;){const T=_(i,r,h),N=t(T);let O=o.get(N);O?n&&v.push(()=>O.p(T,e)):(O=f(N,T),O.c()),c.set(N,d[h]=O),N in E&&m.set(N,Math.abs(h-E[N]))}const z=new Set,M=new Set;function R(T){P(T,1),T.m(s,u),o.set(T.key,T),u=T.first,g--}for(;p&&g;){const T=d[g-1],N=l[p-1],O=T.key,D=N.key;T===N?(u=T.first,p--,g--):c.has(D)?!o.has(O)||z.has(O)?R(T):M.has(D)?p--:m.get(O)>m.get(D)?(M.add(O),R(T)):(z.add(D),p--):(a(N,o),p--)}for(;p--;){const T=l[p];c.has(T.key)||a(T,o)}for(;g;)R(d[g-1]);return Me(v),d}function Ze(l,e){const t={},n={},i={$$scope:1};let r=l.length;for(;r--;){const o=l[r],s=e[r];if(s){for(const a in o)a in s||(n[a]=1);for(const a in s)i[a]||(t[a]=s[a],i[a]=1);l[r]=s}else for(const a in o)i[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function et(l){return typeof l=="object"&&l!==null?l:{}}const Ie=Qe({running:!0,enableFallback:!1,speedMultiplier:1,maxPackets:100});let fn=class{constructor(e,t,n){K(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},ut=class{constructor(e,t){this.id=e,this.node=t}};class ve extends ut{constructor(){super(...arguments);K(this,"address",`CE-IP-${this.id}`);K(this,"firstHop",new Map);K(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});K(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});K(this,"updateAddress",(t,n)=>{const i=this.firstHop.get(t);if(i===void 0){alert(`Unable to update old first hop Address '${t}' to '${n}'.`);return}this.firstHop.set(n,i),this.firstHop.delete(t)});K(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop("CE received packet. Dropping.")}clearTables(){this.firstHop.clear()}get type(){return"CE"}}let ln=class{constructor(){K(this,"map",new Map);K(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});K(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});K(this,"updateLabel",(e,t)=>{const n=this.map.get(e);if(!n){alert(`Unable to update old LFIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,n),this.map.delete(e)});K(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}},cn=class{constructor(){K(this,"map",new Map);K(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});K(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});K(this,"updateAddress",(e,t)=>{const n=this.map.get(e);if(n===void 0){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,n),this.map.delete(e)});K(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Re extends ut{constructor(){super(...arguments);K(this,"FIB",new cn);K(this,"LFIB",new ln)}receivePacket(t){var n,i,r,o;if(t.fallbackRoute)return t.fallback(this);if(t.label===-1){const s=t.destination,a=(n=this.FIB.get(s.address))==null?void 0:n.nextHop;if(!a)return t.fallback(this);const f=(i=this.FIB.get(s.address))==null?void 0:i.label;if(!f)return t.fallback(this);t.label=f;const u=S.getRouter(parseInt(a));if(!u)return t.fallback(this);t.nextHop=u}else{const s=(r=this.LFIB.get(t.label))==null?void 0:r.nextHop;if(!s)return t.fallback(this);const a=(o=this.LFIB.get(t.label))==null?void 0:o.outgoingLabel;if(!a)return t.fallback(this);t.label=a;const f=S.getCERouter(s);if(!f)return t.fallback(this);t.nextHop=f}t.decrementTTL()}clearTables(){this.FIB.map.clear(),this.LFIB.map.clear()}get type(){return"LER"}}function ft(l,e){const t=S.routers,n=t.length,i=new Array(n).fill(1/0),r=new Array(n).fill(!1),o=new Array(n).fill(null);i[t.indexOf(l)]=0;let s=!1,a=!1;for(;!s;){let _=null,p=1/0;for(const[g,h]of t.entries())if(!r[g]&&i[g]<p){if(h instanceof Re){if(!a)a=!0;else if(!S.links.some(d=>d.source===h&&d.target===e||d.target===h&&d.source===e))continue}_=h,p=i[g]}if(!_||_.id===e.id){s=!0;continue}r[t.indexOf(_)]=!0;for(const g of S.links){let h;if(g.source===_)h=g.target;else if(g.target===_)h=g.source;else continue;const E=t.indexOf(h),d=p+g.distance;d<i[E]&&(i[E]=d,o[E]=_)}}const f=[];let u=e;for(;u;){f.unshift(u);const _=t.indexOf(u);u=o[_]}return f}let hn=class{constructor(e,t,n,i){K(this,"ttl",32);K(this,"label",-1);K(this,"fallbackRoute");K(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=i;const r=t.firstHop.get(n.address);if(!r){this.drop("No next hop router id found.");return}const o=S.getRouter(r);if(!o){this.drop("No next hop router found.");return}this.nextHop=o}decrementTTL(){--this.ttl<=0&&this.drop()}fallback(e){if(!Wt(Ie).enableFallback)return this.drop("Fallback is disabled.");if(this.label=-1,this.decrementTTL(),this.fallbackRoute)return this.setFallbackNextHop();if(this.fallbackRoute=ft(e,this.destination),!(this.fallbackRoute[this.fallbackRoute.length-1]instanceof ve))return this.drop("The destination is not a CE.");this.fallbackRoute.shift(),this.setFallbackNextHop()}validateNextHop(e){return!!(S.doesLinkExist({source:e,target:this.nextHop})||S.doesLinkExist({source:this.nextHop,target:e}))}setFallbackNextHop(){var t;const e=(t=this.fallbackRoute)==null?void 0:t.shift();this.fallbackRoute&&e?this.nextHop=e:this.drop("Unable to set fallback IP routing next hop")}drop(e="Unknown"){console.warn("Packet dropped: ",e),S.deletePacket(this.id)}};class Ve extends ut{constructor(){super(...arguments);K(this,"LFIB",new ln)}receivePacket(t){var o,s;if(t.fallbackRoute)return t.fallback(this);const n=(o=this.LFIB.get(t.label))==null?void 0:o.nextHop;if(!n)return t.fallback(this);const i=(s=this.LFIB.get(t.label))==null?void 0:s.outgoingLabel;if(!i)return t.fallback(this);t.label=i;const r=S.getRouter(parseInt(n));if(!r)return t.fallback(this);t.nextHop=r,t.decrementTTL()}clearTables(){this.LFIB.map.clear()}get type(){return"LSR"}}const dn={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class pn{constructor(){K(this,"store",Qe({routers:[],links:[],packets:[]}));K(this,"set",this.store.set);K(this,"update",this.store.update);K(this,"subscribe",this.store.subscribe);K(this,"_routers",[]);K(this,"_links",[]);K(this,"_packets",[]);K(this,"routerMap",new Map);K(this,"CEMap",new Map);K(this,"routerCounter",1);K(this,"packetCounter",1);K(this,"maxPackets",Wt(Ie).maxPackets);Ie.subscribe(e=>{this.maxPackets=e.maxPackets,this._packets=this._packets.slice(-this.maxPackets),this.notify()})}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!dn[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new fn(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,i=new ve(n,{label:`CE ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(i)}createLER(e,t){const n=this.routerCounter++,i=new Re(n,{label:`LER ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(i)}createLSR(e,t){const n=this.routerCounter++,i=new Ve(n,{label:`LSR ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(i)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof ve&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),t instanceof ve&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}getSureCERouter(e){const t=this.getCERouter(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){if(this._packets.length>=this.maxPackets)return;const n=new hn(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearTables(){for(const e of this._routers)e.clearTables();this.notify()}clearLinks(){this._links=[],this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=1,this.packetCounter=1,this.notify()}notify(){this.store.set(this.networkState)}}const _n=new pn,S=_n,gn={placing:null},ze=Qe(gn),Se=Qe(!1);function mn(l){let e,t,n,i;const r=l[2].default,o=Kt(r,l,l[1],null);return{c(){e=L("dialog"),o&&o.c(),this.h()},l(s){e=I(s,"DIALOG",{class:!0});var a=x(e);o&&o.l(a),a.forEach(b),this.h()},h(){k(e,"class","svelte-p5wejv")},m(s,a){C(s,e,a),o&&o.m(e,null),l[4](e),t=!0,n||(i=J(e,"close",l[3]),n=!0)},p(s,[a]){o&&o.p&&(!t||a&2)&&Jt(o,r,s,s[1],t?Zt(r,s[1],a,null):Qt(s[1]),null)},i(s){t||(P(o,s),t=!0)},o(s){B(o,s),t=!1},d(s){s&&b(e),o&&o.d(s),l[4](null),n=!1,i()}}}function bn(l,e,t){let{$$slots:n={},$$scope:i}=e,{dialog:r}=e;function o(a){en.call(this,l,a)}function s(a){me[a?"unshift":"push"](()=>{r=a,t(0,r)})}return l.$$set=a=>{"dialog"in a&&t(0,r=a.dialog),"$$scope"in a&&t(1,i=a.$$scope)},[r,i,n,o,s]}class ct extends ue{constructor(e){super(),fe(this,e,bn,mn,ae,{dialog:0})}}const gt=16,kn=2**20-1;function rn(l,e){const t=l[0];if(!(t instanceof ve)){alert("The path does not start with a CE");return}const n=l[1];if(!(n instanceof Re)){alert("The source CE is not directly connected to an LER");return}if(t.firstHop.set(e,n.id),n.FIB.get(e))return;const i=l.length-2,r=l[i];if(!(r instanceof Re)){alert("Destination CE is not connected directly to a LER");return}let o=mt(l[i]);r.LFIB.receiveEntry(o,-1,e);for(let s=l.length-2;s>0;s--){const a=l[s],f=l[s-1],u=o;o=mt(a),f instanceof Re?f.FIB.receiveEntry(e,u,a.id.toString()):f instanceof Ve&&f.LFIB.receiveEntry(o,u,a.id.toString())}}function vn(l,e){return l instanceof Ve||l instanceof Re?l.LFIB.map.has(e):!1}function mt(l){let e;do e=Math.floor(Math.random()*(kn-gt+1)+gt);while(vn(l,e));return e}function En(l){let e,t,n,i;return{c(){e=L("button"),t=te(l[0]),this.h()},l(r){e=I(r,"BUTTON",{class:!0});var o=x(e);t=ne(o,l[0]),o.forEach(b),this.h()},h(){k(e,"class","svelte-17itt71")},m(r,o){C(r,e,o),$(e,t),n||(i=J(e,"click",function(){tn(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(r,[o]){l=r,o&1&&ke(t,l[0])},i:de,o:de,d(r){r&&b(e),n=!1,i()}}}function yn(l,e,t){let{text:n}=e,{callback:i}=e;return l.$$set=r=>{"text"in r&&t(0,n=r.text),"callback"in r&&t(1,i=r.callback)},[n,i]}class Fe extends ue{constructor(e){super(),fe(this,e,yn,En,ae,{text:0,callback:1})}}function bt(l,e,t){const n=l.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function kt(l){let e,t,n,i,r,o,s,a,f,u,_,p,g,h,E,d,c,m;function v(...T){return l[5](l[9],...T)}function z(...T){return l[6](l[9],...T)}function M(){return l[7](l[9])}_=new Fe({props:{text:"LDP",callback:M}});function R(){return l[8](l[9])}return h=new Fe({props:{text:"-",callback:R}}),{c(){e=L("tr"),t=L("td"),n=L("input"),r=F(),o=L("td"),s=L("input"),f=F(),u=L("td"),V(_.$$.fragment),p=F(),g=L("td"),V(h.$$.fragment),E=F(),this.h()},l(T){e=I(T,"TR",{});var N=x(e);t=I(N,"TD",{});var O=x(t);n=I(O,"INPUT",{type:!0,placeholder:!0}),O.forEach(b),r=H(N),o=I(N,"TD",{});var D=x(o);s=I(D,"INPUT",{type:!0,placeholder:!0}),D.forEach(b),f=H(N),u=I(N,"TD",{});var y=x(u);X(_.$$.fragment,y),y.forEach(b),p=H(N),g=I(N,"TD",{});var A=x(g);X(h.$$.fragment,A),A.forEach(b),E=H(N),N.forEach(b),this.h()},h(){k(n,"type","text"),n.value=i=l[9],k(n,"placeholder","Address"),k(s,"type","text"),s.value=a=l[10],k(s,"placeholder","Link")},m(T,N){C(T,e,N),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),$(e,f),$(e,u),q(_,u,null),$(e,p),$(e,g),q(h,g,null),$(e,E),d=!0,c||(m=[J(n,"change",v),J(s,"change",z)],c=!0)},p(T,N){l=T,(!d||N&1&&i!==(i=l[9])&&n.value!==i)&&(n.value=i),(!d||N&1&&a!==(a=l[10])&&s.value!==a)&&(s.value=a);const O={};N&1&&(O.callback=M),_.$set(O);const D={};N&1&&(D.callback=R),h.$set(D)},i(T){d||(P(_.$$.fragment,T),P(h.$$.fragment,T),d=!0)},o(T){B(_.$$.fragment,T),B(h.$$.fragment,T),d=!1},d(T){T&&b(e),G(_),G(h),c=!1,Me(m)}}}function wn(l){let e,t="Destinations:",n,i,r,o='<tr><th class="svelte-1d4gizi">Destination</th> <th class="svelte-1d4gizi">First hop</th> <th class="svelte-1d4gizi"></th> <th class="svelte-1d4gizi"></th></tr>',s,a,f,u,_,p,g=le([...l[0].firstHop]),h=[];for(let d=0;d<g.length;d+=1)h[d]=kt(bt(l,g,d));const E=d=>B(h[d],1,1,()=>{h[d]=null});return _=new Fe({props:{text:"+",callback:l[1](l[0].addEmptyEntry)}}),{c(){e=L("p"),e.textContent=t,n=F(),i=L("table"),r=L("thead"),r.innerHTML=o,s=F(),a=L("tbody");for(let d=0;d<h.length;d+=1)h[d].c();f=F(),u=L("div"),V(_.$$.fragment),this.h()},l(d){e=I(d,"P",{"data-svelte-h":!0}),se(e)!=="svelte-1ixmdgd"&&(e.textContent=t),n=H(d),i=I(d,"TABLE",{});var c=x(i);r=I(c,"THEAD",{"data-svelte-h":!0}),se(r)!=="svelte-1jq34m8"&&(r.innerHTML=o),s=H(c),a=I(c,"TBODY",{});var m=x(a);for(let z=0;z<h.length;z+=1)h[z].l(m);m.forEach(b),c.forEach(b),f=H(d),u=I(d,"DIV",{class:!0});var v=x(u);X(_.$$.fragment,v),v.forEach(b),this.h()},h(){k(u,"class","svelte-1d4gizi")},m(d,c){C(d,e,c),C(d,n,c),C(d,i,c),$(i,r),$(i,s),$(i,a);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(a,null);C(d,f,c),C(d,u,c),q(_,u,null),p=!0},p(d,[c]){if(c&29){g=le([...d[0].firstHop]);let v;for(v=0;v<g.length;v+=1){const z=bt(d,g,v);h[v]?(h[v].p(z,c),P(h[v],1)):(h[v]=kt(z),h[v].c(),P(h[v],1),h[v].m(a,null))}for(pe(),v=g.length;v<h.length;v+=1)E(v);_e()}const m={};c&1&&(m.callback=d[1](d[0].addEmptyEntry)),_.$set(m)},i(d){if(!p){for(let c=0;c<g.length;c+=1)P(h[c]);P(_.$$.fragment,d),p=!0}},o(d){h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)B(h[c]);B(_.$$.fragment,d),p=!1},d(d){d&&(b(e),b(n),b(i),b(f),b(u)),xe(h,d),G(_)}}}function $n(l,e,t){let{router:n}=e;function i(p){return()=>{p(),t(0,n)}}function r(p,g){if(!(p.target instanceof HTMLInputElement))return;const h=p.target.value.toUpperCase(),E=S.getCERouter(h);if(n.address===h){alert("Destination router cannot be the same as the source router.");return}if(!E){alert("Destination router not found.");return}n.updateAddress(g,h),t(0,n)}function o(p){const g=S.getCERouter(p);if(!g){alert("Destination router not found.");return}const h=ft(n,g);if(h.length<=1){alert("No path found");return}rn(h,p),t(0,n)}function s(p,g){if(!(p.target instanceof HTMLInputElement))return;const h=parseInt(p.target.value);n.firstHop.set(g,h)}const a=(p,g)=>{r(g,p)},f=(p,g)=>{s(g,p)},u=p=>{o(p)},_=p=>{n.firstHop.delete(p),t(0,n)};return l.$$set=p=>{"router"in p&&t(0,n=p.router)},[n,i,r,o,s,a,f,u,_]}class Cn extends ue{constructor(e){super(),fe(this,e,$n,wn,ae,{router:0})}}function vt(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Et(l){let e,t,n,i,r,o,s,a,f,u,_,p,g,h,E,d;function c(...M){return l[3](l[7],...M)}function m(){l[4].call(s,l[9],l[10])}function v(){l[5].call(u,l[9],l[10])}function z(){return l[6](l[7])}return p=new Fe({props:{text:"-",callback:z}}),{c(){e=L("tr"),t=L("td"),n=L("input"),r=F(),o=L("td"),s=L("input"),a=F(),f=L("td"),u=L("input"),_=F(),V(p.$$.fragment),g=F(),this.h()},l(M){e=I(M,"TR",{});var R=x(e);t=I(R,"TD",{});var T=x(t);n=I(T,"INPUT",{type:!0}),T.forEach(b),r=H(R),o=I(R,"TD",{});var N=x(o);s=I(N,"INPUT",{type:!0}),N.forEach(b),a=H(R),f=I(R,"TD",{});var O=x(f);u=I(O,"INPUT",{type:!0}),O.forEach(b),_=H(R),X(p.$$.fragment,R),g=H(R),R.forEach(b),this.h()},h(){k(n,"type","number"),n.value=i=l[7],k(s,"type","number"),k(u,"type","text")},m(M,R){C(M,e,R),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),he(s,l[8].outgoingLabel),$(e,a),$(e,f),$(f,u),he(u,l[8].nextHop),$(e,_),q(p,e,null),$(e,g),h=!0,E||(d=[J(n,"change",c),J(s,"input",m),J(u,"input",v)],E=!0)},p(M,R){l=M,(!h||R&1&&i!==(i=l[7])&&n.value!==i)&&(n.value=i),R&1&&Le(s.value)!==l[8].outgoingLabel&&he(s,l[8].outgoingLabel),R&1&&u.value!==l[8].nextHop&&he(u,l[8].nextHop);const T={};R&1&&(T.callback=z),p.$set(T)},i(M){h||(P(p.$$.fragment,M),h=!0)},o(M){B(p.$$.fragment,M),h=!1},d(M){M&&b(e),G(p),E=!1,Me(d)}}}function Ln(l){let e,t="LFIB:",n,i,r,o="<tr><th>Incoming</th> <th>Outgoing</th> <th>Next hop</th> <th></th></tr>",s,a,f,u,_,p,g=le([...l[0].LFIB.map]),h=[];for(let d=0;d<g.length;d+=1)h[d]=Et(vt(l,g,d));const E=d=>B(h[d],1,1,()=>{h[d]=null});return _=new Fe({props:{text:"+",callback:l[1](l[0].LFIB.addEmptyEntry)}}),{c(){e=L("p"),e.textContent=t,n=F(),i=L("table"),r=L("thead"),r.innerHTML=o,s=F(),a=L("tbody");for(let d=0;d<h.length;d+=1)h[d].c();f=F(),u=L("div"),V(_.$$.fragment),this.h()},l(d){e=I(d,"P",{"data-svelte-h":!0}),se(e)!=="svelte-5opw2d"&&(e.textContent=t),n=H(d),i=I(d,"TABLE",{});var c=x(i);r=I(c,"THEAD",{"data-svelte-h":!0}),se(r)!=="svelte-1fy2y89"&&(r.innerHTML=o),s=H(c),a=I(c,"TBODY",{});var m=x(a);for(let z=0;z<h.length;z+=1)h[z].l(m);m.forEach(b),c.forEach(b),f=H(d),u=I(d,"DIV",{class:!0});var v=x(u);X(_.$$.fragment,v),v.forEach(b),this.h()},h(){k(u,"class","svelte-f8qi58")},m(d,c){C(d,e,c),C(d,n,c),C(d,i,c),$(i,r),$(i,s),$(i,a);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(a,null);C(d,f,c),C(d,u,c),q(_,u,null),p=!0},p(d,[c]){if(c&5){g=le([...d[0].LFIB.map]);let v;for(v=0;v<g.length;v+=1){const z=vt(d,g,v);h[v]?(h[v].p(z,c),P(h[v],1)):(h[v]=Et(z),h[v].c(),P(h[v],1),h[v].m(a,null))}for(pe(),v=g.length;v<h.length;v+=1)E(v);_e()}const m={};c&1&&(m.callback=d[1](d[0].LFIB.addEmptyEntry)),_.$set(m)},i(d){if(!p){for(let c=0;c<g.length;c+=1)P(h[c]);P(_.$$.fragment,d),p=!0}},o(d){h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)B(h[c]);B(_.$$.fragment,d),p=!1},d(d){d&&(b(e),b(n),b(i),b(f),b(u)),xe(h,d),G(_)}}}function In(l,e,t){let{router:n}=e;function i(u){return()=>{u(),t(0,n)}}function r(u,_){if(!(u.target instanceof HTMLInputElement))return;const p=parseInt(u.target.value);n.LFIB.updateLabel(_,p)}const o=(u,_)=>{r(_,u)};function s(u,_){u[_][1].outgoingLabel=Le(this.value),t(0,n)}function a(u,_){u[_][1].nextHop=this.value,t(0,n)}const f=u=>{n.LFIB.deleteEntry(u),t(0,n)};return l.$$set=u=>{"router"in u&&t(0,n=u.router)},[n,i,r,o,s,a,f]}class Rn extends ue{constructor(e){super(),fe(this,e,In,Ln,ae,{router:0})}}function yt(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function wt(l){let e,t,n,i,r,o,s,a,f,u,_,p,g,h,E,d;function c(...M){return l[3](l[7],...M)}function m(){l[4].call(s,l[9],l[10])}function v(){l[5].call(u,l[9],l[10])}function z(){return l[6](l[7])}return p=new Fe({props:{text:"-",callback:z}}),{c(){e=L("tr"),t=L("td"),n=L("input"),r=F(),o=L("td"),s=L("input"),a=F(),f=L("td"),u=L("input"),_=F(),V(p.$$.fragment),g=F(),this.h()},l(M){e=I(M,"TR",{});var R=x(e);t=I(R,"TD",{});var T=x(t);n=I(T,"INPUT",{type:!0}),T.forEach(b),r=H(R),o=I(R,"TD",{});var N=x(o);s=I(N,"INPUT",{type:!0}),N.forEach(b),a=H(R),f=I(R,"TD",{});var O=x(f);u=I(O,"INPUT",{type:!0}),O.forEach(b),_=H(R),X(p.$$.fragment,R),g=H(R),R.forEach(b),this.h()},h(){k(n,"type","text"),n.value=i=l[7],k(s,"type","number"),k(u,"type","text")},m(M,R){C(M,e,R),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),he(s,l[8].label),$(e,a),$(e,f),$(f,u),he(u,l[8].nextHop),$(e,_),q(p,e,null),$(e,g),h=!0,E||(d=[J(n,"change",c),J(s,"input",m),J(u,"input",v)],E=!0)},p(M,R){l=M,(!h||R&1&&i!==(i=l[7])&&n.value!==i)&&(n.value=i),R&1&&Le(s.value)!==l[8].label&&he(s,l[8].label),R&1&&u.value!==l[8].nextHop&&he(u,l[8].nextHop);const T={};R&1&&(T.callback=z),p.$set(T)},i(M){h||(P(p.$$.fragment,M),h=!0)},o(M){B(p.$$.fragment,M),h=!1},d(M){M&&b(e),G(p),E=!1,Me(d)}}}function Dn(l){let e,t="FIB:",n,i,r,o="<tr><th>Address</th> <th>Label</th> <th>Next hop</th> <th></th></tr>",s,a,f,u,_,p,g=le([...l[0].FIB.map]),h=[];for(let d=0;d<g.length;d+=1)h[d]=wt(yt(l,g,d));const E=d=>B(h[d],1,1,()=>{h[d]=null});return _=new Fe({props:{text:"+",callback:l[1](l[0].FIB.addEmptyEntry)}}),{c(){e=L("p"),e.textContent=t,n=F(),i=L("table"),r=L("thead"),r.innerHTML=o,s=F(),a=L("tbody");for(let d=0;d<h.length;d+=1)h[d].c();f=F(),u=L("div"),V(_.$$.fragment),this.h()},l(d){e=I(d,"P",{"data-svelte-h":!0}),se(e)!=="svelte-1j6bdhj"&&(e.textContent=t),n=H(d),i=I(d,"TABLE",{});var c=x(i);r=I(c,"THEAD",{"data-svelte-h":!0}),se(r)!=="svelte-1qhs6t7"&&(r.innerHTML=o),s=H(c),a=I(c,"TBODY",{});var m=x(a);for(let z=0;z<h.length;z+=1)h[z].l(m);m.forEach(b),c.forEach(b),f=H(d),u=I(d,"DIV",{class:!0});var v=x(u);X(_.$$.fragment,v),v.forEach(b),this.h()},h(){k(u,"class","svelte-f8qi58")},m(d,c){C(d,e,c),C(d,n,c),C(d,i,c),$(i,r),$(i,s),$(i,a);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(a,null);C(d,f,c),C(d,u,c),q(_,u,null),p=!0},p(d,[c]){if(c&5){g=le([...d[0].FIB.map]);let v;for(v=0;v<g.length;v+=1){const z=yt(d,g,v);h[v]?(h[v].p(z,c),P(h[v],1)):(h[v]=wt(z),h[v].c(),P(h[v],1),h[v].m(a,null))}for(pe(),v=g.length;v<h.length;v+=1)E(v);_e()}const m={};c&1&&(m.callback=d[1](d[0].FIB.addEmptyEntry)),_.$set(m)},i(d){if(!p){for(let c=0;c<g.length;c+=1)P(h[c]);P(_.$$.fragment,d),p=!0}},o(d){h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)B(h[c]);B(_.$$.fragment,d),p=!1},d(d){d&&(b(e),b(n),b(i),b(f),b(u)),xe(h,d),G(_)}}}function Pn(l,e,t){let{router:n}=e;function i(u){return()=>{u(),t(0,n)}}function r(u,_){if(!(u.target instanceof HTMLInputElement))return;const p=u.target.value;n.FIB.updateAddress(_,p)}const o=(u,_)=>{r(_,u)};function s(u,_){u[_][1].label=Le(this.value),t(0,n)}function a(u,_){u[_][1].nextHop=this.value,t(0,n)}const f=u=>{n.FIB.deleteEntry(u),t(0,n)};return l.$$set=u=>{"router"in u&&t(0,n=u.router)},[n,i,r,o,s,a,f]}class Tn extends ue{constructor(e){super(),fe(this,e,Pn,Dn,ae,{router:0})}}function Nn(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=I(n,"P",{"data-svelte-h":!0}),se(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,i){C(n,e,i)},p:de,i:de,o:de,d(n){n&&b(e)}}}function Bn(l){let e,t,n,i,r,o,s,a,f,u,_,p,g,h,E=l[0].id+"",d,c,m,v,z,M,R,T,N,O,D=l[0]instanceof ve&&$t(l),y=l[0]instanceof Re&&Ct(l),A=(l[0]instanceof Re||l[0]instanceof Ve)&&Lt(l);return R=new Fe({props:{text:"Delete Router",callback:l[3]}}),{c(){e=L("div"),t=L("div"),n=L("label"),i=te(`Label:
          `),r=L("input"),o=F(),s=L("label"),a=te(`Position:
        `),f=L("input"),u=F(),_=L("input"),p=F(),g=L("p"),h=te("ID: "),d=te(E),c=F(),D&&D.c(),m=F(),y&&y.c(),v=F(),A&&A.c(),z=F(),M=L("div"),V(R.$$.fragment),this.h()},l(j){e=I(j,"DIV",{});var U=x(e);t=I(U,"DIV",{});var He=x(t);n=I(He,"LABEL",{});var Z=x(n);i=ne(Z,`Label:
          `),r=I(Z,"INPUT",{type:!0,class:!0}),Z.forEach(b),He.forEach(b),o=H(U),s=I(U,"LABEL",{});var ge=x(s);a=ne(ge,`Position:
        `),f=I(ge,"INPUT",{type:!0,class:!0}),u=H(ge),_=I(ge,"INPUT",{type:!0,class:!0}),ge.forEach(b),p=H(U),g=I(U,"P",{});var we=x(g);h=ne(we,"ID: "),d=ne(we,E),we.forEach(b),U.forEach(b),c=H(j),D&&D.l(j),m=H(j),y&&y.l(j),v=H(j),A&&A.l(j),z=H(j),M=I(j,"DIV",{class:!0});var Ee=x(M);X(R.$$.fragment,Ee),Ee.forEach(b),this.h()},h(){k(r,"type","text"),k(r,"class","svelte-cihl2i"),k(f,"type","number"),f.disabled=l[2],k(f,"class","svelte-cihl2i"),k(_,"type","number"),_.disabled=l[2],k(_,"class","svelte-cihl2i"),k(M,"class","margin-top svelte-cihl2i")},m(j,U){C(j,e,U),$(e,t),$(t,n),$(n,i),$(n,r),he(r,l[0].node.label),$(e,o),$(e,s),$(s,a),$(s,f),he(f,l[0].node.x),$(s,u),$(s,_),he(_,l[0].node.y),$(e,p),$(e,g),$(g,h),$(g,d),C(j,c,U),D&&D.m(j,U),C(j,m,U),y&&y.m(j,U),C(j,v,U),A&&A.m(j,U),C(j,z,U),C(j,M,U),q(R,M,null),T=!0,N||(O=[J(r,"input",l[4]),J(f,"input",l[5]),J(_,"input",l[6]),J(e,"input",l[7])],N=!0)},p(j,U){U&1&&r.value!==j[0].node.label&&he(r,j[0].node.label),(!T||U&4)&&(f.disabled=j[2]),U&1&&Le(f.value)!==j[0].node.x&&he(f,j[0].node.x),(!T||U&4)&&(_.disabled=j[2]),U&1&&Le(_.value)!==j[0].node.y&&he(_,j[0].node.y),(!T||U&1)&&E!==(E=j[0].id+"")&&ke(d,E),j[0]instanceof ve?D?(D.p(j,U),U&1&&P(D,1)):(D=$t(j),D.c(),P(D,1),D.m(m.parentNode,m)):D&&(pe(),B(D,1,1,()=>{D=null}),_e()),j[0]instanceof Re?y?(y.p(j,U),U&1&&P(y,1)):(y=Ct(j),y.c(),P(y,1),y.m(v.parentNode,v)):y&&(pe(),B(y,1,1,()=>{y=null}),_e()),j[0]instanceof Re||j[0]instanceof Ve?A?(A.p(j,U),U&1&&P(A,1)):(A=Lt(j),A.c(),P(A,1),A.m(z.parentNode,z)):A&&(pe(),B(A,1,1,()=>{A=null}),_e())},i(j){T||(P(D),P(y),P(A),P(R.$$.fragment,j),T=!0)},o(j){B(D),B(y),B(A),B(R.$$.fragment,j),T=!1},d(j){j&&(b(e),b(c),b(m),b(v),b(z),b(M)),D&&D.d(j),y&&y.d(j),A&&A.d(j),G(R),N=!1,Me(O)}}}function $t(l){let e,t="Address:",n,i,r=l[0].address+"",o,s,a,f,u,_,p,g;function h(d){l[9](d)}let E={};return l[0]!==void 0&&(E.router=l[0]),f=new Cn({props:E}),me.push(()=>Ce(f,"router",h)),{c(){e=L("p"),e.textContent=t,n=F(),i=L("button"),o=te(r),s=F(),a=L("div"),V(f.$$.fragment),this.h()},l(d){e=I(d,"P",{"data-svelte-h":!0}),se(e)!=="svelte-18hoeeh"&&(e.textContent=t),n=H(d),i=I(d,"BUTTON",{class:!0});var c=x(i);o=ne(c,r),c.forEach(b),s=H(d),a=I(d,"DIV",{class:!0});var m=x(a);X(f.$$.fragment,m),m.forEach(b),this.h()},h(){Ye(e,"display","inline"),k(i,"class","svelte-cihl2i"),k(a,"class","margin-top svelte-cihl2i")},m(d,c){C(d,e,c),C(d,n,c),C(d,i,c),$(i,o),C(d,s,c),C(d,a,c),q(f,a,null),_=!0,p||(g=J(i,"click",l[8]),p=!0)},p(d,c){(!_||c&1)&&r!==(r=d[0].address+"")&&ke(o,r);const m={};!u&&c&1&&(u=!0,m.router=d[0],$e(()=>u=!1)),f.$set(m)},i(d){_||(P(f.$$.fragment,d),_=!0)},o(d){B(f.$$.fragment,d),_=!1},d(d){d&&(b(e),b(n),b(i),b(s),b(a)),G(f),p=!1,g()}}}function Ct(l){let e,t,n,i;function r(s){l[10](s)}let o={};return l[0]!==void 0&&(o.router=l[0]),t=new Tn({props:o}),me.push(()=>Ce(t,"router",r)),{c(){e=L("div"),V(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var a=x(e);X(t.$$.fragment,a),a.forEach(b),this.h()},h(){k(e,"class","margin-top svelte-cihl2i")},m(s,a){C(s,e,a),q(t,e,null),i=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.router=s[0],$e(()=>n=!1)),t.$set(f)},i(s){i||(P(t.$$.fragment,s),i=!0)},o(s){B(t.$$.fragment,s),i=!1},d(s){s&&b(e),G(t)}}}function Lt(l){let e,t,n,i;function r(s){l[11](s)}let o={};return l[0]!==void 0&&(o.router=l[0]),t=new Rn({props:o}),me.push(()=>Ce(t,"router",r)),{c(){e=L("div"),V(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var a=x(e);X(t.$$.fragment,a),a.forEach(b),this.h()},h(){k(e,"class","margin-top svelte-cihl2i")},m(s,a){C(s,e,a),q(t,e,null),i=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.router=s[0],$e(()=>n=!1)),t.$set(f)},i(s){i||(P(t.$$.fragment,s),i=!0)},o(s){B(t.$$.fragment,s),i=!1},d(s){s&&b(e),G(t)}}}function xn(l){let e,t,n,i;const r=[Bn,Nn],o=[];function s(a,f){return a[0]?0:1}return e=s(l),t=o[e]=r[e](l),{c(){t.c(),n=oe()},l(a){t.l(a),n=oe()},m(a,f){o[e].m(a,f),C(a,n,f),i=!0},p(a,f){let u=e;e=s(a),e===u?o[e].p(a,f):(pe(),B(o[u],1,1,()=>{o[u]=null}),_e(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){i||(P(t),i=!0)},o(a){B(t),i=!1},d(a){a&&b(n),o[e].d(a)}}}function Fn(l){let e,t,n;function i(o){l[12](o)}let r={$$slots:{default:[xn]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.dialog=l[1]),e=new ct({props:r}),me.push(()=>Ce(e,"dialog",i)),e.$on("close",l[13]),{c(){V(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,s){q(e,o,s),n=!0},p(o,[s]){const a={};s&16389&&(a.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,a.dialog=o[1],$e(()=>t=!1)),e.$set(a)},i(o){n||(P(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){G(e,o)}}}function Hn(l,e,t){let n;be(l,Se,c=>t(2,n=c));let{router:i}=e,{dialog:r}=e;function o(){if(!n&&i){if(!confirm("Are you sure you want to delete this router?"))return;S.deleteRouter(i.id),r.close()}else alert("You can't delete a router while the network is locked.")}function s(){i.node.label=this.value,t(0,i)}function a(){i.node.x=Le(this.value),t(0,i)}function f(){i.node.y=Le(this.value),t(0,i)}const u=()=>{S.notify()},_=async()=>{i instanceof ve&&await navigator.clipboard.writeText(i.address)};function p(c){i=c,t(0,i)}function g(c){i=c,t(0,i)}function h(c){i=c,t(0,i)}function E(c){r=c,t(1,r)}const d=()=>{if(i instanceof ve)for(const c of i.firstHop.keys())c===""&&i.firstHop.delete(c);S.notify()};return l.$$set=c=>{"router"in c&&t(0,i=c.router),"dialog"in c&&t(1,r=c.dialog)},[i,r,n,o,s,a,f,u,_,p,g,h,E,d]}class zn extends ue{constructor(e){super(),fe(this,e,Hn,Fn,ae,{router:0,dialog:1})}}function Mn(l){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=I(n,"P",{"data-svelte-h":!0}),se(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,i){C(n,e,i)},p:de,i:de,o:de,d(n){n&&b(e)}}}function jn(l){let e,t=l[0].distance+"",n,i,r,o,s,a,f,u,_,p,g;return u=new Fe({props:{text:"Delete Link",callback:l[3]}}),{c(){e=te("Distance: "),n=te(t),i=te(` km
    `),r=L("label"),o=te(`Bandwidth:
      `),s=L("input"),a=F(),f=L("div"),V(u.$$.fragment),this.h()},l(h){e=ne(h,"Distance: "),n=ne(h,t),i=ne(h,` km
    `),r=I(h,"LABEL",{class:!0});var E=x(r);o=ne(E,`Bandwidth:
      `),s=I(E,"INPUT",{type:!0,class:!0}),E.forEach(b),a=H(h),f=I(h,"DIV",{class:!0});var d=x(f);X(u.$$.fragment,d),d.forEach(b),this.h()},h(){k(s,"type","number"),s.disabled=l[2],k(s,"class","svelte-11gx5jd"),k(r,"class","svelte-11gx5jd"),k(f,"class","svelte-11gx5jd")},m(h,E){C(h,e,E),C(h,n,E),C(h,i,E),C(h,r,E),$(r,o),$(r,s),he(s,l[0].bandwidth),C(h,a,E),C(h,f,E),q(u,f,null),_=!0,p||(g=J(s,"input",l[4]),p=!0)},p(h,E){(!_||E&1)&&t!==(t=h[0].distance+"")&&ke(n,t),(!_||E&4)&&(s.disabled=h[2]),E&1&&Le(s.value)!==h[0].bandwidth&&he(s,h[0].bandwidth)},i(h){_||(P(u.$$.fragment,h),_=!0)},o(h){B(u.$$.fragment,h),_=!1},d(h){h&&(b(e),b(n),b(i),b(r),b(a),b(f)),G(u),p=!1,g()}}}function An(l){let e,t,n,i;const r=[jn,Mn],o=[];function s(a,f){return a[0]?0:1}return e=s(l),t=o[e]=r[e](l),{c(){t.c(),n=oe()},l(a){t.l(a),n=oe()},m(a,f){o[e].m(a,f),C(a,n,f),i=!0},p(a,f){let u=e;e=s(a),e===u?o[e].p(a,f):(pe(),B(o[u],1,1,()=>{o[u]=null}),_e(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){i||(P(t),i=!0)},o(a){B(t),i=!1},d(a){a&&b(n),o[e].d(a)}}}function Sn(l){let e,t,n;function i(o){l[5](o)}let r={$$slots:{default:[An]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.dialog=l[1]),e=new ct({props:r}),me.push(()=>Ce(e,"dialog",i)),e.$on("close",l[6]),{c(){V(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,s){q(e,o,s),n=!0},p(o,[s]){const a={};s&133&&(a.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,a.dialog=o[1],$e(()=>t=!1)),e.$set(a)},i(o){n||(P(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){G(e,o)}}}function On(l,e,t){let n;be(l,Se,u=>t(2,n=u));let{link:i}=e,{dialog:r}=e;function o(){if(!n&&i){if(!confirm("Are you sure you want to delete this link?"))return;S.deleteLink(i.id),r.close()}else alert("You can't delete a link while the network is locked.")}function s(){i.bandwidth=Le(this.value),t(0,i)}function a(u){r=u,t(1,r)}const f=()=>{S.notify()};return l.$$set=u=>{"link"in u&&t(0,i=u.link),"dialog"in u&&t(1,r=u.dialog)},[i,r,n,o,s,a,f]}class Un extends ue{constructor(e){super(),fe(this,e,On,Sn,ae,{link:0,dialog:1})}}function It(l){let e,t="Loading...";return{c(){e=L("p"),e.textContent=t,this.h()},l(n){e=I(n,"P",{style:!0,"data-svelte-h":!0}),se(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Ye(e,"font-size","200px")},m(n,i){C(n,e,i)},d(n){n&&b(e)}}}function Rt(l){let e,t,n,i,r,o;return{c(){e=Pe("line"),this.h()},l(s){e=Te(s,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),x(e).forEach(b),this.h()},h(){k(e,"class","preview"),k(e,"x1",t=l[4].node.x),k(e,"y1",n=l[4].node.y),k(e,"x2",i=l[20](l[2].x)),k(e,"y2",r=l[21](l[2].y)),k(e,"stroke",o=l[6]===l[12].CONNECTING?"green":"blue")},m(s,a){C(s,e,a)},p(s,a){a[0]&16&&t!==(t=s[4].node.x)&&k(e,"x1",t),a[0]&16&&n!==(n=s[4].node.y)&&k(e,"y1",n),a[0]&4&&i!==(i=s[20](s[2].x))&&k(e,"x2",i),a[0]&4&&r!==(r=s[21](s[2].y))&&k(e,"y2",r),a[0]&64&&o!==(o=s[6]===s[12].CONNECTING?"green":"blue")&&k(e,"stroke",o)},d(s){s&&b(e)}}}function Dt(l){let e,t,n,i,r,o=l[11].placing+"",s,a,f;return{c(){e=Pe("circle"),r=Pe("text"),s=te(o),this.h()},l(u){e=Te(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),x(e).forEach(b),r=Te(u,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var _=x(r);s=ne(_,o),_.forEach(b),this.h()},h(){k(e,"cx",t=l[20](l[2].x)),k(e,"cy",n=l[21](l[2].y)),k(e,"r","20"),k(e,"fill",i=l[13][l[11].placing]),k(r,"x",a=l[20](l[2].x)),k(r,"y",f=l[21](l[2].y)),k(r,"dominant-baseline","central"),k(r,"font-size","smaller"),k(r,"class","svelte-huetud")},m(u,_){C(u,e,_),C(u,r,_),$(r,s)},p(u,_){_[0]&4&&t!==(t=u[20](u[2].x))&&k(e,"cx",t),_[0]&4&&n!==(n=u[21](u[2].y))&&k(e,"cy",n),_[0]&2048&&i!==(i=u[13][u[11].placing])&&k(e,"fill",i),_[0]&2048&&o!==(o=u[11].placing+"")&&ke(s,o),_[0]&4&&a!==(a=u[20](u[2].x))&&k(r,"x",a),_[0]&4&&f!==(f=u[21](u[2].y))&&k(r,"y",f)},d(u){u&&(b(e),b(r))}}}function Yn(l){let e,t,n,i,r,o,s,a,f,u,_,p,g,h,E,d=!l[9]&&It(),c=(!l[0]&&l[6]===l[12].CONNECTING||l[6]===l[12].ADDING_DESTINATION)&&l[4]&&Rt(l);const m=l[24].default,v=Kt(m,l,l[23],null);let z=l[6]===l[12].ADDING_ROUTERS&&l[11].placing&&Dt(l);function M(y){l[27](y)}function R(y){l[28](y)}let T={};l[4]!==void 0&&(T.router=l[4]),l[7]!==void 0&&(T.dialog=l[7]),o=new zn({props:T}),me.push(()=>Ce(o,"router",M)),me.push(()=>Ce(o,"dialog",R));function N(y){l[29](y)}function O(y){l[30](y)}let D={};return l[5]!==void 0&&(D.link=l[5]),l[8]!==void 0&&(D.dialog=l[8]),u=new Un({props:D}),me.push(()=>Ce(u,"link",N)),me.push(()=>Ce(u,"dialog",O)),{c(){d&&d.c(),e=F(),t=Pe("svg"),c&&c.c(),n=oe(),v&&v.c(),z&&z.c(),r=F(),V(o.$$.fragment),f=F(),V(u.$$.fragment),this.h()},l(y){d&&d.l(y),e=H(y),t=Te(y,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var A=x(t);c&&c.l(A),n=oe(),v&&v.l(A),z&&z.l(A),A.forEach(b),r=H(y),X(o.$$.fragment,y),f=H(y),X(u.$$.fragment,y),this.h()},h(){k(t,"viewBox",i=`${l[1].x} ${l[1].y} ${l[1].width} ${l[1].height}`),k(t,"role","button"),k(t,"tabindex","-1"),k(t,"class","svelte-huetud"),Ye(t,"cursor",l[10][l[6]])},m(y,A){d&&d.m(y,A),C(y,e,A),C(y,t,A),c&&c.m(t,null),$(t,n),v&&v.m(t,null),z&&z.m(t,null),l[26](t),C(y,r,A),q(o,y,A),C(y,f,A),q(u,y,A),g=!0,h||(E=[J(window,"keydown",l[14]),J(t,"pointerdown",l[15]),J(t,"pointerup",l[16]),J(t,"wheel",l[17]),J(t,"dblclick",l[18]),J(t,"dragover",un(l[25])),J(t,"drop",l[19])],h=!0)},p(y,A){y[9]?d&&(d.d(1),d=null):d||(d=It(),d.c(),d.m(e.parentNode,e)),(!y[0]&&y[6]===y[12].CONNECTING||y[6]===y[12].ADDING_DESTINATION)&&y[4]?c?c.p(y,A):(c=Rt(y),c.c(),c.m(t,n)):c&&(c.d(1),c=null),v&&v.p&&(!g||A[0]&8388608)&&Jt(v,m,y,y[23],g?Zt(m,y[23],A,null):Qt(y[23]),null),y[6]===y[12].ADDING_ROUTERS&&y[11].placing?z?z.p(y,A):(z=Dt(y),z.c(),z.m(t,null)):z&&(z.d(1),z=null),(!g||A[0]&2&&i!==(i=`${y[1].x} ${y[1].y} ${y[1].width} ${y[1].height}`))&&k(t,"viewBox",i),A[0]&1088&&Ye(t,"cursor",y[10][y[6]]);const j={};!s&&A[0]&16&&(s=!0,j.router=y[4],$e(()=>s=!1)),!a&&A[0]&128&&(a=!0,j.dialog=y[7],$e(()=>a=!1)),o.$set(j);const U={};!_&&A[0]&32&&(_=!0,U.link=y[5],$e(()=>_=!1)),!p&&A[0]&256&&(p=!0,U.dialog=y[8],$e(()=>p=!1)),u.$set(U)},i(y){g||(P(v,y),P(o.$$.fragment,y),P(u.$$.fragment,y),g=!0)},o(y){B(v,y),B(o.$$.fragment,y),B(u.$$.fragment,y),g=!1},d(y){y&&(b(e),b(t),b(r),b(f)),d&&d.d(y),c&&c.d(),v&&v.d(y),z&&z.d(),l[26](null),G(o,y),G(u,y),h=!1,Me(E)}}}function Vn(l,e,t){let n,i,r;be(l,Se,w=>t(0,i=w)),be(l,ze,w=>t(11,r=w));let{$$slots:o={},$$scope:s}=e;var a=(w=>(w[w.NONE=0]="NONE",w[w.DRAGGING=1]="DRAGGING",w[w.PANNING=2]="PANNING",w[w.CONNECTING=3]="CONNECTING",w[w.ADDING_DESTINATION=4]="ADDING_DESTINATION",w[w.ADDING_ROUTERS=5]="ADDING_ROUTERS",w))(a||{});const f={x:0,y:0,width:0,height:0,get scale(){return g?this.width/g.getBoundingClientRect().width:1}},u={x:0,y:0},_={x:0,y:0},p={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};let g=null,h=null,E=null,d=0,c,m,v=!1;ze.subscribe(w=>{w.placing&&["CE","LER","LSR"].includes(w.placing)?(t(2,u.x=-1e6,u),t(2,u.y=-1e6,u),t(6,d=5),g==null||g.addEventListener("pointermove",M)):(t(6,d=0),g==null||g.removeEventListener("pointermove",M))}),nn(()=>{if(!g)return;new ResizeObserver(z).observe(g),requestAnimationFrame(()=>{g&&(t(1,f.x=g.getBoundingClientRect().width/-2,f),t(1,f.y=g.getBoundingClientRect().height/-2,f))}),t(9,v=!0)});function z(){if(!g)return;const w=f.scale||1;t(1,f.width=g.getBoundingClientRect().width*w,f),t(1,f.height=g.getBoundingClientRect().height*w,f)}function M(w){r.placing&&(t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u))}function R(w){w.key==="Escape"&&Ae(ze,r.placing=null,r)}function T(w){if(!(w.target instanceof Element))return;if(w.preventDefault(),d===5){switch(r.placing){case"CE":S.createCE(Z(w.clientX),ge(w.clientY));break;case"LER":S.createLER(Z(w.clientX),ge(w.clientY));break;case"LSR":S.createLSR(Z(w.clientX),ge(w.clientY));break}w.shiftKey||Ae(ze,r.placing=null,r);return}g==null||g.addEventListener("pointermove",O),g==null||g.setPointerCapture(w.pointerId);const Y=w.target.id;if(Y){if(t(4,h=S.getRouter(parseInt(Y))||null),!h)return;w.shiftKey?t(6,d=3):w.altKey&&h instanceof ve?t(6,d=4):(_.x=h.node.x,_.y=h.node.y,t(6,d=1))}else t(6,d=2);t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u)}function N(w){if(w.target instanceof Element&&d!==5){w.preventDefault();e:if(h&&d===4){const Y=document.elementFromPoint(w.clientX,w.clientY),ce=(Y==null?void 0:Y.tagName)==="circle"?Y.id:null,re=S.getRouter(parseInt(ce??""));if(!re||h===re)break e;if(!(re instanceof ve)){alert("Destination must be a CE");break e}const Oe=ft(h,re);if(Oe.length<=1){alert("No path found");break e}rn(Oe,re.address),S.notify()}t(6,d=0),t(4,h=null),g==null||g.releasePointerCapture(w.pointerId),g==null||g.removeEventListener("pointermove",O)}}function O(w){w.preventDefault();const Y={x:(w.clientX-u.x)*f.scale,y:(w.clientY-u.y)*f.scale};if(!i&&d===1&&h)t(4,h.node.x=Math.round(_.x+Y.x),h),t(4,h.node.y=Math.round(_.y+Y.y),h),S.notify();else if(d===2)t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u),t(1,f.x-=Y.x,f),t(1,f.y-=Y.y,f);else if(d===4)t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u);else if(!i&&d===3){t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u);const ce=document.elementFromPoint(w.clientX,w.clientY);if(!ce)return;const re=S.getRouter(parseInt(ce.id));ce.tagName==="circle"&&re&&h&&(S.addLink({source:h,target:re}),t(4,h=re))}}function D(w){w.preventDefault(),t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u);const Y=w.deltaY>0?1.025:.975;y(Y,u)}function y(w,Y){if(!g||f.scale<.1&&w<1||f.scale>5&&w>1)return;const ce=g.getBoundingClientRect(),re={x:(Y.x-ce.left)/ce.width,y:(Y.y-ce.top)/ce.height};t(1,f.x-=f.width*(w-1)*re.x,f),t(1,f.y-=f.height*(w-1)*re.y,f),t(1,f.width*=w,f),t(1,f.height*=w,f)}function A(w){if(!(w.target instanceof Element))return;w.preventDefault();const Y=document.elementFromPoint(w.clientX,w.clientY);Y&&(Y.tagName==="circle"?j(Y.id):Y.tagName==="rect"&&U(Y.id))}function j(w){const Y=S.getRouter(parseInt(w));Y&&(t(4,h=Y),c.showModal())}function U(w){const Y=S.links.find(ce=>w===ce.id);Y&&(t(5,E=Y),m.showModal())}function He(w){var ce;w.preventDefault();const Y=(ce=w.dataTransfer)==null?void 0:ce.getData("text/plain");if(Y)switch(Y){case"CE":S.createCE(Z(w.clientX),ge(w.clientY));break;case"LER":S.createLER(Z(w.clientX),ge(w.clientY));break;case"LSR":S.createLSR(Z(w.clientX),ge(w.clientY));break}}function Z(w){return g?(w-g.getBoundingClientRect().left)*f.scale+f.x:w}function ge(w){return g?(w-g.getBoundingClientRect().top)*f.scale+f.y:w}function we(w){en.call(this,l,w)}function Ee(w){me[w?"unshift":"push"](()=>{g=w,t(3,g)})}function Be(w){h=w,t(4,h)}function qe(w){c=w,t(7,c)}function Xe(w){E=w,t(5,E)}function De(w){m=w,t(8,m)}return l.$$set=w=>{"$$scope"in w&&t(23,s=w.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(10,n={0:"move",1:i?"not-allowed":"grabbing",2:"grabbing",3:i?"not-allowed":"crosshair",4:"crosshair",5:"none"})},[i,f,u,g,h,E,d,c,m,v,n,r,a,p,R,T,N,D,A,He,Z,ge,y,s,o,we,Ee,Be,qe,Xe,De]}class Xn extends ue{constructor(e){super(),fe(this,e,Vn,Yn,ae,{zoom:22},null,[-1,-1])}get zoom(){return this.$$.ctx[22]}}function qn(l){let e,t,n,i;return{c(){e=L("button"),t=te(l[0]),this.h()},l(r){e=I(r,"BUTTON",{style:!0,class:!0});var o=x(e);t=ne(o,l[0]),o.forEach(b),this.h()},h(){k(e,"style",l[2]),k(e,"class","svelte-v6s8rg")},m(r,o){C(r,e,o),$(e,t),n||(i=J(e,"click",function(){tn(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(r,[o]){l=r,o&1&&ke(t,l[0]),o&4&&k(e,"style",l[2])},i:de,o:de,d(r){r&&b(e),n=!1,i()}}}function Gn(l,e,t){let{text:n}=e,{callback:i=()=>{}}=e,{style:r=void 0}=e;return l.$$set=o=>{"text"in o&&t(0,n=o.text),"callback"in o&&t(1,i=o.callback),"style"in o&&t(2,r=o.style)},[n,i,r]}class Ne extends ue{constructor(e){super(),fe(this,e,Gn,qn,ae,{text:0,callback:1,style:2})}}function Wn(l){let e,t,n=l[0].address+"",i,r,o,s="â†’",a,f,u=l[1].address+"",_,p,g,h,E,d;return g=new Ne({props:{text:"Play",callback:l[2]}}),E=new Ne({props:{text:"Delete",callback:l[3]}}),{c(){e=L("div"),t=L("p"),i=te(n),r=F(),o=L("p"),o.textContent=s,a=F(),f=L("p"),_=te(u),p=F(),V(g.$$.fragment),h=F(),V(E.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var m=x(e);t=I(m,"P",{class:!0});var v=x(t);i=ne(v,n),v.forEach(b),r=H(m),o=I(m,"P",{class:!0,"data-svelte-h":!0}),se(o)!=="svelte-1giyjq6"&&(o.textContent=s),a=H(m),f=I(m,"P",{class:!0});var z=x(f);_=ne(z,u),z.forEach(b),p=H(m),X(g.$$.fragment,m),h=H(m),X(E.$$.fragment,m),m.forEach(b),this.h()},h(){k(t,"class","svelte-ikhsiz"),k(o,"class","svelte-ikhsiz"),k(f,"class","svelte-ikhsiz"),k(e,"class","svelte-ikhsiz")},m(c,m){C(c,e,m),$(e,t),$(t,i),$(e,r),$(e,o),$(e,a),$(e,f),$(f,_),$(e,p),q(g,e,null),$(e,h),q(E,e,null),d=!0},p(c,[m]){(!d||m&1)&&n!==(n=c[0].address+"")&&ke(i,n),(!d||m&2)&&u!==(u=c[1].address+"")&&ke(_,u)},i(c){d||(P(g.$$.fragment,c),P(E.$$.fragment,c),d=!0)},o(c){B(g.$$.fragment,c),B(E.$$.fragment,c),d=!1},d(c){c&&b(e),G(g),G(E)}}}function Kn(l,e,t){let{source:n}=e,{destination:i}=e;function r(){S.addPacket(n,i)}function o(){confirm("Are you sure you want to delete this LSP?")&&(n.deleteEntry(i.address),S.notify())}return l.$$set=s=>{"source"in s&&t(0,n=s.source),"destination"in s&&t(1,i=s.destination)},[n,i,r,o]}class Jn extends ue{constructor(e){super(),fe(this,e,Kn,Wn,ae,{source:0,destination:1})}}function Pt(l,e,t){const n=l.slice();return n[2]=e[t],n}function Tt(l,e,t){const n=l.slice();return n[5]=e[t][0],n}function Nt(l){let e,t;return e=new Jn({props:{source:l[2],destination:S.getSureCERouter(l[5])}}),{c(){V(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,i){q(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.source=n[2]),i&1&&(r.destination=S.getSureCERouter(n[5])),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}function Bt(l){let e,t,n=le([...l[2].firstHop]),i=[];for(let o=0;o<n.length;o+=1)i[o]=Nt(Tt(l,n,o));const r=o=>B(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=oe()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=oe()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);C(o,e,s),t=!0},p(o,s){if(s&1){n=le([...o[2].firstHop]);let a;for(a=0;a<n.length;a+=1){const f=Tt(o,n,a);i[a]?(i[a].p(f,s),P(i[a],1)):(i[a]=Nt(f),i[a].c(),P(i[a],1),i[a].m(e.parentNode,e))}for(pe(),a=n.length;a<i.length;a+=1)r(a);_e()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)P(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)B(i[s]);t=!1},d(o){o&&b(e),xe(i,o)}}}function Qn(l){let e,t,n=le(l[0]),i=[];for(let o=0;o<n.length;o+=1)i[o]=Bt(Pt(l,n,o));const r=o=>B(i[o],1,1,()=>{i[o]=null});return{c(){e=L("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=I(o,"DIV",{class:!0});var s=x(e);for(let a=0;a<i.length;a+=1)i[a].l(s);s.forEach(b),this.h()},h(){k(e,"class","svelte-kwkmok")},m(o,s){C(o,e,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);t=!0},p(o,[s]){if(s&1){n=le(o[0]);let a;for(a=0;a<n.length;a+=1){const f=Pt(o,n,a);i[a]?(i[a].p(f,s),P(i[a],1)):(i[a]=Bt(f),i[a].c(),P(i[a],1),i[a].m(e,null))}for(pe(),a=n.length;a<i.length;a+=1)r(a);_e()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)P(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)B(i[s]);t=!1},d(o){o&&b(e),xe(i,o)}}}function Zn(l,e,t){let n,i;return be(l,S,r=>t(1,i=r)),l.$$.update=()=>{l.$$.dirty&2&&t(0,n=i.routers.filter(r=>r instanceof ve))},[n,i]}class el extends ue{constructor(e){super(),fe(this,e,Zn,Qn,ae,{})}}function xt(l,e,t){const n=l.slice();return n[15]=e[t],n}function Ft(l){let e,t;const n=[l[15],{style:"padding: 10px 20px"}];let i={};for(let r=0;r<n.length;r+=1)i=Je(i,n[r]);return e=new Ne({props:i}),{c(){V(e.$$.fragment)},l(r){X(e.$$.fragment,r)},m(r,o){q(e,r,o),t=!0},p(r,o){const s=o&64?Ze(n,[et(r[15]),n[1]]):{};e.$set(s)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function tl(l){let e,t,n,i,r,o,s,a="Packet Controls",f,u,_,p=l[2].packets.length+"",g,h,E,d,c,m,v,z,M=l[1].speedMultiplier.toFixed(1)+"",R,T,N,O,D,y,A,j=l[1].maxPackets+"",U,He,Z,ge,we,Ee,Be,qe="Fallback to normal IP routing?",Xe,De,w,Y,ce,re,Oe,ht,je=le(l[6]),ee=[];for(let W=0;W<je.length;W+=1)ee[W]=Ft(xt(l,je,W));const on=W=>B(ee[W],1,1,()=>{ee[W]=null});return Y=new el({}),{c(){e=L("div"),t=L("div"),i=F(),r=L("div"),o=L("div"),s=L("p"),s.textContent=a,f=F(),u=L("p"),_=te("Count: "),g=te(p),h=F(),E=L("div");for(let W=0;W<ee.length;W+=1)ee[W].c();d=F(),c=L("div"),m=L("div"),v=L("p"),z=te("Speed Multiplier: "),R=te(M),T=F(),N=L("input"),O=F(),D=L("div"),y=L("p"),A=te("Max Packets: "),U=te(j),He=F(),Z=L("input"),ge=F(),we=L("div"),Ee=L("label"),Be=L("p"),Be.textContent=qe,Xe=F(),De=L("input"),w=F(),V(Y.$$.fragment),this.h()},l(W){e=I(W,"DIV",{id:!0,style:!0,class:!0});var Q=x(e);t=I(Q,"DIV",{id:!0,class:!0}),x(t).forEach(b),Q.forEach(b),i=H(W),r=I(W,"DIV",{id:!0,style:!0,class:!0});var ie=x(r);o=I(ie,"DIV",{id:!0,class:!0});var ye=x(o);s=I(ye,"P",{id:!0,class:!0,"data-svelte-h":!0}),se(s)!=="svelte-1cfybk8"&&(s.textContent=a),f=H(ye),u=I(ye,"P",{id:!0,class:!0});var tt=x(u);_=ne(tt,"Count: "),g=ne(tt,p),tt.forEach(b),h=H(ye),E=I(ye,"DIV",{id:!0,class:!0});var dt=x(E);for(let it=0;it<ee.length;it+=1)ee[it].l(dt);dt.forEach(b),d=H(ye),c=I(ye,"DIV",{class:!0});var Ue=x(c);m=I(Ue,"DIV",{class:!0});var Ge=x(m);v=I(Ge,"P",{class:!0});var nt=x(v);z=ne(nt,"Speed Multiplier: "),R=ne(nt,M),nt.forEach(b),T=H(Ge),N=I(Ge,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ge.forEach(b),O=H(Ue),D=I(Ue,"DIV",{class:!0});var We=x(D);y=I(We,"P",{class:!0});var lt=x(y);A=ne(lt,"Max Packets: "),U=ne(lt,j),lt.forEach(b),He=H(We),Z=I(We,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),We.forEach(b),ge=H(Ue),we=I(Ue,"DIV",{class:!0});var pt=x(we);Ee=I(pt,"LABEL",{class:!0});var Ke=x(Ee);Be=I(Ke,"P",{class:!0,"data-svelte-h":!0}),se(Be)!=="svelte-1re47ui"&&(Be.textContent=qe),Xe=H(Ke),De=I(Ke,"INPUT",{type:!0,class:!0}),Ke.forEach(b),pt.forEach(b),Ue.forEach(b),w=H(ye),X(Y.$$.fragment,ye),ye.forEach(b),ie.forEach(b),this.h()},h(){k(t,"id","resize-bar"),k(t,"class","svelte-1jfhuaz"),k(e,"id","visual-resize-bar"),k(e,"style",n=`width: ${l[0]?1:0}px`),k(e,"class","svelte-1jfhuaz"),k(s,"id","packet-controls-title"),k(s,"class","svelte-1jfhuaz"),k(u,"id","packet-controls-count"),k(u,"class","svelte-1jfhuaz"),k(E,"id","control-panel-buttons"),k(E,"class","svelte-1jfhuaz"),k(v,"class","svelte-1jfhuaz"),k(N,"type","range"),k(N,"min","0.1"),k(N,"max","2"),k(N,"step","0.001"),k(N,"class","svelte-1jfhuaz"),k(m,"class","input-box svelte-1jfhuaz"),k(y,"class","svelte-1jfhuaz"),k(Z,"type","range"),k(Z,"min","1"),k(Z,"max","500"),k(Z,"step","1"),k(Z,"class","svelte-1jfhuaz"),k(D,"class","input-box svelte-1jfhuaz"),k(Be,"class","svelte-1jfhuaz"),k(De,"type","checkbox"),k(De,"class","svelte-1jfhuaz"),k(Ee,"class","svelte-1jfhuaz"),k(we,"class","input-box svelte-1jfhuaz"),k(c,"class","inputs svelte-1jfhuaz"),k(o,"id","control-panel-content"),k(o,"class","svelte-1jfhuaz"),k(r,"id","control-panel"),k(r,"style",ce=`width: ${l[5]}px; transition: ${l[4]};`),k(r,"class","svelte-1jfhuaz")},m(W,Q){C(W,e,Q),$(e,t),l[9](t),C(W,i,Q),C(W,r,Q),$(r,o),$(o,s),$(o,f),$(o,u),$(u,_),$(u,g),$(o,h),$(o,E);for(let ie=0;ie<ee.length;ie+=1)ee[ie]&&ee[ie].m(E,null);$(o,d),$(o,c),$(c,m),$(m,v),$(v,z),$(v,R),$(m,T),$(m,N),he(N,l[1].speedMultiplier),$(c,O),$(c,D),$(D,y),$(y,A),$(y,U),$(D,He),$(D,Z),he(Z,l[1].maxPackets),$(c,ge),$(c,we),$(we,Ee),$(Ee,Be),$(Ee,Xe),$(Ee,De),De.checked=l[1].enableFallback,$(o,w),q(Y,o,null),re=!0,Oe||(ht=[J(t,"pointerdown",l[7]),J(N,"change",l[10]),J(N,"input",l[10]),J(Z,"change",l[11]),J(Z,"input",l[11]),J(De,"change",l[12])],Oe=!0)},p(W,[Q]){if((!re||Q&1&&n!==(n=`width: ${W[0]?1:0}px`))&&k(e,"style",n),(!re||Q&4)&&p!==(p=W[2].packets.length+"")&&ke(g,p),Q&64){je=le(W[6]);let ie;for(ie=0;ie<je.length;ie+=1){const ye=xt(W,je,ie);ee[ie]?(ee[ie].p(ye,Q),P(ee[ie],1)):(ee[ie]=Ft(ye),ee[ie].c(),P(ee[ie],1),ee[ie].m(E,null))}for(pe(),ie=je.length;ie<ee.length;ie+=1)on(ie);_e()}(!re||Q&2)&&M!==(M=W[1].speedMultiplier.toFixed(1)+"")&&ke(R,M),Q&2&&he(N,W[1].speedMultiplier),(!re||Q&2)&&j!==(j=W[1].maxPackets+"")&&ke(U,j),Q&2&&he(Z,W[1].maxPackets),Q&2&&(De.checked=W[1].enableFallback),(!re||Q&48&&ce!==(ce=`width: ${W[5]}px; transition: ${W[4]};`))&&k(r,"style",ce)},i(W){if(!re){for(let Q=0;Q<je.length;Q+=1)P(ee[Q]);P(Y.$$.fragment,W),re=!0}},o(W){ee=ee.filter(Boolean);for(let Q=0;Q<ee.length;Q+=1)B(ee[Q]);B(Y.$$.fragment,W),re=!1},d(W){W&&(b(e),b(i),b(r)),l[9](null),xe(ee,W),G(Y),Oe=!1,Me(ht)}}}function nl(l,e,t){let n,i,r,o,s,a;be(l,Se,m=>t(0,o=m)),be(l,Ie,m=>t(1,s=m)),be(l,S,m=>t(2,a=m));let f,u="width 250ms";function _(m){o&&(t(4,u="none"),f.setPointerCapture(m.pointerId),f.addEventListener("pointermove",p),f.addEventListener("pointerup",g))}function p(m){t(5,r=window.innerWidth-m.clientX),r<=20&&t(5,r=0),r>=window.innerWidth-350&&t(5,r=window.innerWidth-350)}function g(m){f.removeEventListener("pointermove",p),f.removeEventListener("pointerup",g),f.releasePointerCapture(m.pointerId),t(4,u="width 250ms")}function h(m){me[m?"unshift":"push"](()=>{f=m,t(3,f)})}function E(){s.speedMultiplier=Le(this.value),Ie.set(s)}function d(){s.maxPackets=Le(this.value),Ie.set(s)}function c(){s.enableFallback=this.checked,Ie.set(s)}return l.$$.update=()=>{l.$$.dirty&4&&t(8,n=a.routers.filter(m=>m instanceof ve)),l.$$.dirty&258&&t(6,i=[{text:s.running?"Pause":"Resume",callback:()=>{Ae(Ie,s.running=!s.running,s)}},{text:"Reset",callback:()=>{S.clearPackets()}},{text:"Play All",callback:()=>{for(const m of n)for(const[v]of m.firstHop)S.addPacket(m,S.getSureCERouter(v))}}]),l.$$.dirty&1&&t(5,r=o?350:0)},[o,s,a,f,u,r,i,_,n,h,E,d,c]}class ll extends ue{constructor(e){super(),fe(this,e,nl,tl,ae,{})}}function il(l){let e;return{c(){e=Pe("circle"),this.h()},l(t){e=Te(t,"circle",{r:!0,class:!0}),x(e).forEach(b),this.h()},h(){k(e,"r","5"),k(e,"class","svelte-rvo2j9"),_t(e,"labeled",l[0].label!==-1)},m(t,n){C(t,e,n),l[4](e)},p(t,[n]){n&1&&_t(e,"labeled",t[0].label!==-1)},i:de,o:de,d(t){t&&b(e),l[4](null)}}}function rl(l,e,t){let n;be(l,Ie,p=>t(3,n=p));let{packet:i}=e,r,o,s;function a(){const p=Math.sqrt((i.node.x-i.nextHop.node.x)**2+(i.node.y-i.nextHop.node.y)**2);r=Math.round(p/250*1e3)}function f(){a(),s&&(t(2,o=s.animate([{transform:`translate(${i.node.x}px, ${i.node.y}px)`},{transform:`translate(${i.nextHop.node.x}px, ${i.nextHop.node.y}px)`}],{duration:r,easing:"linear"})),t(2,o.onfinish=u,o))}function u(){t(0,i.node=i.nextHop.node,i);const p=i.nextHop;if(p===i.destination)return p.receivePacket(i);if(i.nextHop.receivePacket(i),i.validateNextHop(p))return f();i.fallbackRoute||(i.fallback(p),i.validateNextHop(p)&&f())}requestAnimationFrame(f);function _(p){me[p?"unshift":"push"](()=>{s=p,t(1,s)})}return l.$$set=p=>{"packet"in p&&t(0,i=p.packet)},l.$$.update=()=>{l.$$.dirty&12&&o&&t(2,o.playbackRate=n.speedMultiplier,o),l.$$.dirty&12&&o&&(n.running?o.play():o.pause())},[i,s,o,n,_]}class ol extends ue{constructor(e){super(),fe(this,e,rl,il,ae,{packet:0})}}function sl(l){let e,t,n,i,r,o,s,a,f=l[0].distance+"",u,_,p,g;return{c(){e=Pe("line"),t=F(),n=Pe("rect"),s=F(),a=Pe("text"),u=te(f),_=te(" km"),this.h()},l(h){e=Te(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),x(e).forEach(b),t=H(h),n=Te(h,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),x(n).forEach(b),s=H(h),a=Te(h,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var E=x(a);u=ne(E,f),_=ne(E," km"),E.forEach(b),this.h()},h(){k(e,"x1",l[4]),k(e,"y1",l[2]),k(e,"x2",l[3]),k(e,"y2",l[1]),k(n,"id",i=l[0].id),k(n,"x",r=l[5].x-st/2),k(n,"y",o=l[5].y-at/2),k(n,"width",st),k(n,"height",at),k(n,"class","svelte-zjn2k6"),k(a,"x",p=l[5].x),k(a,"y",g=l[5].y),k(a,"dominant-baseline","central"),k(a,"class","svelte-zjn2k6")},m(h,E){C(h,e,E),C(h,t,E),C(h,n,E),C(h,s,E),C(h,a,E),$(a,u),$(a,_)},p(h,[E]){E&16&&k(e,"x1",h[4]),E&4&&k(e,"y1",h[2]),E&8&&k(e,"x2",h[3]),E&2&&k(e,"y2",h[1]),E&1&&i!==(i=h[0].id)&&k(n,"id",i),E&32&&r!==(r=h[5].x-st/2)&&k(n,"x",r),E&32&&o!==(o=h[5].y-at/2)&&k(n,"y",o),E&1&&f!==(f=h[0].distance+"")&&ke(u,f),E&32&&p!==(p=h[5].x)&&k(a,"x",p),E&32&&g!==(g=h[5].y)&&k(a,"y",g)},i:de,o:de,d(h){h&&(b(e),b(t),b(n),b(s),b(a))}}}const st=50,at=20;function Ht(l,e){return(l+e)/2}function al(l,e,t){let n,i,r,o,s,{link:a}=e;return l.$$set=f=>{"link"in f&&t(0,a=f.link)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=a.source.node.x),l.$$.dirty&1&&t(3,i=a.target.node.x),l.$$.dirty&1&&t(2,r=a.source.node.y),l.$$.dirty&1&&t(1,o=a.target.node.y),l.$$.dirty&30&&t(5,s={x:Ht(n,i),y:Ht(r,o)})},[a,o,r,i,n,s]}class ul extends ue{constructor(e){super(),fe(this,e,al,sl,ae,{link:0})}}function fl(l){let e,t,n,i,r,o,s,a=l[0].node.label+"",f,u,_;return{c(){e=Pe("circle"),o=F(),s=Pe("text"),f=te(a),this.h()},l(p){e=Te(p,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),x(e).forEach(b),o=H(p),s=Te(p,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var g=x(s);f=ne(g,a),g.forEach(b),this.h()},h(){k(e,"id",t=l[0].id.toString()),k(e,"cx",n=l[0].node.x),k(e,"cy",i=l[0].node.y),k(e,"r","20"),k(e,"fill",r=l[1][l[0].type]),k(e,"class","svelte-17jcsko"),k(s,"x",u=l[0].node.x),k(s,"y",_=l[0].node.y),k(s,"dominant-baseline","central"),k(s,"font-size","smaller"),k(s,"class","svelte-17jcsko")},m(p,g){C(p,e,g),C(p,o,g),C(p,s,g),$(s,f)},p(p,[g]){g&1&&t!==(t=p[0].id.toString())&&k(e,"id",t),g&1&&n!==(n=p[0].node.x)&&k(e,"cx",n),g&1&&i!==(i=p[0].node.y)&&k(e,"cy",i),g&1&&r!==(r=p[1][p[0].type])&&k(e,"fill",r),g&1&&a!==(a=p[0].node.label+"")&&ke(f,a),g&1&&u!==(u=p[0].node.x)&&k(s,"x",u),g&1&&_!==(_=p[0].node.y)&&k(s,"y",_)},i:de,o:de,d(p){p&&(b(e),b(o),b(s))}}}function cl(l,e,t){let{router:n}=e;const i={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return l.$$set=r=>{"router"in r&&t(0,n=r.router)},[n,i]}class hl extends ue{constructor(e){super(),fe(this,e,cl,fl,ae,{router:0})}}function dl(l){let e,t,n,i;return{c(){e=L("div"),t=te(l[0]),this.h()},l(r){e=I(r,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var o=x(e);t=ne(o,l[0]),o.forEach(b),this.h()},h(){k(e,"draggable","true"),k(e,"role","button"),k(e,"tabindex","-1"),Ye(e,"background-color",l[1]),k(e,"class","svelte-dfkep2")},m(r,o){C(r,e,o),$(e,t),n||(i=[J(e,"dragstart",l[2]),J(e,"click",l[3])],n=!0)},p(r,[o]){o&1&&ke(t,r[0]),o&2&&Ye(e,"background-color",r[1])},i:de,o:de,d(r){r&&b(e),n=!1,Me(i)}}}function pl(l,e,t){let n,i;be(l,ze,u=>t(5,n=u)),be(l,Se,u=>t(6,i=u));let{text:r}=e,{type:o}=e,{color:s}=e;function a(u){var _;if(i){alert("Network is locked.");return}(_=u.dataTransfer)==null||_.setData("text/plain",o)}function f(){Ae(ze,n.placing=o,n)}return l.$$set=u=>{"text"in u&&t(0,r=u.text),"type"in u&&t(4,o=u.type),"color"in u&&t(1,s=u.color)},[r,s,a,f,o]}class _l extends ue{constructor(e){super(),fe(this,e,pl,dl,ae,{text:0,type:4,color:1})}}function zt(l,e,t){const n=l.slice();return n[7]=e[t],n}function Mt(l,e,t){const n=l.slice();return n[7]=e[t],n}function jt(l,e,t){const n=l.slice();return n[10]=e[t],n}function gl(l){let e,t,n=le(l[0]),i=[];for(let o=0;o<n.length;o+=1)i[o]=At(zt(l,n,o));const r=o=>B(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=oe()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=oe()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);C(o,e,s),t=!0},p(o,s){if(s&1){n=le(o[0]);let a;for(a=0;a<n.length;a+=1){const f=zt(o,n,a);i[a]?(i[a].p(f,s),P(i[a],1)):(i[a]=At(f),i[a].c(),P(i[a],1),i[a].m(e.parentNode,e))}for(pe(),a=n.length;a<i.length;a+=1)r(a);_e()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)P(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)B(i[s]);t=!1},d(o){o&&b(e),xe(i,o)}}}function ml(l){let e,t,n,i=le(l[4]),r=[];for(let u=0;u<i.length;u+=1)r[u]=St(jt(l,i,u));const o=u=>B(r[u],1,1,()=>{r[u]=null});let s=le(l[1]),a=[];for(let u=0;u<s.length;u+=1)a[u]=Ot(Mt(l,s,u));const f=u=>B(a[u],1,1,()=>{a[u]=null});return{c(){for(let u=0;u<r.length;u+=1)r[u].c();e=F();for(let u=0;u<a.length;u+=1)a[u].c();t=oe()},l(u){for(let _=0;_<r.length;_+=1)r[_].l(u);e=H(u);for(let _=0;_<a.length;_+=1)a[_].l(u);t=oe()},m(u,_){for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(u,_);C(u,e,_);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(u,_);C(u,t,_),n=!0},p(u,_){if(_&16){i=le(u[4]);let p;for(p=0;p<i.length;p+=1){const g=jt(u,i,p);r[p]?(r[p].p(g,_),P(r[p],1)):(r[p]=St(g),r[p].c(),P(r[p],1),r[p].m(e.parentNode,e))}for(pe(),p=i.length;p<r.length;p+=1)o(p);_e()}if(_&2){s=le(u[1]);let p;for(p=0;p<s.length;p+=1){const g=Mt(u,s,p);a[p]?(a[p].p(g,_),P(a[p],1)):(a[p]=Ot(g),a[p].c(),P(a[p],1),a[p].m(t.parentNode,t))}for(pe(),p=s.length;p<a.length;p+=1)f(p);_e()}},i(u){if(!n){for(let _=0;_<i.length;_+=1)P(r[_]);for(let _=0;_<s.length;_+=1)P(a[_]);n=!0}},o(u){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)B(r[_]);a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)B(a[_]);n=!1},d(u){u&&(b(e),b(t)),xe(r,u),xe(a,u)}}}function At(l){let e,t;const n=[l[7]];let i={};for(let r=0;r<n.length;r+=1)i=Je(i,n[r]);return e=new Ne({props:i}),{c(){V(e.$$.fragment)},l(r){X(e.$$.fragment,r)},m(r,o){q(e,r,o),t=!0},p(r,o){const s=o&1?Ze(n,[et(r[7])]):{};e.$set(s)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function St(l){let e,t;const n=[l[10]];let i={};for(let r=0;r<n.length;r+=1)i=Je(i,n[r]);return e=new _l({props:i}),{c(){V(e.$$.fragment)},l(r){X(e.$$.fragment,r)},m(r,o){q(e,r,o),t=!0},p(r,o){const s=o&16?Ze(n,[et(r[10])]):{};e.$set(s)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function Ot(l){let e,t;const n=[l[7]];let i={};for(let r=0;r<n.length;r+=1)i=Je(i,n[r]);return e=new Ne({props:i}),{c(){V(e.$$.fragment)},l(r){X(e.$$.fragment,r)},m(r,o){q(e,r,o),t=!0},p(r,o){const s=o&2?Ze(n,[et(r[7])]):{};e.$set(s)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function bl(l){let e,t,n,i,r,o;e=new Ne({props:{text:l[2]?"Edit":"Simulation",callback:l[6],style:`width: 100px; background-color: ${l[2]?"#3CB371":"#6495ED"};`}});const s=[ml,gl],a=[];function f(u,_){return u[2]?1:0}return n=f(l),i=a[n]=s[n](l),{c(){V(e.$$.fragment),t=F(),i.c(),r=oe()},l(u){X(e.$$.fragment,u),t=H(u),i.l(u),r=oe()},m(u,_){q(e,u,_),C(u,t,_),a[n].m(u,_),C(u,r,_),o=!0},p(u,[_]){const p={};_&4&&(p.text=u[2]?"Edit":"Simulation"),_&12&&(p.callback=u[6]),_&4&&(p.style=`width: 100px; background-color: ${u[2]?"#3CB371":"#6495ED"};`),e.$set(p);let g=n;n=f(u),n===g?a[n].p(u,_):(pe(),B(a[g],1,1,()=>{a[g]=null}),_e(),i=a[n],i?i.p(u,_):(i=a[n]=s[n](u),i.c()),P(i,1),i.m(r.parentNode,r))},i(u){o||(P(e.$$.fragment,u),P(i),o=!0)},o(u){B(e.$$.fragment,u),B(i),o=!1},d(u){u&&(b(t),b(r)),G(e,u),a[n].d(u)}}}function kl(l,e,t){let n,i,r,o,s;be(l,S,u=>t(5,r=u)),be(l,Se,u=>t(2,o=u)),be(l,ze,u=>t(3,s=u));const a=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],f=()=>{Ae(Se,o=!o,o),Ae(ze,s.placing=null,s),S.clearPackets()};return l.$$.update=()=>{l.$$.dirty&32&&t(0,i=[{text:"Clear Tables",callback:()=>{confirm("Are you sure you want to clear the routing tables?")&&S.clearTables()}},{text:"Export",callback:()=>{const u={routers:r.routers.map(E=>{if(E instanceof ve)return{...E,type:E.type,firstHop:Object.fromEntries(E.firstHop)};if(E instanceof Re)return{...E,type:E.type,FIB:Object.fromEntries(E.FIB.map),LFIB:Object.fromEntries(E.LFIB.map)};if(E instanceof Ve)return{...E,type:E.type,LFIB:Object.fromEntries(E.LFIB.map)}}),links:r.links.map(E=>({...E,source:E.source.id,target:E.target.id}))},_=JSON.stringify(u,null,2),p=new Blob([_],{type:"application/json"}),g=window.URL.createObjectURL(p),h=document.createElement("a");h.href=g,h.download="network.json",h.click(),window.URL.revokeObjectURL(g)}}]),l.$$.dirty&1&&t(1,n=[{text:"Clear Network",callback:()=>{confirm("Are you sure you want to clear the network?")&&S.clear()}},{text:"Clear Links",callback:()=>{confirm("Are you sure you want to clear the links?")&&S.clearLinks()}},...i])},[i,n,o,s,a,r,f]}class vl extends ue{constructor(e){super(),fe(this,e,kl,bl,ae,{})}}function El(l){let e,t="Drag and drop routers to add them to the network.",n,i,r=`Instead of drag and drop, you can also click and hold shift while continuously clicking to add
    many routers.`,o,s,a="Hold the shift key and drag routers to make links.",f,u,_="Hold the ctrl key and drag CE's to add destinations.",p,g,h="Double click a router or link to configure it.",E,d,c="The clear button will delete the entire network.",m,v,z="The export button will download your network as a .json file",M,R,T,N,O="Press Esc to close this popup.";return{c(){e=L("p"),e.textContent=t,n=F(),i=L("p"),i.textContent=r,o=F(),s=L("p"),s.textContent=a,f=F(),u=L("p"),u.textContent=_,p=F(),g=L("p"),g.textContent=h,E=F(),d=L("p"),d.textContent=c,m=F(),v=L("p"),v.textContent=z,M=F(),R=L("br"),T=F(),N=L("p"),N.textContent=O},l(D){e=I(D,"P",{"data-svelte-h":!0}),se(e)!=="svelte-bhocp0"&&(e.textContent=t),n=H(D),i=I(D,"P",{"data-svelte-h":!0}),se(i)!=="svelte-12tzi3f"&&(i.textContent=r),o=H(D),s=I(D,"P",{"data-svelte-h":!0}),se(s)!=="svelte-ddjc2m"&&(s.textContent=a),f=H(D),u=I(D,"P",{"data-svelte-h":!0}),se(u)!=="svelte-33j76o"&&(u.textContent=_),p=H(D),g=I(D,"P",{"data-svelte-h":!0}),se(g)!=="svelte-qvtprs"&&(g.textContent=h),E=H(D),d=I(D,"P",{"data-svelte-h":!0}),se(d)!=="svelte-vcl8s3"&&(d.textContent=c),m=H(D),v=I(D,"P",{"data-svelte-h":!0}),se(v)!=="svelte-1ww5ij7"&&(v.textContent=z),M=H(D),R=I(D,"BR",{}),T=H(D),N=I(D,"P",{"data-svelte-h":!0}),se(N)!=="svelte-1dvt5v1"&&(N.textContent=O)},m(D,y){C(D,e,y),C(D,n,y),C(D,i,y),C(D,o,y),C(D,s,y),C(D,f,y),C(D,u,y),C(D,p,y),C(D,g,y),C(D,E,y),C(D,d,y),C(D,m,y),C(D,v,y),C(D,M,y),C(D,R,y),C(D,T,y),C(D,N,y)},p:de,d(D){D&&(b(e),b(n),b(i),b(o),b(s),b(f),b(u),b(p),b(g),b(E),b(d),b(m),b(v),b(M),b(R),b(T),b(N))}}}function yl(l){let e,t,n,i,r,o;t=new Ne({props:{text:"Help",callback:l[1]}});function s(f){l[2](f)}let a={$$slots:{default:[El]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.dialog=l[0]),i=new ct({props:a}),me.push(()=>Ce(i,"dialog",s)),{c(){e=L("div"),V(t.$$.fragment),n=F(),V(i.$$.fragment)},l(f){e=I(f,"DIV",{});var u=x(e);X(t.$$.fragment,u),u.forEach(b),n=H(f),X(i.$$.fragment,f)},m(f,u){C(f,e,u),q(t,e,null),C(f,n,u),q(i,f,u),o=!0},p(f,[u]){const _={};u&1&&(_.callback=f[1]),t.$set(_);const p={};u&8&&(p.$$scope={dirty:u,ctx:f}),!r&&u&1&&(r=!0,p.dialog=f[0],$e(()=>r=!1)),i.$set(p)},i(f){o||(P(t.$$.fragment,f),P(i.$$.fragment,f),o=!0)},o(f){B(t.$$.fragment,f),B(i.$$.fragment,f),o=!1},d(f){f&&(b(e),b(n)),G(t),G(i,f)}}}function wl(l,e,t){let n;const i=()=>{n.showModal()};function r(o){n=o,t(0,n)}return[n,i,r]}class $l extends ue{constructor(e){super(),fe(this,e,wl,yl,ae,{})}}function Cl(l){let e,t,n,i,r,o;return e=new Ne({props:{text:" - ",callback:l[1]}}),n=new Ne({props:{text:"Fullscreen",callback:l[2]}}),r=new Ne({props:{text:" + ",callback:l[3]}}),{c(){V(e.$$.fragment),t=F(),V(n.$$.fragment),i=F(),V(r.$$.fragment)},l(s){X(e.$$.fragment,s),t=H(s),X(n.$$.fragment,s),i=H(s),X(r.$$.fragment,s)},m(s,a){q(e,s,a),C(s,t,a),q(n,s,a),C(s,i,a),q(r,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.callback=s[1]),e.$set(f);const u={};a&1&&(u.callback=s[3]),r.$set(u)},i(s){o||(P(e.$$.fragment,s),P(n.$$.fragment,s),P(r.$$.fragment,s),o=!0)},o(s){B(e.$$.fragment,s),B(n.$$.fragment,s),B(r.$$.fragment,s),o=!1},d(s){s&&(b(t),b(i)),G(e,s),G(n,s),G(r,s)}}}function Ll(l,e,t){let{zoom:n}=e;const i=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,s)},r=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},o=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,s)};return l.$$set=s=>{"zoom"in s&&t(0,n=s.zoom)},[n,i,r,o]}class Il extends ue{constructor(e){super(),fe(this,e,Ll,Cl,ae,{zoom:0})}}function Ut(l,e,t){const n=l.slice();return n[5]=e[t],n}function Yt(l,e,t){const n=l.slice();return n[8]=e[t],n}function Vt(l,e,t){const n=l.slice();return n[11]=e[t],n}function Xt(l,e){let t,n,i;return n=new ul({props:{link:e[11]}}),{key:l,first:null,c(){t=oe(),V(n.$$.fragment),this.h()},l(r){t=oe(),X(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){C(r,t,o),q(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.link=e[11]),n.$set(s)},i(r){i||(P(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&b(t),G(n,r)}}}function qt(l,e){let t,n,i;return n=new hl({props:{router:e[8]}}),{key:l,first:null,c(){t=oe(),V(n.$$.fragment),this.h()},l(r){t=oe(),X(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){C(r,t,o),q(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.router=e[8]),n.$set(s)},i(r){i||(P(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&b(t),G(n,r)}}}function Gt(l,e){let t,n,i;return n=new ol({props:{packet:e[5]}}),{key:l,first:null,c(){t=oe(),V(n.$$.fragment),this.h()},l(r){t=oe(),X(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){C(r,t,o),q(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.packet=e[5]),n.$set(s)},i(r){i||(P(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&b(t),G(n,r)}}}function Rl(l){let e=[],t=new Map,n,i=[],r=new Map,o,s=[],a=new Map,f,u,_=le(l[1].links);const p=c=>c[11].id;for(let c=0;c<_.length;c+=1){let m=Vt(l,_,c),v=p(m);t.set(v,e[c]=Xt(v,m))}let g=le(l[1].routers);const h=c=>c[8].id;for(let c=0;c<g.length;c+=1){let m=Yt(l,g,c),v=h(m);r.set(v,i[c]=qt(v,m))}let E=le(l[1].packets);const d=c=>c[5].id;for(let c=0;c<E.length;c+=1){let m=Ut(l,E,c),v=d(m);a.set(v,s[c]=Gt(v,m))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=F();for(let c=0;c<i.length;c+=1)i[c].c();o=F();for(let c=0;c<s.length;c+=1)s[c].c();f=oe()},l(c){for(let m=0;m<e.length;m+=1)e[m].l(c);n=H(c);for(let m=0;m<i.length;m+=1)i[m].l(c);o=H(c);for(let m=0;m<s.length;m+=1)s[m].l(c);f=oe()},m(c,m){for(let v=0;v<e.length;v+=1)e[v]&&e[v].m(c,m);C(c,n,m);for(let v=0;v<i.length;v+=1)i[v]&&i[v].m(c,m);C(c,o,m);for(let v=0;v<s.length;v+=1)s[v]&&s[v].m(c,m);C(c,f,m),u=!0},p(c,m){m&2&&(_=le(c[1].links),pe(),e=ot(e,m,p,1,c,_,t,n.parentNode,rt,Xt,n,Vt),_e()),m&2&&(g=le(c[1].routers),pe(),i=ot(i,m,h,1,c,g,r,o.parentNode,rt,qt,o,Yt),_e()),m&2&&(E=le(c[1].packets),pe(),s=ot(s,m,d,1,c,E,a,f.parentNode,rt,Gt,f,Ut),_e())},i(c){if(!u){for(let m=0;m<_.length;m+=1)P(e[m]);for(let m=0;m<g.length;m+=1)P(i[m]);for(let m=0;m<E.length;m+=1)P(s[m]);u=!0}},o(c){for(let m=0;m<e.length;m+=1)B(e[m]);for(let m=0;m<i.length;m+=1)B(i[m]);for(let m=0;m<s.length;m+=1)B(s[m]);u=!1},d(c){c&&(b(n),b(o),b(f));for(let m=0;m<e.length;m+=1)e[m].d(c);for(let m=0;m<i.length;m+=1)i[m].d(c);for(let m=0;m<s.length;m+=1)s[m].d(c)}}}function Dl(l){let e,t,n,i,r,o,s,a,f,u,_,p,g,h,E,d,c;function m(R){l[2](R)}let v={$$slots:{default:[Rl]},$$scope:{ctx:l}};l[0]!==void 0&&(v.zoom=l[0]),n=new Xn({props:v}),me.push(()=>Ce(n,"zoom",m)),s=new vl({}),u=new $l({});function z(R){l[3](R)}let M={};return l[0]!==void 0&&(M.zoom=l[0]),g=new Il({props:M}),me.push(()=>Ce(g,"zoom",z)),d=new ll({}),{c(){e=L("div"),t=L("div"),V(n.$$.fragment),r=F(),o=L("div"),V(s.$$.fragment),a=F(),f=L("div"),V(u.$$.fragment),_=F(),p=L("div"),V(g.$$.fragment),E=F(),V(d.$$.fragment),this.h()},l(R){e=I(R,"DIV",{id:!0,class:!0});var T=x(e);t=I(T,"DIV",{id:!0,class:!0});var N=x(t);X(n.$$.fragment,N),r=H(N),o=I(N,"DIV",{id:!0,class:!0});var O=x(o);X(s.$$.fragment,O),O.forEach(b),a=H(N),f=I(N,"DIV",{id:!0,class:!0});var D=x(f);X(u.$$.fragment,D),D.forEach(b),_=H(N),p=I(N,"DIV",{id:!0,class:!0});var y=x(p);X(g.$$.fragment,y),y.forEach(b),N.forEach(b),E=H(T),X(d.$$.fragment,T),T.forEach(b),this.h()},h(){k(o,"id","top-left-bar"),k(o,"class","absolute-flex svelte-1kpnzxr"),k(f,"id","bottom-left-bar"),k(f,"class","absolute-flex svelte-1kpnzxr"),k(p,"id","bottom-right-bar"),k(p,"class","absolute-flex svelte-1kpnzxr"),k(t,"id","network"),k(t,"class","svelte-1kpnzxr"),k(e,"id","mpls"),k(e,"class","svelte-1kpnzxr")},m(R,T){C(R,e,T),$(e,t),q(n,t,null),$(t,r),$(t,o),q(s,o,null),$(t,a),$(t,f),q(u,f,null),$(t,_),$(t,p),q(g,p,null),$(e,E),q(d,e,null),c=!0},p(R,[T]){const N={};T&16386&&(N.$$scope={dirty:T,ctx:R}),!i&&T&1&&(i=!0,N.zoom=R[0],$e(()=>i=!1)),n.$set(N);const O={};!h&&T&1&&(h=!0,O.zoom=R[0],$e(()=>h=!1)),g.$set(O)},i(R){c||(P(n.$$.fragment,R),P(s.$$.fragment,R),P(u.$$.fragment,R),P(g.$$.fragment,R),P(d.$$.fragment,R),c=!0)},o(R){B(n.$$.fragment,R),B(s.$$.fragment,R),B(u.$$.fragment,R),B(g.$$.fragment,R),B(d.$$.fragment,R),c=!1},d(R){R&&b(e),G(n),G(s),G(u),G(g),G(d)}}}function Pl(l,e,t){let n,i;be(l,Ie,a=>t(4,n=a)),be(l,S,a=>t(1,i=a));let r;nn(()=>{window.addEventListener("visibilitychanged",()=>{Ae(Ie,n.running=!document.hidden,n)})});function o(a){r=a,t(0,r)}function s(a){r=a,t(0,r)}return[r,i,o,s]}class Tl extends ue{constructor(e){super(),fe(this,e,Pl,Dl,ae,{})}}function Nl(l){let e,t;return e=new Tl({}),{c(){V(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,i){q(e,n,i),t=!0},p:de,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}class Ol extends ue{constructor(e){super(),fe(this,e,null,Nl,ae,{})}}export{Ol as component};
