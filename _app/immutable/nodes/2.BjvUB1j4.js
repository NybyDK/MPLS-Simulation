var Ct=Object.defineProperty;var It=(n,e,t)=>e in n?Ct(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var j=(n,e,t)=>(It(n,typeof e!="symbol"?e+"":e,t),t);import{r as be,s as re,a as mt,u as kt,g as vt,b as yt,x as wt,e as fe,n as ie,c as de,i as Pe,y as pe,o as Et,z as Ue,A as Oe}from"../chunks/scheduler.C5v8YK5g.js";import{n as Y,m as A,S as ue,i as ae,e as T,c as R,a as U,d as k,l as m,g as L,z as X,o as le,A as ce,s as M,B as W,f as H,h as I,C as Be,D as K,E as ge,v as J,w as Q,x as Z,y as ee,r as we,p as Ee,t as se,b as oe,j as ve,F as Le,G as Ce,H as Bt,q as ze}from"../chunks/index.quBbCW_3.js";import{w as De}from"../chunks/index.CD1dNpfE.js";function ne(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function xe(n,e){Y(n,1,1,()=>{e.delete(n.key)})}function Me(n,e,t,l,s,i,r,o,u,d,f,_){let a=n.length,g=i.length,p=a;const h={};for(;p--;)h[n[p].key]=p;const B=[],c=new Map,v=new Map,x=[];for(p=g;p--;){const C=_(s,i,p),P=t(C);let $=r.get(P);$?l&&x.push(()=>$.p(C,e)):($=d(P,C),$.c()),c.set(P,B[p]=$),P in h&&v.set(P,Math.abs(p-h[P]))}const z=new Set,N=new Set;function E(C){A(C,1),C.m(o,f),r.set(C.key,C),f=C.first,g--}for(;a&&g;){const C=B[g-1],P=n[a-1],$=C.key,q=P.key;C===P?(f=C.first,a--,g--):c.has(q)?!r.has($)||z.has($)?E(C):N.has(q)?a--:v.get($)>v.get(q)?(N.add($),E(C)):(z.add(q),a--):(u(P,r),a--)}for(;a--;){const C=n[a];c.has(C.key)||u(C,r)}for(;g;)E(B[g-1]);return be(x),B}function Ae(n,e){const t={},l={},s={$$scope:1};let i=n.length;for(;i--;){const r=n[i],o=e[i];if(o){for(const u in r)u in o||(l[u]=1);for(const u in o)s[u]||(t[u]=o[u],s[u]=1);n[i]=o}else for(const u in r)s[u]=1}for(const r in l)r in t||(t[r]=void 0);return t}function Se(n){return typeof n=="object"&&n!==null?n:{}}let $t=class{constructor(e,t,l){j(this,"bandwidth",0);this.id=e,this.source=t,this.target=l}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}};class Tt{constructor(){j(this,"store",De());j(this,"set",this.store.set);j(this,"update",this.store.update);j(this,"subscribe",this.store.subscribe);j(this,"_map",new Map)}getPath(e,t){const l=this._map.get(e);if(l)return l.get(t)}findShortestPath(e,t){return Ve(e,t)}findShortestPaths(){const e=new Map,t=G.routers.filter(l=>l.type==="CE");for(const l of t){const s=new Map;for(const i of t){if(l===i)continue;const r=Ve(l,i);s.set(i.id,r)}e.set(l.id,s)}this._map=e}notify(){this.store.set(this._map)}}function Ve(n,e){const t=G.routers,l=t.length,s=new Array(l).fill(1/0),i=new Array(l).fill(!1),r=new Array(l).fill(null);s[t.indexOf(n)]=0;let o=!1;for(;!o;){let f=null,_=1/0;for(let a=0;a<l;a++)!i[a]&&s[a]<_&&(f=t[a],_=s[a]);if(f===null||f.id===e.id){o=!0;continue}i[t.indexOf(f)]=!0;for(const a of G.links){let g;if(a.source===f)g=a.target;else if(a.target===f)g=a.source;else continue;const p=t.indexOf(g),h=_+a.distance;h<s[p]&&(s[p]=h,r[p]=f)}}const u=[];let d=e;for(;d;){u.unshift(d);const f=t.indexOf(d);d=r[f]}return u}const Rt=new Tt,Lt=Rt;let Nt=class{constructor(e,t,l,s){j(this,"ttl",32);j(this,"label",-1);j(this,"nextHop");this.id=e,this.source=t,this.destination=l,this.node=s,this.nextHop=Lt.findShortestPath(t,l)[1]}decrementTTL(){--this.ttl<=0&&this.drop()}drop(){G.deletePacket(this.id)}},je=class{constructor(e,t){this.id=e,this.node=t}};class ke extends je{constructor(){super(...arguments);j(this,"address",`CE-IP-${this.id}`);j(this,"destinations",[]);j(this,"addEmptyDestination",()=>{this.destinations.push("")});j(this,"deleteDestination",t=>{this.destinations.splice(t,1)})}receivePacket(t){t.drop()}get type(){return"CE"}}class ye extends je{constructor(){super(...arguments);j(this,"FIB",new Map);j(this,"LIB",new Map);j(this,"addEmptyFIBEntry",()=>{this.FIB.set("0",{label:0,nextHop:"0"})});j(this,"addEmptyLIBEntry",()=>{this.LIB.set(0,{outgoingLabel:0,nextHop:"0"})});j(this,"updateFIBAddress",(t,l)=>{const s=this.FIB.get(t);if(!s)throw new Error(`Unable to update old FIB address '${t}' to '${l}'.`);this.FIB.set(l,s),this.FIB.delete(t)});j(this,"updateLIBLabel",(t,l)=>{const s=this.LIB.get(t);if(!s)throw new Error(`Unable to update old LIB label '${t}' to '${l}'.`);this.LIB.set(l,s),this.LIB.delete(t)});j(this,"deleteFIBEntry",t=>{this.FIB.delete(t)});j(this,"deleteLIBEntry",t=>{this.LIB.delete(t)});j(this,"receiveFIBEntry",(t,l,s)=>{this.FIB.set(t,{label:l,nextHop:s})});j(this,"receiveLIBEntry",(t,l,s)=>{this.LIB.set(t,{outgoingLabel:l,nextHop:s})})}receivePacket(t){var s,i,r,o;const l=t.destination;if(t.label===-1){const u=(s=this.FIB.get(l.address))==null?void 0:s.nextHop;if(!u)return;const d=(i=this.FIB.get(l.address))==null?void 0:i.label;if(!d)return;t.label=d;const f=G.getRouter(parseInt(u));if(!f)return;t.nextHop=f}else{const u=(r=this.LIB.get(t.label))==null?void 0:r.nextHop;if(!u)return;const d=(o=this.LIB.get(t.label))==null?void 0:o.outgoingLabel;if(!d)return;t.label=d;const f=G.routers.find(_=>_ instanceof ke&&_.address===u);if(!f)return;t.nextHop=f}t.decrementTTL()}get type(){return"LER"}}class Te extends je{constructor(){super(...arguments);j(this,"LIB",new Map);j(this,"addEmptyLIBEntry",()=>{this.LIB.set(0,{outgoingLabel:0,nextHop:"0"})});j(this,"updateLIBLabel",(t,l)=>{const s=this.LIB.get(t);if(!s)throw new Error(`Unable to update old LIB label '${t}' to '${l}'.`);this.LIB.set(l,s),this.LIB.delete(t)});j(this,"deleteLIBEntry",t=>{this.LIB.delete(t)});j(this,"receiveLIBEntry",(t,l,s)=>{this.LIB.set(t,{outgoingLabel:l,nextHop:s})})}receivePacket(t){var r,o;const l=(r=this.LIB.get(t.label))==null?void 0:r.nextHop;if(!l)return;const s=(o=this.LIB.get(t.label))==null?void 0:o.outgoingLabel;if(!s)return;t.label=s;const i=G.getRouter(parseInt(l));i&&(t.nextHop=i,t.decrementTTL())}get type(){return"LSR"}}const Pt={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class Dt{constructor(){j(this,"store",De({routers:[],links:[],packets:[]}));j(this,"set",this.store.set);j(this,"update",this.store.update);j(this,"subscribe",this.store.subscribe);j(this,"_routers",[]);j(this,"_links",[]);j(this,"_packets",[]);j(this,"routerMap",new Map);j(this,"routerCounter",0);j(this,"packetCounter",0)}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!Pt[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new $t(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const l=this.routerCounter++,s=new ke(l,{label:`CE ${l}`,x:e,y:t});this.addRouter(s)}createLER(e,t){const l=this.routerCounter++,s=new ye(l,{label:`LER ${l}`,x:e,y:t});this.addRouter(s)}createLSR(e,t){const l=this.routerCounter++,s=new Te(l,{label:`LSR ${l}`,x:e,y:t});this.addRouter(s)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),this.notify()}deleteRouter(e){this.getRouter(e)&&(this._routers=this._routers.filter(l=>l.id!==e),this._links=this._links.filter(l=>l.source.id!==e&&l.target.id!==e),this.routerMap.delete(e),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}addPacket(e,t){const l=new Nt(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(l),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.routerCounter=0,this.packetCounter=0,this.notify()}notify(){this.store.set(this.networkState)}}const xt=new Dt,G=xt,Re=De({running:!0,speedMultiplier:1}),$e=De(!1);function Mt(n){let e,t,l,s;const i=n[2].default,r=mt(i,n,n[1],null);return{c(){e=T("dialog"),r&&r.c(),this.h()},l(o){e=R(o,"DIALOG",{class:!0});var u=U(e);r&&r.l(u),u.forEach(k),this.h()},h(){m(e,"class","svelte-414ocx")},m(o,u){L(o,e,u),r&&r.m(e,null),n[4](e),t=!0,l||(s=X(e,"close",n[3]),l=!0)},p(o,[u]){r&&r.p&&(!t||u&2)&&kt(r,i,o,o[1],t?yt(i,o[1],u,null):vt(o[1]),null)},i(o){t||(A(r,o),t=!0)},o(o){Y(r,o),t=!1},d(o){o&&k(e),r&&r.d(o),n[4](null),l=!1,s()}}}function Ht(n,e,t){let{$$slots:l={},$$scope:s}=e,{dialog:i}=e;function r(u){wt.call(this,n,u)}function o(u){fe[u?"unshift":"push"](()=>{i=u,t(0,i)})}return n.$$set=u=>{"dialog"in u&&t(0,i=u.dialog),"$$scope"in u&&t(1,s=u.$$scope)},[i,s,l,r,o]}class Ye extends ue{constructor(e){super(),ae(this,e,Ht,Mt,re,{dialog:0})}}function Xe(n,e,t){const l=n.slice();return l[27]=e[t][0],l[28]=e[t][1],l[34]=e,l[35]=t,l}function qe(n,e,t){const l=n.slice();return l[27]=e[t][0],l[28]=e[t][1],l[29]=e,l[30]=t,l}function Ge(n,e,t){const l=n.slice();return l[31]=e[t][0],l[28]=e[t][1],l[32]=e,l[33]=t,l}function We(n,e,t){const l=n.slice();return l[24]=e[t],l[25]=e,l[26]=t,l}function Ft(n){let e,t="LIB:",l,s,i,r='<th class="svelte-71n8bk">Incoming</th> <th class="svelte-71n8bk">Outgoing</th> <th class="svelte-71n8bk">Next hop</th>',o,u,d,f="+",_,a,g=ne([...n[0].LIB]),p=[];for(let h=0;h<g.length;h+=1)p[h]=Ke(Xe(n,g,h));return{c(){e=T("p"),e.textContent=t,l=M(),s=T("table"),i=T("tr"),i.innerHTML=r,o=M();for(let h=0;h<p.length;h+=1)p[h].c();u=M(),d=T("button"),d.textContent=f,this.h()},l(h){e=R(h,"P",{"data-svelte-h":!0}),W(e)!=="svelte-1j64kst"&&(e.textContent=t),l=H(h),s=R(h,"TABLE",{class:!0});var B=U(s);i=R(B,"TR",{"data-svelte-h":!0}),W(i)!=="svelte-1nxelgl"&&(i.innerHTML=r),o=H(B);for(let c=0;c<p.length;c+=1)p[c].l(B);B.forEach(k),u=H(h),d=R(h,"BUTTON",{class:!0,"data-svelte-h":!0}),W(d)!=="svelte-tb5kpv"&&(d.textContent=f),this.h()},h(){m(s,"class","svelte-71n8bk"),m(d,"class","svelte-71n8bk")},m(h,B){L(h,e,B),L(h,l,B),L(h,s,B),I(s,i),I(s,o);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(s,null);L(h,u,B),L(h,d,B),_||(a=X(d,"click",function(){Pe(n[1](n[0].addEmptyLIBEntry))&&n[1](n[0].addEmptyLIBEntry).apply(this,arguments)}),_=!0)},p(h,B){if(n=h,B[0]&9){g=ne([...n[0].LIB]);let c;for(c=0;c<g.length;c+=1){const v=Xe(n,g,c);p[c]?p[c].p(v,B):(p[c]=Ke(v),p[c].c(),p[c].m(s,null))}for(;c<p.length;c+=1)p[c].d(1);p.length=g.length}},d(h){h&&(k(e),k(l),k(s),k(u),k(d)),Be(p,h),_=!1,a()}}}function zt(n){let e,t="FIB:",l,s,i,r='<th class="svelte-71n8bk">Address</th> <th class="svelte-71n8bk">Label</th> <th class="svelte-71n8bk">Next hop</th>',o,u,d,f="+",_,a,g="LIB:",p,h,B,c='<th class="svelte-71n8bk">Incoming</th> <th class="svelte-71n8bk">Outgoing</th> <th class="svelte-71n8bk">Next hop</th>',v,x,z,N="+",E,C,P=ne([...n[0].FIB]),$=[];for(let y=0;y<P.length;y+=1)$[y]=Je(Ge(n,P,y));let q=ne([...n[0].LIB]),b=[];for(let y=0;y<q.length;y+=1)b[y]=Qe(qe(n,q,y));return{c(){e=T("p"),e.textContent=t,l=M(),s=T("table"),i=T("tr"),i.innerHTML=r,o=M();for(let y=0;y<$.length;y+=1)$[y].c();u=M(),d=T("button"),d.textContent=f,_=M(),a=T("p"),a.textContent=g,p=M(),h=T("table"),B=T("tr"),B.innerHTML=c,v=M();for(let y=0;y<b.length;y+=1)b[y].c();x=M(),z=T("button"),z.textContent=N,this.h()},l(y){e=R(y,"P",{"data-svelte-h":!0}),W(e)!=="svelte-1j6bdhj"&&(e.textContent=t),l=H(y),s=R(y,"TABLE",{class:!0});var O=U(s);i=R(O,"TR",{"data-svelte-h":!0}),W(i)!=="svelte-9j9p47"&&(i.innerHTML=r),o=H(O);for(let te=0;te<$.length;te+=1)$[te].l(O);O.forEach(k),u=H(y),d=R(y,"BUTTON",{class:!0,"data-svelte-h":!0}),W(d)!=="svelte-j46m6p"&&(d.textContent=f),_=H(y),a=R(y,"P",{"data-svelte-h":!0}),W(a)!=="svelte-1j64kst"&&(a.textContent=g),p=H(y),h=R(y,"TABLE",{class:!0});var D=U(h);B=R(D,"TR",{"data-svelte-h":!0}),W(B)!=="svelte-1nxelgl"&&(B.innerHTML=c),v=H(D);for(let te=0;te<b.length;te+=1)b[te].l(D);D.forEach(k),x=H(y),z=R(y,"BUTTON",{class:!0,"data-svelte-h":!0}),W(z)!=="svelte-tb5kpv"&&(z.textContent=N),this.h()},h(){m(s,"class","svelte-71n8bk"),m(d,"class","svelte-71n8bk"),m(h,"class","svelte-71n8bk"),m(z,"class","svelte-71n8bk")},m(y,O){L(y,e,O),L(y,l,O),L(y,s,O),I(s,i),I(s,o);for(let D=0;D<$.length;D+=1)$[D]&&$[D].m(s,null);L(y,u,O),L(y,d,O),L(y,_,O),L(y,a,O),L(y,p,O),L(y,h,O),I(h,B),I(h,v);for(let D=0;D<b.length;D+=1)b[D]&&b[D].m(h,null);L(y,x,O),L(y,z,O),E||(C=[X(d,"click",function(){Pe(n[1](n[0].addEmptyFIBEntry))&&n[1](n[0].addEmptyFIBEntry).apply(this,arguments)}),X(z,"click",function(){Pe(n[1](n[0].addEmptyLIBEntry))&&n[1](n[0].addEmptyLIBEntry).apply(this,arguments)})],E=!0)},p(y,O){if(n=y,O[0]&5){P=ne([...n[0].FIB]);let D;for(D=0;D<P.length;D+=1){const te=Ge(n,P,D);$[D]?$[D].p(te,O):($[D]=Je(te),$[D].c(),$[D].m(s,null))}for(;D<$.length;D+=1)$[D].d(1);$.length=P.length}if(O[0]&9){q=ne([...n[0].LIB]);let D;for(D=0;D<q.length;D+=1){const te=qe(n,q,D);b[D]?b[D].p(te,O):(b[D]=Qe(te),b[D].c(),b[D].m(h,null))}for(;D<b.length;D+=1)b[D].d(1);b.length=q.length}},d(y){y&&(k(e),k(l),k(s),k(u),k(d),k(_),k(a),k(p),k(h),k(x),k(z)),Be($,y),Be(b,y),E=!1,be(C)}}}function Ut(n){let e,t="Destinations:",l,s,i,r='<th class="svelte-71n8bk">Destination</th>',o,u,d,f="+",_,a,g=ne(n[0].destinations),p=[];for(let h=0;h<g.length;h+=1)p[h]=Ze(We(n,g,h));return{c(){e=T("p"),e.textContent=t,l=M(),s=T("table"),i=T("tr"),i.innerHTML=r,o=M();for(let h=0;h<p.length;h+=1)p[h].c();u=M(),d=T("button"),d.textContent=f,this.h()},l(h){e=R(h,"P",{"data-svelte-h":!0}),W(e)!=="svelte-1ixmdgd"&&(e.textContent=t),l=H(h),s=R(h,"TABLE",{class:!0});var B=U(s);i=R(B,"TR",{"data-svelte-h":!0}),W(i)!=="svelte-1f4xvyf"&&(i.innerHTML=r),o=H(B);for(let c=0;c<p.length;c+=1)p[c].l(B);B.forEach(k),u=H(h),d=R(h,"BUTTON",{class:!0,"data-svelte-h":!0}),W(d)!=="svelte-zn59e0"&&(d.textContent=f),this.h()},h(){m(s,"class","svelte-71n8bk"),m(d,"class","svelte-71n8bk")},m(h,B){L(h,e,B),L(h,l,B),L(h,s,B),I(s,i),I(s,o);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(s,null);L(h,u,B),L(h,d,B),_||(a=X(d,"click",function(){Pe(n[1](n[0].addEmptyDestination))&&n[1](n[0].addEmptyDestination).apply(this,arguments)}),_=!0)},p(h,B){if(n=h,B[0]&17){g=ne(n[0].destinations);let c;for(c=0;c<g.length;c+=1){const v=We(n,g,c);p[c]?p[c].p(v,B):(p[c]=Ze(v),p[c].c(),p[c].m(s,null))}for(;c<p.length;c+=1)p[c].d(1);p.length=g.length}},d(h){h&&(k(e),k(l),k(s),k(u),k(d)),Be(p,h),_=!1,a()}}}function Ke(n){let e,t,l,s,i,r,o,u,d,f,_,a,g="-",p,h,B;function c(...N){return n[16](n[27],...N)}function v(){n[17].call(o,n[34],n[35])}function x(){n[18].call(f,n[34],n[35])}function z(){return n[19](n[27])}return{c(){e=T("tr"),t=T("td"),l=T("input"),i=M(),r=T("td"),o=T("input"),u=M(),d=T("td"),f=T("input"),_=M(),a=T("button"),a.textContent=g,p=M(),this.h()},l(N){e=R(N,"TR",{});var E=U(e);t=R(E,"TD",{class:!0});var C=U(t);l=R(C,"INPUT",{type:!0,class:!0}),C.forEach(k),i=H(E),r=R(E,"TD",{class:!0});var P=U(r);o=R(P,"INPUT",{type:!0,class:!0}),P.forEach(k),u=H(E),d=R(E,"TD",{class:!0});var $=U(d);f=R($,"INPUT",{type:!0,class:!0}),$.forEach(k),_=H(E),a=R(E,"BUTTON",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-1jia542"&&(a.textContent=g),p=H(E),E.forEach(k),this.h()},h(){m(l,"type","number"),l.value=s=n[27],m(l,"class","svelte-71n8bk"),m(t,"class","svelte-71n8bk"),m(o,"type","number"),m(o,"class","svelte-71n8bk"),m(r,"class","svelte-71n8bk"),m(f,"type","text"),m(f,"class","svelte-71n8bk"),m(d,"class","svelte-71n8bk"),m(a,"class","svelte-71n8bk")},m(N,E){L(N,e,E),I(e,t),I(t,l),I(e,i),I(e,r),I(r,o),K(o,n[28].outgoingLabel),I(e,u),I(e,d),I(d,f),K(f,n[28].nextHop),I(e,_),I(e,a),I(e,p),h||(B=[X(l,"change",c),X(o,"input",v),X(f,"input",x),X(a,"click",z)],h=!0)},p(N,E){n=N,E[0]&1&&s!==(s=n[27])&&l.value!==s&&(l.value=s),E[0]&1&&ce(o.value)!==n[28].outgoingLabel&&K(o,n[28].outgoingLabel),E[0]&1&&f.value!==n[28].nextHop&&K(f,n[28].nextHop)},d(N){N&&k(e),h=!1,be(B)}}}function Je(n){let e,t,l,s,i,r,o,u,d,f,_,a,g="-",p,h,B;function c(...N){return n[8](n[31],...N)}function v(){n[9].call(o,n[32],n[33])}function x(){n[10].call(f,n[32],n[33])}function z(){return n[11](n[31])}return{c(){e=T("tr"),t=T("td"),l=T("input"),i=M(),r=T("td"),o=T("input"),u=M(),d=T("td"),f=T("input"),_=M(),a=T("button"),a.textContent=g,p=M(),this.h()},l(N){e=R(N,"TR",{});var E=U(e);t=R(E,"TD",{class:!0});var C=U(t);l=R(C,"INPUT",{type:!0,class:!0}),C.forEach(k),i=H(E),r=R(E,"TD",{class:!0});var P=U(r);o=R(P,"INPUT",{type:!0,class:!0}),P.forEach(k),u=H(E),d=R(E,"TD",{class:!0});var $=U(d);f=R($,"INPUT",{type:!0,class:!0}),$.forEach(k),_=H(E),a=R(E,"BUTTON",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-t02fbo"&&(a.textContent=g),p=H(E),E.forEach(k),this.h()},h(){m(l,"type","text"),l.value=s=n[31],m(l,"class","svelte-71n8bk"),m(t,"class","svelte-71n8bk"),m(o,"type","number"),m(o,"class","svelte-71n8bk"),m(r,"class","svelte-71n8bk"),m(f,"type","text"),m(f,"class","svelte-71n8bk"),m(d,"class","svelte-71n8bk"),m(a,"class","svelte-71n8bk")},m(N,E){L(N,e,E),I(e,t),I(t,l),I(e,i),I(e,r),I(r,o),K(o,n[28].label),I(e,u),I(e,d),I(d,f),K(f,n[28].nextHop),I(e,_),I(e,a),I(e,p),h||(B=[X(l,"change",c),X(o,"input",v),X(f,"input",x),X(a,"click",z)],h=!0)},p(N,E){n=N,E[0]&1&&s!==(s=n[31])&&l.value!==s&&(l.value=s),E[0]&1&&ce(o.value)!==n[28].label&&K(o,n[28].label),E[0]&1&&f.value!==n[28].nextHop&&K(f,n[28].nextHop)},d(N){N&&k(e),h=!1,be(B)}}}function Qe(n){let e,t,l,s,i,r,o,u,d,f,_,a,g="-",p,h,B;function c(...N){return n[12](n[27],...N)}function v(){n[13].call(o,n[29],n[30])}function x(){n[14].call(f,n[29],n[30])}function z(){return n[15](n[27])}return{c(){e=T("tr"),t=T("td"),l=T("input"),i=M(),r=T("td"),o=T("input"),u=M(),d=T("td"),f=T("input"),_=M(),a=T("button"),a.textContent=g,p=M(),this.h()},l(N){e=R(N,"TR",{});var E=U(e);t=R(E,"TD",{class:!0});var C=U(t);l=R(C,"INPUT",{type:!0,class:!0}),C.forEach(k),i=H(E),r=R(E,"TD",{class:!0});var P=U(r);o=R(P,"INPUT",{type:!0,class:!0}),P.forEach(k),u=H(E),d=R(E,"TD",{class:!0});var $=U(d);f=R($,"INPUT",{type:!0,class:!0}),$.forEach(k),_=H(E),a=R(E,"BUTTON",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-19m5ayk"&&(a.textContent=g),p=H(E),E.forEach(k),this.h()},h(){m(l,"type","number"),l.value=s=n[27],m(l,"class","svelte-71n8bk"),m(t,"class","svelte-71n8bk"),m(o,"type","number"),m(o,"class","svelte-71n8bk"),m(r,"class","svelte-71n8bk"),m(f,"type","text"),m(f,"class","svelte-71n8bk"),m(d,"class","svelte-71n8bk"),m(a,"class","svelte-71n8bk")},m(N,E){L(N,e,E),I(e,t),I(t,l),I(e,i),I(e,r),I(r,o),K(o,n[28].outgoingLabel),I(e,u),I(e,d),I(d,f),K(f,n[28].nextHop),I(e,_),I(e,a),I(e,p),h||(B=[X(l,"change",c),X(o,"input",v),X(f,"input",x),X(a,"click",z)],h=!0)},p(N,E){n=N,E[0]&1&&s!==(s=n[27])&&l.value!==s&&(l.value=s),E[0]&1&&ce(o.value)!==n[28].outgoingLabel&&K(o,n[28].outgoingLabel),E[0]&1&&f.value!==n[28].nextHop&&K(f,n[28].nextHop)},d(N){N&&k(e),h=!1,be(B)}}}function Ze(n){let e,t,l,s,i,r="-",o,u,d;function f(){n[5].call(l,n[25],n[26])}function _(){return n[7](n[26])}return{c(){e=T("tr"),t=T("td"),l=T("input"),s=M(),i=T("button"),i.textContent=r,o=M(),this.h()},l(a){e=R(a,"TR",{});var g=U(e);t=R(g,"TD",{class:!0});var p=U(t);l=R(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(k),s=H(g),i=R(g,"BUTTON",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-z317ay"&&(i.textContent=r),o=H(g),g.forEach(k),this.h()},h(){m(l,"type","text"),m(l,"placeholder","Address"),m(l,"class","svelte-71n8bk"),m(t,"class","svelte-71n8bk"),m(i,"class","svelte-71n8bk")},m(a,g){L(a,e,g),I(e,t),I(t,l),K(l,n[24]),I(e,s),I(e,i),I(e,o),u||(d=[X(l,"input",f),X(l,"change",n[6]),X(i,"click",_)],u=!0)},p(a,g){n=a,g[0]&1&&l.value!==n[24]&&K(l,n[24])},d(a){a&&k(e),u=!1,be(d)}}}function Ot(n){let e;function t(i,r){if(i[0]instanceof ke)return Ut;if(i[0]instanceof ye)return zt;if(i[0]instanceof Te)return Ft}let l=t(n),s=l&&l(n);return{c(){s&&s.c(),e=le()},l(i){s&&s.l(i),e=le()},m(i,r){s&&s.m(i,r),L(i,e,r)},p(i,r){l===(l=t(i))&&s?s.p(i,r):(s&&s.d(1),s=l&&l(i),s&&(s.c(),s.m(e.parentNode,e)))},i:ie,o:ie,d(i){i&&k(e),s&&s.d(i)}}}const et=16;function At(n,e,t){let l;de(n,G,b=>t(20,l=b));let{router:s}=e;const i=2**20-1;function r(b){return()=>{b(),t(0,s)}}function o(b,y){if(!(b.target instanceof HTMLInputElement)||!(s instanceof ye))return;const O=b.target.value;if(s.FIB.get(O)){alert("Address already exists in FIB.");return}s.updateFIBAddress(y,O)}function u(b,y){if(!(b.target instanceof HTMLInputElement)||!(s instanceof Te))return;const O=parseInt(b.target.value);if(s.LIB.get(O)){alert("Label already exists in LIB.");return}s.updateLIBLabel(y,O)}function d(b){if(!(b.target instanceof HTMLInputElement)||!(s instanceof ke))return;const y=b.target.value,D=l.routers.filter(V=>V instanceof ke).find(V=>V.address===y);if(!D){alert("Destination router not found.");return}const te=Lt.findShortestPath(s,D);let me=_(),F=!0;for(let V=te.length-1;V>0;V--){const he=te[V],w=te[V-1],S=me;me=_(),w instanceof ye&&F?(w.receiveLIBEntry(me,-1,y),F=!1):w instanceof ye&&!F?w.receiveFIBEntry(y,S,he.id.toString()):w instanceof Te&&w.receiveLIBEntry(me,S,he.id.toString())}}function f(b){return s instanceof Te||s instanceof ye?s.LIB.has(b):!1}function _(){let b;do b=Math.floor(Math.random()*(i-et+1)+et);while(f(b));return b}function a(b,y){b[y]=this.value,t(0,s)}const g=b=>{d(b)},p=b=>{s instanceof ke&&(s.deleteDestination(b),t(0,s))},h=(b,y)=>{o(y,b)};function B(b,y){b[y][1].label=ce(this.value),t(0,s)}function c(b,y){b[y][1].nextHop=this.value,t(0,s)}const v=b=>{s instanceof ye&&(s.deleteFIBEntry(b),t(0,s))},x=(b,y)=>{u(y,b)};function z(b,y){b[y][1].outgoingLabel=ce(this.value),t(0,s)}function N(b,y){b[y][1].nextHop=this.value,t(0,s)}const E=b=>{s instanceof ye&&(s.deleteLIBEntry(b),t(0,s))},C=(b,y)=>{u(y,b)};function P(b,y){b[y][1].outgoingLabel=ce(this.value),t(0,s)}function $(b,y){b[y][1].nextHop=this.value,t(0,s)}const q=b=>{s instanceof Te&&(s.deleteLIBEntry(b),t(0,s))};return n.$$set=b=>{"router"in b&&t(0,s=b.router)},[s,r,o,u,d,a,g,p,h,B,c,v,x,z,N,E,C,P,$,q]}class St extends ue{constructor(e){super(),ae(this,e,At,Ot,re,{router:0},null,[-1,-1])}}function jt(n){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=T("p"),e.textContent=t},l(l){e=R(l,"P",{"data-svelte-h":!0}),W(e)!=="svelte-1214eal"&&(e.textContent=t)},m(l,s){L(l,e,s)},p:ie,i:ie,o:ie,d(l){l&&k(e)}}}function Yt(n){let e,t,l,s,i,r,o=n[0].id+"",u,d,f,_,a=n[0].type+"",g,p,h,B,c,v,x,z,N,E,C,P,$,q="Delete Router",b,y,O,D=n[0]instanceof ke&&tt(n);function te(F){n[7](F)}let me={};return n[0]!==void 0&&(me.router=n[0]),E=new St({props:me}),fe.push(()=>ge(E,"router",te)),{c(){e=T("label"),t=se(`Label:
      `),l=T("input"),s=M(),i=T("p"),r=se("ID: "),u=se(o),d=M(),f=T("p"),_=se("Type: "),g=se(a),p=M(),h=T("label"),B=se(`Position:
      `),c=T("input"),v=M(),x=T("input"),z=M(),D&&D.c(),N=M(),J(E.$$.fragment),P=M(),$=T("button"),$.textContent=q,this.h()},l(F){e=R(F,"LABEL",{});var V=U(e);t=oe(V,`Label:
      `),l=R(V,"INPUT",{type:!0}),V.forEach(k),s=H(F),i=R(F,"P",{});var he=U(i);r=oe(he,"ID: "),u=oe(he,o),he.forEach(k),d=H(F),f=R(F,"P",{});var w=U(f);_=oe(w,"Type: "),g=oe(w,a),w.forEach(k),p=H(F),h=R(F,"LABEL",{});var S=U(h);B=oe(S,`Position:
      `),c=R(S,"INPUT",{type:!0}),v=H(S),x=R(S,"INPUT",{type:!0}),S.forEach(k),z=H(F),D&&D.l(F),N=H(F),Q(E.$$.fragment,F),P=H(F),$=R(F,"BUTTON",{"data-svelte-h":!0}),W($)!=="svelte-ufhzdt"&&($.textContent=q),this.h()},h(){m(l,"type","text"),m(c,"type","number"),c.disabled=n[2],m(x,"type","number"),x.disabled=n[2]},m(F,V){L(F,e,V),I(e,t),I(e,l),K(l,n[0].node.label),L(F,s,V),L(F,i,V),I(i,r),I(i,u),L(F,d,V),L(F,f,V),I(f,_),I(f,g),L(F,p,V),L(F,h,V),I(h,B),I(h,c),K(c,n[0].node.x),I(h,v),I(h,x),K(x,n[0].node.y),L(F,z,V),D&&D.m(F,V),L(F,N,V),Z(E,F,V),L(F,P,V),L(F,$,V),b=!0,y||(O=[X(l,"input",n[4]),X(c,"input",n[5]),X(x,"input",n[6]),X($,"click",n[3])],y=!0)},p(F,V){V&1&&l.value!==F[0].node.label&&K(l,F[0].node.label),(!b||V&1)&&o!==(o=F[0].id+"")&&ve(u,o),(!b||V&1)&&a!==(a=F[0].type+"")&&ve(g,a),(!b||V&4)&&(c.disabled=F[2]),V&1&&ce(c.value)!==F[0].node.x&&K(c,F[0].node.x),(!b||V&4)&&(x.disabled=F[2]),V&1&&ce(x.value)!==F[0].node.y&&K(x,F[0].node.y),F[0]instanceof ke?D?D.p(F,V):(D=tt(F),D.c(),D.m(N.parentNode,N)):D&&(D.d(1),D=null);const he={};!C&&V&1&&(C=!0,he.router=F[0],pe(()=>C=!1)),E.$set(he)},i(F){b||(A(E.$$.fragment,F),b=!0)},o(F){Y(E.$$.fragment,F),b=!1},d(F){F&&(k(e),k(s),k(i),k(d),k(f),k(p),k(h),k(z),k(N),k(P),k($)),D&&D.d(F),ee(E,F),y=!1,be(O)}}}function tt(n){let e,t,l=n[0].address+"",s;return{c(){e=T("p"),t=se("Address: "),s=se(l)},l(i){e=R(i,"P",{});var r=U(e);t=oe(r,"Address: "),s=oe(r,l),r.forEach(k)},m(i,r){L(i,e,r),I(e,t),I(e,s)},p(i,r){r&1&&l!==(l=i[0].address+"")&&ve(s,l)},d(i){i&&k(e)}}}function Vt(n){let e,t,l,s;const i=[Yt,jt],r=[];function o(u,d){return u[0]?0:1}return e=o(n),t=r[e]=i[e](n),{c(){t.c(),l=le()},l(u){t.l(u),l=le()},m(u,d){r[e].m(u,d),L(u,l,d),s=!0},p(u,d){let f=e;e=o(u),e===f?r[e].p(u,d):(we(),Y(r[f],1,1,()=>{r[f]=null}),Ee(),t=r[e],t?t.p(u,d):(t=r[e]=i[e](u),t.c()),A(t,1),t.m(l.parentNode,l))},i(u){s||(A(t),s=!0)},o(u){Y(t),s=!1},d(u){u&&k(l),r[e].d(u)}}}function Xt(n){let e,t,l;function s(r){n[8](r)}let i={$$slots:{default:[Vt]},$$scope:{ctx:n}};return n[1]!==void 0&&(i.dialog=n[1]),e=new Ye({props:i}),fe.push(()=>ge(e,"dialog",s)),e.$on("close",n[9]),{c(){J(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,o){Z(e,r,o),l=!0},p(r,[o]){const u={};o&1029&&(u.$$scope={dirty:o,ctx:r}),!t&&o&2&&(t=!0,u.dialog=r[1],pe(()=>t=!1)),e.$set(u)},i(r){l||(A(e.$$.fragment,r),l=!0)},o(r){Y(e.$$.fragment,r),l=!1},d(r){ee(e,r)}}}function qt(n,e,t){let l;de(n,$e,g=>t(2,l=g));let{router:s}=e,{dialog:i}=e;function r(){!l&&s&&confirm("Are you sure you want to delete this router?")&&(G.deleteRouter(s.id),i.close())}function o(){s.node.label=this.value,t(0,s)}function u(){s.node.x=ce(this.value),t(0,s)}function d(){s.node.y=ce(this.value),t(0,s)}function f(g){s=g,t(0,s)}function _(g){i=g,t(1,i)}const a=()=>{G.notify()};return n.$$set=g=>{"router"in g&&t(0,s=g.router),"dialog"in g&&t(1,i=g.dialog)},[s,i,l,r,o,u,d,f,_,a]}class Gt extends ue{constructor(e){super(),ae(this,e,qt,Xt,re,{router:0,dialog:1})}}function Wt(n){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=T("p"),e.textContent=t},l(l){e=R(l,"P",{"data-svelte-h":!0}),W(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(l,s){L(l,e,s)},p:ie,d(l){l&&k(e)}}}function Kt(n){let e,t=n[0].distance+"",l,s,i,r,o,u,d,f="Delete Link",_,a;return{c(){e=se("Distance: "),l=se(t),s=M(),i=T("label"),r=se(`Bandwidth:
      `),o=T("input"),u=M(),d=T("button"),d.textContent=f,this.h()},l(g){e=oe(g,"Distance: "),l=oe(g,t),s=H(g),i=R(g,"LABEL",{class:!0});var p=U(i);r=oe(p,`Bandwidth:
      `),o=R(p,"INPUT",{type:!0,class:!0}),p.forEach(k),u=H(g),d=R(g,"BUTTON",{"data-svelte-h":!0}),W(d)!=="svelte-rk1ni8"&&(d.textContent=f),this.h()},h(){m(o,"type","number"),o.disabled=n[2],m(o,"class","svelte-mdz6ho"),m(i,"class","svelte-mdz6ho")},m(g,p){L(g,e,p),L(g,l,p),L(g,s,p),L(g,i,p),I(i,r),I(i,o),K(o,n[0].bandwidth),L(g,u,p),L(g,d,p),_||(a=[X(o,"input",n[4]),X(d,"click",n[3])],_=!0)},p(g,p){p&1&&t!==(t=g[0].distance+"")&&ve(l,t),p&4&&(o.disabled=g[2]),p&1&&ce(o.value)!==g[0].bandwidth&&K(o,g[0].bandwidth)},d(g){g&&(k(e),k(l),k(s),k(i),k(u),k(d)),_=!1,be(a)}}}function Jt(n){let e;function t(i,r){return i[0]?Kt:Wt}let l=t(n),s=l(n);return{c(){s.c(),e=le()},l(i){s.l(i),e=le()},m(i,r){s.m(i,r),L(i,e,r)},p(i,r){l===(l=t(i))&&s?s.p(i,r):(s.d(1),s=l(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&k(e),s.d(i)}}}function Qt(n){let e,t,l;function s(r){n[5](r)}let i={$$slots:{default:[Jt]},$$scope:{ctx:n}};return n[1]!==void 0&&(i.dialog=n[1]),e=new Ye({props:i}),fe.push(()=>ge(e,"dialog",s)),e.$on("close",n[6]),{c(){J(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,o){Z(e,r,o),l=!0},p(r,[o]){const u={};o&133&&(u.$$scope={dirty:o,ctx:r}),!t&&o&2&&(t=!0,u.dialog=r[1],pe(()=>t=!1)),e.$set(u)},i(r){l||(A(e.$$.fragment,r),l=!0)},o(r){Y(e.$$.fragment,r),l=!1},d(r){ee(e,r)}}}function Zt(n,e,t){let l;de(n,$e,f=>t(2,l=f));let{link:s}=e,{dialog:i}=e;function r(){!l&&s&&confirm("Are you sure you want to delete this link?")&&(G.deleteLink(s.id),i.close())}function o(){s.bandwidth=ce(this.value),t(0,s)}function u(f){i=f,t(1,i)}const d=()=>{G.notify()};return n.$$set=f=>{"link"in f&&t(0,s=f.link),"dialog"in f&&t(1,i=f.dialog)},[s,i,l,r,o,u,d]}class en extends ue{constructor(e){super(),ae(this,e,Zt,Qt,re,{link:0,dialog:1})}}function nt(n){let e,t="Loading...";return{c(){e=T("p"),e.textContent=t,this.h()},l(l){e=R(l,"P",{style:!0,"data-svelte-h":!0}),W(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){ze(e,"font-size","200px")},m(l,s){L(l,e,s)},d(l){l&&k(e)}}}function lt(n){let e,t,l,s,i;return{c(){e=Le("line"),this.h()},l(r){e=Ce(r,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),U(e).forEach(k),this.h()},h(){m(e,"x1",t=n[3].node.x),m(e,"y1",l=n[3].node.y),m(e,"x2",s=n[17](n[1].x)),m(e,"y2",i=n[18](n[1].y))},m(r,o){L(r,e,o)},p(r,o){o[0]&8&&t!==(t=r[3].node.x)&&m(e,"x1",t),o[0]&8&&l!==(l=r[3].node.y)&&m(e,"y1",l),o[0]&2&&s!==(s=r[17](r[1].x))&&m(e,"x2",s),o[0]&2&&i!==(i=r[18](r[1].y))&&m(e,"y2",i)},d(r){r&&k(e)}}}function tn(n){let e,t,l,s,i,r,o,u,d,f,_,a,g,p,h,B,c=!n[8]&&nt(),v=!n[9]&&n[5]===n[10].CONNECTING&&n[3]&&lt(n);const x=n[21].default,z=mt(x,n,n[20],null);function N(b){n[24](b)}function E(b){n[25](b)}let C={};n[3]!==void 0&&(C.router=n[3]),n[6]!==void 0&&(C.dialog=n[6]),o=new Gt({props:C}),fe.push(()=>ge(o,"router",N)),fe.push(()=>ge(o,"dialog",E));function P(b){n[26](b)}function $(b){n[27](b)}let q={};return n[4]!==void 0&&(q.link=n[4]),n[7]!==void 0&&(q.dialog=n[7]),_=new en({props:q}),fe.push(()=>ge(_,"link",P)),fe.push(()=>ge(_,"dialog",$)),{c(){c&&c.c(),e=M(),t=Le("svg"),v&&v.c(),l=le(),z&&z.c(),r=M(),J(o.$$.fragment),f=M(),J(_.$$.fragment),this.h()},l(b){c&&c.l(b),e=H(b),t=Ce(b,"svg",{viewBox:!0,role:!0,tabindex:!0,style:!0,class:!0});var y=U(t);v&&v.l(y),l=le(),z&&z.l(y),y.forEach(k),r=H(b),Q(o.$$.fragment,b),f=H(b),Q(_.$$.fragment,b),this.h()},h(){m(t,"viewBox",s=`${n[0].x} ${n[0].y} ${n[0].width} ${n[0].height}`),m(t,"role","button"),m(t,"tabindex","-1"),m(t,"style",i=`cursor: ${n[9]?"default":n[11][n[5]]};`),m(t,"class","svelte-1cmb9l6")},m(b,y){c&&c.m(b,y),L(b,e,y),L(b,t,y),v&&v.m(t,null),I(t,l),z&&z.m(t,null),n[23](t),L(b,r,y),Z(o,b,y),L(b,f,y),Z(_,b,y),p=!0,h||(B=[X(t,"pointerdown",n[12]),X(t,"pointerup",n[13]),X(t,"wheel",n[14]),X(t,"dblclick",n[15]),X(t,"dragover",Bt(n[22])),X(t,"drop",n[16])],h=!0)},p(b,y){b[8]?c&&(c.d(1),c=null):c||(c=nt(),c.c(),c.m(e.parentNode,e)),!b[9]&&b[5]===b[10].CONNECTING&&b[3]?v?v.p(b,y):(v=lt(b),v.c(),v.m(t,l)):v&&(v.d(1),v=null),z&&z.p&&(!p||y[0]&1048576)&&kt(z,x,b,b[20],p?yt(x,b[20],y,null):vt(b[20]),null),(!p||y[0]&1&&s!==(s=`${b[0].x} ${b[0].y} ${b[0].width} ${b[0].height}`))&&m(t,"viewBox",s),(!p||y[0]&544&&i!==(i=`cursor: ${b[9]?"default":b[11][b[5]]};`))&&m(t,"style",i);const O={};!u&&y[0]&8&&(u=!0,O.router=b[3],pe(()=>u=!1)),!d&&y[0]&64&&(d=!0,O.dialog=b[6],pe(()=>d=!1)),o.$set(O);const D={};!a&&y[0]&16&&(a=!0,D.link=b[4],pe(()=>a=!1)),!g&&y[0]&128&&(g=!0,D.dialog=b[7],pe(()=>g=!1)),_.$set(D)},i(b){p||(A(z,b),A(o.$$.fragment,b),A(_.$$.fragment,b),p=!0)},o(b){Y(z,b),Y(o.$$.fragment,b),Y(_.$$.fragment,b),p=!1},d(b){b&&(k(e),k(t),k(r),k(f)),c&&c.d(b),v&&v.d(),z&&z.d(b),n[23](null),ee(o,b),ee(_,b),h=!1,be(B)}}}function nn(n,e,t){let l;de(n,$e,w=>t(9,l=w));let{$$slots:s={},$$scope:i}=e;var r=(w=>(w[w.NONE=0]="NONE",w[w.DRAGGING=1]="DRAGGING",w[w.PANNING=2]="PANNING",w[w.CONNECTING=3]="CONNECTING",w))(r||{});const o={x:0,y:0,width:0,height:0,get scale(){return _?this.width/_.getBoundingClientRect().width:1}},u={x:0,y:0},d={x:0,y:0},f={0:"move",1:"grabbing",2:"grabbing",3:"crosshair"};let _=null,a=null,g=null,p=0,h,B,c=!1;Et(()=>{if(!_)return;new ResizeObserver(v).observe(_),requestAnimationFrame(()=>{_&&(t(0,o.x=_.getBoundingClientRect().width/-2,o),t(0,o.y=_.getBoundingClientRect().height/-2,o))}),t(8,c=!0)});function v(){if(!_)return;const w=o.scale||1;t(0,o.width=_.getBoundingClientRect().width*w,o),t(0,o.height=_.getBoundingClientRect().height*w,o)}function x(w){if(!(w.target instanceof Element))return;w.preventDefault(),_==null||_.addEventListener("pointermove",N),_==null||_.setPointerCapture(w.pointerId);const S=w.target.id;if(S){if(t(3,a=G.getRouter(parseInt(S))||null),!a)return;w.shiftKey?t(5,p=3):(d.x=a.node.x,d.y=a.node.y,t(5,p=1))}else t(5,p=2);t(1,u.x=w.clientX,u),t(1,u.y=w.clientY,u)}function z(w){if(w.target instanceof Element){if(w.preventDefault(),!l&&p===3&&a){const S=document.elementFromPoint(w.clientX,w.clientY),_e=(S==null?void 0:S.tagName)==="circle"?S.id:null,Ne=G.getRouter(parseInt(_e??""));Ne&&G.addLink({source:a,target:Ne})}t(5,p=0),t(3,a=null),_==null||_.releasePointerCapture(w.pointerId),_==null||_.removeEventListener("pointermove",N)}}function N(w){w.preventDefault();const S={x:(w.clientX-u.x)*o.scale,y:(w.clientY-u.y)*o.scale};!l&&p===1&&a?(t(3,a.node.x=d.x+S.x,a),t(3,a.node.y=d.y+S.y,a),G.notify()):p===2?(t(1,u.x=w.clientX,u),t(1,u.y=w.clientY,u),t(0,o.x-=S.x,o),t(0,o.y-=S.y,o)):!l&&p===3&&(t(1,u.x=w.clientX,u),t(1,u.y=w.clientY,u))}function E(w){w.preventDefault(),t(1,u.x=w.clientX,u),t(1,u.y=w.clientY,u);const S=w.deltaY>0?1.025:.975;C(S,u)}function C(w,S){if(!_||o.scale<.1&&w<1||o.scale>5&&w>1)return;const _e=_.getBoundingClientRect(),Ne={x:(S.x-_e.left)/_e.width,y:(S.y-_e.top)/_e.height};t(0,o.x-=o.width*(w-1)*Ne.x,o),t(0,o.y-=o.height*(w-1)*Ne.y,o),t(0,o.width*=w,o),t(0,o.height*=w,o)}function P(w){if(!(w.target instanceof Element))return;w.preventDefault();const S=document.elementFromPoint(w.clientX,w.clientY);S&&(S.tagName==="circle"?$(S.id):S.tagName==="rect"&&q(S.id))}function $(w){const S=G.getRouter(parseInt(w));S&&(t(3,a=S),h.showModal())}function q(w){const S=G.links.find(_e=>w===_e.id);S&&(t(4,g=S),B.showModal())}function b(w){var _e;switch(w.preventDefault(),(_e=w.dataTransfer)==null?void 0:_e.getData("text/plain")){case"CE":G.createCE(y(w.clientX),O(w.clientY));break;case"LER":G.createLER(y(w.clientX),O(w.clientY));break;case"LSR":G.createLSR(y(w.clientX),O(w.clientY));break}}function y(w){return _?(w-_.getBoundingClientRect().left)*o.scale+o.x:w}function O(w){return _?(w-_.getBoundingClientRect().top)*o.scale+o.y:w}function D(w){wt.call(this,n,w)}function te(w){fe[w?"unshift":"push"](()=>{_=w,t(2,_)})}function me(w){a=w,t(3,a)}function F(w){h=w,t(6,h)}function V(w){g=w,t(4,g)}function he(w){B=w,t(7,B)}return n.$$set=w=>{"$$scope"in w&&t(20,i=w.$$scope)},[o,u,_,a,g,p,h,B,c,l,r,f,x,z,E,P,b,y,O,C,i,s,D,te,me,F,V,he]}class ln extends ue{constructor(e){super(),ae(this,e,nn,tn,re,{zoom:19},null,[-1,-1])}get zoom(){return this.$$.ctx[19]}}function sn(n){let e,t,l,s;return{c(){e=T("button"),t=se(n[0]),this.h()},l(i){e=R(i,"BUTTON",{style:!0,class:!0});var r=U(e);t=oe(r,n[0]),r.forEach(k),this.h()},h(){m(e,"style",n[2]),m(e,"class","svelte-1aag39e")},m(i,r){L(i,e,r),I(e,t),l||(s=X(e,"click",function(){Pe(n[1])&&n[1].apply(this,arguments)}),l=!0)},p(i,[r]){n=i,r&1&&ve(t,n[0]),r&4&&m(e,"style",n[2])},i:ie,o:ie,d(i){i&&k(e),l=!1,s()}}}function on(n,e,t){let{text:l}=e,{callback:s=()=>{}}=e,{style:i=void 0}=e;return n.$$set=r=>{"text"in r&&t(0,l=r.text),"callback"in r&&t(1,s=r.callback),"style"in r&&t(2,i=r.style)},[l,s,i]}class Ie extends ue{constructor(e){super(),ae(this,e,on,sn,re,{text:0,callback:1,style:2})}}function it(n,e,t){const l=n.slice();return l[12]=e[t],l}function st(n){let e,t;const l=[n[12],{style:"padding: 10px 20px"}];let s={};for(let i=0;i<l.length;i+=1)s=Oe(s,l[i]);return e=new Ie({props:s}),{c(){J(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,r){Z(e,i,r),t=!0},p(i,r){const o=r&32?Ae(l,[Se(i[12]),l[1]]):{};e.$set(o)},i(i){t||(A(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){ee(e,i)}}}function rn(n){let e,t,l,s,i,r,o,u,d,f,_,a=n[1].speedMultiplier+"",g,p,h,B,c,v,x,z=ne(n[5]),N=[];for(let C=0;C<z.length;C+=1)N[C]=st(it(n,z,C));const E=C=>Y(N[C],1,1,()=>{N[C]=null});return{c(){e=T("div"),t=T("div"),s=M(),i=T("div"),r=T("div"),o=T("div");for(let C=0;C<N.length;C+=1)N[C].c();u=M(),d=T("div"),f=T("p"),_=se("Speed Multiplier: "),g=se(a),p=M(),h=T("input"),this.h()},l(C){e=R(C,"DIV",{id:!0,style:!0,class:!0});var P=U(e);t=R(P,"DIV",{id:!0,class:!0}),U(t).forEach(k),P.forEach(k),s=H(C),i=R(C,"DIV",{id:!0,style:!0,class:!0});var $=U(i);r=R($,"DIV",{id:!0,class:!0});var q=U(r);o=R(q,"DIV",{id:!0,class:!0});var b=U(o);for(let D=0;D<N.length;D+=1)N[D].l(b);b.forEach(k),u=H(q),d=R(q,"DIV",{id:!0,class:!0});var y=U(d);f=R(y,"P",{});var O=U(f);_=oe(O,"Speed Multiplier: "),g=oe(O,a),O.forEach(k),p=H(y),h=R(y,"INPUT",{type:!0,min:!0,max:!0,step:!0}),y.forEach(k),q.forEach(k),$.forEach(k),this.h()},h(){m(t,"id","resize-bar"),m(t,"class","svelte-1nn6egr"),m(e,"id","visual-resize-bar"),m(e,"style",l=`width: ${n[0]?1:0}px`),m(e,"class","svelte-1nn6egr"),m(o,"id","control-panel-buttons"),m(o,"class","svelte-1nn6egr"),m(h,"type","range"),m(h,"min","0.1"),m(h,"max","2"),m(h,"step","0.1"),m(d,"id","slider"),m(d,"class","svelte-1nn6egr"),m(r,"id","inside-test"),m(r,"class","svelte-1nn6egr"),m(i,"id","control-panel"),m(i,"style",B=`width: ${n[4]}px; transition: ${n[3]};`),m(i,"class","svelte-1nn6egr")},m(C,P){L(C,e,P),I(e,t),n[8](t),L(C,s,P),L(C,i,P),I(i,r),I(r,o);for(let $=0;$<N.length;$+=1)N[$]&&N[$].m(o,null);I(r,u),I(r,d),I(d,f),I(f,_),I(f,g),I(d,p),I(d,h),K(h,n[1].speedMultiplier),c=!0,v||(x=[X(t,"pointerdown",n[6]),X(h,"change",n[9]),X(h,"input",n[9])],v=!0)},p(C,[P]){if((!c||P&1&&l!==(l=`width: ${C[0]?1:0}px`))&&m(e,"style",l),P&32){z=ne(C[5]);let $;for($=0;$<z.length;$+=1){const q=it(C,z,$);N[$]?(N[$].p(q,P),A(N[$],1)):(N[$]=st(q),N[$].c(),A(N[$],1),N[$].m(o,null))}for(we(),$=z.length;$<N.length;$+=1)E($);Ee()}(!c||P&2)&&a!==(a=C[1].speedMultiplier+"")&&ve(g,a),P&2&&K(h,C[1].speedMultiplier),(!c||P&24&&B!==(B=`width: ${C[4]}px; transition: ${C[3]};`))&&m(i,"style",B)},i(C){if(!c){for(let P=0;P<z.length;P+=1)A(N[P]);c=!0}},o(C){N=N.filter(Boolean);for(let P=0;P<N.length;P+=1)Y(N[P]);c=!1},d(C){C&&(k(e),k(s),k(i)),n[8](null),Be(N,C),v=!1,be(x)}}}function un(n,e,t){let l,s,i,r,o;de(n,$e,h=>t(0,i=h)),de(n,G,h=>t(7,r=h)),de(n,Re,h=>t(1,o=h));let u,d="width 250ms";function f(h){i&&(t(3,d="none"),u.setPointerCapture(h.pointerId),u.addEventListener("pointermove",_),u.addEventListener("pointerup",a))}function _(h){t(4,s=window.innerWidth-h.clientX),s<=20&&t(4,s=0),s>=window.innerWidth-20&&t(4,s=window.innerWidth-20)}function a(h){u.removeEventListener("pointermove",_),u.removeEventListener("pointerup",a),u.releasePointerCapture(h.pointerId),t(3,d="width 250ms")}function g(h){fe[h?"unshift":"push"](()=>{u=h,t(2,u)})}function p(){o.speedMultiplier=ce(this.value),Re.set(o)}return n.$$.update=()=>{n.$$.dirty&130&&t(5,l=[{text:o.running?"Pause":"Resume",callback:()=>{Ue(Re,o.running=!o.running,o)}},{text:"Reset",callback:()=>{G.clearPackets()}},{text:"Test",callback:()=>{const h=r.routers.filter(B=>B instanceof ke);G.addPacket(h[0],h[1])}}]),n.$$.dirty&1&&t(4,s=i?300:0)},[i,o,u,d,s,l,f,r,g,p]}class an extends ue{constructor(e){super(),ae(this,e,un,rn,re,{})}}function fn(n){let e;return{c(){e=Le("circle"),this.h()},l(t){e=Ce(t,"circle",{r:!0,class:!0}),U(e).forEach(k),this.h()},h(){m(e,"r","5"),m(e,"class","svelte-1wnohjk")},m(t,l){L(t,e,l),n[4](e)},p:ie,i:ie,o:ie,d(t){t&&k(e),n[4](null)}}}function cn(n,e,t){let l;de(n,Re,a=>t(3,l=a));let{packet:s}=e,i,r,o;function u(){const a=Math.sqrt((s.node.x-s.nextHop.node.x)**2+(s.node.y-s.nextHop.node.y)**2);i=Math.round(a/250*1e3)}function d(){u(),o&&(t(2,r=o.animate([{transform:`translate(${s.node.x}px, ${s.node.y}px)`},{transform:`translate(${s.nextHop.node.x}px, ${s.nextHop.node.y}px)`}],{duration:i,easing:"linear"})),t(2,r.onfinish=f,r))}function f(){t(1,s.node=s.nextHop.node,s),s.nextHop.receivePacket(s),d()}requestAnimationFrame(d);function _(a){fe[a?"unshift":"push"](()=>{o=a,t(0,o)})}return n.$$set=a=>{"packet"in a&&t(1,s=a.packet)},n.$$.update=()=>{n.$$.dirty&12&&r&&t(2,r.playbackRate=l.speedMultiplier,r),n.$$.dirty&12&&r&&(l.running?r.play():r.pause())},[o,s,r,l,_]}class dn extends ue{constructor(e){super(),ae(this,e,cn,fn,re,{packet:1})}}function hn(n){let e,t,l,s,i,r,o,u,d=n[0].distance+"",f,_,a,g;return{c(){e=Le("line"),t=M(),l=Le("rect"),o=M(),u=Le("text"),f=se(d),_=se(" km"),this.h()},l(p){e=Ce(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),U(e).forEach(k),t=H(p),l=Ce(p,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),U(l).forEach(k),o=H(p),u=Ce(p,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var h=U(u);f=oe(h,d),_=oe(h," km"),h.forEach(k),this.h()},h(){m(e,"x1",n[4]),m(e,"y1",n[2]),m(e,"x2",n[3]),m(e,"y2",n[1]),m(l,"id",s=n[0].id),m(l,"x",i=n[5].x-He/2),m(l,"y",r=n[5].y-Fe/2),m(l,"width",He),m(l,"height",Fe),m(l,"class","svelte-zjn2k6"),m(u,"x",a=n[5].x),m(u,"y",g=n[5].y),m(u,"dominant-baseline","central"),m(u,"class","svelte-zjn2k6")},m(p,h){L(p,e,h),L(p,t,h),L(p,l,h),L(p,o,h),L(p,u,h),I(u,f),I(u,_)},p(p,[h]){h&16&&m(e,"x1",p[4]),h&4&&m(e,"y1",p[2]),h&8&&m(e,"x2",p[3]),h&2&&m(e,"y2",p[1]),h&1&&s!==(s=p[0].id)&&m(l,"id",s),h&32&&i!==(i=p[5].x-He/2)&&m(l,"x",i),h&32&&r!==(r=p[5].y-Fe/2)&&m(l,"y",r),h&1&&d!==(d=p[0].distance+"")&&ve(f,d),h&32&&a!==(a=p[5].x)&&m(u,"x",a),h&32&&g!==(g=p[5].y)&&m(u,"y",g)},i:ie,o:ie,d(p){p&&(k(e),k(t),k(l),k(o),k(u))}}}const He=50,Fe=20;function ot(n,e){return(n+e)/2}function _n(n,e,t){let l,s,i,r,o,{link:u}=e;return n.$$set=d=>{"link"in d&&t(0,u=d.link)},n.$$.update=()=>{n.$$.dirty&1&&t(4,l=u.source.node.x),n.$$.dirty&1&&t(3,s=u.target.node.x),n.$$.dirty&1&&t(2,i=u.source.node.y),n.$$.dirty&1&&t(1,r=u.target.node.y),n.$$.dirty&30&&t(5,o={x:ot(l,s),y:ot(i,r)})},[u,r,i,s,l,o]}class pn extends ue{constructor(e){super(),ae(this,e,_n,hn,re,{link:0})}}function gn(n){let e,t,l,s,i,r,o,u=n[0].node.label+"",d,f,_;return{c(){e=Le("circle"),r=M(),o=Le("text"),d=se(u),this.h()},l(a){e=Ce(a,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),U(e).forEach(k),r=H(a),o=Ce(a,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var g=U(o);d=oe(g,u),g.forEach(k),this.h()},h(){m(e,"id",t=n[0].id.toString()),m(e,"cx",l=n[0].node.x),m(e,"cy",s=n[0].node.y),m(e,"r","20"),m(e,"fill",i=n[1][n[0].type]),m(e,"class","svelte-17jcsko"),m(o,"x",f=n[0].node.x),m(o,"y",_=n[0].node.y),m(o,"dominant-baseline","central"),m(o,"class","svelte-17jcsko")},m(a,g){L(a,e,g),L(a,r,g),L(a,o,g),I(o,d)},p(a,[g]){g&1&&t!==(t=a[0].id.toString())&&m(e,"id",t),g&1&&l!==(l=a[0].node.x)&&m(e,"cx",l),g&1&&s!==(s=a[0].node.y)&&m(e,"cy",s),g&1&&i!==(i=a[1][a[0].type])&&m(e,"fill",i),g&1&&u!==(u=a[0].node.label+"")&&ve(d,u),g&1&&f!==(f=a[0].node.x)&&m(o,"x",f),g&1&&_!==(_=a[0].node.y)&&m(o,"y",_)},i:ie,o:ie,d(a){a&&(k(e),k(r),k(o))}}}function bn(n,e,t){let{router:l}=e;const s={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return n.$$set=i=>{"router"in i&&t(0,l=i.router)},[l,s]}class mn extends ue{constructor(e){super(),ae(this,e,bn,gn,re,{router:0})}}function kn(n){let e,t,l,s;return{c(){e=T("div"),t=se(n[0]),this.h()},l(i){e=R(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var r=U(e);t=oe(r,n[0]),r.forEach(k),this.h()},h(){m(e,"draggable","true"),m(e,"role","button"),m(e,"tabindex","-1"),ze(e,"background-color",n[1]),m(e,"class","svelte-blffat")},m(i,r){L(i,e,r),I(e,t),l||(s=X(e,"dragstart",n[2]),l=!0)},p(i,[r]){r&1&&ve(t,i[0]),r&2&&ze(e,"background-color",i[1])},i:ie,o:ie,d(i){i&&k(e),l=!1,s()}}}function vn(n,e,t){let l;de(n,$e,u=>t(4,l=u));let{text:s}=e,{type:i}=e,{color:r}=e;function o(u){var d;if(l){alert("Network is locked.");return}(d=u.dataTransfer)==null||d.setData("text/plain",i)}return n.$$set=u=>{"text"in u&&t(0,s=u.text),"type"in u&&t(3,i=u.type),"color"in u&&t(1,r=u.color)},[s,r,o,i]}class yn extends ue{constructor(e){super(),ae(this,e,vn,kn,re,{text:0,type:3,color:1})}}function rt(n,e,t){const l=n.slice();return l[4]=e[t],l}function ut(n,e,t){const l=n.slice();return l[7]=e[t],l}function at(n){let e,t,l,s=ne(n[2]),i=[];for(let f=0;f<s.length;f+=1)i[f]=ft(ut(n,s,f));const r=f=>Y(i[f],1,1,()=>{i[f]=null});let o=ne(n[1]),u=[];for(let f=0;f<o.length;f+=1)u[f]=ct(rt(n,o,f));const d=f=>Y(u[f],1,1,()=>{u[f]=null});return{c(){for(let f=0;f<i.length;f+=1)i[f].c();e=M();for(let f=0;f<u.length;f+=1)u[f].c();t=le()},l(f){for(let _=0;_<i.length;_+=1)i[_].l(f);e=H(f);for(let _=0;_<u.length;_+=1)u[_].l(f);t=le()},m(f,_){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(f,_);L(f,e,_);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(f,_);L(f,t,_),l=!0},p(f,_){if(_&4){s=ne(f[2]);let a;for(a=0;a<s.length;a+=1){const g=ut(f,s,a);i[a]?(i[a].p(g,_),A(i[a],1)):(i[a]=ft(g),i[a].c(),A(i[a],1),i[a].m(e.parentNode,e))}for(we(),a=s.length;a<i.length;a+=1)r(a);Ee()}if(_&2){o=ne(f[1]);let a;for(a=0;a<o.length;a+=1){const g=rt(f,o,a);u[a]?(u[a].p(g,_),A(u[a],1)):(u[a]=ct(g),u[a].c(),A(u[a],1),u[a].m(t.parentNode,t))}for(we(),a=o.length;a<u.length;a+=1)d(a);Ee()}},i(f){if(!l){for(let _=0;_<s.length;_+=1)A(i[_]);for(let _=0;_<o.length;_+=1)A(u[_]);l=!0}},o(f){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)Y(i[_]);u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)Y(u[_]);l=!1},d(f){f&&(k(e),k(t)),Be(i,f),Be(u,f)}}}function ft(n){let e,t;const l=[n[7]];let s={};for(let i=0;i<l.length;i+=1)s=Oe(s,l[i]);return e=new yn({props:s}),{c(){J(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,r){Z(e,i,r),t=!0},p(i,r){const o=r&4?Ae(l,[Se(i[7])]):{};e.$set(o)},i(i){t||(A(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){ee(e,i)}}}function ct(n){let e,t;const l=[n[4]];let s={};for(let i=0;i<l.length;i+=1)s=Oe(s,l[i]);return e=new Ie({props:s}),{c(){J(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,r){Z(e,i,r),t=!0},p(i,r){const o=r&2?Ae(l,[Se(i[4])]):{};e.$set(o)},i(i){t||(A(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){ee(e,i)}}}function wn(n){let e,t,l,s;e=new Ie({props:{text:n[0]?"Edit":"Simulation",callback:n[3],style:`width: 100px; background-color: ${n[0]?"#3CB371 ":"#6495ED "};`}});let i=!n[0]&&at(n);return{c(){J(e.$$.fragment),t=M(),i&&i.c(),l=le()},l(r){Q(e.$$.fragment,r),t=H(r),i&&i.l(r),l=le()},m(r,o){Z(e,r,o),L(r,t,o),i&&i.m(r,o),L(r,l,o),s=!0},p(r,[o]){const u={};o&1&&(u.text=r[0]?"Edit":"Simulation"),o&1&&(u.callback=r[3]),o&1&&(u.style=`width: 100px; background-color: ${r[0]?"#3CB371 ":"#6495ED "};`),e.$set(u),r[0]?i&&(we(),Y(i,1,1,()=>{i=null}),Ee()):i?(i.p(r,o),o&1&&A(i,1)):(i=at(r),i.c(),A(i,1),i.m(l.parentNode,l))},i(r){s||(A(e.$$.fragment,r),A(i),s=!0)},o(r){Y(e.$$.fragment,r),Y(i),s=!1},d(r){r&&(k(t),k(l)),ee(e,r),i&&i.d(r)}}}function En(n,e,t){let l,s;de(n,$e,o=>t(0,s=o));const i=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],r=()=>{Ue($e,s=!s,s)};return n.$$.update=()=>{n.$$.dirty&1&&t(1,l=[{text:"Clear",callback:()=>{if(s){alert("Network is locked.");return}confirm("Are you sure you want to clear the network?")&&G.clear()}}])},[s,l,i,r]}class Ln extends ue{constructor(e){super(),ae(this,e,En,wn,re,{})}}function Cn(n){let e,t="Drag and drop routers that to add them to the network.",l,s,i="Hold the shift key and drag routers to make links.",r,o,u="Double click a router to configure it.",d,f,_="The clear button will delete the entire network.",a,g,p,h,B="Press Esc to close this popup.";return{c(){e=T("p"),e.textContent=t,l=M(),s=T("p"),s.textContent=i,r=M(),o=T("p"),o.textContent=u,d=M(),f=T("p"),f.textContent=_,a=M(),g=T("br"),p=M(),h=T("p"),h.textContent=B},l(c){e=R(c,"P",{"data-svelte-h":!0}),W(e)!=="svelte-2wnqpf"&&(e.textContent=t),l=H(c),s=R(c,"P",{"data-svelte-h":!0}),W(s)!=="svelte-ddjc2m"&&(s.textContent=i),r=H(c),o=R(c,"P",{"data-svelte-h":!0}),W(o)!=="svelte-11scjjz"&&(o.textContent=u),d=H(c),f=R(c,"P",{"data-svelte-h":!0}),W(f)!=="svelte-vcl8s3"&&(f.textContent=_),a=H(c),g=R(c,"BR",{}),p=H(c),h=R(c,"P",{"data-svelte-h":!0}),W(h)!=="svelte-1dvt5v1"&&(h.textContent=B)},m(c,v){L(c,e,v),L(c,l,v),L(c,s,v),L(c,r,v),L(c,o,v),L(c,d,v),L(c,f,v),L(c,a,v),L(c,g,v),L(c,p,v),L(c,h,v)},p:ie,d(c){c&&(k(e),k(l),k(s),k(r),k(o),k(d),k(f),k(a),k(g),k(p),k(h))}}}function In(n){let e,t,l,s,i,r;t=new Ie({props:{text:"Help",callback:n[1]}});function o(d){n[2](d)}let u={$$slots:{default:[Cn]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dialog=n[0]),s=new Ye({props:u}),fe.push(()=>ge(s,"dialog",o)),{c(){e=T("div"),J(t.$$.fragment),l=M(),J(s.$$.fragment)},l(d){e=R(d,"DIV",{});var f=U(e);Q(t.$$.fragment,f),f.forEach(k),l=H(d),Q(s.$$.fragment,d)},m(d,f){L(d,e,f),Z(t,e,null),L(d,l,f),Z(s,d,f),r=!0},p(d,[f]){const _={};f&1&&(_.callback=d[1]),t.$set(_);const a={};f&8&&(a.$$scope={dirty:f,ctx:d}),!i&&f&1&&(i=!0,a.dialog=d[0],pe(()=>i=!1)),s.$set(a)},i(d){r||(A(t.$$.fragment,d),A(s.$$.fragment,d),r=!0)},o(d){Y(t.$$.fragment,d),Y(s.$$.fragment,d),r=!1},d(d){d&&(k(e),k(l)),ee(t),ee(s,d)}}}function Bn(n,e,t){let l;const s=()=>{l.showModal()};function i(r){l=r,t(0,l)}return[l,s,i]}class $n extends ue{constructor(e){super(),ae(this,e,Bn,In,re,{})}}function Tn(n){let e,t,l,s,i,r;return e=new Ie({props:{text:" - ",callback:n[1]}}),l=new Ie({props:{text:"Fullscreen",callback:n[2]}}),i=new Ie({props:{text:" + ",callback:n[3]}}),{c(){J(e.$$.fragment),t=M(),J(l.$$.fragment),s=M(),J(i.$$.fragment)},l(o){Q(e.$$.fragment,o),t=H(o),Q(l.$$.fragment,o),s=H(o),Q(i.$$.fragment,o)},m(o,u){Z(e,o,u),L(o,t,u),Z(l,o,u),L(o,s,u),Z(i,o,u),r=!0},p(o,[u]){const d={};u&1&&(d.callback=o[1]),e.$set(d);const f={};u&1&&(f.callback=o[3]),i.$set(f)},i(o){r||(A(e.$$.fragment,o),A(l.$$.fragment,o),A(i.$$.fragment,o),r=!0)},o(o){Y(e.$$.fragment,o),Y(l.$$.fragment,o),Y(i.$$.fragment,o),r=!1},d(o){o&&(k(t),k(s)),ee(e,o),ee(l,o),ee(i,o)}}}function Rn(n,e,t){let{zoom:l}=e;const s=()=>{const o={x:window.innerWidth/2,y:window.innerHeight/2};l(1.1,o)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},r=()=>{const o={x:window.innerWidth/2,y:window.innerHeight/2};l(.9,o)};return n.$$set=o=>{"zoom"in o&&t(0,l=o.zoom)},[l,s,i,r]}class Nn extends ue{constructor(e){super(),ae(this,e,Rn,Tn,re,{zoom:0})}}function dt(n,e,t){const l=n.slice();return l[5]=e[t],l}function ht(n,e,t){const l=n.slice();return l[8]=e[t],l}function _t(n,e,t){const l=n.slice();return l[11]=e[t],l}function pt(n,e){let t,l,s;return l=new pn({props:{link:e[11]}}),{key:n,first:null,c(){t=le(),J(l.$$.fragment),this.h()},l(i){t=le(),Q(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){L(i,t,r),Z(l,i,r),s=!0},p(i,r){e=i;const o={};r&2&&(o.link=e[11]),l.$set(o)},i(i){s||(A(l.$$.fragment,i),s=!0)},o(i){Y(l.$$.fragment,i),s=!1},d(i){i&&k(t),ee(l,i)}}}function gt(n,e){let t,l,s;return l=new mn({props:{router:e[8]}}),{key:n,first:null,c(){t=le(),J(l.$$.fragment),this.h()},l(i){t=le(),Q(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){L(i,t,r),Z(l,i,r),s=!0},p(i,r){e=i;const o={};r&2&&(o.router=e[8]),l.$set(o)},i(i){s||(A(l.$$.fragment,i),s=!0)},o(i){Y(l.$$.fragment,i),s=!1},d(i){i&&k(t),ee(l,i)}}}function bt(n,e){let t,l,s;return l=new dn({props:{packet:e[5]}}),{key:n,first:null,c(){t=le(),J(l.$$.fragment),this.h()},l(i){t=le(),Q(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){L(i,t,r),Z(l,i,r),s=!0},p(i,r){e=i;const o={};r&2&&(o.packet=e[5]),l.$set(o)},i(i){s||(A(l.$$.fragment,i),s=!0)},o(i){Y(l.$$.fragment,i),s=!1},d(i){i&&k(t),ee(l,i)}}}function Pn(n){let e=[],t=new Map,l,s=[],i=new Map,r,o=[],u=new Map,d,f,_=ne(n[1].links);const a=c=>c[11].id;for(let c=0;c<_.length;c+=1){let v=_t(n,_,c),x=a(v);t.set(x,e[c]=pt(x,v))}let g=ne(n[1].routers);const p=c=>c[8].id;for(let c=0;c<g.length;c+=1){let v=ht(n,g,c),x=p(v);i.set(x,s[c]=gt(x,v))}let h=ne(n[1].packets);const B=c=>c[5].id;for(let c=0;c<h.length;c+=1){let v=dt(n,h,c),x=B(v);u.set(x,o[c]=bt(x,v))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();l=M();for(let c=0;c<s.length;c+=1)s[c].c();r=M();for(let c=0;c<o.length;c+=1)o[c].c();d=le()},l(c){for(let v=0;v<e.length;v+=1)e[v].l(c);l=H(c);for(let v=0;v<s.length;v+=1)s[v].l(c);r=H(c);for(let v=0;v<o.length;v+=1)o[v].l(c);d=le()},m(c,v){for(let x=0;x<e.length;x+=1)e[x]&&e[x].m(c,v);L(c,l,v);for(let x=0;x<s.length;x+=1)s[x]&&s[x].m(c,v);L(c,r,v);for(let x=0;x<o.length;x+=1)o[x]&&o[x].m(c,v);L(c,d,v),f=!0},p(c,v){v&2&&(_=ne(c[1].links),we(),e=Me(e,v,a,1,c,_,t,l.parentNode,xe,pt,l,_t),Ee()),v&2&&(g=ne(c[1].routers),we(),s=Me(s,v,p,1,c,g,i,r.parentNode,xe,gt,r,ht),Ee()),v&2&&(h=ne(c[1].packets),we(),o=Me(o,v,B,1,c,h,u,d.parentNode,xe,bt,d,dt),Ee())},i(c){if(!f){for(let v=0;v<_.length;v+=1)A(e[v]);for(let v=0;v<g.length;v+=1)A(s[v]);for(let v=0;v<h.length;v+=1)A(o[v]);f=!0}},o(c){for(let v=0;v<e.length;v+=1)Y(e[v]);for(let v=0;v<s.length;v+=1)Y(s[v]);for(let v=0;v<o.length;v+=1)Y(o[v]);f=!1},d(c){c&&(k(l),k(r),k(d));for(let v=0;v<e.length;v+=1)e[v].d(c);for(let v=0;v<s.length;v+=1)s[v].d(c);for(let v=0;v<o.length;v+=1)o[v].d(c)}}}function Dn(n){let e,t,l,s,i,r,o,u,d,f,_,a,g,p,h,B,c;function v(E){n[2](E)}let x={$$slots:{default:[Pn]},$$scope:{ctx:n}};n[0]!==void 0&&(x.zoom=n[0]),l=new ln({props:x}),fe.push(()=>ge(l,"zoom",v)),o=new Ln({}),f=new $n({});function z(E){n[3](E)}let N={};return n[0]!==void 0&&(N.zoom=n[0]),g=new Nn({props:N}),fe.push(()=>ge(g,"zoom",z)),B=new an({}),{c(){e=T("div"),t=T("div"),J(l.$$.fragment),i=M(),r=T("div"),J(o.$$.fragment),u=M(),d=T("div"),J(f.$$.fragment),_=M(),a=T("div"),J(g.$$.fragment),h=M(),J(B.$$.fragment),this.h()},l(E){e=R(E,"DIV",{id:!0,class:!0});var C=U(e);t=R(C,"DIV",{id:!0,class:!0});var P=U(t);Q(l.$$.fragment,P),i=H(P),r=R(P,"DIV",{id:!0,class:!0});var $=U(r);Q(o.$$.fragment,$),$.forEach(k),u=H(P),d=R(P,"DIV",{id:!0,class:!0});var q=U(d);Q(f.$$.fragment,q),q.forEach(k),_=H(P),a=R(P,"DIV",{id:!0,class:!0});var b=U(a);Q(g.$$.fragment,b),b.forEach(k),P.forEach(k),h=H(C),Q(B.$$.fragment,C),C.forEach(k),this.h()},h(){m(r,"id","top-left-bar"),m(r,"class","absolute-flex svelte-1kpnzxr"),m(d,"id","bottom-left-bar"),m(d,"class","absolute-flex svelte-1kpnzxr"),m(a,"id","bottom-right-bar"),m(a,"class","absolute-flex svelte-1kpnzxr"),m(t,"id","network"),m(t,"class","svelte-1kpnzxr"),m(e,"id","mpls"),m(e,"class","svelte-1kpnzxr")},m(E,C){L(E,e,C),I(e,t),Z(l,t,null),I(t,i),I(t,r),Z(o,r,null),I(t,u),I(t,d),Z(f,d,null),I(t,_),I(t,a),Z(g,a,null),I(e,h),Z(B,e,null),c=!0},p(E,[C]){const P={};C&16386&&(P.$$scope={dirty:C,ctx:E}),!s&&C&1&&(s=!0,P.zoom=E[0],pe(()=>s=!1)),l.$set(P);const $={};!p&&C&1&&(p=!0,$.zoom=E[0],pe(()=>p=!1)),g.$set($)},i(E){c||(A(l.$$.fragment,E),A(o.$$.fragment,E),A(f.$$.fragment,E),A(g.$$.fragment,E),A(B.$$.fragment,E),c=!0)},o(E){Y(l.$$.fragment,E),Y(o.$$.fragment,E),Y(f.$$.fragment,E),Y(g.$$.fragment,E),Y(B.$$.fragment,E),c=!1},d(E){E&&k(e),ee(l),ee(o),ee(f),ee(g),ee(B)}}}function xn(n,e,t){let l,s;de(n,Re,u=>t(4,l=u)),de(n,G,u=>t(1,s=u));let i;Et(()=>{window.addEventListener("visibilitychanged",()=>{Ue(Re,l.running=!document.hidden,l)})});function r(u){i=u,t(0,i)}function o(u){i=u,t(0,i)}return[i,s,r,o]}class Mn extends ue{constructor(e){super(),ae(this,e,xn,Dn,re,{})}}function Hn(n){let e,t;return e=new Mn({}),{c(){J(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p:ie,i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){Y(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}class Yn extends ue{constructor(e){super(),ae(this,e,null,Hn,re,{})}}export{Yn as component};
