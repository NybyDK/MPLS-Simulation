var ut=Object.defineProperty;var at=(l,e,t)=>e in l?ut(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var U=(l,e,t)=>(at(l,typeof e!="symbol"?e+"":e,t),t);import{s as ie,a as Ze,u as et,g as tt,b as nt,x as lt,e as fe,n as V,i as Re,r as ye,y as de,c as we,o as ft,z as ct,A as ot}from"../chunks/scheduler.C5v8YK5g.js";import{S as se,i as re,e as C,c as E,a as $,d as b,l as g,g as w,z as H,m as A,n as z,o as ae,A as K,s as N,B as Y,f as P,h as B,C as ge,D as S,E as he,v as ee,w as te,x as ne,y as le,r as Ee,p as Be,t as G,b as W,j as be,F as _e,G as pe,q as Te,H as dt}from"../chunks/index.quBbCW_3.js";import{w as it}from"../chunks/index.CD1dNpfE.js";function Z(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function st(l,e){const t={},n={},i={$$scope:1};let o=l.length;for(;o--;){const u=l[o],a=e[o];if(a){for(const r in u)r in a||(n[r]=1);for(const r in a)i[r]||(t[r]=a[r],i[r]=1);l[o]=a}else for(const r in u)i[r]=1}for(const u in n)u in t||(t[u]=void 0);return t}function rt(l){return typeof l=="object"&&l!==null?l:{}}let De=class{constructor(e,t){U(this,"labelSpace");U(this,"neighborRouters");this.id=e,this.node=t,this.labelSpace=new Map,this.neighborRouters=new Set}addNeighborRouter(e){this.neighborRouters.add(e)}sendPacket(e,t){for(const n of this.neighborRouters)if(n.node.label===t){n.processPacket(e);return}}};class me extends De{constructor(){super(...arguments);U(this,"FIB",new Map([["0",{label:0,nextHop:"0"}]]));U(this,"allowedConnections",["CE","LSR"]);U(this,"assignLabel",(t,n)=>{this.labelSpace.set(t,n)});U(this,"addEmptyEntry",()=>{this.FIB.set("0",{label:0,nextHop:"0"})});U(this,"updateAddress",(t,n)=>{const i=this.FIB.get(t);if(!i)throw new Error(`Unable to update old FIB address '${t}' to '${n}'.`);this.FIB.set(n,i),this.FIB.delete(t)});U(this,"deleteEntry",t=>{this.FIB.delete(t)});U(this,"advertiseInformation",(t,n,i)=>{for(const o of this.neighborRouters)o instanceof me&&o.receiveInformation(t,n,i)});U(this,"receiveInformation",(t,n,i)=>{this.FIB.set(t,{label:n,nextHop:i})});U(this,"processPacket",t=>{const n=this.FIB.get(t.destination);n&&(t.label=n.label,t.destination=n.nextHop,this.sendPacket(t,n.nextHop))})}get type(){return"LER"}}class ve extends De{constructor(){super(...arguments);U(this,"LIB",new Map([[0,{outgoingLabel:0,nextHop:"0"}]]));U(this,"allowedConnections",["LSR","LER"]);U(this,"addEmptyEntry",()=>{this.LIB.set(0,{outgoingLabel:0,nextHop:"0"})});U(this,"updateLabel",(t,n)=>{const i=this.LIB.get(t);if(!i)throw new Error(`Unable to update old LIB label '${t}' to '${n}'.`);this.LIB.set(n,i),this.LIB.delete(t)});U(this,"deleteEntry",t=>{this.LIB.delete(t)});U(this,"advertiseInformation",(t,n,i)=>{for(const o of this.neighborRouters)o instanceof ve&&o.receiveInformation(t,n,i)});U(this,"receiveInformation",(t,n,i)=>{this.LIB.set(t,{outgoingLabel:n,nextHop:i})});U(this,"processPacket",t=>{const n=this.LIB.get(t.label);n&&(t.destination=n.nextHop,t.label=n.outgoingLabel,this.sendPacket(t,t.destination))})}get type(){return"LSR"}}class Ie extends De{constructor(){super(...arguments);U(this,"flows",[]);U(this,"address",`${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}`);U(this,"nextHop");U(this,"allowedConnections",["LER"]);U(this,"addEmptyFlow",()=>{this.flows.push({size:0,destination:""})});U(this,"deleteFlow",t=>{this.flows.splice(t,1)});U(this,"processPacket",t=>{this.nextHop&&this.sendPacket(t,this.nextHop)})}get type(){return"CE"}}class ht{constructor(){U(this,"store",it({routers:[],connections:[]}));U(this,"set",this.store.set);U(this,"update",this.store.update);U(this,"subscribe",this.store.subscribe);U(this,"_routers",[]);U(this,"_connections",[]);U(this,"routerMap",new Map);U(this,"counter",0)}get routers(){return this._routers}get connections(){return this._connections}get networkState(){return{routers:this.routers,connections:this.connections}}addConnection(e){e.source!==e.target&&e.source.allowedConnections.includes(e.target.type)&&(this.doesConnectionExist(e)||this.doesConnectionExist({source:e.target,target:e.source})||(this._connections.push({id:`connection-${e.source.id}-${e.target.id}`,...e,bandwidth:0,distance:0,weight:0}),this.fastUpdate()))}deleteConnection(e){this._connections=this._connections.filter(t=>t.id!==e),this.fastUpdate()}doesConnectionExist(e){return this._connections.some(t=>t.source===e.source&&t.target===e.target)}createCE(e){const t=new Ie(this.counter++,e);this.addRouter(t)}createLER(e){const t=new me(this.counter++,e);this.addRouter(t)}createLSR(e){const t=new ve(this.counter++,e);this.addRouter(t)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),this.fastUpdate()}deleteRouter(e){this.getRouter(e)&&(this._routers=this._routers.filter(n=>n.id!==e),this._connections=this._connections.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),this.fastUpdate())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}clear(){this._routers=[],this._connections=[],this.routerMap.clear(),this.counter=0,this.fastUpdate()}fastUpdate(){this.store.set(this.networkState)}}const _t=new ht,J=_t,ke=it(!1);function pt(l){let e,t,n,i;const o=l[2].default,u=Ze(o,l,l[1],null);return{c(){e=C("dialog"),u&&u.c(),this.h()},l(a){e=E(a,"DIALOG",{class:!0});var r=$(e);u&&u.l(r),r.forEach(b),this.h()},h(){g(e,"class","svelte-414ocx")},m(a,r){w(a,e,r),u&&u.m(e,null),l[4](e),t=!0,n||(i=H(e,"close",l[3]),n=!0)},p(a,[r]){u&&u.p&&(!t||r&2)&&et(u,o,a,a[1],t?nt(o,a[1],r,null):tt(a[1]),null)},i(a){t||(A(u,a),t=!0)},o(a){z(u,a),t=!1},d(a){a&&b(e),u&&u.d(a),l[4](null),n=!1,i()}}}function gt(l,e,t){let{$$slots:n={},$$scope:i}=e,{dialog:o}=e;function u(r){lt.call(this,l,r)}function a(r){fe[r?"unshift":"push"](()=>{o=r,t(0,o)})}return l.$$set=r=>{"dialog"in r&&t(0,o=r.dialog),"$$scope"in r&&t(1,i=r.$$scope)},[o,i,n,u,a]}class Ue extends se{constructor(e){super(),re(this,e,gt,pt,ie,{dialog:0})}}function Me(l,e,t){const n=l.slice();return n[22]=e[t][0],n[19]=e[t][1],n[23]=e,n[24]=t,n}function He(l,e,t){const n=l.slice();return n[18]=e[t][0],n[19]=e[t][1],n[20]=e,n[21]=t,n}function Fe(l,e,t){const n=l.slice();return n[15]=e[t],n[16]=e,n[17]=t,n}function bt(l){let e,t="LIB:",n,i,o,u='<th class="svelte-71n8bk">Incoming</th> <th class="svelte-71n8bk">Outgoing</th> <th class="svelte-71n8bk">Next hop</th>',a,r,_,f="+",c,s,h=Z([...l[0].LIB]),m=[];for(let p=0;p<h.length;p+=1)m[p]=Ae(Me(l,h,p));return{c(){e=C("p"),e.textContent=t,n=N(),i=C("table"),o=C("tr"),o.innerHTML=u,a=N();for(let p=0;p<m.length;p+=1)m[p].c();r=N(),_=C("button"),_.textContent=f,this.h()},l(p){e=E(p,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-1j64kst"&&(e.textContent=t),n=P(p),i=E(p,"TABLE",{class:!0});var y=$(i);o=E(y,"TR",{"data-svelte-h":!0}),Y(o)!=="svelte-1nxelgl"&&(o.innerHTML=u),a=P(y);for(let d=0;d<m.length;d+=1)m[d].l(y);y.forEach(b),r=P(p),_=E(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(_)!=="svelte-1nn20mc"&&(_.textContent=f),this.h()},h(){g(i,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk")},m(p,y){w(p,e,y),w(p,n,y),w(p,i,y),B(i,o),B(i,a);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(i,null);w(p,r,y),w(p,_,y),c||(s=H(_,"click",function(){Re(l[1](l[0].addEmptyEntry))&&l[1](l[0].addEmptyEntry).apply(this,arguments)}),c=!0)},p(p,y){if(l=p,y&9){h=Z([...l[0].LIB]);let d;for(d=0;d<h.length;d+=1){const k=Me(l,h,d);m[d]?m[d].p(k,y):(m[d]=Ae(k),m[d].c(),m[d].m(i,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=h.length}},d(p){p&&(b(e),b(n),b(i),b(r),b(_)),ge(m,p),c=!1,s()}}}function mt(l){let e,t="FIB:",n,i,o,u='<th class="svelte-71n8bk">Address</th> <th class="svelte-71n8bk">Label</th> <th class="svelte-71n8bk">Next hop</th>',a,r,_,f="+",c,s,h=Z([...l[0].FIB]),m=[];for(let p=0;p<h.length;p+=1)m[p]=Oe(He(l,h,p));return{c(){e=C("p"),e.textContent=t,n=N(),i=C("table"),o=C("tr"),o.innerHTML=u,a=N();for(let p=0;p<m.length;p+=1)m[p].c();r=N(),_=C("button"),_.textContent=f,this.h()},l(p){e=E(p,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-1j6bdhj"&&(e.textContent=t),n=P(p),i=E(p,"TABLE",{class:!0});var y=$(i);o=E(y,"TR",{"data-svelte-h":!0}),Y(o)!=="svelte-9j9p47"&&(o.innerHTML=u),a=P(y);for(let d=0;d<m.length;d+=1)m[d].l(y);y.forEach(b),r=P(p),_=E(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(_)!=="svelte-1nn20mc"&&(_.textContent=f),this.h()},h(){g(i,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk")},m(p,y){w(p,e,y),w(p,n,y),w(p,i,y),B(i,o),B(i,a);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(i,null);w(p,r,y),w(p,_,y),c||(s=H(_,"click",function(){Re(l[1](l[0].addEmptyEntry))&&l[1](l[0].addEmptyEntry).apply(this,arguments)}),c=!0)},p(p,y){if(l=p,y&5){h=Z([...l[0].FIB]);let d;for(d=0;d<h.length;d+=1){const k=He(l,h,d);m[d]?m[d].p(k,y):(m[d]=Oe(k),m[d].c(),m[d].m(i,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=h.length}},d(p){p&&(b(e),b(n),b(i),b(r),b(_)),ge(m,p),c=!1,s()}}}function vt(l){let e,t="Flows:",n,i,o,u='<th class="svelte-71n8bk">Size (Megabits)</th> <th class="svelte-71n8bk">Destination</th>',a,r,_,f="+",c,s,h=Z(l[0].flows),m=[];for(let p=0;p<h.length;p+=1)m[p]=ze(Fe(l,h,p));return{c(){e=C("p"),e.textContent=t,n=N(),i=C("table"),o=C("tr"),o.innerHTML=u,a=N();for(let p=0;p<m.length;p+=1)m[p].c();r=N(),_=C("button"),_.textContent=f,this.h()},l(p){e=E(p,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-twjhxn"&&(e.textContent=t),n=P(p),i=E(p,"TABLE",{class:!0});var y=$(i);o=E(y,"TR",{"data-svelte-h":!0}),Y(o)!=="svelte-1aanzqs"&&(o.innerHTML=u),a=P(y);for(let d=0;d<m.length;d+=1)m[d].l(y);y.forEach(b),r=P(p),_=E(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(_)!=="svelte-bqeh8i"&&(_.textContent=f),this.h()},h(){g(i,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk")},m(p,y){w(p,e,y),w(p,n,y),w(p,i,y),B(i,o),B(i,a);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(i,null);w(p,r,y),w(p,_,y),c||(s=H(_,"click",function(){Re(l[1](l[0].addEmptyFlow))&&l[1](l[0].addEmptyFlow).apply(this,arguments)}),c=!0)},p(p,y){if(l=p,y&1){h=Z(l[0].flows);let d;for(d=0;d<h.length;d+=1){const k=Fe(l,h,d);m[d]?m[d].p(k,y):(m[d]=ze(k),m[d].c(),m[d].m(i,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=h.length}},d(p){p&&(b(e),b(n),b(i),b(r),b(_)),ge(m,p),c=!1,s()}}}function Ae(l){let e,t,n,i,o,u,a,r,_,f,c,s,h="-",m,p,y;function d(...F){return l[11](l[22],...F)}function k(){l[12].call(a,l[23],l[24])}function I(){l[13].call(f,l[23],l[24])}function x(){return l[14](l[22])}return{c(){e=C("tr"),t=C("td"),n=C("input"),o=N(),u=C("td"),a=C("input"),r=N(),_=C("td"),f=C("input"),c=N(),s=C("button"),s.textContent=h,m=N(),this.h()},l(F){e=E(F,"TR",{});var R=$(e);t=E(R,"TD",{class:!0});var oe=$(t);n=E(oe,"INPUT",{type:!0,class:!0}),oe.forEach(b),o=P(R),u=E(R,"TD",{class:!0});var Q=$(u);a=E(Q,"INPUT",{type:!0,class:!0}),Q.forEach(b),r=P(R),_=E(R,"TD",{class:!0});var X=$(_);f=E(X,"INPUT",{type:!0,class:!0}),X.forEach(b),c=P(R),s=E(R,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(s)!=="svelte-glgoyj"&&(s.textContent=h),m=P(R),R.forEach(b),this.h()},h(){g(n,"type","number"),n.value=i=l[22],g(n,"class","svelte-71n8bk"),g(t,"class","svelte-71n8bk"),g(a,"type","number"),g(a,"class","svelte-71n8bk"),g(u,"class","svelte-71n8bk"),g(f,"type","text"),g(f,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk"),g(s,"class","svelte-71n8bk")},m(F,R){w(F,e,R),B(e,t),B(t,n),B(e,o),B(e,u),B(u,a),S(a,l[19].outgoingLabel),B(e,r),B(e,_),B(_,f),S(f,l[19].nextHop),B(e,c),B(e,s),B(e,m),p||(y=[H(n,"change",d),H(a,"input",k),H(f,"input",I),H(s,"click",x)],p=!0)},p(F,R){l=F,R&1&&i!==(i=l[22])&&n.value!==i&&(n.value=i),R&1&&K(a.value)!==l[19].outgoingLabel&&S(a,l[19].outgoingLabel),R&1&&f.value!==l[19].nextHop&&S(f,l[19].nextHop)},d(F){F&&b(e),p=!1,ye(y)}}}function Oe(l){let e,t,n,i,o,u,a,r,_,f,c,s,h="-",m,p,y;function d(...F){return l[7](l[18],...F)}function k(){l[8].call(a,l[20],l[21])}function I(){l[9].call(f,l[20],l[21])}function x(){return l[10](l[18])}return{c(){e=C("tr"),t=C("td"),n=C("input"),o=N(),u=C("td"),a=C("input"),r=N(),_=C("td"),f=C("input"),c=N(),s=C("button"),s.textContent=h,m=N(),this.h()},l(F){e=E(F,"TR",{});var R=$(e);t=E(R,"TD",{class:!0});var oe=$(t);n=E(oe,"INPUT",{type:!0,class:!0}),oe.forEach(b),o=P(R),u=E(R,"TD",{class:!0});var Q=$(u);a=E(Q,"INPUT",{type:!0,class:!0}),Q.forEach(b),r=P(R),_=E(R,"TD",{class:!0});var X=$(_);f=E(X,"INPUT",{type:!0,class:!0}),X.forEach(b),c=P(R),s=E(R,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(s)!=="svelte-174iwf3"&&(s.textContent=h),m=P(R),R.forEach(b),this.h()},h(){g(n,"type","text"),n.value=i=l[18],g(n,"class","svelte-71n8bk"),g(t,"class","svelte-71n8bk"),g(a,"type","number"),g(a,"class","svelte-71n8bk"),g(u,"class","svelte-71n8bk"),g(f,"type","text"),g(f,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk"),g(s,"class","svelte-71n8bk")},m(F,R){w(F,e,R),B(e,t),B(t,n),B(e,o),B(e,u),B(u,a),S(a,l[19].label),B(e,r),B(e,_),B(_,f),S(f,l[19].nextHop),B(e,c),B(e,s),B(e,m),p||(y=[H(n,"change",d),H(a,"input",k),H(f,"input",I),H(s,"click",x)],p=!0)},p(F,R){l=F,R&1&&i!==(i=l[18])&&n.value!==i&&(n.value=i),R&1&&K(a.value)!==l[19].label&&S(a,l[19].label),R&1&&f.value!==l[19].nextHop&&S(f,l[19].nextHop)},d(F){F&&b(e),p=!1,ye(y)}}}function ze(l){let e,t,n,i,o,u,a,r,_="-",f,c,s;function h(){l[4].call(n,l[16],l[17])}function m(){l[5].call(u,l[16],l[17])}function p(){return l[6](l[17])}return{c(){e=C("tr"),t=C("td"),n=C("input"),i=N(),o=C("td"),u=C("input"),a=N(),r=C("button"),r.textContent=_,f=N(),this.h()},l(y){e=E(y,"TR",{});var d=$(e);t=E(d,"TD",{class:!0});var k=$(t);n=E(k,"INPUT",{type:!0,class:!0}),k.forEach(b),i=P(d),o=E(d,"TD",{class:!0});var I=$(o);u=E(I,"INPUT",{type:!0,placeholder:!0,class:!0}),I.forEach(b),a=P(d),r=E(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(r)!=="svelte-1px6e5a"&&(r.textContent=_),f=P(d),d.forEach(b),this.h()},h(){g(n,"type","number"),g(n,"class","svelte-71n8bk"),g(t,"class","svelte-71n8bk"),g(u,"type","text"),g(u,"placeholder","Address"),g(u,"class","svelte-71n8bk"),g(o,"class","svelte-71n8bk"),g(r,"class","svelte-71n8bk")},m(y,d){w(y,e,d),B(e,t),B(t,n),S(n,l[15].size),B(e,i),B(e,o),B(o,u),S(u,l[15].destination),B(e,a),B(e,r),B(e,f),c||(s=[H(n,"input",h),H(u,"input",m),H(r,"click",p)],c=!0)},p(y,d){l=y,d&1&&K(n.value)!==l[15].size&&S(n,l[15].size),d&1&&u.value!==l[15].destination&&S(u,l[15].destination)},d(y){y&&b(e),c=!1,ye(s)}}}function kt(l){let e;function t(o,u){if(o[0]instanceof Ie)return vt;if(o[0]instanceof me)return mt;if(o[0]instanceof ve)return bt}let n=t(l),i=n&&n(l);return{c(){i&&i.c(),e=ae()},l(o){i&&i.l(o),e=ae()},m(o,u){i&&i.m(o,u),w(o,e,u)},p(o,[u]){n===(n=t(o))&&i?i.p(o,u):(i&&i.d(1),i=n&&n(o),i&&(i.c(),i.m(e.parentNode,e)))},i:V,o:V,d(o){o&&b(e),i&&i.d(o)}}}function yt(l,e,t){let{router:n}=e;function i(k){return()=>{k(),t(0,n)}}function o(k,I){if(!(k.target instanceof HTMLInputElement)||!(n instanceof me))return;const x=k.target.value;if(n.FIB.get(x)){alert("Address already exists in FIB.");return}n.updateAddress(I,x)}function u(k,I){if(!(k.target instanceof HTMLInputElement)||!(n instanceof ve))return;const x=parseInt(k.target.value);if(n.LIB.get(x)){alert("Label already exists in LIB.");return}n.updateLabel(I,x)}function a(k,I){k[I].size=K(this.value),t(0,n)}function r(k,I){k[I].destination=this.value,t(0,n)}const _=k=>{n instanceof Ie&&(n.deleteFlow(k),t(0,n))},f=(k,I)=>{o(I,k)};function c(k,I){k[I][1].label=K(this.value),t(0,n)}function s(k,I){k[I][1].nextHop=this.value,t(0,n)}const h=k=>{n instanceof me&&(n.deleteEntry(k),t(0,n))},m=(k,I)=>{u(I,k)};function p(k,I){k[I][1].outgoingLabel=K(this.value),t(0,n)}function y(k,I){k[I][1].nextHop=this.value,t(0,n)}const d=k=>{n instanceof ve&&(n.deleteEntry(k),t(0,n))};return l.$$set=k=>{"router"in k&&t(0,n=k.router)},[n,i,o,u,a,r,_,f,c,s,h,m,p,y,d]}class wt extends se{constructor(e){super(),re(this,e,yt,kt,ie,{router:0})}}function Ct(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=C("p"),e.textContent=t},l(n){e=E(n,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,i){w(n,e,i)},p:V,i:V,o:V,d(n){n&&b(e)}}}function Et(l){let e,t,n,i,o,u,a=l[0].id+"",r,_,f,c,s=l[0].type+"",h,m,p,y,d,k,I,x,F,R,oe,Q,X,T="Delete Router",D,ue,ce,q=l[0]instanceof Ie&&Se(l);function Ne(L){l[7](L)}let Le={};return l[0]!==void 0&&(Le.router=l[0]),R=new wt({props:Le}),fe.push(()=>he(R,"router",Ne)),{c(){e=C("label"),t=G(`Label:
      `),n=C("input"),i=N(),o=C("p"),u=G("ID: "),r=G(a),_=N(),f=C("p"),c=G("Type: "),h=G(s),m=N(),p=C("label"),y=G(`Position:
      `),d=C("input"),k=N(),I=C("input"),x=N(),q&&q.c(),F=N(),ee(R.$$.fragment),Q=N(),X=C("button"),X.textContent=T,this.h()},l(L){e=E(L,"LABEL",{});var O=$(e);t=W(O,`Label:
      `),n=E(O,"INPUT",{type:!0}),O.forEach(b),i=P(L),o=E(L,"P",{});var v=$(o);u=W(v,"ID: "),r=W(v,a),v.forEach(b),_=P(L),f=E(L,"P",{});var M=$(f);c=W(M,"Type: "),h=W(M,s),M.forEach(b),m=P(L),p=E(L,"LABEL",{});var j=$(p);y=W(j,`Position:
      `),d=E(j,"INPUT",{type:!0}),k=P(j),I=E(j,"INPUT",{type:!0}),j.forEach(b),x=P(L),q&&q.l(L),F=P(L),te(R.$$.fragment,L),Q=P(L),X=E(L,"BUTTON",{"data-svelte-h":!0}),Y(X)!=="svelte-ufhzdt"&&(X.textContent=T),this.h()},h(){g(n,"type","text"),g(d,"type","number"),d.disabled=l[2],g(I,"type","number"),I.disabled=l[2]},m(L,O){w(L,e,O),B(e,t),B(e,n),S(n,l[0].node.label),w(L,i,O),w(L,o,O),B(o,u),B(o,r),w(L,_,O),w(L,f,O),B(f,c),B(f,h),w(L,m,O),w(L,p,O),B(p,y),B(p,d),S(d,l[0].node.x),B(p,k),B(p,I),S(I,l[0].node.y),w(L,x,O),q&&q.m(L,O),w(L,F,O),ne(R,L,O),w(L,Q,O),w(L,X,O),D=!0,ue||(ce=[H(n,"input",l[4]),H(d,"input",l[5]),H(I,"input",l[6]),H(X,"click",l[3])],ue=!0)},p(L,O){O&1&&n.value!==L[0].node.label&&S(n,L[0].node.label),(!D||O&1)&&a!==(a=L[0].id+"")&&be(r,a),(!D||O&1)&&s!==(s=L[0].type+"")&&be(h,s),(!D||O&4)&&(d.disabled=L[2]),O&1&&K(d.value)!==L[0].node.x&&S(d,L[0].node.x),(!D||O&4)&&(I.disabled=L[2]),O&1&&K(I.value)!==L[0].node.y&&S(I,L[0].node.y),L[0]instanceof Ie?q?q.p(L,O):(q=Se(L),q.c(),q.m(F.parentNode,F)):q&&(q.d(1),q=null);const v={};!oe&&O&1&&(oe=!0,v.router=L[0],de(()=>oe=!1)),R.$set(v)},i(L){D||(A(R.$$.fragment,L),D=!0)},o(L){z(R.$$.fragment,L),D=!1},d(L){L&&(b(e),b(i),b(o),b(_),b(f),b(m),b(p),b(x),b(F),b(Q),b(X)),q&&q.d(L),le(R,L),ue=!1,ye(ce)}}}function Se(l){let e,t,n=l[0].address+"",i;return{c(){e=C("p"),t=G("Address: "),i=G(n)},l(o){e=E(o,"P",{});var u=$(e);t=W(u,"Address: "),i=W(u,n),u.forEach(b)},m(o,u){w(o,e,u),B(e,t),B(e,i)},p(o,u){u&1&&n!==(n=o[0].address+"")&&be(i,n)},d(o){o&&b(e)}}}function Bt(l){let e,t,n,i;const o=[Et,Ct],u=[];function a(r,_){return r[0]?0:1}return e=a(l),t=u[e]=o[e](l),{c(){t.c(),n=ae()},l(r){t.l(r),n=ae()},m(r,_){u[e].m(r,_),w(r,n,_),i=!0},p(r,_){let f=e;e=a(r),e===f?u[e].p(r,_):(Ee(),z(u[f],1,1,()=>{u[f]=null}),Be(),t=u[e],t?t.p(r,_):(t=u[e]=o[e](r),t.c()),A(t,1),t.m(n.parentNode,n))},i(r){i||(A(t),i=!0)},o(r){z(t),i=!1},d(r){r&&b(n),u[e].d(r)}}}function Tt(l){let e,t,n;function i(u){l[8](u)}let o={$$slots:{default:[Bt]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new Ue({props:o}),fe.push(()=>he(e,"dialog",i)),e.$on("close",l[9]),{c(){ee(e.$$.fragment)},l(u){te(e.$$.fragment,u)},m(u,a){ne(e,u,a),n=!0},p(u,[a]){const r={};a&1029&&(r.$$scope={dirty:a,ctx:u}),!t&&a&2&&(t=!0,r.dialog=u[1],de(()=>t=!1)),e.$set(r)},i(u){n||(A(e.$$.fragment,u),n=!0)},o(u){z(e.$$.fragment,u),n=!1},d(u){le(e,u)}}}function It(l,e,t){let n;we(l,ke,h=>t(2,n=h));let{router:i}=e,{dialog:o}=e;function u(){i&&confirm("Are you sure you want to delete this router?")&&(J.deleteRouter(i.id),o.close())}function a(){i.node.label=this.value,t(0,i)}function r(){i.node.x=K(this.value),t(0,i)}function _(){i.node.y=K(this.value),t(0,i)}function f(h){i=h,t(0,i)}function c(h){o=h,t(1,o)}const s=()=>{J.fastUpdate()};return l.$$set=h=>{"router"in h&&t(0,i=h.router),"dialog"in h&&t(1,o=h.dialog)},[i,o,n,u,a,r,_,f,c,s]}class Lt extends se{constructor(e){super(),re(this,e,It,Tt,ie,{router:0,dialog:1})}}function Rt(l){let e,t="You somehow double-clicked on a connection that can't be found?";return{c(){e=C("p"),e.textContent=t},l(n){e=E(n,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-139v24q"&&(e.textContent=t)},m(n,i){w(n,e,i)},p:V,d(n){n&&b(e)}}}function Nt(l){let e,t,n,i,o,u,a,r,_,f,c,s,h,m="Delete Connection",p,y;return{c(){e=C("label"),t=G(`Bandwidth:
      `),n=C("input"),i=N(),o=C("label"),u=G(`Distance:
      `),a=C("input"),r=N(),_=C("label"),f=G(`Weight:
      `),c=C("input"),s=N(),h=C("button"),h.textContent=m,this.h()},l(d){e=E(d,"LABEL",{class:!0});var k=$(e);t=W(k,`Bandwidth:
      `),n=E(k,"INPUT",{type:!0,class:!0}),k.forEach(b),i=P(d),o=E(d,"LABEL",{class:!0});var I=$(o);u=W(I,`Distance:
      `),a=E(I,"INPUT",{type:!0,class:!0}),I.forEach(b),r=P(d),_=E(d,"LABEL",{class:!0});var x=$(_);f=W(x,`Weight:
      `),c=E(x,"INPUT",{type:!0,class:!0}),x.forEach(b),s=P(d),h=E(d,"BUTTON",{"data-svelte-h":!0}),Y(h)!=="svelte-10n96bo"&&(h.textContent=m),this.h()},h(){g(n,"type","number"),n.disabled=l[2],g(n,"class","svelte-mdz6ho"),g(e,"class","svelte-mdz6ho"),g(a,"type","number"),a.disabled=l[2],g(a,"class","svelte-mdz6ho"),g(o,"class","svelte-mdz6ho"),g(c,"type","number"),c.disabled=l[2],g(c,"class","svelte-mdz6ho"),g(_,"class","svelte-mdz6ho")},m(d,k){w(d,e,k),B(e,t),B(e,n),S(n,l[0].bandwidth),w(d,i,k),w(d,o,k),B(o,u),B(o,a),S(a,l[0].distance),w(d,r,k),w(d,_,k),B(_,f),B(_,c),S(c,l[0].weight),w(d,s,k),w(d,h,k),p||(y=[H(n,"input",l[4]),H(a,"input",l[5]),H(c,"input",l[6]),H(h,"click",l[3])],p=!0)},p(d,k){k&4&&(n.disabled=d[2]),k&1&&K(n.value)!==d[0].bandwidth&&S(n,d[0].bandwidth),k&4&&(a.disabled=d[2]),k&1&&K(a.value)!==d[0].distance&&S(a,d[0].distance),k&4&&(c.disabled=d[2]),k&1&&K(c.value)!==d[0].weight&&S(c,d[0].weight)},d(d){d&&(b(e),b(i),b(o),b(r),b(_),b(s),b(h)),p=!1,ye(y)}}}function Pt(l){let e;function t(o,u){return o[0]?Nt:Rt}let n=t(l),i=n(l);return{c(){i.c(),e=ae()},l(o){i.l(o),e=ae()},m(o,u){i.m(o,u),w(o,e,u)},p(o,u){n===(n=t(o))&&i?i.p(o,u):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&b(e),i.d(o)}}}function $t(l){let e,t,n;function i(u){l[7](u)}let o={$$slots:{default:[Pt]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new Ue({props:o}),fe.push(()=>he(e,"dialog",i)),e.$on("close",l[8]),{c(){ee(e.$$.fragment)},l(u){te(e.$$.fragment,u)},m(u,a){ne(e,u,a),n=!0},p(u,[a]){const r={};a&517&&(r.$$scope={dirty:a,ctx:u}),!t&&a&2&&(t=!0,r.dialog=u[1],de(()=>t=!1)),e.$set(r)},i(u){n||(A(e.$$.fragment,u),n=!0)},o(u){z(e.$$.fragment,u),n=!1},d(u){le(e,u)}}}function Dt(l,e,t){let n;we(l,ke,s=>t(2,n=s));let{connection:i}=e,{dialog:o}=e;function u(){i&&confirm("Are you sure you want to delete this connection?")&&(J.deleteConnection(i.id),o.close())}function a(){i.bandwidth=K(this.value),t(0,i)}function r(){i.distance=K(this.value),t(0,i)}function _(){i.weight=K(this.value),t(0,i)}function f(s){o=s,t(1,o)}const c=()=>{J.fastUpdate()};return l.$$set=s=>{"connection"in s&&t(0,i=s.connection),"dialog"in s&&t(1,o=s.dialog)},[i,o,n,u,a,r,_,f,c]}class Ut extends se{constructor(e){super(),re(this,e,Dt,$t,ie,{connection:0,dialog:1})}}function Ye(l){let e,t="Loading...";return{c(){e=C("p"),e.textContent=t,this.h()},l(n){e=E(n,"P",{style:!0,"data-svelte-h":!0}),Y(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Te(e,"font-size","200px")},m(n,i){w(n,e,i)},d(n){n&&b(e)}}}function xe(l){let e,t,n,i,o;return{c(){e=_e("line"),this.h()},l(u){e=pe(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),$(e).forEach(b),this.h()},h(){g(e,"x1",t=l[3].node.x),g(e,"y1",n=l[3].node.y),g(e,"x2",i=l[16](l[1].x)),g(e,"y2",o=l[17](l[1].y)),g(e,"stroke","black")},m(u,a){w(u,e,a)},p(u,a){a[0]&8&&t!==(t=u[3].node.x)&&g(e,"x1",t),a[0]&8&&n!==(n=u[3].node.y)&&g(e,"y1",n),a[0]&2&&i!==(i=u[16](u[1].x))&&g(e,"x2",i),a[0]&2&&o!==(o=u[17](u[1].y))&&g(e,"y2",o)},d(u){u&&b(e)}}}function Mt(l){let e,t,n,i,o,u,a,r,_,f,c,s,h,m,p,y=!l[8]&&Ye(),d=l[5]===l[9].CONNECTING&&l[3]&&xe(l);const k=l[19].default,I=Ze(k,l,l[18],null);function x(T){l[22](T)}function F(T){l[23](T)}let R={};l[3]!==void 0&&(R.router=l[3]),l[6]!==void 0&&(R.dialog=l[6]),u=new Lt({props:R}),fe.push(()=>he(u,"router",x)),fe.push(()=>he(u,"dialog",F));function oe(T){l[24](T)}function Q(T){l[25](T)}let X={};return l[4]!==void 0&&(X.connection=l[4]),l[7]!==void 0&&(X.dialog=l[7]),f=new Ut({props:X}),fe.push(()=>he(f,"connection",oe)),fe.push(()=>he(f,"dialog",Q)),{c(){y&&y.c(),e=N(),t=_e("svg"),d&&d.c(),n=ae(),I&&I.c(),o=N(),ee(u.$$.fragment),_=N(),ee(f.$$.fragment),this.h()},l(T){y&&y.l(T),e=P(T),t=pe(T,"svg",{viewBox:!0,role:!0,tabindex:!0,style:!0,class:!0});var D=$(t);d&&d.l(D),n=ae(),I&&I.l(D),D.forEach(b),o=P(T),te(u.$$.fragment,T),_=P(T),te(f.$$.fragment,T),this.h()},h(){g(t,"viewBox",i=`${l[0].x} ${l[0].y} ${l[0].width} ${l[0].height}`),g(t,"role","button"),g(t,"tabindex","-1"),Te(t,"cursor",l[10][l[5]]),g(t,"class","svelte-8vtxkw")},m(T,D){y&&y.m(T,D),w(T,e,D),w(T,t,D),d&&d.m(t,null),B(t,n),I&&I.m(t,null),l[21](t),w(T,o,D),ne(u,T,D),w(T,_,D),ne(f,T,D),h=!0,m||(p=[H(t,"pointerdown",l[11]),H(t,"pointerup",l[12]),H(t,"wheel",l[13]),H(t,"dblclick",l[14]),H(t,"dragover",dt(l[20])),H(t,"drop",l[15])],m=!0)},p(T,D){T[8]?y&&(y.d(1),y=null):y||(y=Ye(),y.c(),y.m(e.parentNode,e)),T[5]===T[9].CONNECTING&&T[3]?d?d.p(T,D):(d=xe(T),d.c(),d.m(t,n)):d&&(d.d(1),d=null),I&&I.p&&(!h||D[0]&262144)&&et(I,k,T,T[18],h?nt(k,T[18],D,null):tt(T[18]),null),(!h||D[0]&1&&i!==(i=`${T[0].x} ${T[0].y} ${T[0].width} ${T[0].height}`))&&g(t,"viewBox",i),(!h||D[0]&32)&&Te(t,"cursor",T[10][T[5]]);const ue={};!a&&D[0]&8&&(a=!0,ue.router=T[3],de(()=>a=!1)),!r&&D[0]&64&&(r=!0,ue.dialog=T[6],de(()=>r=!1)),u.$set(ue);const ce={};!c&&D[0]&16&&(c=!0,ce.connection=T[4],de(()=>c=!1)),!s&&D[0]&128&&(s=!0,ce.dialog=T[7],de(()=>s=!1)),f.$set(ce)},i(T){h||(A(I,T),A(u.$$.fragment,T),A(f.$$.fragment,T),h=!0)},o(T){z(I,T),z(u.$$.fragment,T),z(f.$$.fragment,T),h=!1},d(T){T&&(b(e),b(t),b(o),b(_)),y&&y.d(T),d&&d.d(),I&&I.d(T),l[21](null),le(u,T),le(f,T),m=!1,ye(p)}}}function Ht(l,e,t){let n;we(l,ke,v=>t(27,n=v));let{$$slots:i={},$$scope:o}=e;var u=(v=>(v[v.NONE=0]="NONE",v[v.DRAGGING=1]="DRAGGING",v[v.PANNING=2]="PANNING",v[v.CONNECTING=3]="CONNECTING",v))(u||{});const a={x:0,y:0,width:0,height:0,get scale(){return c?this.width/c.getBoundingClientRect().width:1}},r={x:0,y:0},_={x:0,y:0},f={0:"move",1:"grabbing",2:"grabbing",3:"crosshair"};let c=null,s=null,h=null,m=0,p,y,d=!1;ft(()=>{if(!c)return;new ResizeObserver(k).observe(c),requestAnimationFrame(()=>{c&&(t(0,a.x=c.getBoundingClientRect().width/-2,a),t(0,a.y=c.getBoundingClientRect().height/-2,a))}),t(8,d=!0)});function k(){if(!c)return;const v=a.scale||1;t(0,a.width=c.getBoundingClientRect().width*v,a),t(0,a.height=c.getBoundingClientRect().height*v,a)}function I(v){if(!(v.target instanceof Element))return;v.preventDefault(),c==null||c.addEventListener("pointermove",F),c==null||c.setPointerCapture(v.pointerId);const M=v.target.id;if(M){if(t(3,s=J.getRouter(parseInt(M))||null),!s)return;v.shiftKey?t(5,m=3):(_.x=s.node.x,_.y=s.node.y,t(5,m=1))}else t(5,m=2);t(1,r.x=v.clientX,r),t(1,r.y=v.clientY,r)}function x(v){if(v.target instanceof Element){if(v.preventDefault(),m===3&&s){const M=document.elementFromPoint(v.clientX,v.clientY),j=(M==null?void 0:M.tagName)==="circle"?M.id:null,Ce=J.getRouter(parseInt(j??""));Ce&&J.addConnection({source:s,target:Ce})}t(5,m=0),t(3,s=null),c==null||c.releasePointerCapture(v.pointerId),c==null||c.removeEventListener("pointermove",F)}}function F(v){v.preventDefault();const M={x:(v.clientX-r.x)*a.scale,y:(v.clientY-r.y)*a.scale};!n&&m===1&&s?(t(3,s.node.x=_.x+M.x,s),t(3,s.node.y=_.y+M.y,s),J.fastUpdate()):m===2?(t(1,r.x=v.clientX,r),t(1,r.y=v.clientY,r),t(0,a.x-=M.x,a),t(0,a.y-=M.y,a)):!n&&m===3&&(t(1,r.x=v.clientX,r),t(1,r.y=v.clientY,r))}function R(v){if(v.preventDefault(),!c||a.scale<.1&&v.deltaY<=0||a.scale>5&&v.deltaY>=0)return;t(1,r.x=v.clientX,r),t(1,r.y=v.clientY,r);const M=c.getBoundingClientRect(),j=v.deltaY>0?1+.025:1-.025,Ce={x:(r.x-M.left)/M.width,y:(r.y-M.top)/M.height};t(0,a.x-=a.width*(j-1)*Ce.x,a),t(0,a.y-=a.height*(j-1)*Ce.y,a),t(0,a.width*=j,a),t(0,a.height*=j,a)}function oe(v){if(!(v.target instanceof Element))return;v.preventDefault();const M=document.elementFromPoint(v.clientX,v.clientY);M&&(M.tagName==="circle"?Q(M.id):M.tagName==="rect"&&X(M.id))}function Q(v){const M=J.getRouter(parseInt(v));M&&(t(3,s=M),p.showModal())}function X(v){const M=J.connections.find(j=>v===j.id);M&&(t(4,h=M),y.showModal())}function T(v){var j;switch(v.preventDefault(),(j=v.dataTransfer)==null?void 0:j.getData("text/plain")){case"CE":J.createCE({label:"CE",x:D(v.clientX),y:ue(v.clientY)});break;case"LER":J.createLER({label:"LER",x:D(v.clientX),y:ue(v.clientY)});break;case"LSR":J.createLSR({label:"LSR",x:D(v.clientX),y:ue(v.clientY)});break}}function D(v){return c?(v-c.getBoundingClientRect().left)*a.scale+a.x:v}function ue(v){return c?(v-c.getBoundingClientRect().top)*a.scale+a.y:v}function ce(v){lt.call(this,l,v)}function q(v){fe[v?"unshift":"push"](()=>{c=v,t(2,c)})}function Ne(v){s=v,t(3,s)}function Le(v){p=v,t(6,p)}function L(v){h=v,t(4,h)}function O(v){y=v,t(7,y)}return l.$$set=v=>{"$$scope"in v&&t(18,o=v.$$scope)},[a,r,c,s,h,m,p,y,d,u,f,I,x,R,oe,T,D,ue,o,i,ce,q,Ne,Le,L,O]}class Ft extends se{constructor(e){super(),re(this,e,Ht,Mt,ie,{},null,[-1,-1])}}function At(l){let e,t,n,i,o,u,a,r,_=l[0].distance+"",f,c;return{c(){e=_e("line"),t=N(),n=_e("rect"),a=N(),r=_e("text"),f=G(_),c=G(" km"),this.h()},l(s){e=pe(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),$(e).forEach(b),t=P(s),n=pe(s,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0}),$(n).forEach(b),a=P(s),r=pe(s,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,fill:!0,"font-size":!0,class:!0});var h=$(r);f=W(h,_),c=W(h," km"),h.forEach(b),this.h()},h(){g(e,"x1",l[4]),g(e,"y1",l[2]),g(e,"x2",l[3]),g(e,"y2",l[1]),g(e,"stroke","black"),g(n,"id",i=l[0].id),g(n,"x",o=l[6]-Pe/2),g(n,"y",u=l[5]-$e/2),g(n,"width",Pe),g(n,"height",$e),g(n,"fill","#222222"),g(n,"stroke","white"),g(r,"x",l[6]),g(r,"y",l[5]),g(r,"text-anchor","middle"),g(r,"dominant-baseline","middle"),g(r,"fill","white"),g(r,"font-size","12px"),g(r,"class","svelte-1ndjud8")},m(s,h){w(s,e,h),w(s,t,h),w(s,n,h),w(s,a,h),w(s,r,h),B(r,f),B(r,c)},p(s,[h]){h&16&&g(e,"x1",s[4]),h&4&&g(e,"y1",s[2]),h&8&&g(e,"x2",s[3]),h&2&&g(e,"y2",s[1]),h&1&&i!==(i=s[0].id)&&g(n,"id",i),h&64&&o!==(o=s[6]-Pe/2)&&g(n,"x",o),h&32&&u!==(u=s[5]-$e/2)&&g(n,"y",u),h&1&&_!==(_=s[0].distance+"")&&be(f,_),h&64&&g(r,"x",s[6]),h&32&&g(r,"y",s[5])},i:V,o:V,d(s){s&&(b(e),b(t),b(n),b(a),b(r))}}}const Pe=50,$e=20;function Xe(l,e){return(l+e)/2}function Ot(l,e,t){let n,i,o,u,a,r,{connection:_}=e;return l.$$set=f=>{"connection"in f&&t(0,_=f.connection)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=_.source.node.x),l.$$.dirty&1&&t(3,i=_.target.node.x),l.$$.dirty&1&&t(2,o=_.source.node.y),l.$$.dirty&1&&t(1,u=_.target.node.y),l.$$.dirty&24&&t(6,a=Xe(n,i)),l.$$.dirty&6&&t(5,r=Xe(o,u))},[_,u,o,i,n,r,a]}class zt extends se{constructor(e){super(),re(this,e,Ot,At,ie,{connection:0})}}function St(l){let e,t,n,i,o,u,a,r=l[0].node.label+"",_,f,c;return{c(){e=_e("circle"),u=N(),a=_e("text"),_=G(r),this.h()},l(s){e=pe(s,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),$(e).forEach(b),u=P(s),a=pe(s,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,class:!0});var h=$(a);_=W(h,r),h.forEach(b),this.h()},h(){g(e,"id",t=l[0].id.toString()),g(e,"cx",n=l[0].node.x),g(e,"cy",i=l[0].node.y),g(e,"r","20"),g(e,"fill",o=l[1][l[0].type]),g(e,"class","svelte-11bg7m5"),g(a,"x",f=l[0].node.x),g(a,"y",c=l[0].node.y),g(a,"text-anchor","middle"),g(a,"dominant-baseline","middle"),g(a,"class","svelte-11bg7m5")},m(s,h){w(s,e,h),w(s,u,h),w(s,a,h),B(a,_)},p(s,[h]){h&1&&t!==(t=s[0].id.toString())&&g(e,"id",t),h&1&&n!==(n=s[0].node.x)&&g(e,"cx",n),h&1&&i!==(i=s[0].node.y)&&g(e,"cy",i),h&1&&o!==(o=s[1][s[0].type])&&g(e,"fill",o),h&1&&r!==(r=s[0].node.label+"")&&be(_,r),h&1&&f!==(f=s[0].node.x)&&g(a,"x",f),h&1&&c!==(c=s[0].node.y)&&g(a,"y",c)},i:V,o:V,d(s){s&&(b(e),b(u),b(a))}}}function Yt(l,e,t){let{router:n}=e;const i={CE:"lightgreen",LER:"cyan",LSR:"hotpink"};return l.$$set=o=>{"router"in o&&t(0,n=o.router)},[n,i]}class xt extends se{constructor(e){super(),re(this,e,Yt,St,ie,{router:0})}}function Xt(l){let e,t,n,i;return{c(){e=C("div"),t=G(l[0]),this.h()},l(o){e=E(o,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var u=$(e);t=W(u,l[0]),u.forEach(b),this.h()},h(){g(e,"draggable","true"),g(e,"role","button"),g(e,"tabindex","-1"),Te(e,"background-color",l[1]),g(e,"class","svelte-17iodfq")},m(o,u){w(o,e,u),B(e,t),n||(i=H(e,"dragstart",l[2]),n=!0)},p(o,[u]){u&1&&be(t,o[0]),u&2&&Te(e,"background-color",o[1])},i:V,o:V,d(o){o&&b(e),n=!1,i()}}}function qt(l,e,t){let n;we(l,ke,r=>t(4,n=r));let{text:i}=e,{type:o}=e,{color:u}=e;function a(r){var _;if(n){alert("Network is locked.");return}(_=r.dataTransfer)==null||_.setData("text/plain",o)}return l.$$set=r=>{"text"in r&&t(0,i=r.text),"type"in r&&t(3,o=r.type),"color"in r&&t(1,u=r.color)},[i,u,a,o]}class jt extends se{constructor(e){super(),re(this,e,qt,Xt,ie,{text:0,type:3,color:1})}}function Gt(l){let e,t,n,i;return{c(){e=C("button"),t=G(l[0]),this.h()},l(o){e=E(o,"BUTTON",{class:!0});var u=$(e);t=W(u,l[0]),u.forEach(b),this.h()},h(){g(e,"class","svelte-1mil06r")},m(o,u){w(o,e,u),B(e,t),n||(i=H(e,"click",function(){Re(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(o,[u]){l=o,u&1&&be(t,l[0])},i:V,o:V,d(o){o&&b(e),n=!1,i()}}}function Wt(l,e,t){let{text:n}=e,{callback:i=()=>{}}=e;return l.$$set=o=>{"text"in o&&t(0,n=o.text),"callback"in o&&t(1,i=o.callback)},[n,i]}class Vt extends se{constructor(e){super(),re(this,e,Wt,Gt,ie,{text:0,callback:1})}}function qe(l,e,t){const n=l.slice();return n[3]=e[t],n}function je(l,e,t){const n=l.slice();return n[6]=e[t],n}function Ge(l){let e,t;const n=[l[6]];let i={};for(let o=0;o<n.length;o+=1)i=ot(i,n[o]);return e=new jt({props:i}),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,u){ne(e,o,u),t=!0},p(o,u){const a=u&2?st(n,[rt(o[6])]):{};e.$set(a)},i(o){t||(A(e.$$.fragment,o),t=!0)},o(o){z(e.$$.fragment,o),t=!1},d(o){le(e,o)}}}function We(l){let e,t;const n=[l[3]];let i={};for(let o=0;o<n.length;o+=1)i=ot(i,n[o]);return e=new Vt({props:i}),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,u){ne(e,o,u),t=!0},p(o,u){const a=u&1?st(n,[rt(o[3])]):{};e.$set(a)},i(o){t||(A(e.$$.fragment,o),t=!0)},o(o){z(e.$$.fragment,o),t=!1},d(o){le(e,o)}}}function Kt(l){let e,t,n,i=Z(l[1]),o=[];for(let f=0;f<i.length;f+=1)o[f]=Ge(je(l,i,f));const u=f=>z(o[f],1,1,()=>{o[f]=null});let a=Z(l[0]),r=[];for(let f=0;f<a.length;f+=1)r[f]=We(qe(l,a,f));const _=f=>z(r[f],1,1,()=>{r[f]=null});return{c(){for(let f=0;f<o.length;f+=1)o[f].c();e=N();for(let f=0;f<r.length;f+=1)r[f].c();t=ae()},l(f){for(let c=0;c<o.length;c+=1)o[c].l(f);e=P(f);for(let c=0;c<r.length;c+=1)r[c].l(f);t=ae()},m(f,c){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(f,c);w(f,e,c);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(f,c);w(f,t,c),n=!0},p(f,[c]){if(c&2){i=Z(f[1]);let s;for(s=0;s<i.length;s+=1){const h=je(f,i,s);o[s]?(o[s].p(h,c),A(o[s],1)):(o[s]=Ge(h),o[s].c(),A(o[s],1),o[s].m(e.parentNode,e))}for(Ee(),s=i.length;s<o.length;s+=1)u(s);Be()}if(c&1){a=Z(f[0]);let s;for(s=0;s<a.length;s+=1){const h=qe(f,a,s);r[s]?(r[s].p(h,c),A(r[s],1)):(r[s]=We(h),r[s].c(),A(r[s],1),r[s].m(t.parentNode,t))}for(Ee(),s=a.length;s<r.length;s+=1)_(s);Be()}},i(f){if(!n){for(let c=0;c<i.length;c+=1)A(o[c]);for(let c=0;c<a.length;c+=1)A(r[c]);n=!0}},o(f){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)z(o[c]);r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)z(r[c]);n=!1},d(f){f&&(b(e),b(t)),ge(o,f),ge(r,f)}}}function Jt(l,e,t){let n,i;we(l,ke,u=>t(2,i=u));const o=[{text:"+ Customer",type:"CE",color:"lightgreen"},{text:"+ Edge",type:"LER",color:"cyan"},{text:"+ Switch",type:"LSR",color:"hotpink"}];return l.$$.update=()=>{l.$$.dirty&4&&t(0,n=[{text:i?"Unlock":"Lock",callback:()=>{ct(ke,i=!i,i)}},{text:"Clear",callback:()=>{if(i){alert("Network is locked.");return}confirm("Are you sure you want to clear the network?")&&J.clear()}}])},[n,o,i]}class Qt extends se{constructor(e){super(),re(this,e,Jt,Kt,ie,{})}}function Zt(l){let e,t="Drag and drop routers that you want to add.",n,i,o="Hold the shift key and drag routers to make connections between the routers.",u,a,r="Double press a router to configure/delete it.",_,f,c="The clear button will delete everything.",s,h,m,p,y="Press Esc to close this popup.";return{c(){e=C("p"),e.textContent=t,n=N(),i=C("p"),i.textContent=o,u=N(),a=C("p"),a.textContent=r,_=N(),f=C("p"),f.textContent=c,s=N(),h=C("br"),m=N(),p=C("p"),p.textContent=y},l(d){e=E(d,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-1e52y96"&&(e.textContent=t),n=P(d),i=E(d,"P",{"data-svelte-h":!0}),Y(i)!=="svelte-b60b0b"&&(i.textContent=o),u=P(d),a=E(d,"P",{"data-svelte-h":!0}),Y(a)!=="svelte-zhn422"&&(a.textContent=r),_=P(d),f=E(d,"P",{"data-svelte-h":!0}),Y(f)!=="svelte-epfgnc"&&(f.textContent=c),s=P(d),h=E(d,"BR",{}),m=P(d),p=E(d,"P",{"data-svelte-h":!0}),Y(p)!=="svelte-1dvt5v1"&&(p.textContent=y)},m(d,k){w(d,e,k),w(d,n,k),w(d,i,k),w(d,u,k),w(d,a,k),w(d,_,k),w(d,f,k),w(d,s,k),w(d,h,k),w(d,m,k),w(d,p,k)},p:V,d(d){d&&(b(e),b(n),b(i),b(u),b(a),b(_),b(f),b(s),b(h),b(m),b(p))}}}function en(l){let e,t,n="Help",i,o,u,a,r,_;function f(s){l[2](s)}let c={$$slots:{default:[Zt]},$$scope:{ctx:l}};return l[0]!==void 0&&(c.dialog=l[0]),o=new Ue({props:c}),fe.push(()=>he(o,"dialog",f)),{c(){e=C("div"),t=C("button"),t.textContent=n,i=N(),ee(o.$$.fragment),this.h()},l(s){e=E(s,"DIV",{});var h=$(e);t=E(h,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-1l58twh"&&(t.textContent=n),h.forEach(b),i=P(s),te(o.$$.fragment,s),this.h()},h(){g(t,"class","svelte-g8xfna")},m(s,h){w(s,e,h),B(e,t),w(s,i,h),ne(o,s,h),a=!0,r||(_=H(t,"click",l[1]),r=!0)},p(s,[h]){const m={};h&8&&(m.$$scope={dirty:h,ctx:s}),!u&&h&1&&(u=!0,m.dialog=s[0],de(()=>u=!1)),o.$set(m)},i(s){a||(A(o.$$.fragment,s),a=!0)},o(s){z(o.$$.fragment,s),a=!1},d(s){s&&(b(e),b(i)),le(o,s),r=!1,_()}}}function tn(l,e,t){let n;const i=()=>{n.showModal()};function o(u){n=u,t(0,n)}return[n,i,o]}class nn extends se{constructor(e){super(),re(this,e,tn,en,ie,{})}}function Ve(l,e,t){const n=l.slice();return n[1]=e[t],n}function Ke(l,e,t){const n=l.slice();return n[4]=e[t],n}function Je(l){let e,t;return e=new zt({props:{connection:l[4]}}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,i){ne(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.connection=n[4]),e.$set(o)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Qe(l){let e,t;return e=new xt({props:{router:l[1]}}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,i){ne(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.router=n[1]),e.$set(o)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function ln(l){let e,t,n,i=Z(l[0].connections),o=[];for(let f=0;f<i.length;f+=1)o[f]=Je(Ke(l,i,f));const u=f=>z(o[f],1,1,()=>{o[f]=null});let a=Z(l[0].routers),r=[];for(let f=0;f<a.length;f+=1)r[f]=Qe(Ve(l,a,f));const _=f=>z(r[f],1,1,()=>{r[f]=null});return{c(){for(let f=0;f<o.length;f+=1)o[f].c();e=N();for(let f=0;f<r.length;f+=1)r[f].c();t=ae()},l(f){for(let c=0;c<o.length;c+=1)o[c].l(f);e=P(f);for(let c=0;c<r.length;c+=1)r[c].l(f);t=ae()},m(f,c){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(f,c);w(f,e,c);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(f,c);w(f,t,c),n=!0},p(f,c){if(c&1){i=Z(f[0].connections);let s;for(s=0;s<i.length;s+=1){const h=Ke(f,i,s);o[s]?(o[s].p(h,c),A(o[s],1)):(o[s]=Je(h),o[s].c(),A(o[s],1),o[s].m(e.parentNode,e))}for(Ee(),s=i.length;s<o.length;s+=1)u(s);Be()}if(c&1){a=Z(f[0].routers);let s;for(s=0;s<a.length;s+=1){const h=Ve(f,a,s);r[s]?(r[s].p(h,c),A(r[s],1)):(r[s]=Qe(h),r[s].c(),A(r[s],1),r[s].m(t.parentNode,t))}for(Ee(),s=a.length;s<r.length;s+=1)_(s);Be()}},i(f){if(!n){for(let c=0;c<i.length;c+=1)A(o[c]);for(let c=0;c<a.length;c+=1)A(r[c]);n=!0}},o(f){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)z(o[c]);r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)z(r[c]);n=!1},d(f){f&&(b(e),b(t)),ge(o,f),ge(r,f)}}}function on(l){let e,t,n,i,o,u,a,r,_;return t=new Ft({props:{$$slots:{default:[ln]},$$scope:{ctx:l}}}),o=new Qt({}),r=new nn({}),{c(){e=C("div"),ee(t.$$.fragment),n=N(),i=C("div"),ee(o.$$.fragment),u=N(),a=C("div"),ee(r.$$.fragment),this.h()},l(f){e=E(f,"DIV",{id:!0,class:!0});var c=$(e);te(t.$$.fragment,c),n=P(c),i=E(c,"DIV",{id:!0,class:!0});var s=$(i);te(o.$$.fragment,s),s.forEach(b),u=P(c),a=E(c,"DIV",{id:!0,class:!0});var h=$(a);te(r.$$.fragment,h),h.forEach(b),c.forEach(b),this.h()},h(){g(i,"id","top-left-bar"),g(i,"class","absolute-flex svelte-ixqfsc"),g(a,"id","bottom-left-bar"),g(a,"class","absolute-flex svelte-ixqfsc"),g(e,"id","network"),g(e,"class","svelte-ixqfsc")},m(f,c){w(f,e,c),ne(t,e,null),B(e,n),B(e,i),ne(o,i,null),B(e,u),B(e,a),ne(r,a,null),_=!0},p(f,[c]){const s={};c&129&&(s.$$scope={dirty:c,ctx:f}),t.$set(s)},i(f){_||(A(t.$$.fragment,f),A(o.$$.fragment,f),A(r.$$.fragment,f),_=!0)},o(f){z(t.$$.fragment,f),z(o.$$.fragment,f),z(r.$$.fragment,f),_=!1},d(f){f&&b(e),le(t),le(o),le(r)}}}function sn(l,e,t){let n;return we(l,J,i=>t(0,n=i)),[n]}class rn extends se{constructor(e){super(),re(this,e,sn,on,ie,{})}}function un(l){let e,t;return e=new rn({}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,i){ne(e,n,i),t=!0},p:V,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}class _n extends se{constructor(e){super(),re(this,e,null,un,ie,{})}}export{_n as component};
