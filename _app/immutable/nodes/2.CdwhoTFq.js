var Pt=Object.defineProperty;var Nt=(l,e,t)=>e in l?Pt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var U=(l,e,t)=>(Nt(l,typeof e!="symbol"?e+"":e,t),t);import{r as $e,s as ie,a as Et,u as $t,g as Ct,b as Lt,x as Rt,e as fe,i as De,n as Z,y as ce,c as _e,o as It,z as Se,A as Fe}from"../chunks/scheduler.C5v8YK5g.js";import{n as x,m as T,S as se,i as ue,e as L,c as R,a as A,d as m,l as v,g as E,z as q,s as N,A as le,f as D,h as $,B as ye,C as ae,D as me,E as de,v as X,w as G,x as W,y as K,o as te,r as he,p as pe,t as oe,b as re,j as be,F as ke,G as ve,q as Pe,H as Dt}from"../chunks/index.CS2IdBlG.js";import{w as He}from"../chunks/index.CD1dNpfE.js";function ee(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function xe(l,e){x(l,1,1,()=>{e.delete(l.key)})}function Me(l,e,t,n,i,r,o,s,u,d,a,c){let f=l.length,_=r.length,h=f;const g={};for(;h--;)g[l[h].key]=h;const k=[],p=new Map,b=new Map,C=[];for(h=_;h--;){const I=c(i,r,h),S=t(I);let P=o.get(S);P?n&&C.push(()=>P.p(I,e)):(P=d(S,I),P.c()),p.set(S,k[h]=P),S in g&&b.set(S,Math.abs(h-g[S]))}const F=new Set,z=new Set;function H(I){T(I,1),I.m(s,a),o.set(I.key,I),a=I.first,_--}for(;f&&_;){const I=k[_-1],S=l[f-1],P=I.key,w=S.key;I===S?(a=I.first,f--,_--):p.has(w)?!o.has(P)||F.has(P)?H(I):z.has(w)?f--:b.get(P)>b.get(w)?(z.add(P),H(I)):(F.add(w),f--):(u(S,o),f--)}for(;f--;){const I=l[f];p.has(I.key)||u(I,o)}for(;_;)H(k[_-1]);return $e(C),k}function Ue(l,e){const t={},n={},i={$$scope:1};let r=l.length;for(;r--;){const o=l[r],s=e[r];if(s){for(const u in o)u in s||(n[u]=1);for(const u in s)i[u]||(t[u]=s[u],i[u]=1);l[r]=s}else for(const u in o)i[u]=1}for(const o in n)o in t||(t[o]=void 0);return t}function Oe(l){return typeof l=="object"&&l!==null?l:{}}let Ht=class{constructor(e,t,n){U(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},xt=class{constructor(e,t,n,i){U(this,"ttl",32);U(this,"label",-1);U(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=i;const r=t.firstHop.get(n.address);if(r===void 0)return;const o=j.getRouter(r);o!==void 0&&(this.nextHop=o)}decrementTTL(){--this.ttl<=0&&this.drop()}drop(){j.deletePacket(this.id)}},je=class{constructor(e,t){this.id=e,this.node=t}};class Ee extends je{constructor(){super(...arguments);U(this,"address",`CE-IP-${this.id}`);U(this,"firstHop",new Map);U(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});U(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});U(this,"updateAddress",(t,n)=>{const i=this.firstHop.get(t);if(i===void 0)throw new Error(`Unable to update old first hop Address '${t}' to '${n}'.`);this.firstHop.set(n,i),this.firstHop.delete(t)});U(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop()}get type(){return"CE"}}let Bt=class{constructor(){U(this,"map",new Map);U(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});U(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});U(this,"updateLabel",(e,t)=>{const n=this.map.get(e);if(!n)throw new Error(`Unable to update old LIB label '${e}' to '${t}'.`);if(this.map.get(t))throw new Error(`Label entry '${t}' already exists.`);this.map.set(t,n),this.map.delete(e)});U(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}},Mt=class{constructor(){U(this,"map",new Map);U(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});U(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});U(this,"updateAddress",(e,t)=>{const n=this.map.get(e);if(!n)throw new Error(`Unable to update old FIB address '${e}' to '${t}'.`);if(this.map.get(t))throw new Error(`Address '${t}' already exists in FIB.`);this.map.set(t,n),this.map.delete(e)});U(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Re extends je{constructor(){super(...arguments);U(this,"FIB",new Mt);U(this,"LIB",new Bt)}receivePacket(t){var i,r,o,s;const n=t.destination;if(t.label===-1){const u=(i=this.FIB.get(n.address))==null?void 0:i.nextHop;if(!u)return;const d=(r=this.FIB.get(n.address))==null?void 0:r.label;if(!d)return;t.label=d;const a=j.getRouter(parseInt(u));if(!a)return;t.nextHop=a}else{const u=(o=this.LIB.get(t.label))==null?void 0:o.nextHop;if(!u)return;const d=(s=this.LIB.get(t.label))==null?void 0:s.outgoingLabel;if(!d)return;t.label=d;const a=j.routers.find(c=>c instanceof Ee&&c.address===u);if(!a)return;t.nextHop=a}t.decrementTTL()}get type(){return"LER"}}class Ne extends je{constructor(){super(...arguments);U(this,"LIB",new Bt)}receivePacket(t){var o,s;const n=(o=this.LIB.get(t.label))==null?void 0:o.nextHop;if(!n)return;const i=(s=this.LIB.get(t.label))==null?void 0:s.outgoingLabel;if(!i)return;t.label=i;const r=j.getRouter(parseInt(n));r&&(t.nextHop=r,t.decrementTTL())}get type(){return"LSR"}}const zt={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class At{constructor(){U(this,"store",He({routers:[],links:[],packets:[]}));U(this,"set",this.store.set);U(this,"update",this.store.update);U(this,"subscribe",this.store.subscribe);U(this,"_routers",[]);U(this,"_links",[]);U(this,"_packets",[]);U(this,"routerMap",new Map);U(this,"routerCounter",0);U(this,"packetCounter",0)}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!zt[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new Ht(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,i=new Ee(n,{label:`CE ${n}`,x:e,y:t});this.addRouter(i)}createLER(e,t){const n=this.routerCounter++,i=new Re(n,{label:`LER ${n}`,x:e,y:t});this.addRouter(i)}createLSR(e,t){const n=this.routerCounter++,i=new Ne(n,{label:`LSR ${n}`,x:e,y:t});this.addRouter(i)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),this.notify()}deleteRouter(e){this.getRouter(e)&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getRouterByAddress(e){return this._routers.filter(n=>n instanceof Ee).find(n=>n.address===e)}getSureRouterByAddress(e){const t=this.getRouterByAddress(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){const n=new xt(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.routerCounter=0,this.packetCounter=0,this.notify()}notify(){this.store.set(this.networkState)}}const St=new At,j=St,Le=He({running:!0,speedMultiplier:1}),Ce=He(!1);function Ft(l){let e,t,n,i;const r=l[2].default,o=Et(r,l,l[1],null);return{c(){e=L("dialog"),o&&o.c(),this.h()},l(s){e=R(s,"DIALOG",{class:!0});var u=A(e);o&&o.l(u),u.forEach(m),this.h()},h(){v(e,"class","svelte-414ocx")},m(s,u){E(s,e,u),o&&o.m(e,null),l[4](e),t=!0,n||(i=q(e,"close",l[3]),n=!0)},p(s,[u]){o&&o.p&&(!t||u&2)&&$t(o,r,s,s[1],t?Lt(r,s[1],u,null):Ct(s[1]),null)},i(s){t||(T(o,s),t=!0)},o(s){x(o,s),t=!1},d(s){s&&m(e),o&&o.d(s),l[4](null),n=!1,i()}}}function Ut(l,e,t){let{$$slots:n={},$$scope:i}=e,{dialog:r}=e;function o(u){Rt.call(this,l,u)}function s(u){fe[u?"unshift":"push"](()=>{r=u,t(0,r)})}return l.$$set=u=>{"dialog"in u&&t(0,r=u.dialog),"$$scope"in u&&t(1,i=u.$$scope)},[r,i,n,o,s]}class Ye extends se{constructor(e){super(),ue(this,e,Ut,Ft,ie,{dialog:0})}}class Ot{constructor(){U(this,"store",He());U(this,"set",this.store.set);U(this,"update",this.store.update);U(this,"subscribe",this.store.subscribe);U(this,"_map",new Map)}getPath(e,t){const n=this._map.get(e);if(n)return n.get(t)}findShortestPath(e,t){return qe(e,t)}findShortestPaths(){const e=new Map,t=j.routers.filter(n=>n.type==="CE");for(const n of t){const i=new Map;for(const r of t){if(n===r)continue;const o=qe(n,r);i.set(r.id,o)}e.set(n.id,i)}this._map=e}notify(){this.store.set(this._map)}}function qe(l,e){const t=j.routers,n=t.length,i=new Array(n).fill(1/0),r=new Array(n).fill(!1),o=new Array(n).fill(null);i[t.indexOf(l)]=0;let s=!1;for(;!s;){let a=null,c=1/0;for(let f=0;f<n;f++)!r[f]&&i[f]<c&&(a=t[f],c=i[f]);if(a===null||a.id===e.id){s=!0;continue}r[t.indexOf(a)]=!0;for(const f of j.links){let _;if(f.source===a)_=f.target;else if(f.target===a)_=f.source;else continue;const h=t.indexOf(_),g=c+f.distance;g<i[h]&&(i[h]=g,o[h]=a)}}const u=[];let d=e;for(;d;){u.unshift(d);const a=t.indexOf(d);d=o[a]}return u}const jt=new Ot,Yt=jt,Ve=16,qt=2**20-1;function Vt(l,e){const t=l.length-2,n=l[t];if(!(n instanceof Re))throw new Error("Destination CE is not connected directly to a LER");let i=Xe(l[t]);n.LIB.receiveEntry(i,-1,e);for(let o=l.length-2;o>0;o--){const s=l[o],u=l[o-1],d=i;i=Xe(s),u instanceof Re?u.FIB.receiveEntry(e,d,s.id.toString()):u instanceof Ne&&u.LIB.receiveEntry(i,d,s.id.toString())}const r=l[0];if(!(r instanceof Ee))throw new Error("The path does not start with a CE");r.firstHop.set(e,l[1].id)}function Xt(l,e){return l instanceof Ne||l instanceof Re?l.LIB.map.has(e):!1}function Xe(l){let e;do e=Math.floor(Math.random()*(qt-Ve+1)+Ve);while(Xt(l,e));return e}function Ge(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n}function We(l){let e,t,n,i,r,o,s,u,d,a,c="-",f,_,h;function g(...b){return l[4](l[7],...b)}function k(...b){return l[5](l[7],...b)}function p(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),r=N(),o=L("td"),s=L("input"),d=N(),a=L("button"),a.textContent=c,f=N(),this.h()},l(b){e=R(b,"TR",{});var C=A(e);t=R(C,"TD",{});var F=A(t);n=R(F,"INPUT",{type:!0,placeholder:!0}),F.forEach(m),r=D(C),o=R(C,"TD",{});var z=A(o);s=R(z,"INPUT",{type:!0,placeholder:!0}),z.forEach(m),d=D(C),a=R(C,"BUTTON",{"data-svelte-h":!0}),le(a)!=="svelte-696gh"&&(a.textContent=c),f=D(C),C.forEach(m),this.h()},h(){v(n,"type","text"),n.value=i=l[7],v(n,"placeholder","Address"),v(s,"type","text"),s.value=u=l[8],v(s,"placeholder","Link")},m(b,C){E(b,e,C),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),$(e,d),$(e,a),$(e,f),_||(h=[q(n,"change",g),q(s,"change",k),q(a,"click",p)],_=!0)},p(b,C){l=b,C&1&&i!==(i=l[7])&&n.value!==i&&(n.value=i),C&1&&u!==(u=l[8])&&s.value!==u&&(s.value=u)},d(b){b&&m(e),_=!1,$e(h)}}}function Gt(l){let e,t="Destinations:",n,i,r,o="<th>Destination</th> <th>First hop</th>",s,u,d,a="+",c,f,_=ee([...l[0].firstHop]),h=[];for(let g=0;g<_.length;g+=1)h[g]=We(Ge(l,_,g));return{c(){e=L("p"),e.textContent=t,n=N(),i=L("table"),r=L("tr"),r.innerHTML=o,s=N();for(let g=0;g<h.length;g+=1)h[g].c();u=N(),d=L("button"),d.textContent=a},l(g){e=R(g,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1ixmdgd"&&(e.textContent=t),n=D(g),i=R(g,"TABLE",{});var k=A(i);r=R(k,"TR",{"data-svelte-h":!0}),le(r)!=="svelte-cu9tpt"&&(r.innerHTML=o),s=D(k);for(let p=0;p<h.length;p+=1)h[p].l(k);k.forEach(m),u=D(g),d=R(g,"BUTTON",{"data-svelte-h":!0}),le(d)!=="svelte-1nn20mc"&&(d.textContent=a)},m(g,k){E(g,e,k),E(g,n,k),E(g,i,k),$(i,r),$(i,s);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(i,null);E(g,u,k),E(g,d,k),c||(f=q(d,"click",function(){De(l[1](l[0].addEmptyEntry))&&l[1](l[0].addEmptyEntry).apply(this,arguments)}),c=!0)},p(g,[k]){if(l=g,k&13){_=ee([...l[0].firstHop]);let p;for(p=0;p<_.length;p+=1){const b=Ge(l,_,p);h[p]?h[p].p(b,k):(h[p]=We(b),h[p].c(),h[p].m(i,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=_.length}},i:Z,o:Z,d(g){g&&(m(e),m(n),m(i),m(u),m(d)),ye(h,g),c=!1,f()}}}function Wt(l,e,t){let{router:n}=e;function i(a){return()=>{a(),t(0,n)}}function r(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=a.target.value.toUpperCase();n.updateAddress(c,f);const _=j.getRouterByAddress(f);if(!_){alert("Destination router not found.");return}const h=Yt.findShortestPath(n,_);Vt(h,f),t(0,n)}function o(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=parseInt(a.target.value);n.firstHop.set(c,f)}const s=(a,c)=>{r(c,a)},u=(a,c)=>{o(c,a)},d=a=>{n.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,i,r,o,s,u,d]}class Kt extends se{constructor(e){super(),ue(this,e,Wt,Gt,ie,{router:0})}}function Ke(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Je(l){let e,t,n,i,r,o,s,u,d,a,c,f,_="-",h,g;function k(...F){return l[3](l[7],...F)}function p(){l[4].call(s,l[9],l[10])}function b(){l[5].call(a,l[9],l[10])}function C(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),r=N(),o=L("td"),s=L("input"),u=N(),d=L("td"),a=L("input"),c=N(),f=L("button"),f.textContent=_,this.h()},l(F){e=R(F,"TR",{});var z=A(e);t=R(z,"TD",{});var H=A(t);n=R(H,"INPUT",{type:!0}),H.forEach(m),r=D(z),o=R(z,"TD",{});var I=A(o);s=R(I,"INPUT",{type:!0}),I.forEach(m),u=D(z),d=R(z,"TD",{});var S=A(d);a=R(S,"INPUT",{type:!0}),S.forEach(m),c=D(z),f=R(z,"BUTTON",{"data-svelte-h":!0}),le(f)!=="svelte-wfbfbi"&&(f.textContent=_),z.forEach(m),this.h()},h(){v(n,"type","number"),n.value=i=l[7],v(s,"type","number"),v(a,"type","text")},m(F,z){E(F,e,z),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),ae(s,l[8].outgoingLabel),$(e,u),$(e,d),$(d,a),ae(a,l[8].nextHop),$(e,c),$(e,f),h||(g=[q(n,"change",k),q(s,"input",p),q(a,"input",b),q(f,"click",C)],h=!0)},p(F,z){l=F,z&1&&i!==(i=l[7])&&n.value!==i&&(n.value=i),z&1&&me(s.value)!==l[8].outgoingLabel&&ae(s,l[8].outgoingLabel),z&1&&a.value!==l[8].nextHop&&ae(a,l[8].nextHop)},d(F){F&&m(e),h=!1,$e(g)}}}function Jt(l){let e,t,n="<th>Incoming</th> <th>Outgoing</th> <th>Next hop</th>",i,r,o,s="+",u,d,a=ee([...l[0].LIB.map]),c=[];for(let f=0;f<a.length;f+=1)c[f]=Je(Ke(l,a,f));return{c(){e=L("table"),t=L("tr"),t.innerHTML=n,i=N();for(let f=0;f<c.length;f+=1)c[f].c();r=N(),o=L("button"),o.textContent=s},l(f){e=R(f,"TABLE",{});var _=A(e);t=R(_,"TR",{"data-svelte-h":!0}),le(t)!=="svelte-4lulgl"&&(t.innerHTML=n),i=D(_);for(let h=0;h<c.length;h+=1)c[h].l(_);r=D(_),o=R(_,"BUTTON",{"data-svelte-h":!0}),le(o)!=="svelte-1qyq3ir"&&(o.textContent=s),_.forEach(m)},m(f,_){E(f,e,_),$(e,t),$(e,i);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);$(e,r),$(e,o),u||(d=q(o,"click",function(){De(l[1](l[0].LIB.addEmptyEntry))&&l[1](l[0].LIB.addEmptyEntry).apply(this,arguments)}),u=!0)},p(f,[_]){if(l=f,_&5){a=ee([...l[0].LIB.map]);let h;for(h=0;h<a.length;h+=1){const g=Ke(l,a,h);c[h]?c[h].p(g,_):(c[h]=Je(g),c[h].c(),c[h].m(e,r))}for(;h<c.length;h+=1)c[h].d(1);c.length=a.length}},i:Z,o:Z,d(f){f&&m(e),ye(c,f),u=!1,d()}}}function Qt(l,e,t){let{router:n}=e;function i(a){return()=>{a(),t(0,n)}}function r(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=parseInt(a.target.value);n.LIB.updateLabel(c,f)}const o=(a,c)=>{r(c,a)};function s(a,c){a[c][1].outgoingLabel=me(this.value),t(0,n)}function u(a,c){a[c][1].nextHop=this.value,t(0,n)}const d=a=>{n.LIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,i,r,o,s,u,d]}class Tt extends se{constructor(e){super(),ue(this,e,Qt,Jt,ie,{router:0})}}function Qe(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Ze(l){let e,t,n,i,r,o,s,u,d,a,c,f,_="-",h,g;function k(...F){return l[3](l[7],...F)}function p(){l[4].call(s,l[9],l[10])}function b(){l[5].call(a,l[9],l[10])}function C(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),r=N(),o=L("td"),s=L("input"),u=N(),d=L("td"),a=L("input"),c=N(),f=L("button"),f.textContent=_,this.h()},l(F){e=R(F,"TR",{});var z=A(e);t=R(z,"TD",{});var H=A(t);n=R(H,"INPUT",{type:!0}),H.forEach(m),r=D(z),o=R(z,"TD",{});var I=A(o);s=R(I,"INPUT",{type:!0}),I.forEach(m),u=D(z),d=R(z,"TD",{});var S=A(d);a=R(S,"INPUT",{type:!0}),S.forEach(m),c=D(z),f=R(z,"BUTTON",{"data-svelte-h":!0}),le(f)!=="svelte-liojo2"&&(f.textContent=_),z.forEach(m),this.h()},h(){v(n,"type","text"),n.value=i=l[7],v(s,"type","number"),v(a,"type","text")},m(F,z){E(F,e,z),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),ae(s,l[8].label),$(e,u),$(e,d),$(d,a),ae(a,l[8].nextHop),$(e,c),$(e,f),h||(g=[q(n,"change",k),q(s,"input",p),q(a,"input",b),q(f,"click",C)],h=!0)},p(F,z){l=F,z&1&&i!==(i=l[7])&&n.value!==i&&(n.value=i),z&1&&me(s.value)!==l[8].label&&ae(s,l[8].label),z&1&&a.value!==l[8].nextHop&&ae(a,l[8].nextHop)},d(F){F&&m(e),h=!1,$e(g)}}}function Zt(l){let e,t,n="<th>Address</th> <th>Label</th> <th>Next hop</th>",i,r,o,s="+",u,d,a=ee([...l[0].FIB.map]),c=[];for(let f=0;f<a.length;f+=1)c[f]=Ze(Qe(l,a,f));return{c(){e=L("table"),t=L("tr"),t.innerHTML=n,i=N();for(let f=0;f<c.length;f+=1)c[f].c();r=N(),o=L("button"),o.textContent=s},l(f){e=R(f,"TABLE",{});var _=A(e);t=R(_,"TR",{"data-svelte-h":!0}),le(t)!=="svelte-1ntom3r"&&(t.innerHTML=n),i=D(_);for(let h=0;h<c.length;h+=1)c[h].l(_);r=D(_),o=R(_,"BUTTON",{"data-svelte-h":!0}),le(o)!=="svelte-hxdqrl"&&(o.textContent=s),_.forEach(m)},m(f,_){E(f,e,_),$(e,t),$(e,i);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);$(e,r),$(e,o),u||(d=q(o,"click",function(){De(l[1](l[0].FIB.addEmptyEntry))&&l[1](l[0].FIB.addEmptyEntry).apply(this,arguments)}),u=!0)},p(f,[_]){if(l=f,_&5){a=ee([...l[0].FIB.map]);let h;for(h=0;h<a.length;h+=1){const g=Qe(l,a,h);c[h]?c[h].p(g,_):(c[h]=Ze(g),c[h].c(),c[h].m(e,r))}for(;h<c.length;h+=1)c[h].d(1);c.length=a.length}},i:Z,o:Z,d(f){f&&m(e),ye(c,f),u=!1,d()}}}function en(l,e,t){let{router:n}=e;function i(a){return()=>{a(),t(0,n)}}function r(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=a.target.value;n.FIB.updateAddress(c,f)}const o=(a,c)=>{r(c,a)};function s(a,c){a[c][1].label=me(this.value),t(0,n)}function u(a,c){a[c][1].nextHop=this.value,t(0,n)}const d=a=>{n.FIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,i,r,o,s,u,d]}class tn extends se{constructor(e){super(),ue(this,e,en,Zt,ie,{router:0})}}function nn(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=R(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,i){E(n,e,i)},p:Z,i:Z,o:Z,d(n){n&&m(e)}}}function ln(l){let e,t,n,i,r,o,s=l[0].id+"",u,d,a,c,f=l[0].type+"",_,h,g,k,p,b,C,F,z,H,I,S,P="Delete Router",w,M,ne,Y=l[0]instanceof Ee&&et(l),J=l[0]instanceof Re&&tt(l),Q=l[0]instanceof Ne&&nt(l);return{c(){e=L("label"),t=oe(`Label:
      `),n=L("input"),i=N(),r=L("p"),o=oe("ID: "),u=oe(s),d=N(),a=L("p"),c=oe("Type: "),_=oe(f),h=N(),g=L("label"),k=oe(`Position:
      `),p=L("input"),b=N(),C=L("input"),F=N(),Y&&Y.c(),z=N(),J&&J.c(),H=N(),Q&&Q.c(),I=N(),S=L("button"),S.textContent=P,this.h()},l(B){e=R(B,"LABEL",{});var O=A(e);t=re(O,`Label:
      `),n=R(O,"INPUT",{type:!0}),O.forEach(m),i=D(B),r=R(B,"P",{});var Ie=A(r);o=re(Ie,"ID: "),u=re(Ie,s),Ie.forEach(m),d=D(B),a=R(B,"P",{});var Be=A(a);c=re(Be,"Type: "),_=re(Be,f),Be.forEach(m),h=D(B),g=R(B,"LABEL",{});var y=A(g);k=re(y,`Position:
      `),p=R(y,"INPUT",{type:!0}),b=D(y),C=R(y,"INPUT",{type:!0}),y.forEach(m),F=D(B),Y&&Y.l(B),z=D(B),J&&J.l(B),H=D(B),Q&&Q.l(B),I=D(B),S=R(B,"BUTTON",{"data-svelte-h":!0}),le(S)!=="svelte-1kc1129"&&(S.textContent=P),this.h()},h(){v(n,"type","text"),v(p,"type","number"),p.disabled=l[2],v(C,"type","number"),C.disabled=l[2]},m(B,O){E(B,e,O),$(e,t),$(e,n),ae(n,l[0].node.label),E(B,i,O),E(B,r,O),$(r,o),$(r,u),E(B,d,O),E(B,a,O),$(a,c),$(a,_),E(B,h,O),E(B,g,O),$(g,k),$(g,p),ae(p,l[0].node.x),$(g,b),$(g,C),ae(C,l[0].node.y),E(B,F,O),Y&&Y.m(B,O),E(B,z,O),J&&J.m(B,O),E(B,H,O),Q&&Q.m(B,O),E(B,I,O),E(B,S,O),w=!0,M||(ne=[q(n,"input",l[4]),q(p,"input",l[5]),q(C,"input",l[6]),q(S,"click",l[3])],M=!0)},p(B,O){O&1&&n.value!==B[0].node.label&&ae(n,B[0].node.label),(!w||O&1)&&s!==(s=B[0].id+"")&&be(u,s),(!w||O&1)&&f!==(f=B[0].type+"")&&be(_,f),(!w||O&4)&&(p.disabled=B[2]),O&1&&me(p.value)!==B[0].node.x&&ae(p,B[0].node.x),(!w||O&4)&&(C.disabled=B[2]),O&1&&me(C.value)!==B[0].node.y&&ae(C,B[0].node.y),B[0]instanceof Ee?Y?(Y.p(B,O),O&1&&T(Y,1)):(Y=et(B),Y.c(),T(Y,1),Y.m(z.parentNode,z)):Y&&(he(),x(Y,1,1,()=>{Y=null}),pe()),B[0]instanceof Re?J?(J.p(B,O),O&1&&T(J,1)):(J=tt(B),J.c(),T(J,1),J.m(H.parentNode,H)):J&&(he(),x(J,1,1,()=>{J=null}),pe()),B[0]instanceof Ne?Q?(Q.p(B,O),O&1&&T(Q,1)):(Q=nt(B),Q.c(),T(Q,1),Q.m(I.parentNode,I)):Q&&(he(),x(Q,1,1,()=>{Q=null}),pe())},i(B){w||(T(Y),T(J),T(Q),w=!0)},o(B){x(Y),x(J),x(Q),w=!1},d(B){B&&(m(e),m(i),m(r),m(d),m(a),m(h),m(g),m(F),m(z),m(H),m(I),m(S)),Y&&Y.d(B),J&&J.d(B),Q&&Q.d(B),M=!1,$e(ne)}}}function et(l){let e,t,n=l[0].address+"",i,r,o,s,u;function d(c){l[7](c)}let a={};return l[0]!==void 0&&(a.router=l[0]),o=new Kt({props:a}),fe.push(()=>de(o,"router",d)),{c(){e=L("p"),t=oe("Address: "),i=oe(n),r=N(),X(o.$$.fragment)},l(c){e=R(c,"P",{});var f=A(e);t=re(f,"Address: "),i=re(f,n),f.forEach(m),r=D(c),G(o.$$.fragment,c)},m(c,f){E(c,e,f),$(e,t),$(e,i),E(c,r,f),W(o,c,f),u=!0},p(c,f){(!u||f&1)&&n!==(n=c[0].address+"")&&be(i,n);const _={};!s&&f&1&&(s=!0,_.router=c[0],ce(()=>s=!1)),o.$set(_)},i(c){u||(T(o.$$.fragment,c),u=!0)},o(c){x(o.$$.fragment,c),u=!1},d(c){c&&(m(e),m(r)),K(o,c)}}}function tt(l){let e,t,n,i,r,o;function s(c){l[8](c)}let u={};l[0]!==void 0&&(u.router=l[0]),e=new Tt({props:u}),fe.push(()=>de(e,"router",s));function d(c){l[9](c)}let a={};return l[0]!==void 0&&(a.router=l[0]),i=new tn({props:a}),fe.push(()=>de(i,"router",d)),{c(){X(e.$$.fragment),n=N(),X(i.$$.fragment)},l(c){G(e.$$.fragment,c),n=D(c),G(i.$$.fragment,c)},m(c,f){W(e,c,f),E(c,n,f),W(i,c,f),o=!0},p(c,f){const _={};!t&&f&1&&(t=!0,_.router=c[0],ce(()=>t=!1)),e.$set(_);const h={};!r&&f&1&&(r=!0,h.router=c[0],ce(()=>r=!1)),i.$set(h)},i(c){o||(T(e.$$.fragment,c),T(i.$$.fragment,c),o=!0)},o(c){x(e.$$.fragment,c),x(i.$$.fragment,c),o=!1},d(c){c&&m(n),K(e,c),K(i,c)}}}function nt(l){let e,t,n;function i(o){l[10](o)}let r={};return l[0]!==void 0&&(r.router=l[0]),e=new Tt({props:r}),fe.push(()=>de(e,"router",i)),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,s){W(e,o,s),n=!0},p(o,s){const u={};!t&&s&1&&(t=!0,u.router=o[0],ce(()=>t=!1)),e.$set(u)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){x(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function on(l){let e,t,n,i;const r=[ln,nn],o=[];function s(u,d){return u[0]?0:1}return e=s(l),t=o[e]=r[e](l),{c(){t.c(),n=te()},l(u){t.l(u),n=te()},m(u,d){o[e].m(u,d),E(u,n,d),i=!0},p(u,d){let a=e;e=s(u),e===a?o[e].p(u,d):(he(),x(o[a],1,1,()=>{o[a]=null}),pe(),t=o[e],t?t.p(u,d):(t=o[e]=r[e](u),t.c()),T(t,1),t.m(n.parentNode,n))},i(u){i||(T(t),i=!0)},o(u){x(t),i=!1},d(u){u&&m(n),o[e].d(u)}}}function rn(l){let e,t,n;function i(o){l[11](o)}let r={$$slots:{default:[on]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.dialog=l[1]),e=new Ye({props:r}),fe.push(()=>de(e,"dialog",i)),e.$on("close",l[12]),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,s){W(e,o,s),n=!0},p(o,[s]){const u={};s&8197&&(u.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,u.dialog=o[1],ce(()=>t=!1)),e.$set(u)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){x(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function sn(l,e,t){let n;_e(l,Ce,k=>t(2,n=k));let{router:i}=e,{dialog:r}=e;function o(){!n&&i&&confirm("Are you sure you want to delete this router?")&&(j.deleteRouter(i.id),r.close())}function s(){i.node.label=this.value,t(0,i)}function u(){i.node.x=me(this.value),t(0,i)}function d(){i.node.y=me(this.value),t(0,i)}function a(k){i=k,t(0,i)}function c(k){i=k,t(0,i)}function f(k){i=k,t(0,i)}function _(k){i=k,t(0,i)}function h(k){r=k,t(1,r)}const g=()=>{j.notify()};return l.$$set=k=>{"router"in k&&t(0,i=k.router),"dialog"in k&&t(1,r=k.dialog)},[i,r,n,o,s,u,d,a,c,f,_,h,g]}class un extends se{constructor(e){super(),ue(this,e,sn,rn,ie,{router:0,dialog:1})}}function an(l){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=R(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,i){E(n,e,i)},p:Z,d(n){n&&m(e)}}}function fn(l){let e,t=l[0].distance+"",n,i,r,o,s,u,d,a="Delete Link",c,f;return{c(){e=oe("Distance: "),n=oe(t),i=N(),r=L("label"),o=oe(`Bandwidth:
      `),s=L("input"),u=N(),d=L("button"),d.textContent=a,this.h()},l(_){e=re(_,"Distance: "),n=re(_,t),i=D(_),r=R(_,"LABEL",{class:!0});var h=A(r);o=re(h,`Bandwidth:
      `),s=R(h,"INPUT",{type:!0,class:!0}),h.forEach(m),u=D(_),d=R(_,"BUTTON",{"data-svelte-h":!0}),le(d)!=="svelte-rk1ni8"&&(d.textContent=a),this.h()},h(){v(s,"type","number"),s.disabled=l[2],v(s,"class","svelte-mdz6ho"),v(r,"class","svelte-mdz6ho")},m(_,h){E(_,e,h),E(_,n,h),E(_,i,h),E(_,r,h),$(r,o),$(r,s),ae(s,l[0].bandwidth),E(_,u,h),E(_,d,h),c||(f=[q(s,"input",l[4]),q(d,"click",l[3])],c=!0)},p(_,h){h&1&&t!==(t=_[0].distance+"")&&be(n,t),h&4&&(s.disabled=_[2]),h&1&&me(s.value)!==_[0].bandwidth&&ae(s,_[0].bandwidth)},d(_){_&&(m(e),m(n),m(i),m(r),m(u),m(d)),c=!1,$e(f)}}}function cn(l){let e;function t(r,o){return r[0]?fn:an}let n=t(l),i=n(l);return{c(){i.c(),e=te()},l(r){i.l(r),e=te()},m(r,o){i.m(r,o),E(r,e,o)},p(r,o){n===(n=t(r))&&i?i.p(r,o):(i.d(1),i=n(r),i&&(i.c(),i.m(e.parentNode,e)))},d(r){r&&m(e),i.d(r)}}}function dn(l){let e,t,n;function i(o){l[5](o)}let r={$$slots:{default:[cn]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.dialog=l[1]),e=new Ye({props:r}),fe.push(()=>de(e,"dialog",i)),e.$on("close",l[6]),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,s){W(e,o,s),n=!0},p(o,[s]){const u={};s&133&&(u.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,u.dialog=o[1],ce(()=>t=!1)),e.$set(u)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){x(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function hn(l,e,t){let n;_e(l,Ce,a=>t(2,n=a));let{link:i}=e,{dialog:r}=e;function o(){!n&&i&&confirm("Are you sure you want to delete this link?")&&(j.deleteLink(i.id),r.close())}function s(){i.bandwidth=me(this.value),t(0,i)}function u(a){r=a,t(1,r)}const d=()=>{j.notify()};return l.$$set=a=>{"link"in a&&t(0,i=a.link),"dialog"in a&&t(1,r=a.dialog)},[i,r,n,o,s,u,d]}class pn extends se{constructor(e){super(),ue(this,e,hn,dn,ie,{link:0,dialog:1})}}function lt(l){let e,t="Loading...";return{c(){e=L("p"),e.textContent=t,this.h()},l(n){e=R(n,"P",{style:!0,"data-svelte-h":!0}),le(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Pe(e,"font-size","200px")},m(n,i){E(n,e,i)},d(n){n&&m(e)}}}function ot(l){let e,t,n,i,r;return{c(){e=ke("line"),this.h()},l(o){e=ve(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),A(e).forEach(m),this.h()},h(){v(e,"x1",t=l[3].node.x),v(e,"y1",n=l[3].node.y),v(e,"x2",i=l[17](l[1].x)),v(e,"y2",r=l[18](l[1].y))},m(o,s){E(o,e,s)},p(o,s){s[0]&8&&t!==(t=o[3].node.x)&&v(e,"x1",t),s[0]&8&&n!==(n=o[3].node.y)&&v(e,"y1",n),s[0]&2&&i!==(i=o[17](o[1].x))&&v(e,"x2",i),s[0]&2&&r!==(r=o[18](o[1].y))&&v(e,"y2",r)},d(o){o&&m(e)}}}function _n(l){let e,t,n,i,r,o,s,u,d,a,c,f,_,h,g,k=!l[8]&&lt(),p=!l[9]&&l[5]===l[10].CONNECTING&&l[3]&&ot(l);const b=l[21].default,C=Et(b,l,l[20],null);function F(w){l[24](w)}function z(w){l[25](w)}let H={};l[3]!==void 0&&(H.router=l[3]),l[6]!==void 0&&(H.dialog=l[6]),o=new un({props:H}),fe.push(()=>de(o,"router",F)),fe.push(()=>de(o,"dialog",z));function I(w){l[26](w)}function S(w){l[27](w)}let P={};return l[4]!==void 0&&(P.link=l[4]),l[7]!==void 0&&(P.dialog=l[7]),a=new pn({props:P}),fe.push(()=>de(a,"link",I)),fe.push(()=>de(a,"dialog",S)),{c(){k&&k.c(),e=N(),t=ke("svg"),p&&p.c(),n=te(),C&&C.c(),r=N(),X(o.$$.fragment),d=N(),X(a.$$.fragment),this.h()},l(w){k&&k.l(w),e=D(w),t=ve(w,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var M=A(t);p&&p.l(M),n=te(),C&&C.l(M),M.forEach(m),r=D(w),G(o.$$.fragment,w),d=D(w),G(a.$$.fragment,w),this.h()},h(){v(t,"viewBox",i=`${l[0].x} ${l[0].y} ${l[0].width} ${l[0].height}`),v(t,"role","button"),v(t,"tabindex","-1"),v(t,"class","svelte-1cmb9l6"),Pe(t,"cursor",l[11][l[5]])},m(w,M){k&&k.m(w,M),E(w,e,M),E(w,t,M),p&&p.m(t,null),$(t,n),C&&C.m(t,null),l[23](t),E(w,r,M),W(o,w,M),E(w,d,M),W(a,w,M),_=!0,h||(g=[q(t,"pointerdown",l[12]),q(t,"pointerup",l[13]),q(t,"wheel",l[14]),q(t,"dblclick",l[15]),q(t,"dragover",Dt(l[22])),q(t,"drop",l[16])],h=!0)},p(w,M){w[8]?k&&(k.d(1),k=null):k||(k=lt(),k.c(),k.m(e.parentNode,e)),!w[9]&&w[5]===w[10].CONNECTING&&w[3]?p?p.p(w,M):(p=ot(w),p.c(),p.m(t,n)):p&&(p.d(1),p=null),C&&C.p&&(!_||M[0]&1048576)&&$t(C,b,w,w[20],_?Lt(b,w[20],M,null):Ct(w[20]),null),(!_||M[0]&1&&i!==(i=`${w[0].x} ${w[0].y} ${w[0].width} ${w[0].height}`))&&v(t,"viewBox",i),M[0]&32&&Pe(t,"cursor",w[11][w[5]]);const ne={};!s&&M[0]&8&&(s=!0,ne.router=w[3],ce(()=>s=!1)),!u&&M[0]&64&&(u=!0,ne.dialog=w[6],ce(()=>u=!1)),o.$set(ne);const Y={};!c&&M[0]&16&&(c=!0,Y.link=w[4],ce(()=>c=!1)),!f&&M[0]&128&&(f=!0,Y.dialog=w[7],ce(()=>f=!1)),a.$set(Y)},i(w){_||(T(C,w),T(o.$$.fragment,w),T(a.$$.fragment,w),_=!0)},o(w){x(C,w),x(o.$$.fragment,w),x(a.$$.fragment,w),_=!1},d(w){w&&(m(e),m(t),m(r),m(d)),k&&k.d(w),p&&p.d(),C&&C.d(w),l[23](null),K(o,w),K(a,w),h=!1,$e(g)}}}function gn(l,e,t){let n;_e(l,Ce,y=>t(9,n=y));let{$$slots:i={},$$scope:r}=e;var o=(y=>(y[y.NONE=0]="NONE",y[y.DRAGGING=1]="DRAGGING",y[y.PANNING=2]="PANNING",y[y.CONNECTING=3]="CONNECTING",y))(o||{});const s={x:0,y:0,width:0,height:0,get scale(){return c?this.width/c.getBoundingClientRect().width:1}},u={x:0,y:0},d={x:0,y:0},a={0:"move",1:"grabbing",2:"grabbing",3:"crosshair"};let c=null,f=null,_=null,h=0,g,k,p=!1;It(()=>{if(!c)return;new ResizeObserver(b).observe(c),requestAnimationFrame(()=>{c&&(t(0,s.x=c.getBoundingClientRect().width/-2,s),t(0,s.y=c.getBoundingClientRect().height/-2,s))}),t(8,p=!0)});function b(){if(!c)return;const y=s.scale||1;t(0,s.width=c.getBoundingClientRect().width*y,s),t(0,s.height=c.getBoundingClientRect().height*y,s)}function C(y){if(!(y.target instanceof Element))return;y.preventDefault(),c==null||c.addEventListener("pointermove",z),c==null||c.setPointerCapture(y.pointerId);const V=y.target.id;if(V){if(t(3,f=j.getRouter(parseInt(V))||null),!f)return;y.shiftKey?t(5,h=3):(d.x=f.node.x,d.y=f.node.y,t(5,h=1))}else t(5,h=2);t(1,u.x=y.clientX,u),t(1,u.y=y.clientY,u)}function F(y){if(y.target instanceof Element){if(y.preventDefault(),!n&&h===3&&f){const V=document.elementFromPoint(y.clientX,y.clientY),ge=(V==null?void 0:V.tagName)==="circle"?V.id:null,Te=j.getRouter(parseInt(ge??""));Te&&j.addLink({source:f,target:Te})}t(5,h=0),t(3,f=null),c==null||c.releasePointerCapture(y.pointerId),c==null||c.removeEventListener("pointermove",z)}}function z(y){y.preventDefault();const V={x:(y.clientX-u.x)*s.scale,y:(y.clientY-u.y)*s.scale};!n&&h===1&&f?(t(3,f.node.x=d.x+V.x,f),t(3,f.node.y=d.y+V.y,f),j.notify()):h===2?(t(1,u.x=y.clientX,u),t(1,u.y=y.clientY,u),t(0,s.x-=V.x,s),t(0,s.y-=V.y,s)):!n&&h===3&&(t(1,u.x=y.clientX,u),t(1,u.y=y.clientY,u))}function H(y){y.preventDefault(),t(1,u.x=y.clientX,u),t(1,u.y=y.clientY,u);const V=y.deltaY>0?1.025:.975;I(V,u)}function I(y,V){if(!c||s.scale<.1&&y<1||s.scale>5&&y>1)return;const ge=c.getBoundingClientRect(),Te={x:(V.x-ge.left)/ge.width,y:(V.y-ge.top)/ge.height};t(0,s.x-=s.width*(y-1)*Te.x,s),t(0,s.y-=s.height*(y-1)*Te.y,s),t(0,s.width*=y,s),t(0,s.height*=y,s)}function S(y){if(!(y.target instanceof Element))return;y.preventDefault();const V=document.elementFromPoint(y.clientX,y.clientY);V&&(V.tagName==="circle"?P(V.id):V.tagName==="rect"&&w(V.id))}function P(y){const V=j.getRouter(parseInt(y));V&&(t(3,f=V),g.showModal())}function w(y){const V=j.links.find(ge=>y===ge.id);V&&(t(4,_=V),k.showModal())}function M(y){var ge;switch(y.preventDefault(),(ge=y.dataTransfer)==null?void 0:ge.getData("text/plain")){case"CE":j.createCE(ne(y.clientX),Y(y.clientY));break;case"LER":j.createLER(ne(y.clientX),Y(y.clientY));break;case"LSR":j.createLSR(ne(y.clientX),Y(y.clientY));break}}function ne(y){return c?(y-c.getBoundingClientRect().left)*s.scale+s.x:y}function Y(y){return c?(y-c.getBoundingClientRect().top)*s.scale+s.y:y}function J(y){Rt.call(this,l,y)}function Q(y){fe[y?"unshift":"push"](()=>{c=y,t(2,c)})}function B(y){f=y,t(3,f)}function O(y){g=y,t(6,g)}function Ie(y){_=y,t(4,_)}function Be(y){k=y,t(7,k)}return l.$$set=y=>{"$$scope"in y&&t(20,r=y.$$scope)},[s,u,c,f,_,h,g,k,p,n,o,a,C,F,H,S,M,ne,Y,I,r,i,J,Q,B,O,Ie,Be]}class mn extends se{constructor(e){super(),ue(this,e,gn,_n,ie,{zoom:19},null,[-1,-1])}get zoom(){return this.$$.ctx[19]}}function bn(l){let e,t,n,i;return{c(){e=L("button"),t=oe(l[0]),this.h()},l(r){e=R(r,"BUTTON",{style:!0,class:!0});var o=A(e);t=re(o,l[0]),o.forEach(m),this.h()},h(){v(e,"style",l[2]),v(e,"class","svelte-1aag39e")},m(r,o){E(r,e,o),$(e,t),n||(i=q(e,"click",function(){De(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(r,[o]){l=r,o&1&&be(t,l[0]),o&4&&v(e,"style",l[2])},i:Z,o:Z,d(r){r&&m(e),n=!1,i()}}}function kn(l,e,t){let{text:n}=e,{callback:i=()=>{}}=e,{style:r=void 0}=e;return l.$$set=o=>{"text"in o&&t(0,n=o.text),"callback"in o&&t(1,i=o.callback),"style"in o&&t(2,r=o.style)},[n,i,r]}class we extends se{constructor(e){super(),ue(this,e,kn,bn,ie,{text:0,callback:1,style:2})}}function vn(l){let e,t,n=l[0].address+"",i,r,o,s="→",u,d,a=l[1].address+"",c,f,_,h;return _=new we({props:{text:"Play",callback:l[2]}}),{c(){e=L("div"),t=L("p"),i=oe(n),r=N(),o=L("p"),o.textContent=s,u=N(),d=L("p"),c=oe(a),f=N(),X(_.$$.fragment),this.h()},l(g){e=R(g,"DIV",{class:!0});var k=A(e);t=R(k,"P",{});var p=A(t);i=re(p,n),p.forEach(m),r=D(k),o=R(k,"P",{"data-svelte-h":!0}),le(o)!=="svelte-1giyjq6"&&(o.textContent=s),u=D(k),d=R(k,"P",{});var b=A(d);c=re(b,a),b.forEach(m),f=D(k),G(_.$$.fragment,k),k.forEach(m),this.h()},h(){v(e,"class","svelte-phufxh")},m(g,k){E(g,e,k),$(e,t),$(t,i),$(e,r),$(e,o),$(e,u),$(e,d),$(d,c),$(e,f),W(_,e,null),h=!0},p(g,[k]){(!h||k&1)&&n!==(n=g[0].address+"")&&be(i,n),(!h||k&2)&&a!==(a=g[1].address+"")&&be(c,a)},i(g){h||(T(_.$$.fragment,g),h=!0)},o(g){x(_.$$.fragment,g),h=!1},d(g){g&&m(e),K(_)}}}function wn(l,e,t){let{source:n}=e,{destination:i}=e;function r(){j.addPacket(n,i)}return l.$$set=o=>{"source"in o&&t(0,n=o.source),"destination"in o&&t(1,i=o.destination)},[n,i,r]}class yn extends se{constructor(e){super(),ue(this,e,wn,vn,ie,{source:0,destination:1})}}function rt(l,e,t){const n=l.slice();return n[2]=e[t],n}function it(l,e,t){const n=l.slice();return n[5]=e[t][0],n}function st(l){let e,t;return e=new yn({props:{source:l[2],destination:j.getSureRouterByAddress(l[5])}}),{c(){X(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.source=n[2]),i&1&&(r.destination=j.getSureRouterByAddress(n[5])),e.$set(r)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ut(l){let e,t,n=ee([...l[2].firstHop]),i=[];for(let o=0;o<n.length;o+=1)i[o]=st(it(l,n,o));const r=o=>x(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=te()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=te()},m(o,s){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(o,s);E(o,e,s),t=!0},p(o,s){if(s&1){n=ee([...o[2].firstHop]);let u;for(u=0;u<n.length;u+=1){const d=it(o,n,u);i[u]?(i[u].p(d,s),T(i[u],1)):(i[u]=st(d),i[u].c(),T(i[u],1),i[u].m(e.parentNode,e))}for(he(),u=n.length;u<i.length;u+=1)r(u);pe()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)T(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)x(i[s]);t=!1},d(o){o&&m(e),ye(i,o)}}}function En(l){let e,t,n=ee(l[0]),i=[];for(let o=0;o<n.length;o+=1)i[o]=ut(rt(l,n,o));const r=o=>x(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=te()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=te()},m(o,s){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(o,s);E(o,e,s),t=!0},p(o,[s]){if(s&1){n=ee(o[0]);let u;for(u=0;u<n.length;u+=1){const d=rt(o,n,u);i[u]?(i[u].p(d,s),T(i[u],1)):(i[u]=ut(d),i[u].c(),T(i[u],1),i[u].m(e.parentNode,e))}for(he(),u=n.length;u<i.length;u+=1)r(u);pe()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)T(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)x(i[s]);t=!1},d(o){o&&m(e),ye(i,o)}}}function $n(l,e,t){let n,i;return _e(l,j,r=>t(1,i=r)),l.$$.update=()=>{l.$$.dirty&2&&t(0,n=i.routers.filter(r=>r instanceof Ee))},[n,i]}class Cn extends se{constructor(e){super(),ue(this,e,$n,En,ie,{})}}function at(l,e,t){const n=l.slice();return n[13]=e[t],n}function ft(l){let e,t;const n=[l[13],{style:"padding: 10px 20px"}];let i={};for(let r=0;r<n.length;r+=1)i=Fe(i,n[r]);return e=new we({props:i}),{c(){X(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,o){W(e,r,o),t=!0},p(r,o){const s=o&32?Ue(n,[Oe(r[13]),n[1]]):{};e.$set(s)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){x(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Ln(l){let e,t,n,i,r,o,s,u,d,a,c,f=l[1].speedMultiplier+"",_,h,g,k,p,b,C,F,z,H=ee(l[5]),I=[];for(let P=0;P<H.length;P+=1)I[P]=ft(at(l,H,P));const S=P=>x(I[P],1,1,()=>{I[P]=null});return p=new Cn({}),{c(){e=L("div"),t=L("div"),i=N(),r=L("div"),o=L("div"),s=L("div");for(let P=0;P<I.length;P+=1)I[P].c();u=N(),d=L("div"),a=L("p"),c=oe("Speed Multiplier: "),_=oe(f),h=N(),g=L("input"),k=N(),X(p.$$.fragment),this.h()},l(P){e=R(P,"DIV",{id:!0,style:!0,class:!0});var w=A(e);t=R(w,"DIV",{id:!0,class:!0}),A(t).forEach(m),w.forEach(m),i=D(P),r=R(P,"DIV",{id:!0,style:!0,class:!0});var M=A(r);o=R(M,"DIV",{id:!0,class:!0});var ne=A(o);s=R(ne,"DIV",{id:!0,class:!0});var Y=A(s);for(let B=0;B<I.length;B+=1)I[B].l(Y);Y.forEach(m),u=D(ne),d=R(ne,"DIV",{id:!0,class:!0});var J=A(d);a=R(J,"P",{});var Q=A(a);c=re(Q,"Speed Multiplier: "),_=re(Q,f),Q.forEach(m),h=D(J),g=R(J,"INPUT",{type:!0,min:!0,max:!0,step:!0}),J.forEach(m),k=D(ne),G(p.$$.fragment,ne),ne.forEach(m),M.forEach(m),this.h()},h(){v(t,"id","resize-bar"),v(t,"class","svelte-1jmh3n8"),v(e,"id","visual-resize-bar"),v(e,"style",n=`width: ${l[0]?1:0}px`),v(e,"class","svelte-1jmh3n8"),v(s,"id","control-panel-buttons"),v(s,"class","svelte-1jmh3n8"),v(g,"type","range"),v(g,"min","0.1"),v(g,"max","2"),v(g,"step","0.1"),v(d,"id","slider"),v(d,"class","svelte-1jmh3n8"),v(o,"id","control-panel-content"),v(o,"class","svelte-1jmh3n8"),v(r,"id","control-panel"),v(r,"style",b=`width: ${l[4]}px; transition: ${l[3]};`),v(r,"class","svelte-1jmh3n8")},m(P,w){E(P,e,w),$(e,t),l[9](t),E(P,i,w),E(P,r,w),$(r,o),$(o,s);for(let M=0;M<I.length;M+=1)I[M]&&I[M].m(s,null);$(o,u),$(o,d),$(d,a),$(a,c),$(a,_),$(d,h),$(d,g),ae(g,l[1].speedMultiplier),$(o,k),W(p,o,null),C=!0,F||(z=[q(t,"pointerdown",l[6]),q(g,"change",l[10]),q(g,"input",l[10])],F=!0)},p(P,[w]){if((!C||w&1&&n!==(n=`width: ${P[0]?1:0}px`))&&v(e,"style",n),w&32){H=ee(P[5]);let M;for(M=0;M<H.length;M+=1){const ne=at(P,H,M);I[M]?(I[M].p(ne,w),T(I[M],1)):(I[M]=ft(ne),I[M].c(),T(I[M],1),I[M].m(s,null))}for(he(),M=H.length;M<I.length;M+=1)S(M);pe()}(!C||w&2)&&f!==(f=P[1].speedMultiplier+"")&&be(_,f),w&2&&ae(g,P[1].speedMultiplier),(!C||w&24&&b!==(b=`width: ${P[4]}px; transition: ${P[3]};`))&&v(r,"style",b)},i(P){if(!C){for(let w=0;w<H.length;w+=1)T(I[w]);T(p.$$.fragment,P),C=!0}},o(P){I=I.filter(Boolean);for(let w=0;w<I.length;w+=1)x(I[w]);x(p.$$.fragment,P),C=!1},d(P){P&&(m(e),m(i),m(r)),l[9](null),ye(I,P),K(p),F=!1,$e(z)}}}function Rn(l,e,t){let n,i,r,o,s,u;_e(l,Ce,k=>t(0,o=k)),_e(l,Le,k=>t(1,s=k)),_e(l,j,k=>t(8,u=k));let d,a="width 250ms";function c(k){o&&(t(3,a="none"),d.setPointerCapture(k.pointerId),d.addEventListener("pointermove",f),d.addEventListener("pointerup",_))}function f(k){t(4,r=window.innerWidth-k.clientX),r<=20&&t(4,r=0),r>=window.innerWidth-20&&t(4,r=window.innerWidth-20)}function _(k){d.removeEventListener("pointermove",f),d.removeEventListener("pointerup",_),d.releasePointerCapture(k.pointerId),t(3,a="width 250ms")}function h(k){fe[k?"unshift":"push"](()=>{d=k,t(2,d)})}function g(){s.speedMultiplier=me(this.value),Le.set(s)}return l.$$.update=()=>{l.$$.dirty&256&&t(7,n=u.routers.filter(k=>k instanceof Ee)),l.$$.dirty&130&&t(5,i=[{text:s.running?"Pause":"Resume",callback:()=>{Se(Le,s.running=!s.running,s)}},{text:"Reset",callback:()=>{j.clearPackets()}},{text:"Play All",callback:()=>{for(const k of n)for(const[p]of k.firstHop)j.addPacket(k,j.getSureRouterByAddress(p))}}]),l.$$.dirty&1&&t(4,r=o?300:0)},[o,s,d,a,r,i,c,n,u,h,g]}class In extends se{constructor(e){super(),ue(this,e,Rn,Ln,ie,{})}}function Bn(l){let e;return{c(){e=ke("circle"),this.h()},l(t){e=ve(t,"circle",{r:!0,class:!0}),A(e).forEach(m),this.h()},h(){v(e,"r","5"),v(e,"class","svelte-cb3n47")},m(t,n){E(t,e,n),l[4](e)},p:Z,i:Z,o:Z,d(t){t&&m(e),l[4](null)}}}function Tn(l,e,t){let n;_e(l,Le,f=>t(3,n=f));let{packet:i}=e,r,o,s;function u(){if(!i.nextHop)throw i.drop(),new Error("Packet has no next hop.");const f=Math.sqrt((i.node.x-i.nextHop.node.x)**2+(i.node.y-i.nextHop.node.y)**2);r=Math.round(f/250*1e3)}function d(){if(!i.nextHop)throw i.drop(),new Error("Packet has no next hop.");u(),s&&(t(2,o=s.animate([{transform:`translate(${i.node.x}px, ${i.node.y}px)`},{transform:`translate(${i.nextHop.node.x}px, ${i.nextHop.node.y}px)`}],{duration:r,easing:"linear"})),t(2,o.onfinish=a,o))}function a(){if(!i.nextHop)throw i.drop(),new Error("Packet has no next hop.");t(1,i.node=i.nextHop.node,i),i.nextHop.receivePacket(i),d()}requestAnimationFrame(d);function c(f){fe[f?"unshift":"push"](()=>{s=f,t(0,s)})}return l.$$set=f=>{"packet"in f&&t(1,i=f.packet)},l.$$.update=()=>{l.$$.dirty&12&&o&&t(2,o.playbackRate=n.speedMultiplier,o),l.$$.dirty&12&&o&&(n.running?o.play():o.pause())},[s,i,o,n,c]}class Pn extends se{constructor(e){super(),ue(this,e,Tn,Bn,ie,{packet:1})}}function Nn(l){let e,t,n,i,r,o,s,u,d=l[0].distance+"",a,c,f,_;return{c(){e=ke("line"),t=N(),n=ke("rect"),s=N(),u=ke("text"),a=oe(d),c=oe(" km"),this.h()},l(h){e=ve(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),A(e).forEach(m),t=D(h),n=ve(h,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),A(n).forEach(m),s=D(h),u=ve(h,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var g=A(u);a=re(g,d),c=re(g," km"),g.forEach(m),this.h()},h(){v(e,"x1",l[4]),v(e,"y1",l[2]),v(e,"x2",l[3]),v(e,"y2",l[1]),v(n,"id",i=l[0].id),v(n,"x",r=l[5].x-ze/2),v(n,"y",o=l[5].y-Ae/2),v(n,"width",ze),v(n,"height",Ae),v(n,"class","svelte-zjn2k6"),v(u,"x",f=l[5].x),v(u,"y",_=l[5].y),v(u,"dominant-baseline","central"),v(u,"class","svelte-zjn2k6")},m(h,g){E(h,e,g),E(h,t,g),E(h,n,g),E(h,s,g),E(h,u,g),$(u,a),$(u,c)},p(h,[g]){g&16&&v(e,"x1",h[4]),g&4&&v(e,"y1",h[2]),g&8&&v(e,"x2",h[3]),g&2&&v(e,"y2",h[1]),g&1&&i!==(i=h[0].id)&&v(n,"id",i),g&32&&r!==(r=h[5].x-ze/2)&&v(n,"x",r),g&32&&o!==(o=h[5].y-Ae/2)&&v(n,"y",o),g&1&&d!==(d=h[0].distance+"")&&be(a,d),g&32&&f!==(f=h[5].x)&&v(u,"x",f),g&32&&_!==(_=h[5].y)&&v(u,"y",_)},i:Z,o:Z,d(h){h&&(m(e),m(t),m(n),m(s),m(u))}}}const ze=50,Ae=20;function ct(l,e){return(l+e)/2}function Dn(l,e,t){let n,i,r,o,s,{link:u}=e;return l.$$set=d=>{"link"in d&&t(0,u=d.link)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=u.source.node.x),l.$$.dirty&1&&t(3,i=u.target.node.x),l.$$.dirty&1&&t(2,r=u.source.node.y),l.$$.dirty&1&&t(1,o=u.target.node.y),l.$$.dirty&30&&t(5,s={x:ct(n,i),y:ct(r,o)})},[u,o,r,i,n,s]}class Hn extends se{constructor(e){super(),ue(this,e,Dn,Nn,ie,{link:0})}}function xn(l){let e,t,n,i,r,o,s,u=l[0].node.label+"",d,a,c;return{c(){e=ke("circle"),o=N(),s=ke("text"),d=oe(u),this.h()},l(f){e=ve(f,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),A(e).forEach(m),o=D(f),s=ve(f,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var _=A(s);d=re(_,u),_.forEach(m),this.h()},h(){v(e,"id",t=l[0].id.toString()),v(e,"cx",n=l[0].node.x),v(e,"cy",i=l[0].node.y),v(e,"r","20"),v(e,"fill",r=l[1][l[0].type]),v(e,"class","svelte-17jcsko"),v(s,"x",a=l[0].node.x),v(s,"y",c=l[0].node.y),v(s,"dominant-baseline","central"),v(s,"class","svelte-17jcsko")},m(f,_){E(f,e,_),E(f,o,_),E(f,s,_),$(s,d)},p(f,[_]){_&1&&t!==(t=f[0].id.toString())&&v(e,"id",t),_&1&&n!==(n=f[0].node.x)&&v(e,"cx",n),_&1&&i!==(i=f[0].node.y)&&v(e,"cy",i),_&1&&r!==(r=f[1][f[0].type])&&v(e,"fill",r),_&1&&u!==(u=f[0].node.label+"")&&be(d,u),_&1&&a!==(a=f[0].node.x)&&v(s,"x",a),_&1&&c!==(c=f[0].node.y)&&v(s,"y",c)},i:Z,o:Z,d(f){f&&(m(e),m(o),m(s))}}}function Mn(l,e,t){let{router:n}=e;const i={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return l.$$set=r=>{"router"in r&&t(0,n=r.router)},[n,i]}class zn extends se{constructor(e){super(),ue(this,e,Mn,xn,ie,{router:0})}}function An(l){let e,t,n,i;return{c(){e=L("div"),t=oe(l[0]),this.h()},l(r){e=R(r,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var o=A(e);t=re(o,l[0]),o.forEach(m),this.h()},h(){v(e,"draggable","true"),v(e,"role","button"),v(e,"tabindex","-1"),Pe(e,"background-color",l[1]),v(e,"class","svelte-blffat")},m(r,o){E(r,e,o),$(e,t),n||(i=q(e,"dragstart",l[2]),n=!0)},p(r,[o]){o&1&&be(t,r[0]),o&2&&Pe(e,"background-color",r[1])},i:Z,o:Z,d(r){r&&m(e),n=!1,i()}}}function Sn(l,e,t){let n;_e(l,Ce,u=>t(4,n=u));let{text:i}=e,{type:r}=e,{color:o}=e;function s(u){var d;if(n){alert("Network is locked.");return}(d=u.dataTransfer)==null||d.setData("text/plain",r)}return l.$$set=u=>{"text"in u&&t(0,i=u.text),"type"in u&&t(3,r=u.type),"color"in u&&t(1,o=u.color)},[i,o,s,r]}class Fn extends se{constructor(e){super(),ue(this,e,Sn,An,ie,{text:0,type:3,color:1})}}function dt(l,e,t){const n=l.slice();return n[4]=e[t],n}function ht(l,e,t){const n=l.slice();return n[7]=e[t],n}function pt(l){let e,t,n,i=ee(l[2]),r=[];for(let a=0;a<i.length;a+=1)r[a]=_t(ht(l,i,a));const o=a=>x(r[a],1,1,()=>{r[a]=null});let s=ee(l[1]),u=[];for(let a=0;a<s.length;a+=1)u[a]=gt(dt(l,s,a));const d=a=>x(u[a],1,1,()=>{u[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=N();for(let a=0;a<u.length;a+=1)u[a].c();t=te()},l(a){for(let c=0;c<r.length;c+=1)r[c].l(a);e=D(a);for(let c=0;c<u.length;c+=1)u[c].l(a);t=te()},m(a,c){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(a,c);E(a,e,c);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(a,c);E(a,t,c),n=!0},p(a,c){if(c&4){i=ee(a[2]);let f;for(f=0;f<i.length;f+=1){const _=ht(a,i,f);r[f]?(r[f].p(_,c),T(r[f],1)):(r[f]=_t(_),r[f].c(),T(r[f],1),r[f].m(e.parentNode,e))}for(he(),f=i.length;f<r.length;f+=1)o(f);pe()}if(c&2){s=ee(a[1]);let f;for(f=0;f<s.length;f+=1){const _=dt(a,s,f);u[f]?(u[f].p(_,c),T(u[f],1)):(u[f]=gt(_),u[f].c(),T(u[f],1),u[f].m(t.parentNode,t))}for(he(),f=s.length;f<u.length;f+=1)d(f);pe()}},i(a){if(!n){for(let c=0;c<i.length;c+=1)T(r[c]);for(let c=0;c<s.length;c+=1)T(u[c]);n=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)x(r[c]);u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)x(u[c]);n=!1},d(a){a&&(m(e),m(t)),ye(r,a),ye(u,a)}}}function _t(l){let e,t;const n=[l[7]];let i={};for(let r=0;r<n.length;r+=1)i=Fe(i,n[r]);return e=new Fn({props:i}),{c(){X(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,o){W(e,r,o),t=!0},p(r,o){const s=o&4?Ue(n,[Oe(r[7])]):{};e.$set(s)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){x(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function gt(l){let e,t;const n=[l[4]];let i={};for(let r=0;r<n.length;r+=1)i=Fe(i,n[r]);return e=new we({props:i}),{c(){X(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,o){W(e,r,o),t=!0},p(r,o){const s=o&2?Ue(n,[Oe(r[4])]):{};e.$set(s)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){x(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Un(l){let e,t,n,i;e=new we({props:{text:l[0]?"Edit":"Simulation",callback:l[3],style:`width: 100px; background-color: ${l[0]?"#3CB371":"#6495ED"};`}});let r=!l[0]&&pt(l);return{c(){X(e.$$.fragment),t=N(),r&&r.c(),n=te()},l(o){G(e.$$.fragment,o),t=D(o),r&&r.l(o),n=te()},m(o,s){W(e,o,s),E(o,t,s),r&&r.m(o,s),E(o,n,s),i=!0},p(o,[s]){const u={};s&1&&(u.text=o[0]?"Edit":"Simulation"),s&1&&(u.callback=o[3]),s&1&&(u.style=`width: 100px; background-color: ${o[0]?"#3CB371":"#6495ED"};`),e.$set(u),o[0]?r&&(he(),x(r,1,1,()=>{r=null}),pe()):r?(r.p(o,s),s&1&&T(r,1)):(r=pt(o),r.c(),T(r,1),r.m(n.parentNode,n))},i(o){i||(T(e.$$.fragment,o),T(r),i=!0)},o(o){x(e.$$.fragment,o),x(r),i=!1},d(o){o&&(m(t),m(n)),K(e,o),r&&r.d(o)}}}function On(l,e,t){let n,i;_e(l,Ce,s=>t(0,i=s));const r=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],o=()=>{Se(Ce,i=!i,i),j.clearPackets()};return l.$$.update=()=>{l.$$.dirty&1&&t(1,n=[{text:"Clear",callback:()=>{if(i){alert("Network is locked.");return}confirm("Are you sure you want to clear the network?")&&j.clear()}}])},[i,n,r,o]}class jn extends se{constructor(e){super(),ue(this,e,On,Un,ie,{})}}function Yn(l){let e,t="Drag and drop routers to add them to the network.",n,i,r="Hold the shift key and drag routers to make links.",o,s,u="Double click a router to configure it.",d,a,c="The clear button will delete the entire network.",f,_,h,g,k="Press Esc to close this popup.";return{c(){e=L("p"),e.textContent=t,n=N(),i=L("p"),i.textContent=r,o=N(),s=L("p"),s.textContent=u,d=N(),a=L("p"),a.textContent=c,f=N(),_=L("br"),h=N(),g=L("p"),g.textContent=k},l(p){e=R(p,"P",{"data-svelte-h":!0}),le(e)!=="svelte-bhocp0"&&(e.textContent=t),n=D(p),i=R(p,"P",{"data-svelte-h":!0}),le(i)!=="svelte-ddjc2m"&&(i.textContent=r),o=D(p),s=R(p,"P",{"data-svelte-h":!0}),le(s)!=="svelte-11scjjz"&&(s.textContent=u),d=D(p),a=R(p,"P",{"data-svelte-h":!0}),le(a)!=="svelte-vcl8s3"&&(a.textContent=c),f=D(p),_=R(p,"BR",{}),h=D(p),g=R(p,"P",{"data-svelte-h":!0}),le(g)!=="svelte-1dvt5v1"&&(g.textContent=k)},m(p,b){E(p,e,b),E(p,n,b),E(p,i,b),E(p,o,b),E(p,s,b),E(p,d,b),E(p,a,b),E(p,f,b),E(p,_,b),E(p,h,b),E(p,g,b)},p:Z,d(p){p&&(m(e),m(n),m(i),m(o),m(s),m(d),m(a),m(f),m(_),m(h),m(g))}}}function qn(l){let e,t,n,i,r,o;t=new we({props:{text:"Help",callback:l[1]}});function s(d){l[2](d)}let u={$$slots:{default:[Yn]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.dialog=l[0]),i=new Ye({props:u}),fe.push(()=>de(i,"dialog",s)),{c(){e=L("div"),X(t.$$.fragment),n=N(),X(i.$$.fragment)},l(d){e=R(d,"DIV",{});var a=A(e);G(t.$$.fragment,a),a.forEach(m),n=D(d),G(i.$$.fragment,d)},m(d,a){E(d,e,a),W(t,e,null),E(d,n,a),W(i,d,a),o=!0},p(d,[a]){const c={};a&1&&(c.callback=d[1]),t.$set(c);const f={};a&8&&(f.$$scope={dirty:a,ctx:d}),!r&&a&1&&(r=!0,f.dialog=d[0],ce(()=>r=!1)),i.$set(f)},i(d){o||(T(t.$$.fragment,d),T(i.$$.fragment,d),o=!0)},o(d){x(t.$$.fragment,d),x(i.$$.fragment,d),o=!1},d(d){d&&(m(e),m(n)),K(t),K(i,d)}}}function Vn(l,e,t){let n;const i=()=>{n.showModal()};function r(o){n=o,t(0,n)}return[n,i,r]}class Xn extends se{constructor(e){super(),ue(this,e,Vn,qn,ie,{})}}function Gn(l){let e,t,n,i,r,o;return e=new we({props:{text:" - ",callback:l[1]}}),n=new we({props:{text:"Fullscreen",callback:l[2]}}),r=new we({props:{text:" + ",callback:l[3]}}),{c(){X(e.$$.fragment),t=N(),X(n.$$.fragment),i=N(),X(r.$$.fragment)},l(s){G(e.$$.fragment,s),t=D(s),G(n.$$.fragment,s),i=D(s),G(r.$$.fragment,s)},m(s,u){W(e,s,u),E(s,t,u),W(n,s,u),E(s,i,u),W(r,s,u),o=!0},p(s,[u]){const d={};u&1&&(d.callback=s[1]),e.$set(d);const a={};u&1&&(a.callback=s[3]),r.$set(a)},i(s){o||(T(e.$$.fragment,s),T(n.$$.fragment,s),T(r.$$.fragment,s),o=!0)},o(s){x(e.$$.fragment,s),x(n.$$.fragment,s),x(r.$$.fragment,s),o=!1},d(s){s&&(m(t),m(i)),K(e,s),K(n,s),K(r,s)}}}function Wn(l,e,t){let{zoom:n}=e;const i=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,s)},r=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},o=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,s)};return l.$$set=s=>{"zoom"in s&&t(0,n=s.zoom)},[n,i,r,o]}class Kn extends se{constructor(e){super(),ue(this,e,Wn,Gn,ie,{zoom:0})}}function mt(l,e,t){const n=l.slice();return n[5]=e[t],n}function bt(l,e,t){const n=l.slice();return n[8]=e[t],n}function kt(l,e,t){const n=l.slice();return n[11]=e[t],n}function vt(l,e){let t,n,i;return n=new Hn({props:{link:e[11]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(r){t=te(),G(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){E(r,t,o),W(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.link=e[11]),n.$set(s)},i(r){i||(T(n.$$.fragment,r),i=!0)},o(r){x(n.$$.fragment,r),i=!1},d(r){r&&m(t),K(n,r)}}}function wt(l,e){let t,n,i;return n=new zn({props:{router:e[8]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(r){t=te(),G(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){E(r,t,o),W(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.router=e[8]),n.$set(s)},i(r){i||(T(n.$$.fragment,r),i=!0)},o(r){x(n.$$.fragment,r),i=!1},d(r){r&&m(t),K(n,r)}}}function yt(l,e){let t,n,i;return n=new Pn({props:{packet:e[5]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(r){t=te(),G(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){E(r,t,o),W(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.packet=e[5]),n.$set(s)},i(r){i||(T(n.$$.fragment,r),i=!0)},o(r){x(n.$$.fragment,r),i=!1},d(r){r&&m(t),K(n,r)}}}function Jn(l){let e=[],t=new Map,n,i=[],r=new Map,o,s=[],u=new Map,d,a,c=ee(l[1].links);const f=p=>p[11].id;for(let p=0;p<c.length;p+=1){let b=kt(l,c,p),C=f(b);t.set(C,e[p]=vt(C,b))}let _=ee(l[1].routers);const h=p=>p[8].id;for(let p=0;p<_.length;p+=1){let b=bt(l,_,p),C=h(b);r.set(C,i[p]=wt(C,b))}let g=ee(l[1].packets);const k=p=>p[5].id;for(let p=0;p<g.length;p+=1){let b=mt(l,g,p),C=k(b);u.set(C,s[p]=yt(C,b))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();n=N();for(let p=0;p<i.length;p+=1)i[p].c();o=N();for(let p=0;p<s.length;p+=1)s[p].c();d=te()},l(p){for(let b=0;b<e.length;b+=1)e[b].l(p);n=D(p);for(let b=0;b<i.length;b+=1)i[b].l(p);o=D(p);for(let b=0;b<s.length;b+=1)s[b].l(p);d=te()},m(p,b){for(let C=0;C<e.length;C+=1)e[C]&&e[C].m(p,b);E(p,n,b);for(let C=0;C<i.length;C+=1)i[C]&&i[C].m(p,b);E(p,o,b);for(let C=0;C<s.length;C+=1)s[C]&&s[C].m(p,b);E(p,d,b),a=!0},p(p,b){b&2&&(c=ee(p[1].links),he(),e=Me(e,b,f,1,p,c,t,n.parentNode,xe,vt,n,kt),pe()),b&2&&(_=ee(p[1].routers),he(),i=Me(i,b,h,1,p,_,r,o.parentNode,xe,wt,o,bt),pe()),b&2&&(g=ee(p[1].packets),he(),s=Me(s,b,k,1,p,g,u,d.parentNode,xe,yt,d,mt),pe())},i(p){if(!a){for(let b=0;b<c.length;b+=1)T(e[b]);for(let b=0;b<_.length;b+=1)T(i[b]);for(let b=0;b<g.length;b+=1)T(s[b]);a=!0}},o(p){for(let b=0;b<e.length;b+=1)x(e[b]);for(let b=0;b<i.length;b+=1)x(i[b]);for(let b=0;b<s.length;b+=1)x(s[b]);a=!1},d(p){p&&(m(n),m(o),m(d));for(let b=0;b<e.length;b+=1)e[b].d(p);for(let b=0;b<i.length;b+=1)i[b].d(p);for(let b=0;b<s.length;b+=1)s[b].d(p)}}}function Qn(l){let e,t,n,i,r,o,s,u,d,a,c,f,_,h,g,k,p;function b(H){l[2](H)}let C={$$slots:{default:[Jn]},$$scope:{ctx:l}};l[0]!==void 0&&(C.zoom=l[0]),n=new mn({props:C}),fe.push(()=>de(n,"zoom",b)),s=new jn({}),a=new Xn({});function F(H){l[3](H)}let z={};return l[0]!==void 0&&(z.zoom=l[0]),_=new Kn({props:z}),fe.push(()=>de(_,"zoom",F)),k=new In({}),{c(){e=L("div"),t=L("div"),X(n.$$.fragment),r=N(),o=L("div"),X(s.$$.fragment),u=N(),d=L("div"),X(a.$$.fragment),c=N(),f=L("div"),X(_.$$.fragment),g=N(),X(k.$$.fragment),this.h()},l(H){e=R(H,"DIV",{id:!0,class:!0});var I=A(e);t=R(I,"DIV",{id:!0,class:!0});var S=A(t);G(n.$$.fragment,S),r=D(S),o=R(S,"DIV",{id:!0,class:!0});var P=A(o);G(s.$$.fragment,P),P.forEach(m),u=D(S),d=R(S,"DIV",{id:!0,class:!0});var w=A(d);G(a.$$.fragment,w),w.forEach(m),c=D(S),f=R(S,"DIV",{id:!0,class:!0});var M=A(f);G(_.$$.fragment,M),M.forEach(m),S.forEach(m),g=D(I),G(k.$$.fragment,I),I.forEach(m),this.h()},h(){v(o,"id","top-left-bar"),v(o,"class","absolute-flex svelte-1kpnzxr"),v(d,"id","bottom-left-bar"),v(d,"class","absolute-flex svelte-1kpnzxr"),v(f,"id","bottom-right-bar"),v(f,"class","absolute-flex svelte-1kpnzxr"),v(t,"id","network"),v(t,"class","svelte-1kpnzxr"),v(e,"id","mpls"),v(e,"class","svelte-1kpnzxr")},m(H,I){E(H,e,I),$(e,t),W(n,t,null),$(t,r),$(t,o),W(s,o,null),$(t,u),$(t,d),W(a,d,null),$(t,c),$(t,f),W(_,f,null),$(e,g),W(k,e,null),p=!0},p(H,[I]){const S={};I&16386&&(S.$$scope={dirty:I,ctx:H}),!i&&I&1&&(i=!0,S.zoom=H[0],ce(()=>i=!1)),n.$set(S);const P={};!h&&I&1&&(h=!0,P.zoom=H[0],ce(()=>h=!1)),_.$set(P)},i(H){p||(T(n.$$.fragment,H),T(s.$$.fragment,H),T(a.$$.fragment,H),T(_.$$.fragment,H),T(k.$$.fragment,H),p=!0)},o(H){x(n.$$.fragment,H),x(s.$$.fragment,H),x(a.$$.fragment,H),x(_.$$.fragment,H),x(k.$$.fragment,H),p=!1},d(H){H&&m(e),K(n),K(s),K(a),K(_),K(k)}}}function Zn(l,e,t){let n,i;_e(l,Le,u=>t(4,n=u)),_e(l,j,u=>t(1,i=u));let r;It(()=>{window.addEventListener("visibilitychanged",()=>{Se(Le,n.running=!document.hidden,n)})});function o(u){r=u,t(0,r)}function s(u){r=u,t(0,r)}return[r,i,o,s]}class el extends se{constructor(e){super(),ue(this,e,Zn,Qn,ie,{})}}function tl(l){let e,t;return e=new el({}),{c(){X(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p:Z,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}class cl extends se{constructor(e){super(),ue(this,e,null,tl,ie,{})}}export{cl as component};
