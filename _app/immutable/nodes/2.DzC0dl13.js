var Ee=Object.defineProperty;var De=(t,e,n)=>e in t?Ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(De(t,typeof e!="symbol"?e+"":e,n),n);import{s as J,n as $,a as Be,u as Ie,g as Pe,b as Re,x as Ne,e as ae,y as Me,r as Oe,c as Ye,o as ze,z as fe}from"../chunks/scheduler.DYwTIzg0.js";import{S as Q,i as Z,e as E,t as X,c as D,a as M,b as q,d as p,l as m,q as re,g as v,h as R,z as j,j as ke,m as A,n as G,A as Le,s as F,v as ne,B as de,f as K,w as le,x as oe,y as se,C as S,o as V,D as W,E as Te,r as je,p as Ae,F as ie,G as ee,H as te}from"../chunks/index.DDwbF6wT.js";import{w as Ge}from"../chunks/index.4t73ojvV.js";function H(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function he(t,e){const n={},s={},r={$$scope:1};let l=t.length;for(;l--;){const o=t[l],a=e[l];if(a){for(const c in o)c in a||(s[c]=1);for(const c in a)r[c]||(n[c]=a[c],r[c]=1);t[l]=a}else for(const c in o)r[c]=1}for(const o in s)o in n||(n[o]=void 0);return n}function He(t){return typeof t=="object"&&t!==null?t:{}}class Ue{constructor(){Y(this,"store",Ge({nodes:[],connections:[]}));Y(this,"set",this.store.set);Y(this,"update",this.store.update);Y(this,"subscribe",this.store.subscribe);Y(this,"_nodes",[]);Y(this,"_connections",[]);Y(this,"nodeMap",new Map);Y(this,"counter",0)}get nodes(){return this._nodes}get connections(){return this._connections}get networkState(){return{nodes:this.nodes,connections:this.connections}}deleteConnection(e){this._connections=this._connections.filter(n=>n.source.id!==e.source.id||n.target.id!==e.target.id),this.fastUpdate()}deleteNode(e){this.getNode(e)&&(this._nodes=this._nodes.filter(s=>s.id!==e),this.nodeMap.delete(e)),this.fastUpdate()}addConnection(e){e.source!==e.target&&(this.doesConnectionExist(e.source,e.target)||this.doesConnectionExist(e.target,e.source)||(this._connections.push(e),this.fastUpdate()))}doesConnectionExist(e,n){return this._connections.some(s=>s.source===e&&s.target===n)}createNode(e){const n={id:this.counter++,...e};this.addNode(n)}addNode(e){this._nodes.push(e),this.nodeMap.set(e.id,e),this.fastUpdate()}getNode(e){return this.nodeMap.get(e)}getSureNode(e){const n=this.getNode(e);if(!n)throw new Error(`Node with id ${e} not found`);return n}fastUpdate(){this.store.set(this.networkState)}}const Xe=new Ue,U=Xe;var P=(t=>(t[t.Customer=0]="Customer",t[t.Edge=1]="Edge",t[t.Core=2]="Core",t))(P||{});function qe(t){return Object.values(P).includes(t)}function Fe(t){let e,n,s,r;return{c(){e=E("div"),n=X(t[0]),this.h()},l(l){e=D(l,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var o=M(e);n=q(o,t[0]),o.forEach(p),this.h()},h(){m(e,"draggable","true"),m(e,"role","button"),m(e,"tabindex","-1"),re(e,"background-color",t[1]),m(e,"class","svelte-hr3g0j")},m(l,o){v(l,e,o),R(e,n),s||(r=j(e,"dragstart",t[2]),s=!0)},p(l,[o]){o&1&&ke(n,l[0]),o&2&&re(e,"background-color",l[1])},i:$,o:$,d(l){l&&p(e),s=!1,r()}}}function Ke(t,e,n){let{text:s}=e,{type:r}=e,{color:l}=e;function o(a){var c;(c=a.dataTransfer)==null||c.setData("text/plain",r.toString())}return t.$$set=a=>{"text"in a&&n(0,s=a.text),"type"in a&&n(3,r=a.type),"color"in a&&n(1,l=a.color)},[s,l,o,r]}class Se extends Q{constructor(e){super(),Z(this,e,Ke,Fe,J,{text:0,type:3,color:1})}}function We(t){let e,n,s,r;const l=t[2].default,o=Be(l,t,t[1],null);return{c(){e=E("dialog"),o&&o.c(),this.h()},l(a){e=D(a,"DIALOG",{class:!0});var c=M(e);o&&o.l(c),c.forEach(p),this.h()},h(){m(e,"class","svelte-1a54f3s")},m(a,c){v(a,e,c),o&&o.m(e,null),t[4](e),n=!0,s||(r=j(e,"close",t[3]),s=!0)},p(a,[c]){o&&o.p&&(!n||c&2)&&Ie(o,l,a,a[1],n?Re(l,a[1],c,null):Pe(a[1]),null)},i(a){n||(A(o,a),n=!0)},o(a){G(o,a),n=!1},d(a){a&&p(e),o&&o.d(a),t[4](null),s=!1,r()}}}function Je(t,e,n){let{$$slots:s={},$$scope:r}=e,{dialog:l=null}=e;function o(c){Ne.call(this,t,c)}function a(c){ae[c?"unshift":"push"](()=>{l=c,n(0,l)})}return t.$$set=c=>{"dialog"in c&&n(0,l=c.dialog),"$$scope"in c&&n(1,r=c.$$scope)},[l,r,s,o,a]}class Qe extends Q{constructor(e){super(),Z(this,e,Je,We,J,{dialog:0})}}function Ze(t){let e,n,s,r,l,o,a;return{c(){e=X("Drag and drop nodes that you want to add. "),n=E("br"),s=E("br"),r=X(`
	Hold shiftKey and drag nodes to make connections between the nodes. `),l=E("br"),o=E("br"),a=X(`
	Press Esc to close this popup.`)},l(c){e=q(c,"Drag and drop nodes that you want to add. "),n=D(c,"BR",{}),s=D(c,"BR",{}),r=q(c,`
	Hold shiftKey and drag nodes to make connections between the nodes. `),l=D(c,"BR",{}),o=D(c,"BR",{}),a=q(c,`
	Press Esc to close this popup.`)},m(c,y){v(c,e,y),v(c,n,y),v(c,s,y),v(c,r,y),v(c,l,y),v(c,o,y),v(c,a,y)},p:$,d(c){c&&(p(e),p(n),p(s),p(r),p(l),p(o),p(a))}}}function Ve(t){let e,n,s="Help",r,l,o,a,c,y;function h(d){t[2](d)}let g={$$slots:{default:[Ze]},$$scope:{ctx:t}};return t[0]!==void 0&&(g.dialog=t[0]),l=new Qe({props:g}),ae.push(()=>Le(l,"dialog",h)),{c(){e=E("div"),n=E("button"),n.textContent=s,r=F(),ne(l.$$.fragment),this.h()},l(d){e=D(d,"DIV",{});var N=M(e);n=D(N,"BUTTON",{class:!0,"data-svelte-h":!0}),de(n)!=="svelte-ayihft"&&(n.textContent=s),N.forEach(p),r=K(d),le(l.$$.fragment,d),this.h()},h(){m(n,"class","svelte-oqq8i4")},m(d,N){v(d,e,N),R(e,n),v(d,r,N),oe(l,d,N),a=!0,c||(y=j(n,"click",t[1]),c=!0)},p(d,[N]){const z={};N&8&&(z.$$scope={dirty:N,ctx:d}),!o&&N&1&&(o=!0,z.dialog=d[0],Me(()=>o=!1)),l.$set(z)},i(d){a||(A(l.$$.fragment,d),a=!0)},o(d){G(l.$$.fragment,d),a=!1},d(d){d&&(p(e),p(r)),se(l,d),c=!1,y()}}}function $e(t,e,n){let s;const r=()=>{s.showModal()};function l(o){s=o,n(0,s)}return[s,r,l]}class et extends Q{constructor(e){super(),Z(this,e,$e,Ve,J,{})}}function _e(t,e,n){const s=t.slice();return s[20]=e[n],s}function me(t,e,n){const s=t.slice();return s[23]=e[n],s}function pe(t,e,n){const s=t.slice();return s[26]=e[n],s}function be(t){let e,n="Loading...";return{c(){e=E("h1"),e.textContent=n,this.h()},l(s){e=D(s,"H1",{style:!0,"data-svelte-h":!0}),de(e)!=="svelte-ncjhv1"&&(e.textContent=n),this.h()},h(){re(e,"font-size","200px")},m(s,r){v(s,e,r)},d(s){s&&p(e)}}}function ye(t){let e,n=[xe(t[26]),{stroke:"black"}],s={};for(let r=0;r<n.length;r+=1)s=fe(s,n[r]);return{c(){e=S("line"),this.h()},l(r){e=W(r,"line",{stroke:!0}),M(e).forEach(p),this.h()},h(){ee(e,s),te(e,"svelte-13c8du2",!0)},m(r,l){v(r,e,l)},p(r,l){ee(e,s=he(n,[l&64&&xe(r[26]),{stroke:"black"}])),te(e,"svelte-13c8du2",!0)},d(r){r&&p(e)}}}function we(t){let e,n=[ue(t[3]),ce(t[14](t[1].x,t[1].y)),{stroke:"black"}],s={};for(let r=0;r<n.length;r+=1)s=fe(s,n[r]);return{c(){e=S("line"),this.h()},l(r){e=W(r,"line",{stroke:!0}),M(e).forEach(p),this.h()},h(){ee(e,s),te(e,"svelte-13c8du2",!0)},m(r,l){v(r,e,l)},p(r,l){ee(e,s=he(n,[l&8&&ue(r[3]),l&2&&ce(r[14](r[1].x,r[1].y)),{stroke:"black"}])),te(e,"svelte-13c8du2",!0)},d(r){r&&p(e)}}}function Ce(t){let e,n,s,r,l,o,a=t[23].label+"",c,y,h;return{c(){e=S("circle"),o=S("text"),c=X(a),this.h()},l(g){e=W(g,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),M(e).forEach(p),o=W(g,"text",{x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,class:!0});var d=M(o);c=q(d,a),d.forEach(p),this.h()},h(){m(e,"id",n=t[23].id.toString()),m(e,"cx",s=t[23].x),m(e,"cy",r=t[23].y),m(e,"r","20"),m(e,"fill",l=t[8][t[23].type]),m(e,"class","svelte-13c8du2"),m(o,"x",y=t[23].x),m(o,"y",h=t[23].y),m(o,"text-anchor","middle"),m(o,"alignment-baseline","middle"),m(o,"class","svelte-13c8du2")},m(g,d){v(g,e,d),v(g,o,d),R(o,c)},p(g,d){d&64&&n!==(n=g[23].id.toString())&&m(e,"id",n),d&64&&s!==(s=g[23].x)&&m(e,"cx",s),d&64&&r!==(r=g[23].y)&&m(e,"cy",r),d&64&&l!==(l=g[8][g[23].type])&&m(e,"fill",l),d&64&&a!==(a=g[23].label+"")&&ke(c,a),d&64&&y!==(y=g[23].x)&&m(o,"x",y),d&64&&h!==(h=g[23].y)&&m(o,"y",h)},d(g){g&&(p(e),p(o))}}}function ve(t){let e,n;const s=[t[20]];let r={};for(let l=0;l<s.length;l+=1)r=fe(r,s[l]);return e=new Se({props:r}),{c(){ne(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,o){oe(e,l,o),n=!0},p(l,o){const a=o&512?he(s,[He(l[20])]):{};e.$set(a)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){G(e.$$.fragment,l),n=!1},d(l){se(e,l)}}}function tt(t){let e,n,s,r,l,o,a,c,y,h,g,d,N,z,k=!t[5]&&be(),L=H(t[6].connections),w=[];for(let i=0;i<L.length;i+=1)w[i]=ye(pe(t,L,i));let x=t[4]===t[7].CONNECTING&&t[3]&&we(t),T=H(t[6].nodes),C=[];for(let i=0;i<T.length;i+=1)C[i]=Ce(me(t,T,i));let O=H(t[9]),b=[];for(let i=0;i<O.length;i+=1)b[i]=ve(_e(t,O,i));const f=i=>G(b[i],1,1,()=>{b[i]=null});return g=new et({}),{c(){e=E("div"),k&&k.c(),n=F(),s=S("svg");for(let i=0;i<w.length;i+=1)w[i].c();r=V(),x&&x.c(),l=V();for(let i=0;i<C.length;i+=1)C[i].c();a=F(),c=E("div");for(let i=0;i<b.length;i+=1)b[i].c();y=F(),h=E("div"),ne(g.$$.fragment),this.h()},l(i){e=D(i,"DIV",{id:!0,class:!0});var _=M(e);k&&k.l(_),n=K(_),s=W(_,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var u=M(s);for(let I=0;I<w.length;I+=1)w[I].l(u);r=V(),x&&x.l(u),l=V();for(let I=0;I<C.length;I+=1)C[I].l(u);u.forEach(p),a=K(_),c=D(_,"DIV",{id:!0,class:!0});var B=M(c);for(let I=0;I<b.length;I+=1)b[I].l(B);B.forEach(p),y=K(_),h=D(_,"DIV",{id:!0,class:!0});var ge=M(h);le(g.$$.fragment,ge),ge.forEach(p),_.forEach(p),this.h()},h(){m(s,"viewBox",o=`${t[0].x} ${t[0].y} ${t[0].width} ${t[0].height}`),m(s,"role","button"),m(s,"tabindex","-1"),m(s,"class","svelte-13c8du2"),m(c,"id","drag-and-drop-container"),m(c,"class","absolute-flex svelte-13c8du2"),m(h,"id","bottom-bar"),m(h,"class","absolute-flex svelte-13c8du2"),m(e,"id","svg-container"),m(e,"class","svelte-13c8du2")},m(i,_){v(i,e,_),k&&k.m(e,null),R(e,n),R(e,s);for(let u=0;u<w.length;u+=1)w[u]&&w[u].m(s,null);R(s,r),x&&x.m(s,null),R(s,l);for(let u=0;u<C.length;u+=1)C[u]&&C[u].m(s,null);t[16](s),R(e,a),R(e,c);for(let u=0;u<b.length;u+=1)b[u]&&b[u].m(c,null);R(e,y),R(e,h),oe(g,h,null),d=!0,N||(z=[j(s,"wheel",t[12]),j(s,"pointerdown",t[10]),j(s,"pointerup",t[11]),j(s,"dragover",Te(t[15])),j(s,"drop",t[13])],N=!0)},p(i,[_]){if(i[5]?k&&(k.d(1),k=null):k||(k=be(),k.c(),k.m(e,n)),_&64){L=H(i[6].connections);let u;for(u=0;u<L.length;u+=1){const B=pe(i,L,u);w[u]?w[u].p(B,_):(w[u]=ye(B),w[u].c(),w[u].m(s,r))}for(;u<w.length;u+=1)w[u].d(1);w.length=L.length}if(i[4]===i[7].CONNECTING&&i[3]?x?x.p(i,_):(x=we(i),x.c(),x.m(s,l)):x&&(x.d(1),x=null),_&320){T=H(i[6].nodes);let u;for(u=0;u<T.length;u+=1){const B=me(i,T,u);C[u]?C[u].p(B,_):(C[u]=Ce(B),C[u].c(),C[u].m(s,null))}for(;u<C.length;u+=1)C[u].d(1);C.length=T.length}if((!d||_&1&&o!==(o=`${i[0].x} ${i[0].y} ${i[0].width} ${i[0].height}`))&&m(s,"viewBox",o),_&512){O=H(i[9]);let u;for(u=0;u<O.length;u+=1){const B=_e(i,O,u);b[u]?(b[u].p(B,_),A(b[u],1)):(b[u]=ve(B),b[u].c(),A(b[u],1),b[u].m(c,null))}for(je(),u=O.length;u<b.length;u+=1)f(u);Ae()}},i(i){if(!d){for(let _=0;_<O.length;_+=1)A(b[_]);A(g.$$.fragment,i),d=!0}},o(i){b=b.filter(Boolean);for(let _=0;_<b.length;_+=1)G(b[_]);G(g.$$.fragment,i),d=!1},d(i){i&&p(e),k&&k.d(),ie(w,i),x&&x.d(),ie(C,i),t[16](null),ie(b,i),se(g),N=!1,Oe(z)}}}function xe(t){return{...ue(t.source),...ce(t.target)}}function ce(t){return{x2:t.x,y2:t.y}}function ue(t){return{x1:t.x,y1:t.y}}function nt(t,e,n){let s;Ye(t,U,f=>n(6,s=f));var r=(f=>(f[f.NONE=0]="NONE",f[f.DRAGGING=1]="DRAGGING",f[f.PANNING=2]="PANNING",f[f.CONNECTING=3]="CONNECTING",f))(r||{});const l={x:0,y:0,width:0,height:0,get scale(){return h?this.width/h.getBoundingClientRect().width:1}},o={x:0,y:0},a={x:0,y:0},c={[P.Customer]:"lightgreen",[P.Edge]:"cyan",[P.Core]:"hotpink"},y=[{text:"+ Customer",type:P.Customer,color:c[P.Customer]},{text:"+ Edge",type:P.Edge,color:c[P.Edge]},{text:"+ Core",type:P.Core,color:c[P.Core]}];let h=null,g=null,d=0,N=!1;ze(()=>{const f=new ResizeObserver(z);h&&(f.observe(h),n(5,N=!0))});function z(){if(!h)return;const f=l.scale||1;n(0,l.width=h.getBoundingClientRect().width*f,l),n(0,l.height=h.getBoundingClientRect().height*f,l)}function k(f){if(!(f.target instanceof Element))return;f.preventDefault(),h==null||h.addEventListener("pointermove",w),h==null||h.setPointerCapture(f.pointerId);const i=f.target.id;if(i){if(n(3,g=U.getNode(parseInt(i))||null),!g)return;f.shiftKey?n(4,d=3):(a.x=g.x,a.y=g.y,n(4,d=1))}else n(4,d=2);n(1,o.x=f.clientX,o),n(1,o.y=f.clientY,o)}function L(f){if(f.target instanceof Element){if(f.preventDefault(),d===3&&g){const i=document.elementFromPoint(f.clientX,f.clientY),_=(i==null?void 0:i.tagName)==="circle"?i.id:null,u=U.getNode(parseInt(_??""));u!==void 0&&U.addConnection({source:g,target:u})}n(4,d=0),n(3,g=null),h==null||h.releasePointerCapture(f.pointerId),h==null||h.removeEventListener("pointermove",w)}}function w(f){f.preventDefault();const i={x:(f.clientX-o.x)*l.scale,y:(f.clientY-o.y)*l.scale};d===1&&g?(n(3,g.x=a.x+i.x,g),n(3,g.y=a.y+i.y,g),U.set(s)):d===2?(n(1,o.x=f.clientX,o),n(1,o.y=f.clientY,o),n(0,l.x-=i.x,l),n(0,l.y-=i.y,l)):d===3&&(n(1,o.x=f.clientX,o),n(1,o.y=f.clientY,o))}function x(f){if(f.preventDefault(),!h||l.scale<.1&&f.deltaY<=0||l.scale>5&&f.deltaY>=0)return;n(1,o.x=f.clientX,o),n(1,o.y=f.clientY,o);const i=h.getBoundingClientRect(),_=f.deltaY>0?1+.025:1-.025,u={x:(o.x-i.left)/i.width,y:(o.y-i.top)/i.height};n(0,l.x-=l.width*(_-1)*u.x,l),n(0,l.y-=l.height*(_-1)*u.y,l),n(0,l.width*=_,l),n(0,l.height*=_,l)}function T(f){var _;f.preventDefault();const i=parseInt(((_=f.dataTransfer)==null?void 0:_.getData("text/plain"))??"0");qe(i)&&h&&U.createNode({label:"Node",...C(f.clientX,f.clientY),type:i})}function C(f,i){return h?{x:(f-h.getBoundingClientRect().left)*l.scale+l.x,y:(i-h.getBoundingClientRect().top)*l.scale+l.y}:{x:f,y:i}}function O(f){Ne.call(this,t,f)}function b(f){ae[f?"unshift":"push"](()=>{h=f,n(2,h)})}return[l,o,h,g,d,N,s,r,c,y,k,L,x,T,C,O,b]}class lt extends Q{constructor(e){super(),Z(this,e,nt,tt,J,{})}}function ot(t){let e,n="MPLS Simulation but without any Simulation and any MPLS so far",s,r,l;return r=new lt({}),{c(){e=E("h1"),e.textContent=n,s=F(),ne(r.$$.fragment)},l(o){e=D(o,"H1",{"data-svelte-h":!0}),de(e)!=="svelte-gjfrzx"&&(e.textContent=n),s=K(o),le(r.$$.fragment,o)},m(o,a){v(o,e,a),v(o,s,a),oe(r,o,a),l=!0},p:$,i(o){l||(A(r.$$.fragment,o),l=!0)},o(o){G(r.$$.fragment,o),l=!1},d(o){o&&(p(e),p(s)),se(r,o)}}}class ut extends Q{constructor(e){super(),Z(this,e,null,ot,J,{})}}export{ut as component};
