var Xr=Object.defineProperty;var Jr=(r,e,t)=>e in r?Xr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ce=(r,e,t)=>(Jr(r,typeof e!="symbol"?e+"":e,t),t);import{r as Rt,x as Nr,s as Le,i as Sr,n as Se,a as Br,u as Dr,g as Hr,b as Or,y as Zr,e as je,z as Ye,o as An,A as sn,c as Fe,B as st}from"../chunks/scheduler.CY_Sai-S.js";import{n as j,m as B,S as Re,i as Te,e as w,t as ge,c as E,a as A,b as _e,d,l as v,g as k,h as I,z as me,j as Ve,A as We,v as ee,w as te,x as ne,y as re,s as R,B as Q,f as T,r as He,p as Oe,C as ht,q as tt,D as De,E as nt,o as Ce,F as at,G as lt,H as Kr,I as qn}from"../chunks/index.B338ho9k.js";import{w as In}from"../chunks/index.DXlJru-X.js";function Ee(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Tn(r,e){j(r,1,1,()=>{e.delete(r.key)})}function Pn(r,e,t,n,s,i,a,l,o,c,u,f){let p=r.length,y=i.length,m=p;const _={};for(;m--;)_[r[m].key]=m;const b=[],g=new Map,h=new Map,$=[];for(m=y;m--;){const D=f(s,i,m),U=t(D);let X=a.get(U);X?n&&$.push(()=>X.p(D,e)):(X=c(U,D),X.c()),g.set(U,b[m]=X),U in _&&h.set(U,Math.abs(m-_[U]))}const S=new Set,N=new Set;function H(D){B(D,1),D.m(l,u),a.set(D.key,D),u=D.first,y--}for(;p&&y;){const D=b[y-1],U=r[p-1],X=D.key,O=U.key;D===U?(u=D.first,p--,y--):g.has(O)?!a.has(X)||S.has(X)?H(D):N.has(O)?p--:h.get(X)>h.get(O)?(N.add(X),H(D)):(S.add(O),p--):(o(U,a),p--)}for(;p--;){const D=r[p];g.has(D.key)||o(D,a)}for(;y;)H(b[y-1]);return Rt($),b}function an(r,e){const t={},n={},s={$$scope:1};let i=r.length;for(;i--;){const a=r[i],l=e[i];if(l){for(const o in a)o in l||(n[o]=1);for(const o in l)s[o]||(t[o]=l[o],s[o]=1);r[i]=l}else for(const o in a)s[o]=1}for(const a in n)a in t||(t[a]=void 0);return t}function ln(r){return typeof r=="object"&&r!==null?r:{}}const Xe=In({running:!0,enableFallback:!1,speedMultiplier:1,maxPackets:100});let Qr=class{constructor(e,t,n){ce(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},Mn=class{constructor(e,t){this.id=e,this.node=t}};class Ge extends Mn{constructor(){super(...arguments);ce(this,"address",`CE-IP-${this.id}`);ce(this,"firstHop",new Map);ce(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});ce(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});ce(this,"updateAddress",(t,n)=>{if(t===n)return;const s=this.firstHop.get(t);if(s===void 0){alert(`Unable to update old first hop Address '${t}' to '${n}'.`);return}this.firstHop.set(n,s),this.firstHop.delete(t)});ce(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop("CE received packet.")}clearTables(){this.firstHop.clear()}get type(){return"CE"}}let es=class{constructor(e=void 0){ce(this,"map");ce(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});ce(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});ce(this,"updateAddress",(e,t)=>{if(e===t)return;const n=this.map.get(e);if(n===void 0){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,n),this.map.delete(e)});ce(this,"deleteEntry",e=>{this.map.delete(e)});this.map=e||new Map}get(e){return this.map.get(e)}},jr=class{constructor(){ce(this,"map",new Map);ce(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});ce(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});ce(this,"updateLabel",(e,t)=>{if(e===t)return;const n=this.map.get(e);if(!n){alert(`Unable to update old LFIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,n),this.map.delete(e)});ce(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Qe extends Mn{constructor(){super(...arguments);ce(this,"FIB",new es);ce(this,"LFIB",new jr)}receivePacket(t){var n,s,i,a;if(t.fallbackRoute)return t.fallback(this);if(t.label===-1){const l=t.destination,o=(n=this.FIB.get(l.address))==null?void 0:n.nextHop;if(!o)return t.fallback(this);const c=(s=this.FIB.get(l.address))==null?void 0:s.label;if(!c)return t.fallback(this);t.label=c;const u=W.getRouter(parseInt(o));if(!u)return t.fallback(this);t.nextHop=u}else{const l=(i=this.LFIB.get(t.label))==null?void 0:i.nextHop;if(!l)return t.fallback(this);const o=(a=this.LFIB.get(t.label))==null?void 0:a.outgoingLabel;if(!o)return t.fallback(this);t.label=o;const c=W.getCERouter(l);if(!c)return t.fallback(this);t.nextHop=c}t.decrementTTL()}clearTables(){this.FIB.map.clear(),this.LFIB.map.clear()}get type(){return"LER"}}function Fn(r,e){const t=W.routers,n=t.length,s=new Array(n).fill(1/0),i=new Array(n).fill(!1),a=new Array(n).fill(null);s[t.indexOf(r)]=0;let l=!1,o=!1;for(;!l;){let f=null,p=1/0;for(const[y,m]of t.entries())if(!i[y]&&s[y]<p){if(m instanceof Qe){if(!o)o=!0;else if(!W.links.some(b=>b.source===m&&b.target===e||b.target===m&&b.source===e))continue}f=m,p=s[y]}if(!f||f.id===e.id){l=!0;continue}i[t.indexOf(f)]=!0;for(const y of W.links){let m;if(y.source===f)m=y.target;else if(y.target===f)m=y.source;else continue;const _=t.indexOf(m),b=p+y.distance;b<s[_]&&(s[_]=b,a[_]=f)}}const c=[];let u=e;for(;u;){c.unshift(u);const f=t.indexOf(u);u=a[f]}return c}let ts=class{constructor(e,t,n,s){ce(this,"ttl",32);ce(this,"label",-1);ce(this,"fallbackRoute");ce(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=s;const i=t.firstHop.get(n.address);if(!i){this.drop("No next hop router id found.");return}const a=W.getRouter(i);if(!a){this.drop("No next hop router found.");return}this.nextHop=a}decrementTTL(){--this.ttl<=0&&this.drop()}fallback(e){if(!Nr(Xe).enableFallback)return this.drop("Fallback is disabled.");if(this.label=-1,this.decrementTTL(),this.fallbackRoute)return this.setFallbackNextHop();if(this.fallbackRoute=Fn(e,this.destination),!(this.fallbackRoute[this.fallbackRoute.length-1]instanceof Ge))return this.drop("The destination is not a CE.");this.fallbackRoute.shift(),this.setFallbackNextHop()}validateNextHop(e){return W.doesLinkExist({source:e,target:this.nextHop})||W.doesLinkExist({source:this.nextHop,target:e})}validateFirstHop(){return W.doesLinkExist({source:this.source,target:this.nextHop})||W.doesLinkExist({source:this.nextHop,target:this.source})}setFallbackNextHop(){var t;const e=(t=this.fallbackRoute)==null?void 0:t.shift();this.fallbackRoute&&e?this.nextHop=e:this.drop("Unable to set fallback IP routing next hop")}drop(e="Unknown"){console.warn("Packet dropped: ",e),W.deletePacket(this.id)}};class Bt extends Mn{constructor(){super(...arguments);ce(this,"LFIB",new jr)}receivePacket(t){var a,l;if(t.fallbackRoute)return t.fallback(this);const n=(a=this.LFIB.get(t.label))==null?void 0:a.nextHop;if(!n)return t.fallback(this);const s=(l=this.LFIB.get(t.label))==null?void 0:l.outgoingLabel;if(!s)return t.fallback(this);t.label=s;const i=W.getRouter(parseInt(n));if(!i)return t.fallback(this);t.nextHop=i,t.decrementTTL()}clearTables(){this.LFIB.map.clear()}get type(){return"LSR"}}const ns={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class rs{constructor(){ce(this,"store",In({routers:[],links:[],packets:[]}));ce(this,"set",this.store.set);ce(this,"update",this.store.update);ce(this,"subscribe",this.store.subscribe);ce(this,"_routers",[]);ce(this,"_links",[]);ce(this,"_packets",[]);ce(this,"routerMap",new Map);ce(this,"CEMap",new Map);ce(this,"routerCounter",1);ce(this,"packetCounter",1);ce(this,"maxPackets",Nr(Xe).maxPackets);ce(this,"setRouterCount",e=>this.routerCounter=e);Xe.subscribe(e=>{this.maxPackets=e.maxPackets,this._packets=this._packets.slice(-this.maxPackets),this.notify()})}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!ns[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new Qr(`${e.source.id}-${e.target.id}`,e.source,e.target);e.bandwidth!==void 0&&(t.bandwidth=e.bandwidth),this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,s=new Ge(n,{label:`CE ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}createLER(e,t){const n=this.routerCounter++,s=new Qe(n,{label:`LER ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}createLSR(e,t){const n=this.routerCounter++,s=new Bt(n,{label:`LSR ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof Ge&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),t instanceof Ge&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}addPacket(e,t){if(this._packets.length>=this.maxPackets)return;const n=new ts(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearTables(){for(const e of this._routers)e.clearTables();this.notify()}clearLinks(){this._links=[],this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=1,this.packetCounter=1,this.notify()}notify(){this.store.set(this.networkState)}}const ss=new rs,W=ss;var be;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},r.getValidEnumValues=s=>{const i=r.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of i)a[l]=s[l];return r.objectValues(a)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},r.find=(s,i)=>{for(const a of s)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(be||(be={}));var Hn;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Hn||(Hn={}));const V=be.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Et=r=>{switch(typeof r){case"undefined":return V.undefined;case"string":return V.string;case"number":return isNaN(r)?V.nan:V.number;case"boolean":return V.boolean;case"function":return V.function;case"bigint":return V.bigint;case"symbol":return V.symbol;case"object":return Array.isArray(r)?V.array:r===null?V.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?V.promise:typeof Map<"u"&&r instanceof Map?V.map:typeof Set<"u"&&r instanceof Set?V.set:typeof Date<"u"&&r instanceof Date?V.date:V.object;default:return V.unknown}},Z=be.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),is=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class ot extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let l=n,o=0;for(;o<a.path.length;){const c=a.path[o];o===a.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(t(a))):l[c]=l[c]||{_errors:[]},l=l[c],o++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,be.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ot.create=r=>new ot(r);const qt=(r,e)=>{let t;switch(r.code){case Z.invalid_type:r.received===V.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case Z.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,be.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:t=`Unrecognized key(s) in object: ${be.joinValues(r.keys,", ")}`;break;case Z.invalid_union:t="Invalid input";break;case Z.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${be.joinValues(r.options)}`;break;case Z.invalid_enum_value:t=`Invalid enum value. Expected ${be.joinValues(r.options)}, received '${r.received}'`;break;case Z.invalid_arguments:t="Invalid function arguments";break;case Z.invalid_return_type:t="Invalid function return type";break;case Z.invalid_date:t="Invalid date";break;case Z.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:be.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case Z.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case Z.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case Z.custom:t="Invalid input";break;case Z.invalid_intersection_types:t="Intersection results could not be merged";break;case Z.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case Z.not_finite:t="Number must be finite";break;default:t=e.defaultError,be.assertNever(r)}return{message:t}};let Ar=qt;function as(r){Ar=r}function _n(){return Ar}const bn=r=>{const{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],a={...s,path:i};let l="";const o=n.filter(c=>!!c).slice().reverse();for(const c of o)l=c(a,{data:e,defaultError:l}).message;return{...s,path:i,message:s.message||l}},ls=[];function q(r,e){const t=bn({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,_n(),qt].filter(n=>!!n)});r.common.issues.push(t)}class ze{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return se;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t)n.push({key:await s.key,value:await s.value});return ze.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return se;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const se=Object.freeze({status:"aborted"}),Mr=r=>({status:"dirty",value:r}),Ue=r=>({status:"valid",value:r}),On=r=>r.status==="aborted",Zn=r=>r.status==="dirty",Yt=r=>r.status==="valid",yn=r=>typeof Promise<"u"&&r instanceof Promise;var G;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(G||(G={}));class pt{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Yn=(r,e)=>{if(Yt(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ot(r.common.issues);return this._error=t,this._error}}};function ae(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,l)=>a.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:n??l.defaultError}:{message:t??l.defaultError},description:s}}class ue{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Et(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ze,ctx:{common:e.parent.common,data:e.data,parsedType:Et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(yn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Yn(s,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(yn(s)?s:Promise.resolve(s));return Yn(n,i)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const a=e(s),l=()=>i.addIssue({code:Z.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(o=>o?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new ct({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return yt.create(this,this._def)}nullable(){return Ot.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ut.create(this,this._def)}promise(){return Vt.create(this,this._def)}or(e){return Jt.create([this,e],this._def)}and(e){return Kt.create(this,e,this._def)}transform(e){return new ct({...ae(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new rn({...ae(this._def),innerType:this,defaultValue:t,typeName:J.ZodDefault})}brand(){return new zr({typeName:J.ZodBranded,type:this,...ae(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new wn({...ae(this._def),innerType:this,catchValue:t,typeName:J.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return on.create(this,e)}readonly(){return Cn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const os=/^c[^\s-]{8,}$/i,us=/^[a-z][a-z0-9]*$/,cs=/^[0-9A-HJKMNP-TV-Z]{26}$/,ds=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fs=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hs="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Nn;const ps=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ms=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,gs=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function _s(r,e){return!!((e==="v4"||!e)&&ps.test(r)||(e==="v6"||!e)&&ms.test(r))}class it extends ue{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==V.string){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_type,expected:V.string,received:i.parsedType}),se}const n=new ze;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,l=e.data.length<i.value;(a||l)&&(s=this._getOrReturnCtx(e,s),a?q(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&q(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")fs.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"email",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Nn||(Nn=new RegExp(hs,"u")),Nn.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"emoji",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")ds.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"uuid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")os.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cuid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")us.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cuid2",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")cs.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"ulid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),q(s,{validation:"url",code:Z.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"regex",code:Z.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),q(s,{code:Z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),q(s,{code:Z.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),q(s,{code:Z.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?gs(i).test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:Z.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?_s(e.data,i.version)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"ip",code:Z.invalid_string,message:i.message}),n.dirty()):be.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:Z.invalid_string,...G.errToObj(n)})}_addCheck(e){return new it({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...G.errToObj(e)})}url(e){return this._addCheck({kind:"url",...G.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...G.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...G.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...G.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...G.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...G.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...G.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...G.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...G.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...G.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...G.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...G.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...G.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...G.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...G.errToObj(t)})}nonempty(e){return this.min(1,G.errToObj(e))}trim(){return new it({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new it({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new it({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}it.create=r=>{var e;return new it({checks:[],typeName:J.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...ae(r)})};function bs(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class Ct extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==V.number){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_type,expected:V.number,received:i.parsedType}),se}let n;const s=new ze;for(const i of this._def.checks)i.kind==="int"?be.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:Z.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?bs(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:Z.not_finite,message:i.message}),s.dirty()):be.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,G.toString(t))}gt(e,t){return this.setLimit("min",e,!1,G.toString(t))}lte(e,t){return this.setLimit("max",e,!0,G.toString(t))}lt(e,t){return this.setLimit("max",e,!1,G.toString(t))}setLimit(e,t,n,s){return new Ct({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:G.toString(s)}]})}_addCheck(e){return new Ct({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:G.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:G.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:G.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:G.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:G.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&be.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ct.create=r=>new Ct({checks:[],typeName:J.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...ae(r)});class It extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==V.bigint){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_type,expected:V.bigint,received:i.parsedType}),se}let n;const s=new ze;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):be.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,G.toString(t))}gt(e,t){return this.setLimit("min",e,!1,G.toString(t))}lte(e,t){return this.setLimit("max",e,!0,G.toString(t))}lt(e,t){return this.setLimit("max",e,!1,G.toString(t))}setLimit(e,t,n,s){return new It({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:G.toString(s)}]})}_addCheck(e){return new It({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:G.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}It.create=r=>{var e;return new It({checks:[],typeName:J.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...ae(r)})};class Wt extends ue{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==V.boolean){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.boolean,received:n.parsedType}),se}return Ue(e.data)}}Wt.create=r=>new Wt({typeName:J.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...ae(r)});class Dt extends ue{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==V.date){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_type,expected:V.date,received:i.parsedType}),se}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_date}),se}const n=new ze;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:Z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:Z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):be.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Dt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:G.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:G.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Dt.create=r=>new Dt({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:J.ZodDate,...ae(r)});class vn extends ue{_parse(e){if(this._getType(e)!==V.symbol){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.symbol,received:n.parsedType}),se}return Ue(e.data)}}vn.create=r=>new vn({typeName:J.ZodSymbol,...ae(r)});class Gt extends ue{_parse(e){if(this._getType(e)!==V.undefined){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.undefined,received:n.parsedType}),se}return Ue(e.data)}}Gt.create=r=>new Gt({typeName:J.ZodUndefined,...ae(r)});class Xt extends ue{_parse(e){if(this._getType(e)!==V.null){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.null,received:n.parsedType}),se}return Ue(e.data)}}Xt.create=r=>new Xt({typeName:J.ZodNull,...ae(r)});class zt extends ue{constructor(){super(...arguments),this._any=!0}_parse(e){return Ue(e.data)}}zt.create=r=>new zt({typeName:J.ZodAny,...ae(r)});class St extends ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ue(e.data)}}St.create=r=>new St({typeName:J.ZodUnknown,...ae(r)});class vt extends ue{_parse(e){const t=this._getOrReturnCtx(e);return q(t,{code:Z.invalid_type,expected:V.never,received:t.parsedType}),se}}vt.create=r=>new vt({typeName:J.ZodNever,...ae(r)});class kn extends ue{_parse(e){if(this._getType(e)!==V.undefined){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.void,received:n.parsedType}),se}return Ue(e.data)}}kn.create=r=>new kn({typeName:J.ZodVoid,...ae(r)});class ut extends ue{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==V.array)return q(t,{code:Z.invalid_type,expected:V.array,received:t.parsedType}),se;if(s.exactLength!==null){const a=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(a||l)&&(q(t,{code:a?Z.too_big:Z.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(q(t,{code:Z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(q(t,{code:Z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,l)=>s.type._parseAsync(new pt(t,a,t.path,l)))).then(a=>ze.mergeArray(n,a));const i=[...t.data].map((a,l)=>s.type._parseSync(new pt(t,a,t.path,l)));return ze.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new ut({...this._def,minLength:{value:e,message:G.toString(t)}})}max(e,t){return new ut({...this._def,maxLength:{value:e,message:G.toString(t)}})}length(e,t){return new ut({...this._def,exactLength:{value:e,message:G.toString(t)}})}nonempty(e){return this.min(1,e)}}ut.create=(r,e)=>new ut({type:r,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...ae(e)});function Mt(r){if(r instanceof $e){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=yt.create(Mt(n))}return new $e({...r._def,shape:()=>e})}else return r instanceof ut?new ut({...r._def,type:Mt(r.element)}):r instanceof yt?yt.create(Mt(r.unwrap())):r instanceof Ot?Ot.create(Mt(r.unwrap())):r instanceof mt?mt.create(r.items.map(e=>Mt(e))):r}class $e extends ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=be.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==V.object){const c=this._getOrReturnCtx(e);return q(c,{code:Z.invalid_type,expected:V.object,received:c.parsedType}),se}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof vt&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||l.push(c);const o=[];for(const c of a){const u=i[c],f=s.data[c];o.push({key:{status:"valid",value:c},value:u._parse(new pt(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof vt){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of l)o.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")l.length>0&&(q(s,{code:Z.unrecognized_keys,keys:l}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of l){const f=s.data[u];o.push({key:{status:"valid",value:u},value:c._parse(new pt(s,f,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of o){const f=await u.key;c.push({key:f,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>ze.mergeObjectSync(n,c)):ze.mergeObjectSync(n,o)}get shape(){return this._def.shape()}strict(e){return G.errToObj,new $e({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,a,l;const o=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&a!==void 0?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(l=G.errToObj(e).message)!==null&&l!==void 0?l:o}:{message:o}}}:{}})}strip(){return new $e({...this._def,unknownKeys:"strip"})}passthrough(){return new $e({...this._def,unknownKeys:"passthrough"})}extend(e){return new $e({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $e({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new $e({...this._def,catchall:e})}pick(e){const t={};return be.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new $e({...this._def,shape:()=>t})}omit(e){const t={};return be.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new $e({...this._def,shape:()=>t})}deepPartial(){return Mt(this)}partial(e){const t={};return be.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new $e({...this._def,shape:()=>t})}required(e){const t={};return be.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof yt;)i=i._def.innerType;t[n]=i}}),new $e({...this._def,shape:()=>t})}keyof(){return Fr(be.objectKeys(this.shape))}}$e.create=(r,e)=>new $e({shape:()=>r,unknownKeys:"strip",catchall:vt.create(),typeName:J.ZodObject,...ae(e)});$e.strictCreate=(r,e)=>new $e({shape:()=>r,unknownKeys:"strict",catchall:vt.create(),typeName:J.ZodObject,...ae(e)});$e.lazycreate=(r,e)=>new $e({shape:r,unknownKeys:"strip",catchall:vt.create(),typeName:J.ZodObject,...ae(e)});class Jt extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const a=i.map(l=>new ot(l.ctx.common.issues));return q(t,{code:Z.invalid_union,unionErrors:a}),se}if(t.common.async)return Promise.all(n.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const o of n){const c={...t,common:{...t.common,issues:[]},parent:null},u=o._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=a.map(o=>new ot(o));return q(t,{code:Z.invalid_union,unionErrors:l}),se}}get options(){return this._def.options}}Jt.create=(r,e)=>new Jt({options:r,typeName:J.ZodUnion,...ae(e)});const gn=r=>r instanceof en?gn(r.schema):r instanceof ct?gn(r.innerType()):r instanceof tn?[r.value]:r instanceof $t?r.options:r instanceof nn?Object.keys(r.enum):r instanceof rn?gn(r._def.innerType):r instanceof Gt?[void 0]:r instanceof Xt?[null]:null;class $n extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==V.object)return q(t,{code:Z.invalid_type,expected:V.object,received:t.parsedType}),se;const n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(q(t,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const i of t){const a=gn(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new $n({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ae(n)})}}function jn(r,e){const t=Et(r),n=Et(e);if(r===e)return{valid:!0,data:r};if(t===V.object&&n===V.object){const s=be.objectKeys(e),i=be.objectKeys(r).filter(l=>s.indexOf(l)!==-1),a={...r,...e};for(const l of i){const o=jn(r[l],e[l]);if(!o.valid)return{valid:!1};a[l]=o.data}return{valid:!0,data:a}}else if(t===V.array&&n===V.array){if(r.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<r.length;i++){const a=r[i],l=e[i],o=jn(a,l);if(!o.valid)return{valid:!1};s.push(o.data)}return{valid:!0,data:s}}else return t===V.date&&n===V.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Kt extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(On(i)||On(a))return se;const l=jn(i.value,a.value);return l.valid?((Zn(i)||Zn(a))&&t.dirty(),{status:t.value,value:l.data}):(q(n,{code:Z.invalid_intersection_types}),se)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Kt.create=(r,e,t)=>new Kt({left:r,right:e,typeName:J.ZodIntersection,...ae(t)});class mt extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.array)return q(n,{code:Z.invalid_type,expected:V.array,received:n.parsedType}),se;if(n.data.length<this._def.items.length)return q(n,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),se;!this._def.rest&&n.data.length>this._def.items.length&&(q(n,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((a,l)=>{const o=this._def.items[l]||this._def.rest;return o?o._parse(new pt(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>ze.mergeArray(t,a)):ze.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new mt({...this._def,rest:e})}}mt.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mt({items:r,typeName:J.ZodTuple,rest:null,...ae(e)})};class Qt extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.object)return q(n,{code:Z.invalid_type,expected:V.object,received:n.parsedType}),se;const s=[],i=this._def.keyType,a=this._def.valueType;for(const l in n.data)s.push({key:i._parse(new pt(n,l,n.path,l)),value:a._parse(new pt(n,n.data[l],n.path,l))});return n.common.async?ze.mergeObjectAsync(t,s):ze.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof ue?new Qt({keyType:e,valueType:t,typeName:J.ZodRecord,...ae(n)}):new Qt({keyType:it.create(),valueType:e,typeName:J.ZodRecord,...ae(t)})}}class xn extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.map)return q(n,{code:Z.invalid_type,expected:V.map,received:n.parsedType}),se;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([l,o],c)=>({key:s._parse(new pt(n,l,n.path,[c,"key"])),value:i._parse(new pt(n,o,n.path,[c,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const o of a){const c=await o.key,u=await o.value;if(c.status==="aborted"||u.status==="aborted")return se;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(c.value,u.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const o of a){const c=o.key,u=o.value;if(c.status==="aborted"||u.status==="aborted")return se;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(c.value,u.value)}return{status:t.value,value:l}}}}xn.create=(r,e,t)=>new xn({valueType:e,keyType:r,typeName:J.ZodMap,...ae(t)});class Ht extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.set)return q(n,{code:Z.invalid_type,expected:V.set,received:n.parsedType}),se;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(q(n,{code:Z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(q(n,{code:Z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function a(o){const c=new Set;for(const u of o){if(u.status==="aborted")return se;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const l=[...n.data.values()].map((o,c)=>i._parse(new pt(n,o,n.path,c)));return n.common.async?Promise.all(l).then(o=>a(o)):a(l)}min(e,t){return new Ht({...this._def,minSize:{value:e,message:G.toString(t)}})}max(e,t){return new Ht({...this._def,maxSize:{value:e,message:G.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ht.create=(r,e)=>new Ht({valueType:r,minSize:null,maxSize:null,typeName:J.ZodSet,...ae(e)});class Ft extends ue{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==V.function)return q(t,{code:Z.invalid_type,expected:V.function,received:t.parsedType}),se;function n(l,o){return bn({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_n(),qt].filter(c=>!!c),issueData:{code:Z.invalid_arguments,argumentsError:o}})}function s(l,o){return bn({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_n(),qt].filter(c=>!!c),issueData:{code:Z.invalid_return_type,returnTypeError:o}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Vt){const l=this;return Ue(async function(...o){const c=new ot([]),u=await l._def.args.parseAsync(o,i).catch(y=>{throw c.addIssue(n(o,y)),c}),f=await Reflect.apply(a,this,u);return await l._def.returns._def.type.parseAsync(f,i).catch(y=>{throw c.addIssue(s(f,y)),c})})}else{const l=this;return Ue(function(...o){const c=l._def.args.safeParse(o,i);if(!c.success)throw new ot([n(o,c.error)]);const u=Reflect.apply(a,this,c.data),f=l._def.returns.safeParse(u,i);if(!f.success)throw new ot([s(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ft({...this._def,args:mt.create(e).rest(St.create())})}returns(e){return new Ft({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Ft({args:e||mt.create([]).rest(St.create()),returns:t||St.create(),typeName:J.ZodFunction,...ae(n)})}}class en extends ue{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}en.create=(r,e)=>new en({getter:r,typeName:J.ZodLazy,...ae(e)});class tn extends ue{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return q(t,{received:t.data,code:Z.invalid_literal,expected:this._def.value}),se}return{status:"valid",value:e.data}}get value(){return this._def.value}}tn.create=(r,e)=>new tn({value:r,typeName:J.ZodLiteral,...ae(e)});function Fr(r,e){return new $t({values:r,typeName:J.ZodEnum,...ae(e)})}class $t extends ue{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return q(t,{expected:be.joinValues(n),received:t.parsedType,code:Z.invalid_type}),se}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),n=this._def.values;return q(t,{received:t.data,code:Z.invalid_enum_value,options:n}),se}return Ue(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return $t.create(e)}exclude(e){return $t.create(this.options.filter(t=>!e.includes(t)))}}$t.create=Fr;class nn extends ue{_parse(e){const t=be.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==V.string&&n.parsedType!==V.number){const s=be.objectValues(t);return q(n,{expected:be.joinValues(s),received:n.parsedType,code:Z.invalid_type}),se}if(t.indexOf(e.data)===-1){const s=be.objectValues(t);return q(n,{received:n.data,code:Z.invalid_enum_value,options:s}),se}return Ue(e.data)}get enum(){return this._def.values}}nn.create=(r,e)=>new nn({values:r,typeName:J.ZodNativeEnum,...ae(e)});class Vt extends ue{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==V.promise&&t.common.async===!1)return q(t,{code:Z.invalid_type,expected:V.promise,received:t.parsedType}),se;const n=t.parsedType===V.promise?t.data:Promise.resolve(t.data);return Ue(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Vt.create=(r,e)=>new Vt({type:r,typeName:J.ZodPromise,...ae(e)});class ct extends ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{q(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(a).then(l=>this._def.schema._parseAsync({data:l,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}if(s.type==="refinement"){const a=l=>{const o=s.refinement(l,i);if(n.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?se:(l.status==="dirty"&&t.dirty(),a(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?se:(l.status==="dirty"&&t.dirty(),a(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Yt(a))return a;const l=s.transform(a.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Yt(a)?Promise.resolve(s.transform(a.value,i)).then(l=>({status:t.value,value:l})):a);be.assertNever(s)}}ct.create=(r,e,t)=>new ct({schema:r,typeName:J.ZodEffects,effect:e,...ae(t)});ct.createWithPreprocess=(r,e,t)=>new ct({schema:e,effect:{type:"preprocess",transform:r},typeName:J.ZodEffects,...ae(t)});class yt extends ue{_parse(e){return this._getType(e)===V.undefined?Ue(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yt.create=(r,e)=>new yt({innerType:r,typeName:J.ZodOptional,...ae(e)});class Ot extends ue{_parse(e){return this._getType(e)===V.null?Ue(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ot.create=(r,e)=>new Ot({innerType:r,typeName:J.ZodNullable,...ae(e)});class rn extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===V.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}rn.create=(r,e)=>new rn({innerType:r,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ae(e)});class wn extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yn(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ot(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ot(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}wn.create=(r,e)=>new wn({innerType:r,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ae(e)});class En extends ue{_parse(e){if(this._getType(e)!==V.nan){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.nan,received:n.parsedType}),se}return{status:"valid",value:e.data}}}En.create=r=>new En({typeName:J.ZodNaN,...ae(r)});const ys=Symbol("zod_brand");class zr extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class on extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?se:i.status==="dirty"?(t.dirty(),Mr(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?se:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new on({in:e,out:t,typeName:J.ZodPipeline})}}class Cn extends ue{_parse(e){const t=this._def.innerType._parse(e);return Yt(t)&&(t.value=Object.freeze(t.value)),t}}Cn.create=(r,e)=>new Cn({innerType:r,typeName:J.ZodReadonly,...ae(e)});const Vr=(r,e={},t)=>r?zt.create().superRefine((n,s)=>{var i,a;if(!r(n)){const l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,o=(a=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,c=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...c,fatal:o})}}):zt.create(),vs={object:$e.lazycreate};var J;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(J||(J={}));const ks=(r,e={message:`Input not instance of ${r.name}`})=>Vr(t=>t instanceof r,e),Ur=it.create,qr=Ct.create,xs=En.create,ws=It.create,Yr=Wt.create,Es=Dt.create,Cs=vn.create,Is=Gt.create,$s=Xt.create,Ls=zt.create,Rs=St.create,Ts=vt.create,Ps=kn.create,Ns=ut.create,Ss=$e.create,Bs=$e.strictCreate,Ds=Jt.create,Hs=$n.create,Os=Kt.create,Zs=mt.create,js=Qt.create,As=xn.create,Ms=Ht.create,Fs=Ft.create,zs=en.create,Vs=tn.create,Us=$t.create,qs=nn.create,Ys=Vt.create,Wn=ct.create,Ws=yt.create,Gs=Ot.create,Xs=ct.createWithPreprocess,Js=on.create,Ks=()=>Ur().optional(),Qs=()=>qr().optional(),ei=()=>Yr().optional(),ti={string:r=>it.create({...r,coerce:!0}),number:r=>Ct.create({...r,coerce:!0}),boolean:r=>Wt.create({...r,coerce:!0}),bigint:r=>It.create({...r,coerce:!0}),date:r=>Dt.create({...r,coerce:!0})},ni=se;var de=Object.freeze({__proto__:null,defaultErrorMap:qt,setErrorMap:as,getErrorMap:_n,makeIssue:bn,EMPTY_PATH:ls,addIssueToContext:q,ParseStatus:ze,INVALID:se,DIRTY:Mr,OK:Ue,isAborted:On,isDirty:Zn,isValid:Yt,isAsync:yn,get util(){return be},get objectUtil(){return Hn},ZodParsedType:V,getParsedType:Et,ZodType:ue,ZodString:it,ZodNumber:Ct,ZodBigInt:It,ZodBoolean:Wt,ZodDate:Dt,ZodSymbol:vn,ZodUndefined:Gt,ZodNull:Xt,ZodAny:zt,ZodUnknown:St,ZodNever:vt,ZodVoid:kn,ZodArray:ut,ZodObject:$e,ZodUnion:Jt,ZodDiscriminatedUnion:$n,ZodIntersection:Kt,ZodTuple:mt,ZodRecord:Qt,ZodMap:xn,ZodSet:Ht,ZodFunction:Ft,ZodLazy:en,ZodLiteral:tn,ZodEnum:$t,ZodNativeEnum:nn,ZodPromise:Vt,ZodEffects:ct,ZodTransformer:ct,ZodOptional:yt,ZodNullable:Ot,ZodDefault:rn,ZodCatch:wn,ZodNaN:En,BRAND:ys,ZodBranded:zr,ZodPipeline:on,ZodReadonly:Cn,custom:Vr,Schema:ue,ZodSchema:ue,late:vs,get ZodFirstPartyTypeKind(){return J},coerce:ti,any:Ls,array:Ns,bigint:ws,boolean:Yr,date:Es,discriminatedUnion:Hs,effect:Wn,enum:Us,function:Fs,instanceof:ks,intersection:Os,lazy:zs,literal:Vs,map:As,nan:xs,nativeEnum:qs,never:Ts,null:$s,nullable:Gs,number:qr,object:Ss,oboolean:ei,onumber:Qs,optional:Ws,ostring:Ks,pipeline:Js,preprocess:Xs,promise:Ys,record:js,set:Ms,strictObject:Bs,string:Ur,symbol:Cs,transformer:Wn,tuple:Zs,undefined:Is,union:Ds,unknown:Rs,void:Ps,NEVER:ni,ZodIssueCode:Z,quotelessJson:is,ZodError:ot});const ri=de.object({label:de.string(),x:de.number(),y:de.number()}),Wr=de.record(de.coerce.number(),de.object({outgoingLabel:de.number(),nextHop:de.string()})),si=de.record(de.string(),de.object({label:de.number(),nextHop:de.string()})),ii=de.record(de.number()),ai=de.object({address:de.string(),firstHop:ii.or(de.object({})),type:de.literal("CE")}),li=de.object({LFIB:Wr.or(de.object({})),FIB:si.or(de.object({})),type:de.literal("LER")}),oi=de.object({LFIB:Wr.or(de.object({})),type:de.literal("LSR")}),ui=de.object({id:de.number(),node:ri}).and(de.union([ai,li,oi])),ci=de.object({id:de.string(),source:de.number(),target:de.number(),bandwidth:de.number()}),di=de.object({routers:de.array(ui),links:de.array(ci)});function Sn(r){W.clear();const e=di.safeParse(r);if(!e.success)return console.warn("Failed to load network data",e.error),!1;let t=0;for(const n of e.data.routers)switch(t=Math.max(t,n.id),n.type){case"LER":{const s=new Qe(n.id,n.node);Object.entries(n.LFIB).forEach(([i,a])=>{s.LFIB.receiveEntry(parseInt(i),a.outgoingLabel,a.nextHop)}),Object.entries(n.FIB).forEach(([i,a])=>{s.FIB.receiveEntry(i,a.label,a.nextHop)}),W.addRouter(s);break}case"LSR":{const s=new Bt(n.id,n.node);Object.entries(n.LFIB).forEach(([i,a])=>{s.LFIB.receiveEntry(parseInt(i),a.outgoingLabel,a.nextHop)}),W.addRouter(s);break}case"CE":{const s=new Ge(n.id,n.node);Object.entries(n.firstHop).forEach(([i,a])=>{s.receiveEntry(i,a)}),W.addRouter(s);break}}W.setRouterCount(t+1);for(const n of e.data.links){const s=W.getRouter(n.source),i=W.getRouter(n.target);s&&i&&W.addLink({source:s,target:i,bandwidth:n.bandwidth})}return!0}function fi(r){let e,t,n,s;return{c(){e=w("button"),t=ge(r[0]),this.h()},l(i){e=E(i,"BUTTON",{style:!0,class:!0});var a=A(e);t=_e(a,r[0]),a.forEach(d),this.h()},h(){v(e,"style",r[2]),v(e,"class","svelte-13ziii4")},m(i,a){k(i,e,a),I(e,t),n||(s=me(e,"click",function(){Sr(r[1])&&r[1].apply(this,arguments)}),n=!0)},p(i,[a]){r=i,a&1&&Ve(t,r[0]),a&4&&v(e,"style",r[2])},i:Se,o:Se,d(i){i&&d(e),n=!1,s()}}}function hi(r,e,t){let{text:n}=e,{callback:s=()=>{}}=e,{style:i=void 0}=e;return r.$$set=a=>{"text"in a&&t(0,n=a.text),"callback"in a&&t(1,s=a.callback),"style"in a&&t(2,i=a.style)},[n,s,i]}class et extends Re{constructor(e){super(),Te(this,e,hi,fi,Le,{text:0,callback:1,style:2})}}function pi(r){let e,t,n,s;const i=r[2].default,a=Br(i,r,r[1],null);return{c(){e=w("dialog"),a&&a.c(),this.h()},l(l){e=E(l,"DIALOG",{class:!0});var o=A(e);a&&a.l(o),o.forEach(d),this.h()},h(){v(e,"class","svelte-p5wejv")},m(l,o){k(l,e,o),a&&a.m(e,null),r[4](e),t=!0,n||(s=me(e,"close",r[3]),n=!0)},p(l,[o]){a&&a.p&&(!t||o&2)&&Dr(a,i,l,l[1],t?Or(i,l[1],o,null):Hr(l[1]),null)},i(l){t||(B(a,l),t=!0)},o(l){j(a,l),t=!1},d(l){l&&d(e),a&&a.d(l),r[4](null),n=!1,s()}}}function mi(r,e,t){let{$$slots:n={},$$scope:s}=e,{dialog:i}=e;function a(o){Zr.call(this,r,o)}function l(o){je[o?"unshift":"push"](()=>{i=o,t(0,i)})}return r.$$set=o=>{"dialog"in o&&t(0,i=o.dialog),"$$scope"in o&&t(1,s=o.$$scope)},[i,s,n,a,l]}class un extends Re{constructor(e){super(),Te(this,e,mi,pi,Le,{dialog:0})}}const gi=[{id:1,node:{label:"CE 1",x:-350,y:-25},address:"CE-IP-1",firstHop:{"CE-IP-5":2,"CE-IP-6":2},type:"CE"},{id:2,node:{label:"LER 2",x:-200,y:-25},FIB:{"CE-IP-5":{label:306030,nextHop:"3"},"CE-IP-6":{label:61379,nextHop:"3"}},LFIB:{},type:"LER"},{id:3,node:{label:"LSR 3",x:-100,y:-25},LFIB:{61379:{outgoingLabel:974214,nextHop:"4"},306030:{outgoingLabel:349733,nextHop:"4"}},type:"LSR"},{id:4,node:{label:"LER 4",x:0,y:-25},FIB:{},LFIB:{349733:{outgoingLabel:-1,nextHop:"CE-IP-5"},974214:{outgoingLabel:-1,nextHop:"CE-IP-6"}},type:"LER"},{id:5,node:{label:"CE 5",x:125,y:-100},address:"CE-IP-5",firstHop:{},type:"CE"},{id:6,node:{label:"CE 6",x:125,y:50},address:"CE-IP-6",firstHop:{},type:"CE"}],_i=[{bandwidth:0,id:"1-2",source:1,target:2},{bandwidth:0,id:"2-3",source:2,target:3},{bandwidth:0,id:"3-4",source:3,target:4},{bandwidth:0,id:"4-5",source:4,target:5},{bandwidth:0,id:"4-6",source:4,target:6}],bi={routers:gi,links:_i},yi=[{id:1,node:{label:"LSR 1",x:45,y:-189},LFIB:{510069:{outgoingLabel:323562,nextHop:"4"},681382:{outgoingLabel:323540,nextHop:"4"}},type:"LSR"},{id:2,node:{label:"LSR 2",x:-100,y:149},LFIB:{27503:{outgoingLabel:1037790,nextHop:"5"},98952:{outgoingLabel:326833,nextHop:"5"},272693:{outgoingLabel:971198,nextHop:"5"},470359:{outgoingLabel:546541,nextHop:"3"},773817:{outgoingLabel:258109,nextHop:"9"}},type:"LSR"},{id:3,node:{label:"LSR 3",x:-170,y:-60},LFIB:{546541:{outgoingLabel:54803,nextHop:"6"},605492:{outgoingLabel:894316,nextHop:"6"},906528:{outgoingLabel:714735,nextHop:"6"}},type:"LSR"},{id:4,node:{label:"LSR 4",x:246,y:-60},LFIB:{206524:{outgoingLabel:916756,nextHop:"15"},323540:{outgoingLabel:900200,nextHop:"15"},323562:{outgoingLabel:974115,nextHop:"5"},445570:{outgoingLabel:207845,nextHop:"14"},848070:{outgoingLabel:807284,nextHop:"15"}},type:"LSR"},{id:5,node:{label:"LSR 5",x:170,y:156},LFIB:{149417:{outgoingLabel:773817,nextHop:"2"},326833:{outgoingLabel:321563,nextHop:"13"},420034:{outgoingLabel:848070,nextHop:"4"},495820:{outgoingLabel:605492,nextHop:"3"},655741:{outgoingLabel:445570,nextHop:"4"},971198:{outgoingLabel:956025,nextHop:"12"},974115:{outgoingLabel:474381,nextHop:"12"},1028802:{outgoingLabel:476950,nextHop:"13"},1037790:{outgoingLabel:206524,nextHop:"4"}},type:"LSR"},{id:6,node:{label:"LER 6",x:-289,y:-78},FIB:{},LFIB:{54803:{outgoingLabel:-1,nextHop:"CE-IP-20"},714735:{outgoingLabel:-1,nextHop:"CE-IP-21"},894316:{outgoingLabel:-1,nextHop:"CE-IP-21"}},type:"LER"},{id:7,node:{label:"LSR 7",x:-58,y:-366},LFIB:{495501:{outgoingLabel:681382,nextHop:"1"},842839:{outgoingLabel:906528,nextHop:"3"},1029149:{outgoingLabel:510069,nextHop:"1"}},type:"LSR"},{id:8,node:{label:"LSR 8",x:140,y:-371},LFIB:{},type:"LSR"},{id:9,node:{label:"LSR 9",x:-127,y:300},LFIB:{258109:{outgoingLabel:1036116,nextHop:"11"},608972:{outgoingLabel:27503,nextHop:"2"},703550:{outgoingLabel:470359,nextHop:"2"},864775:{outgoingLabel:98952,nextHop:"2"}},type:"LSR"},{id:10,node:{label:"LER 10",x:-260,y:324},FIB:{"CE-IP-34":{label:272693,nextHop:"2"}},LFIB:{},type:"LER"},{id:11,node:{label:"LER 11",x:-310,y:223},FIB:{"CE-IP-26":{label:608972,nextHop:"9"},"CE-IP-20":{label:703550,nextHop:"9"},"CE-IP-30":{label:864775,nextHop:"9"}},LFIB:{1036116:{outgoingLabel:-1,nextHop:"CE-IP-24"}},type:"LER"},{id:12,node:{label:"LER 12",x:223,y:263},FIB:{"CE-IP-26":{label:420034,nextHop:"5"},"CE-IP-33":{label:1028802,nextHop:"5"},"CE-IP-24":{label:149417,nextHop:"5"}},LFIB:{474381:{outgoingLabel:-1,nextHop:"CE-IP-34"},956025:{outgoingLabel:-1,nextHop:"CE-IP-34"}},type:"LER"},{id:13,node:{label:"LER 13",x:455,y:271},FIB:{"CE-IP-29":{label:655741,nextHop:"5"},"CE-IP-21":{label:495820,nextHop:"5"}},LFIB:{321563:{outgoingLabel:-1,nextHop:"CE-IP-30"},476950:{outgoingLabel:-1,nextHop:"CE-IP-33"}},type:"LER"},{id:14,node:{label:"LER 14",x:340,y:-19},FIB:{},LFIB:{207845:{outgoingLabel:-1,nextHop:"CE-IP-29"}},type:"LER"},{id:15,node:{label:"LER 15",x:331,y:-99},FIB:{},LFIB:{807284:{outgoingLabel:-1,nextHop:"CE-IP-26"},900200:{outgoingLabel:-1,nextHop:"CE-IP-26"},916756:{outgoingLabel:-1,nextHop:"CE-IP-26"}},type:"LER"},{id:16,node:{label:"LER 16",x:35,y:-484},FIB:{"CE-IP-21":{label:842839,nextHop:"7"},"CE-IP-26":{label:495501,nextHop:"7"},"CE-IP-34":{label:1029149,nextHop:"7"}},LFIB:{},type:"LER"},{id:17,node:{label:"CE 17",x:-52,y:-600},address:"CE-IP-17",firstHop:{"CE-IP-21":16},type:"CE"},{id:18,node:{label:"CE 18",x:34,y:-644},address:"CE-IP-18",firstHop:{"CE-IP-26":16},type:"CE"},{id:19,node:{label:"CE 19",x:122,y:-600},address:"CE-IP-19",firstHop:{"CE-IP-34":16},type:"CE"},{id:20,node:{label:"CE 20",x:-426,y:-47},address:"CE-IP-20",firstHop:{},type:"CE"},{id:21,node:{label:"CE 21",x:-427,y:-134},address:"CE-IP-21",firstHop:{},type:"CE"},{id:22,node:{label:"CE 22",x:-395,y:131},address:"CE-IP-22",firstHop:{"CE-IP-20":11},type:"CE"},{id:23,node:{label:"CE 23",x:-421,y:206},address:"CE-IP-23",firstHop:{"CE-IP-26":11},type:"CE"},{id:24,node:{label:"CE 24",x:-404,y:297},address:"CE-IP-24",firstHop:{"CE-IP-30":11},type:"CE"},{id:25,node:{label:"CE 25",x:-404,y:375},address:"CE-IP-25",firstHop:{"CE-IP-34":10},type:"CE"},{id:26,node:{label:"CE 26",x:466,y:-202},address:"CE-IP-26",firstHop:{},type:"CE"},{id:27,node:{label:"CE 27",x:468,y:-104},address:"CE-IP-27",firstHop:{},type:"CE"},{id:28,node:{label:"CE 28",x:467,y:2},address:"CE-IP-28",firstHop:{},type:"CE"},{id:29,node:{label:"CE 29",x:463,y:90},address:"CE-IP-29",firstHop:{},type:"CE"},{id:30,node:{label:"CE 30",x:618,y:195},address:"CE-IP-30",firstHop:{"CE-IP-29":13,"CE-IP-21":13},type:"CE"},{id:31,node:{label:"CE 31",x:643,y:273},address:"CE-IP-31",firstHop:{},type:"CE"},{id:32,node:{label:"CE 32",x:623,y:355},address:"CE-IP-32",firstHop:{},type:"CE"},{id:33,node:{label:"CE 33",x:540,y:400},address:"CE-IP-33",firstHop:{},type:"CE"},{id:34,node:{label:"CE 34",x:244,y:354},address:"CE-IP-34",firstHop:{"CE-IP-26":12,"CE-IP-33":12,"CE-IP-24":12},type:"CE"}],vi=[{bandwidth:0,id:"3-1",source:3,target:1},{bandwidth:0,id:"1-4",source:1,target:4},{bandwidth:0,id:"4-5",source:4,target:5},{bandwidth:0,id:"5-2",source:5,target:2},{bandwidth:0,id:"2-3",source:2,target:3},{bandwidth:0,id:"3-5",source:3,target:5},{bandwidth:0,id:"7-1",source:7,target:1},{bandwidth:0,id:"8-1",source:8,target:1},{bandwidth:0,id:"17-16",source:17,target:16},{bandwidth:0,id:"18-16",source:18,target:16},{bandwidth:0,id:"19-16",source:19,target:16},{bandwidth:0,id:"16-7",source:16,target:7},{bandwidth:0,id:"16-8",source:16,target:8},{bandwidth:0,id:"7-3",source:7,target:3},{bandwidth:0,id:"25-10",source:25,target:10},{bandwidth:0,id:"10-9",source:10,target:9},{bandwidth:0,id:"9-2",source:9,target:2},{bandwidth:0,id:"10-2",source:10,target:2},{bandwidth:0,id:"11-9",source:11,target:9},{bandwidth:0,id:"22-11",source:22,target:11},{bandwidth:0,id:"23-11",source:23,target:11},{bandwidth:0,id:"24-11",source:24,target:11},{bandwidth:0,id:"20-6",source:20,target:6},{bandwidth:0,id:"6-3",source:6,target:3},{bandwidth:0,id:"21-6",source:21,target:6},{bandwidth:0,id:"4-15",source:4,target:15},{bandwidth:0,id:"4-14",source:4,target:14},{bandwidth:0,id:"5-13",source:5,target:13},{bandwidth:0,id:"5-12",source:5,target:12},{bandwidth:0,id:"15-27",source:15,target:27},{bandwidth:0,id:"15-26",source:15,target:26},{bandwidth:0,id:"14-28",source:14,target:28},{bandwidth:0,id:"14-29",source:14,target:29},{bandwidth:0,id:"33-13",source:33,target:13},{bandwidth:0,id:"32-13",source:32,target:13},{bandwidth:0,id:"13-31",source:13,target:31},{bandwidth:0,id:"13-30",source:13,target:30},{bandwidth:0,id:"34-12",source:34,target:12}],ki={routers:yi,links:vi};function Gn(r,e,t){const n=r.slice();return n[3]=e[t],n}function Xn(r){let e,t;const n=[r[3]];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new et({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&2?an(n,[ln(i[3])]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function xi(r){let e,t="Welcome",n,s,i="This tool is designed to mimic the basics of MPLS",a,l,o="Choose a network:",c,u,f,p=Ee(r[1]),y=[];for(let _=0;_<p.length;_+=1)y[_]=Xn(Gn(r,p,_));const m=_=>j(y[_],1,1,()=>{y[_]=null});return{c(){e=w("h1"),e.textContent=t,n=R(),s=w("p"),s.textContent=i,a=R(),l=w("p"),l.textContent=o,c=R(),u=w("div");for(let _=0;_<y.length;_+=1)y[_].c();this.h()},l(_){e=E(_,"H1",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-4p3d56"&&(e.textContent=t),n=T(_),s=E(_,"P",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1helk6g"&&(s.textContent=i),a=T(_),l=E(_,"P",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1vyl31e"&&(l.textContent=o),c=T(_),u=E(_,"DIV",{class:!0});var b=A(u);for(let g=0;g<y.length;g+=1)y[g].l(b);b.forEach(d),this.h()},h(){v(e,"class","svelte-1os0cpz"),v(s,"class","svelte-1os0cpz"),v(l,"class","svelte-1os0cpz"),v(u,"class","buttons svelte-1os0cpz")},m(_,b){k(_,e,b),k(_,n,b),k(_,s,b),k(_,a,b),k(_,l,b),k(_,c,b),k(_,u,b);for(let g=0;g<y.length;g+=1)y[g]&&y[g].m(u,null);f=!0},p(_,b){if(b&2){p=Ee(_[1]);let g;for(g=0;g<p.length;g+=1){const h=Gn(_,p,g);y[g]?(y[g].p(h,b),B(y[g],1)):(y[g]=Xn(h),y[g].c(),B(y[g],1),y[g].m(u,null))}for(He(),g=p.length;g<y.length;g+=1)m(g);Oe()}},i(_){if(!f){for(let b=0;b<p.length;b+=1)B(y[b]);f=!0}},o(_){y=y.filter(Boolean);for(let b=0;b<y.length;b+=1)j(y[b]);f=!1},d(_){_&&(d(e),d(n),d(s),d(a),d(l),d(c),d(u)),ht(y,_)}}}function wi(r){let e,t,n;function s(a){r[2](a)}let i={$$slots:{default:[xi]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.dialog=r[0]),e=new un({props:i}),je.push(()=>We(e,"dialog",s)),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,l){ne(e,a,l),n=!0},p(a,[l]){const o={};l&66&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.dialog=a[0],Ye(()=>t=!1)),e.$set(o)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){j(e.$$.fragment,a),n=!1},d(a){re(e,a)}}}function Ei(r,e,t){let n,s;An(()=>{t(0,s.inert=!0,s),s.showModal(),t(0,s.inert=!1,s)});function i(a){s=a,t(0,s)}return r.$$.update=()=>{r.$$.dirty&1&&t(1,n=[{text:"Blank",callback:()=>{s.close()}},{text:"Small",callback:()=>{Sn(bi),s.close()}},{text:"Large",callback:()=>{Sn(ki),s.close()}},{text:"Import",callback:()=>{const a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=l=>{if(!(l.target instanceof HTMLInputElement)||l.target.files.length===0)return;const o=l.target.files[0],c=new FileReader;c.addEventListener("load",u=>{if(!u.target||typeof u.target.result!="string")return;Sn(JSON.parse(u.target.result))&&s.close()}),c.readAsText(o)},a.click()}}])},[s,n,i]}class Ci extends Re{constructor(e){super(),Te(this,e,Ei,wi,Le,{})}}const Ii={placing:null},ft=In(Ii),Lt=In(!1),Jn=16,$i=2**20-1;function Gr(r,e){const t=r[0];if(!(t instanceof Ge)){alert("The path does not start with a CE");return}const n=r[1];if(!(n instanceof Qe)){alert("The source CE is not directly connected to an LER");return}if(t.firstHop.set(e,n.id),n.FIB.get(e))return;const s=r.length-2,i=r[s];if(!(i instanceof Qe)){alert("Destination CE is not connected directly to a LER");return}let a=Kn(r[s]);i.LFIB.receiveEntry(a,-1,e);for(let l=r.length-2;l>0;l--){const o=r[l],c=r[l-1],u=a;a=Kn(o),c instanceof Qe?c.FIB.receiveEntry(e,u,o.id.toString()):c instanceof Bt&&c.LFIB.receiveEntry(a,u,o.id.toString())}}function Li(r,e){return r instanceof Bt||r instanceof Qe?r.LFIB.map.has(e):!1}function Kn(r){let e;do e=Math.floor(Math.random()*($i-Jn+1)+Jn);while(Li(r,e));return e}function Ri(r){let e,t,n,s;return{c(){e=w("button"),t=ge(r[0]),this.h()},l(i){e=E(i,"BUTTON",{class:!0});var a=A(e);t=_e(a,r[0]),a.forEach(d),this.h()},h(){v(e,"class","svelte-ritw78")},m(i,a){k(i,e,a),I(e,t),n||(s=me(e,"click",function(){Sr(r[1])&&r[1].apply(this,arguments)}),n=!0)},p(i,[a]){r=i,a&1&&Ve(t,r[0])},i:Se,o:Se,d(i){i&&d(e),n=!1,s()}}}function Ti(r,e,t){let{text:n}=e,{callback:s}=e;return r.$$set=i=>{"text"in i&&t(0,n=i.text),"callback"in i&&t(1,s=i.callback)},[n,s]}class kt extends Re{constructor(e){super(),Te(this,e,Ti,Ri,Le,{text:0,callback:1})}}function Qn(r,e,t){const n=r.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function er(r){let e,t,n,s,i,a,l,o,c,u,f,p,y,m,_,b,g,h;function $(...D){return r[5](r[9],...D)}function S(...D){return r[6](r[9],...D)}function N(){return r[7](r[9])}f=new kt({props:{text:"LDP",callback:N}});function H(){return r[8](r[9])}return m=new kt({props:{text:"-",callback:H}}),{c(){e=w("tr"),t=w("td"),n=w("input"),i=R(),a=w("td"),l=w("input"),c=R(),u=w("td"),ee(f.$$.fragment),p=R(),y=w("td"),ee(m.$$.fragment),_=R(),this.h()},l(D){e=E(D,"TR",{});var U=A(e);t=E(U,"TD",{});var X=A(t);n=E(X,"INPUT",{type:!0,placeholder:!0}),X.forEach(d),i=T(U),a=E(U,"TD",{});var O=A(a);l=E(O,"INPUT",{type:!0,placeholder:!0}),O.forEach(d),c=T(U),u=E(U,"TD",{title:!0});var x=A(u);te(f.$$.fragment,x),x.forEach(d),p=T(U),y=E(U,"TD",{});var F=A(y);te(m.$$.fragment,F),F.forEach(d),_=T(U),U.forEach(d),this.h()},h(){v(n,"type","text"),n.value=s=r[9],v(n,"placeholder","Address"),v(l,"type","text"),l.value=o=r[10],v(l,"placeholder","Link"),v(u,"title","Generates shortest path")},m(D,U){k(D,e,U),I(e,t),I(t,n),I(e,i),I(e,a),I(a,l),I(e,c),I(e,u),ne(f,u,null),I(e,p),I(e,y),ne(m,y,null),I(e,_),b=!0,g||(h=[me(n,"change",$),me(l,"change",S)],g=!0)},p(D,U){r=D,(!b||U&1&&s!==(s=r[9])&&n.value!==s)&&(n.value=s),(!b||U&1&&o!==(o=r[10])&&l.value!==o)&&(l.value=o);const X={};U&1&&(X.callback=N),f.$set(X);const O={};U&1&&(O.callback=H),m.$set(O)},i(D){b||(B(f.$$.fragment,D),B(m.$$.fragment,D),b=!0)},o(D){j(f.$$.fragment,D),j(m.$$.fragment,D),b=!1},d(D){D&&d(e),re(f),re(m),g=!1,Rt(h)}}}function Pi(r){let e,t,n,s="(?)",i,a,l,o,c,u="Destination",f,p,y="First hop",m,_,b,g="(?)",h,$,S,N,H,D,U,X,O=Ee([...r[0].firstHop]),x=[];for(let P=0;P<O.length;P+=1)x[P]=er(Qn(r,O,P));const F=P=>j(x[P],1,1,()=>{x[P]=null});return U=new kt({props:{text:"+",callback:r[1](r[0].addEmptyEntry)}}),{c(){e=w("p"),t=ge("Destinations: "),n=w("span"),n.textContent=s,i=R(),a=w("table"),l=w("thead"),o=w("tr"),c=w("th"),c.textContent=u,f=R(),p=w("th"),p.textContent=y,m=R(),_=w("th"),b=w("span"),b.textContent=g,h=R(),$=w("th"),S=R(),N=w("tbody");for(let P=0;P<x.length;P+=1)x[P].c();H=R(),D=w("div"),ee(U.$$.fragment),this.h()},l(P){e=E(P,"P",{title:!0});var M=A(e);t=_e(M,"Destinations: "),n=E(M,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-1w7wt1o"&&(n.textContent=s),M.forEach(d),i=T(P),a=E(P,"TABLE",{});var pe=A(a);l=E(pe,"THEAD",{});var ie=A(l);o=E(ie,"TR",{});var he=A(o);c=E(he,"TH",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-1o2x94e"&&(c.textContent=u),f=T(he),p=E(he,"TH",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-131gjt9"&&(p.textContent=y),m=T(he),_=E(he,"TH",{class:!0});var we=A(_);b=E(we,"SPAN",{title:!0,"data-svelte-h":!0}),Q(b)!=="svelte-1vkgmco"&&(b.textContent=g),we.forEach(d),h=T(he),$=E(he,"TH",{class:!0}),A($).forEach(d),he.forEach(d),ie.forEach(d),S=T(pe),N=E(pe,"TBODY",{});var fe=A(N);for(let Ie=0;Ie<x.length;Ie+=1)x[Ie].l(fe);fe.forEach(d),pe.forEach(d),H=T(P),D=E(P,"DIV",{class:!0});var Ze=A(D);te(U.$$.fragment,Ze),Ze.forEach(d),this.h()},h(){tt(n,"color","grey"),v(e,"title","Maps IP addresses to IDs of the first LERs in the LSPs found by Dijkstra's"),v(c,"class","svelte-1d4gizi"),v(p,"class","svelte-1d4gizi"),v(b,"title","Generates shortest path"),tt(b,"color","grey"),v(_,"class","svelte-1d4gizi"),v($,"class","svelte-1d4gizi"),v(D,"class","svelte-1d4gizi")},m(P,M){k(P,e,M),I(e,t),I(e,n),k(P,i,M),k(P,a,M),I(a,l),I(l,o),I(o,c),I(o,f),I(o,p),I(o,m),I(o,_),I(_,b),I(o,h),I(o,$),I(a,S),I(a,N);for(let pe=0;pe<x.length;pe+=1)x[pe]&&x[pe].m(N,null);k(P,H,M),k(P,D,M),ne(U,D,null),X=!0},p(P,[M]){if(M&29){O=Ee([...P[0].firstHop]);let ie;for(ie=0;ie<O.length;ie+=1){const he=Qn(P,O,ie);x[ie]?(x[ie].p(he,M),B(x[ie],1)):(x[ie]=er(he),x[ie].c(),B(x[ie],1),x[ie].m(N,null))}for(He(),ie=O.length;ie<x.length;ie+=1)F(ie);Oe()}const pe={};M&1&&(pe.callback=P[1](P[0].addEmptyEntry)),U.$set(pe)},i(P){if(!X){for(let M=0;M<O.length;M+=1)B(x[M]);B(U.$$.fragment,P),X=!0}},o(P){x=x.filter(Boolean);for(let M=0;M<x.length;M+=1)j(x[M]);j(U.$$.fragment,P),X=!1},d(P){P&&(d(e),d(i),d(a),d(H),d(D)),ht(x,P),re(U)}}}function Ni(r,e,t){let{router:n}=e;function s(p){return()=>{p(),t(0,n)}}function i(p,y){if(!(p.target instanceof HTMLInputElement))return;const m=p.target.value.toUpperCase(),_=W.getCERouter(m);if(n.address===m){alert("Destination router cannot be the same as the source router.");return}if(!_){alert("Destination router not found."),p.target.value=y;return}n.updateAddress(y,m),t(0,n)}function a(p){const y=W.getCERouter(p);if(!y){alert("Destination router not found.");return}const m=Fn(n,y);if(m.length<=1){alert("No path found");return}Gr(m,p),t(0,n)}function l(p,y){if(!(p.target instanceof HTMLInputElement))return;const m=parseInt(p.target.value);n.firstHop.set(y,m)}const o=(p,y)=>{i(y,p)},c=(p,y)=>{l(y,p)},u=p=>{a(p)},f=p=>{n.firstHop.delete(p),t(0,n)};return r.$$set=p=>{"router"in p&&t(0,n=p.router)},[n,s,i,a,l,o,c,u,f]}class Si extends Re{constructor(e){super(),Te(this,e,Ni,Pi,Le,{router:0})}}function tr(r,e,t){const n=r.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function nr(r){let e,t,n,s,i,a,l,o,c,u,f,p,y,m,_,b;function g(...N){return r[3](r[7],...N)}function h(){r[4].call(l,r[9],r[10])}function $(){r[5].call(u,r[9],r[10])}function S(){return r[6](r[7])}return p=new kt({props:{text:"-",callback:S}}),{c(){e=w("tr"),t=w("td"),n=w("input"),i=R(),a=w("td"),l=w("input"),o=R(),c=w("td"),u=w("input"),f=R(),ee(p.$$.fragment),y=R(),this.h()},l(N){e=E(N,"TR",{});var H=A(e);t=E(H,"TD",{});var D=A(t);n=E(D,"INPUT",{type:!0}),D.forEach(d),i=T(H),a=E(H,"TD",{});var U=A(a);l=E(U,"INPUT",{type:!0}),U.forEach(d),o=T(H),c=E(H,"TD",{});var X=A(c);u=E(X,"INPUT",{type:!0}),X.forEach(d),f=T(H),te(p.$$.fragment,H),y=T(H),H.forEach(d),this.h()},h(){v(n,"type","number"),n.value=s=r[7],v(l,"type","number"),v(u,"type","text")},m(N,H){k(N,e,H),I(e,t),I(t,n),I(e,i),I(e,a),I(a,l),De(l,r[8].outgoingLabel),I(e,o),I(e,c),I(c,u),De(u,r[8].nextHop),I(e,f),ne(p,e,null),I(e,y),m=!0,_||(b=[me(n,"change",g),me(l,"input",h),me(u,"input",$)],_=!0)},p(N,H){r=N,(!m||H&1&&s!==(s=r[7])&&n.value!==s)&&(n.value=s),H&1&&nt(l.value)!==r[8].outgoingLabel&&De(l,r[8].outgoingLabel),H&1&&u.value!==r[8].nextHop&&De(u,r[8].nextHop);const D={};H&1&&(D.callback=S),p.$set(D)},i(N){m||(B(p.$$.fragment,N),m=!0)},o(N){j(p.$$.fragment,N),m=!1},d(N){N&&d(e),re(p),_=!1,Rt(b)}}}function Bi(r){let e,t,n,s="(?)",i,a,l,o="<tr><th>Incoming</th> <th>Outgoing</th> <th>Next hop</th> <th></th></tr>",c,u,f,p,y,m,_=Ee([...r[0].LFIB.map]),b=[];for(let h=0;h<_.length;h+=1)b[h]=nr(tr(r,_,h));const g=h=>j(b[h],1,1,()=>{b[h]=null});return y=new kt({props:{text:"+",callback:r[1](r[0].LFIB.addEmptyEntry)}}),{c(){e=w("p"),t=ge("LFIB: "),n=w("span"),n.textContent=s,i=R(),a=w("table"),l=w("thead"),l.innerHTML=o,c=R(),u=w("tbody");for(let h=0;h<b.length;h+=1)b[h].c();f=R(),p=w("div"),ee(y.$$.fragment),this.h()},l(h){e=E(h,"P",{title:!0});var $=A(e);t=_e($,"LFIB: "),n=E($,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-1w7wt1o"&&(n.textContent=s),$.forEach(d),i=T(h),a=E(h,"TABLE",{});var S=A(a);l=E(S,"THEAD",{"data-svelte-h":!0}),Q(l)!=="svelte-1fy2y89"&&(l.innerHTML=o),c=T(S),u=E(S,"TBODY",{});var N=A(u);for(let D=0;D<b.length;D+=1)b[D].l(N);N.forEach(d),S.forEach(d),f=T(h),p=E(h,"DIV",{class:!0});var H=A(p);te(y.$$.fragment,H),H.forEach(d),this.h()},h(){tt(n,"color","grey"),v(e,"title","Maps incoming labels to outgoing labels and router IDs"),v(p,"class","svelte-f8qi58")},m(h,$){k(h,e,$),I(e,t),I(e,n),k(h,i,$),k(h,a,$),I(a,l),I(a,c),I(a,u);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(u,null);k(h,f,$),k(h,p,$),ne(y,p,null),m=!0},p(h,[$]){if($&5){_=Ee([...h[0].LFIB.map]);let N;for(N=0;N<_.length;N+=1){const H=tr(h,_,N);b[N]?(b[N].p(H,$),B(b[N],1)):(b[N]=nr(H),b[N].c(),B(b[N],1),b[N].m(u,null))}for(He(),N=_.length;N<b.length;N+=1)g(N);Oe()}const S={};$&1&&(S.callback=h[1](h[0].LFIB.addEmptyEntry)),y.$set(S)},i(h){if(!m){for(let $=0;$<_.length;$+=1)B(b[$]);B(y.$$.fragment,h),m=!0}},o(h){b=b.filter(Boolean);for(let $=0;$<b.length;$+=1)j(b[$]);j(y.$$.fragment,h),m=!1},d(h){h&&(d(e),d(i),d(a),d(f),d(p)),ht(b,h),re(y)}}}function Di(r,e,t){let{router:n}=e;function s(u){return()=>{u(),t(0,n)}}function i(u,f){if(!(u.target instanceof HTMLInputElement))return;const p=parseInt(u.target.value);n.LFIB.updateLabel(f,p)}const a=(u,f)=>{i(f,u)};function l(u,f){u[f][1].outgoingLabel=nt(this.value),t(0,n)}function o(u,f){u[f][1].nextHop=this.value,t(0,n)}const c=u=>{n.LFIB.deleteEntry(u),t(0,n)};return r.$$set=u=>{"router"in u&&t(0,n=u.router)},[n,s,i,a,l,o,c]}class Hi extends Re{constructor(e){super(),Te(this,e,Di,Bi,Le,{router:0})}}function rr(r,e,t){const n=r.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function sr(r){let e,t,n,s,i,a,l,o,c,u,f,p,y,m,_,b;function g(...N){return r[3](r[7],...N)}function h(){r[4].call(l,r[9],r[10])}function $(){r[5].call(u,r[9],r[10])}function S(){return r[6](r[7])}return p=new kt({props:{text:"-",callback:S}}),{c(){e=w("tr"),t=w("td"),n=w("input"),i=R(),a=w("td"),l=w("input"),o=R(),c=w("td"),u=w("input"),f=R(),ee(p.$$.fragment),y=R(),this.h()},l(N){e=E(N,"TR",{});var H=A(e);t=E(H,"TD",{});var D=A(t);n=E(D,"INPUT",{type:!0}),D.forEach(d),i=T(H),a=E(H,"TD",{});var U=A(a);l=E(U,"INPUT",{type:!0}),U.forEach(d),o=T(H),c=E(H,"TD",{});var X=A(c);u=E(X,"INPUT",{type:!0}),X.forEach(d),f=T(H),te(p.$$.fragment,H),y=T(H),H.forEach(d),this.h()},h(){v(n,"type","text"),n.value=s=r[7],v(l,"type","number"),v(u,"type","text")},m(N,H){k(N,e,H),I(e,t),I(t,n),I(e,i),I(e,a),I(a,l),De(l,r[8].label),I(e,o),I(e,c),I(c,u),De(u,r[8].nextHop),I(e,f),ne(p,e,null),I(e,y),m=!0,_||(b=[me(n,"change",g),me(l,"input",h),me(u,"input",$)],_=!0)},p(N,H){r=N,(!m||H&1&&s!==(s=r[7])&&n.value!==s)&&(n.value=s),H&1&&nt(l.value)!==r[8].label&&De(l,r[8].label),H&1&&u.value!==r[8].nextHop&&De(u,r[8].nextHop);const D={};H&1&&(D.callback=S),p.$set(D)},i(N){m||(B(p.$$.fragment,N),m=!0)},o(N){j(p.$$.fragment,N),m=!1},d(N){N&&d(e),re(p),_=!1,Rt(b)}}}function Oi(r){let e,t,n,s="(?)",i,a,l,o="<tr><th>Address</th> <th>Label</th> <th>Next hop</th> <th></th></tr>",c,u,f,p,y,m,_=Ee([...r[0].FIB.map]),b=[];for(let h=0;h<_.length;h+=1)b[h]=sr(rr(r,_,h));const g=h=>j(b[h],1,1,()=>{b[h]=null});return y=new kt({props:{text:"+",callback:r[1](r[0].FIB.addEmptyEntry)}}),{c(){e=w("p"),t=ge("FIB: "),n=w("span"),n.textContent=s,i=R(),a=w("table"),l=w("thead"),l.innerHTML=o,c=R(),u=w("tbody");for(let h=0;h<b.length;h+=1)b[h].c();f=R(),p=w("div"),ee(y.$$.fragment),this.h()},l(h){e=E(h,"P",{title:!0});var $=A(e);t=_e($,"FIB: "),n=E($,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-1w7wt1o"&&(n.textContent=s),$.forEach(d),i=T(h),a=E(h,"TABLE",{});var S=A(a);l=E(S,"THEAD",{"data-svelte-h":!0}),Q(l)!=="svelte-1qhs6t7"&&(l.innerHTML=o),c=T(S),u=E(S,"TBODY",{});var N=A(u);for(let D=0;D<b.length;D+=1)b[D].l(N);N.forEach(d),S.forEach(d),f=T(h),p=E(h,"DIV",{class:!0});var H=A(p);te(y.$$.fragment,H),H.forEach(d),this.h()},h(){tt(n,"color","grey"),v(e,"title","Maps IP addresses to labels and router IDs"),v(p,"class","svelte-f8qi58")},m(h,$){k(h,e,$),I(e,t),I(e,n),k(h,i,$),k(h,a,$),I(a,l),I(a,c),I(a,u);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(u,null);k(h,f,$),k(h,p,$),ne(y,p,null),m=!0},p(h,[$]){if($&5){_=Ee([...h[0].FIB.map]);let N;for(N=0;N<_.length;N+=1){const H=rr(h,_,N);b[N]?(b[N].p(H,$),B(b[N],1)):(b[N]=sr(H),b[N].c(),B(b[N],1),b[N].m(u,null))}for(He(),N=_.length;N<b.length;N+=1)g(N);Oe()}const S={};$&1&&(S.callback=h[1](h[0].FIB.addEmptyEntry)),y.$set(S)},i(h){if(!m){for(let $=0;$<_.length;$+=1)B(b[$]);B(y.$$.fragment,h),m=!0}},o(h){b=b.filter(Boolean);for(let $=0;$<b.length;$+=1)j(b[$]);j(y.$$.fragment,h),m=!1},d(h){h&&(d(e),d(i),d(a),d(f),d(p)),ht(b,h),re(y)}}}function Zi(r,e,t){let{router:n}=e;function s(u){return()=>{u(),t(0,n)}}function i(u,f){if(!(u.target instanceof HTMLInputElement))return;const p=u.target.value;n.FIB.updateAddress(f,p)}const a=(u,f)=>{i(f,u)};function l(u,f){u[f][1].label=nt(this.value),t(0,n)}function o(u,f){u[f][1].nextHop=this.value,t(0,n)}const c=u=>{n.FIB.deleteEntry(u),t(0,n)};return r.$$set=u=>{"router"in u&&t(0,n=u.router)},[n,s,i,a,l,o,c]}class ji extends Re{constructor(e){super(),Te(this,e,Zi,Oi,Le,{router:0})}}function Ai(r){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=w("p"),e.textContent=t},l(n){e=E(n,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,s){k(n,e,s)},p:Se,i:Se,o:Se,d(n){n&&d(e)}}}function Mi(r){let e,t,n,s,i,a,l,o,c,u,f,p,y,m,_=r[0].id+"",b,g,h,$,S,N,H,D,U,X,O=r[0]instanceof Ge&&ir(r),x=r[0]instanceof Qe&&ar(r),F=(r[0]instanceof Qe||r[0]instanceof Bt)&&lr(r);return H=new kt({props:{text:"Delete Router",callback:r[3]}}),{c(){e=w("div"),t=w("div"),n=w("label"),s=ge(`Label:
          `),i=w("input"),a=R(),l=w("label"),o=ge(`Position:
        `),c=w("input"),u=R(),f=w("input"),p=R(),y=w("p"),m=ge("ID: "),b=ge(_),g=R(),O&&O.c(),h=R(),x&&x.c(),$=R(),F&&F.c(),S=R(),N=w("div"),ee(H.$$.fragment),this.h()},l(P){e=E(P,"DIV",{});var M=A(e);t=E(M,"DIV",{});var pe=A(t);n=E(pe,"LABEL",{});var ie=A(n);s=_e(ie,`Label:
          `),i=E(ie,"INPUT",{type:!0,class:!0}),ie.forEach(d),pe.forEach(d),a=T(M),l=E(M,"LABEL",{});var he=A(l);o=_e(he,`Position:
        `),c=E(he,"INPUT",{type:!0,class:!0}),u=T(he),f=E(he,"INPUT",{type:!0,class:!0}),he.forEach(d),p=T(M),y=E(M,"P",{});var we=A(y);m=_e(we,"ID: "),b=_e(we,_),we.forEach(d),M.forEach(d),g=T(P),O&&O.l(P),h=T(P),x&&x.l(P),$=T(P),F&&F.l(P),S=T(P),N=E(P,"DIV",{class:!0});var fe=A(N);te(H.$$.fragment,fe),fe.forEach(d),this.h()},h(){v(i,"type","text"),v(i,"class","svelte-cihl2i"),v(c,"type","number"),c.disabled=r[2],v(c,"class","svelte-cihl2i"),v(f,"type","number"),f.disabled=r[2],v(f,"class","svelte-cihl2i"),v(N,"class","margin-top svelte-cihl2i")},m(P,M){k(P,e,M),I(e,t),I(t,n),I(n,s),I(n,i),De(i,r[0].node.label),I(e,a),I(e,l),I(l,o),I(l,c),De(c,r[0].node.x),I(l,u),I(l,f),De(f,r[0].node.y),I(e,p),I(e,y),I(y,m),I(y,b),k(P,g,M),O&&O.m(P,M),k(P,h,M),x&&x.m(P,M),k(P,$,M),F&&F.m(P,M),k(P,S,M),k(P,N,M),ne(H,N,null),D=!0,U||(X=[me(i,"input",r[4]),me(c,"input",r[5]),me(f,"input",r[6]),me(e,"input",r[7])],U=!0)},p(P,M){M&1&&i.value!==P[0].node.label&&De(i,P[0].node.label),(!D||M&4)&&(c.disabled=P[2]),M&1&&nt(c.value)!==P[0].node.x&&De(c,P[0].node.x),(!D||M&4)&&(f.disabled=P[2]),M&1&&nt(f.value)!==P[0].node.y&&De(f,P[0].node.y),(!D||M&1)&&_!==(_=P[0].id+"")&&Ve(b,_),P[0]instanceof Ge?O?(O.p(P,M),M&1&&B(O,1)):(O=ir(P),O.c(),B(O,1),O.m(h.parentNode,h)):O&&(He(),j(O,1,1,()=>{O=null}),Oe()),P[0]instanceof Qe?x?(x.p(P,M),M&1&&B(x,1)):(x=ar(P),x.c(),B(x,1),x.m($.parentNode,$)):x&&(He(),j(x,1,1,()=>{x=null}),Oe()),P[0]instanceof Qe||P[0]instanceof Bt?F?(F.p(P,M),M&1&&B(F,1)):(F=lr(P),F.c(),B(F,1),F.m(S.parentNode,S)):F&&(He(),j(F,1,1,()=>{F=null}),Oe())},i(P){D||(B(O),B(x),B(F),B(H.$$.fragment,P),D=!0)},o(P){j(O),j(x),j(F),j(H.$$.fragment,P),D=!1},d(P){P&&(d(e),d(g),d(h),d($),d(S),d(N)),O&&O.d(P),x&&x.d(P),F&&F.d(P),re(H),U=!1,Rt(X)}}}function ir(r){let e,t="Address:",n,s,i=r[0].address+"",a,l,o,c,u,f,p,y;function m(b){r[9](b)}let _={};return r[0]!==void 0&&(_.router=r[0]),c=new Si({props:_}),je.push(()=>We(c,"router",m)),{c(){e=w("p"),e.textContent=t,n=R(),s=w("button"),a=ge(i),l=R(),o=w("div"),ee(c.$$.fragment),this.h()},l(b){e=E(b,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-18hoeeh"&&(e.textContent=t),n=T(b),s=E(b,"BUTTON",{class:!0});var g=A(s);a=_e(g,i),g.forEach(d),l=T(b),o=E(b,"DIV",{class:!0});var h=A(o);te(c.$$.fragment,h),h.forEach(d),this.h()},h(){tt(e,"display","inline"),v(s,"class","svelte-cihl2i"),v(o,"class","margin-top svelte-cihl2i")},m(b,g){k(b,e,g),k(b,n,g),k(b,s,g),I(s,a),k(b,l,g),k(b,o,g),ne(c,o,null),f=!0,p||(y=me(s,"click",r[8]),p=!0)},p(b,g){(!f||g&1)&&i!==(i=b[0].address+"")&&Ve(a,i);const h={};!u&&g&1&&(u=!0,h.router=b[0],Ye(()=>u=!1)),c.$set(h)},i(b){f||(B(c.$$.fragment,b),f=!0)},o(b){j(c.$$.fragment,b),f=!1},d(b){b&&(d(e),d(n),d(s),d(l),d(o)),re(c),p=!1,y()}}}function ar(r){let e,t,n,s;function i(l){r[10](l)}let a={};return r[0]!==void 0&&(a.router=r[0]),t=new ji({props:a}),je.push(()=>We(t,"router",i)),{c(){e=w("div"),ee(t.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var o=A(e);te(t.$$.fragment,o),o.forEach(d),this.h()},h(){v(e,"class","margin-top svelte-cihl2i")},m(l,o){k(l,e,o),ne(t,e,null),s=!0},p(l,o){const c={};!n&&o&1&&(n=!0,c.router=l[0],Ye(()=>n=!1)),t.$set(c)},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){j(t.$$.fragment,l),s=!1},d(l){l&&d(e),re(t)}}}function lr(r){let e,t,n,s;function i(l){r[11](l)}let a={};return r[0]!==void 0&&(a.router=r[0]),t=new Hi({props:a}),je.push(()=>We(t,"router",i)),{c(){e=w("div"),ee(t.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var o=A(e);te(t.$$.fragment,o),o.forEach(d),this.h()},h(){v(e,"class","margin-top svelte-cihl2i")},m(l,o){k(l,e,o),ne(t,e,null),s=!0},p(l,o){const c={};!n&&o&1&&(n=!0,c.router=l[0],Ye(()=>n=!1)),t.$set(c)},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){j(t.$$.fragment,l),s=!1},d(l){l&&d(e),re(t)}}}function Fi(r){let e,t,n,s;const i=[Mi,Ai],a=[];function l(o,c){return o[0]?0:1}return e=l(r),t=a[e]=i[e](r),{c(){t.c(),n=Ce()},l(o){t.l(o),n=Ce()},m(o,c){a[e].m(o,c),k(o,n,c),s=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(He(),j(a[u],1,1,()=>{a[u]=null}),Oe(),t=a[e],t?t.p(o,c):(t=a[e]=i[e](o),t.c()),B(t,1),t.m(n.parentNode,n))},i(o){s||(B(t),s=!0)},o(o){j(t),s=!1},d(o){o&&d(n),a[e].d(o)}}}function zi(r){let e,t,n;function s(a){r[12](a)}let i={$$slots:{default:[Fi]},$$scope:{ctx:r}};return r[1]!==void 0&&(i.dialog=r[1]),e=new un({props:i}),je.push(()=>We(e,"dialog",s)),e.$on("close",r[13]),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,l){ne(e,a,l),n=!0},p(a,[l]){const o={};l&16389&&(o.$$scope={dirty:l,ctx:a}),!t&&l&2&&(t=!0,o.dialog=a[1],Ye(()=>t=!1)),e.$set(o)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){j(e.$$.fragment,a),n=!1},d(a){re(e,a)}}}function Vi(r,e,t){let n;Fe(r,Lt,g=>t(2,n=g));let{router:s}=e,{dialog:i}=e;function a(){if(!n&&s){if(!confirm("Are you sure you want to delete this router?"))return;W.deleteRouter(s.id),i.close()}else alert("You can't delete a router while the network is locked.")}function l(){s.node.label=this.value,t(0,s)}function o(){s.node.x=nt(this.value),t(0,s)}function c(){s.node.y=nt(this.value),t(0,s)}const u=()=>{W.notify()},f=async()=>{s instanceof Ge&&await navigator.clipboard.writeText(s.address)};function p(g){s=g,t(0,s)}function y(g){s=g,t(0,s)}function m(g){s=g,t(0,s)}function _(g){i=g,t(1,i)}const b=()=>{W.notify()};return r.$$set=g=>{"router"in g&&t(0,s=g.router),"dialog"in g&&t(1,i=g.dialog)},[s,i,n,a,l,o,c,u,f,p,y,m,_,b]}class Ui extends Re{constructor(e){super(),Te(this,e,Vi,zi,Le,{router:0,dialog:1})}}function qi(r){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=w("p"),e.textContent=t},l(n){e=E(n,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,s){k(n,e,s)},p:Se,i:Se,o:Se,d(n){n&&d(e)}}}function Yi(r){let e,t=r[0].distance+"",n,s,i,a,l,o,c,u,f,p,y;return u=new kt({props:{text:"Delete Link",callback:r[3]}}),{c(){e=ge("Distance: "),n=ge(t),s=ge(` km
    `),i=w("label"),a=ge(`Bandwidth:
      `),l=w("input"),o=R(),c=w("div"),ee(u.$$.fragment),this.h()},l(m){e=_e(m,"Distance: "),n=_e(m,t),s=_e(m,` km
    `),i=E(m,"LABEL",{class:!0});var _=A(i);a=_e(_,`Bandwidth:
      `),l=E(_,"INPUT",{type:!0,class:!0}),_.forEach(d),o=T(m),c=E(m,"DIV",{class:!0});var b=A(c);te(u.$$.fragment,b),b.forEach(d),this.h()},h(){v(l,"type","number"),l.disabled=r[2],v(l,"class","svelte-11gx5jd"),v(i,"class","svelte-11gx5jd"),v(c,"class","svelte-11gx5jd")},m(m,_){k(m,e,_),k(m,n,_),k(m,s,_),k(m,i,_),I(i,a),I(i,l),De(l,r[0].bandwidth),k(m,o,_),k(m,c,_),ne(u,c,null),f=!0,p||(y=me(l,"input",r[4]),p=!0)},p(m,_){(!f||_&1)&&t!==(t=m[0].distance+"")&&Ve(n,t),(!f||_&4)&&(l.disabled=m[2]),_&1&&nt(l.value)!==m[0].bandwidth&&De(l,m[0].bandwidth)},i(m){f||(B(u.$$.fragment,m),f=!0)},o(m){j(u.$$.fragment,m),f=!1},d(m){m&&(d(e),d(n),d(s),d(i),d(o),d(c)),re(u),p=!1,y()}}}function Wi(r){let e,t,n,s;const i=[Yi,qi],a=[];function l(o,c){return o[0]?0:1}return e=l(r),t=a[e]=i[e](r),{c(){t.c(),n=Ce()},l(o){t.l(o),n=Ce()},m(o,c){a[e].m(o,c),k(o,n,c),s=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(He(),j(a[u],1,1,()=>{a[u]=null}),Oe(),t=a[e],t?t.p(o,c):(t=a[e]=i[e](o),t.c()),B(t,1),t.m(n.parentNode,n))},i(o){s||(B(t),s=!0)},o(o){j(t),s=!1},d(o){o&&d(n),a[e].d(o)}}}function Gi(r){let e,t,n;function s(a){r[5](a)}let i={$$slots:{default:[Wi]},$$scope:{ctx:r}};return r[1]!==void 0&&(i.dialog=r[1]),e=new un({props:i}),je.push(()=>We(e,"dialog",s)),e.$on("close",r[6]),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,l){ne(e,a,l),n=!0},p(a,[l]){const o={};l&133&&(o.$$scope={dirty:l,ctx:a}),!t&&l&2&&(t=!0,o.dialog=a[1],Ye(()=>t=!1)),e.$set(o)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){j(e.$$.fragment,a),n=!1},d(a){re(e,a)}}}function Xi(r,e,t){let n;Fe(r,Lt,u=>t(2,n=u));let{link:s}=e,{dialog:i}=e;function a(){if(!n&&s){if(!confirm("Are you sure you want to delete this link?"))return;W.deleteLink(s.id),i.close()}else alert("You can't delete a link while the network is locked.")}function l(){s.bandwidth=nt(this.value),t(0,s)}function o(u){i=u,t(1,i)}const c=()=>{W.notify()};return r.$$set=u=>{"link"in u&&t(0,s=u.link),"dialog"in u&&t(1,i=u.dialog)},[s,i,n,a,l,o,c]}class Ji extends Re{constructor(e){super(),Te(this,e,Xi,Gi,Le,{link:0,dialog:1})}}function or(r){let e,t="Loading...";return{c(){e=w("p"),e.textContent=t,this.h()},l(n){e=E(n,"P",{style:!0,"data-svelte-h":!0}),Q(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){tt(e,"font-size","200px")},m(n,s){k(n,e,s)},d(n){n&&d(e)}}}function ur(r){let e,t,n,s,i,a;return{c(){e=at("line"),this.h()},l(l){e=lt(l,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),A(e).forEach(d),this.h()},h(){v(e,"class","preview"),v(e,"x1",t=r[5].node.x),v(e,"y1",n=r[5].node.y),v(e,"x2",s=r[21](r[2].x)),v(e,"y2",i=r[22](r[2].y)),v(e,"stroke",a=r[7]===r[13].CONNECTING?"green":"blue")},m(l,o){k(l,e,o)},p(l,o){o[0]&32&&t!==(t=l[5].node.x)&&v(e,"x1",t),o[0]&32&&n!==(n=l[5].node.y)&&v(e,"y1",n),o[0]&4&&s!==(s=l[21](l[2].x))&&v(e,"x2",s),o[0]&4&&i!==(i=l[22](l[2].y))&&v(e,"y2",i),o[0]&128&&a!==(a=l[7]===l[13].CONNECTING?"green":"blue")&&v(e,"stroke",a)},d(l){l&&d(e)}}}function cr(r){let e,t,n,s,i,a=r[12].placing+"",l,o,c;return{c(){e=at("image"),i=at("text"),l=ge(a),this.h()},l(u){e=lt(u,"image",{x:!0,y:!0,width:!0,height:!0,href:!0}),A(e).forEach(d),i=lt(u,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var f=A(i);l=_e(f,a),f.forEach(d),this.h()},h(){v(e,"x",t=r[21](r[3].x)-45/2),v(e,"y",n=r[22](r[3].y)-45/2),v(e,"width","45"),v(e,"height","45"),v(e,"href",s=`Router/${r[12].placing}.svg`),v(i,"x",o=r[21](r[3].x)),v(i,"y",c=r[22](r[3].y)),v(i,"dominant-baseline","central"),v(i,"font-size","smaller"),v(i,"class","svelte-huetud")},m(u,f){k(u,e,f),k(u,i,f),I(i,l)},p(u,f){f[0]&8&&t!==(t=u[21](u[3].x)-45/2)&&v(e,"x",t),f[0]&8&&n!==(n=u[22](u[3].y)-45/2)&&v(e,"y",n),f[0]&4096&&s!==(s=`Router/${u[12].placing}.svg`)&&v(e,"href",s),f[0]&4096&&a!==(a=u[12].placing+"")&&Ve(l,a),f[0]&8&&o!==(o=u[21](u[3].x))&&v(i,"x",o),f[0]&8&&c!==(c=u[22](u[3].y))&&v(i,"y",c)},d(u){u&&(d(e),d(i))}}}function Ki(r){let e,t,n,s,i,a,l,o,c,u,f,p,y,m,_,b=!r[10]&&or(),g=(!r[0]&&r[7]===r[13].CONNECTING||r[7]===r[13].ADDING_DESTINATION)&&r[5]&&ur(r);const h=r[25].default,$=Br(h,r,r[24],null);let S=r[7]===r[13].ADDING_ROUTERS&&r[12].placing&&cr(r);function N(x){r[28](x)}function H(x){r[29](x)}let D={};r[5]!==void 0&&(D.router=r[5]),r[8]!==void 0&&(D.dialog=r[8]),a=new Ui({props:D}),je.push(()=>We(a,"router",N)),je.push(()=>We(a,"dialog",H));function U(x){r[30](x)}function X(x){r[31](x)}let O={};return r[6]!==void 0&&(O.link=r[6]),r[9]!==void 0&&(O.dialog=r[9]),u=new Ji({props:O}),je.push(()=>We(u,"link",U)),je.push(()=>We(u,"dialog",X)),{c(){b&&b.c(),e=R(),t=at("svg"),g&&g.c(),n=Ce(),$&&$.c(),S&&S.c(),i=R(),ee(a.$$.fragment),c=R(),ee(u.$$.fragment),this.h()},l(x){b&&b.l(x),e=T(x),t=lt(x,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var F=A(t);g&&g.l(F),n=Ce(),$&&$.l(F),S&&S.l(F),F.forEach(d),i=T(x),te(a.$$.fragment,x),c=T(x),te(u.$$.fragment,x),this.h()},h(){v(t,"viewBox",s=`${r[1].x} ${r[1].y} ${r[1].width} ${r[1].height}`),v(t,"role","button"),v(t,"tabindex","-1"),v(t,"class","svelte-huetud"),tt(t,"cursor",r[11][r[7]])},m(x,F){b&&b.m(x,F),k(x,e,F),k(x,t,F),g&&g.m(t,null),I(t,n),$&&$.m(t,null),S&&S.m(t,null),r[27](t),k(x,i,F),ne(a,x,F),k(x,c,F),ne(u,x,F),y=!0,m||(_=[me(window,"keydown",r[15]),me(t,"pointerdown",r[16]),me(t,"pointermove",r[14]),me(t,"pointerup",r[17]),me(t,"wheel",r[18]),me(t,"dblclick",r[19]),me(t,"dragover",Kr(r[26])),me(t,"drop",r[20])],m=!0)},p(x,F){x[10]?b&&(b.d(1),b=null):b||(b=or(),b.c(),b.m(e.parentNode,e)),(!x[0]&&x[7]===x[13].CONNECTING||x[7]===x[13].ADDING_DESTINATION)&&x[5]?g?g.p(x,F):(g=ur(x),g.c(),g.m(t,n)):g&&(g.d(1),g=null),$&&$.p&&(!y||F[0]&16777216)&&Dr($,h,x,x[24],y?Or(h,x[24],F,null):Hr(x[24]),null),x[7]===x[13].ADDING_ROUTERS&&x[12].placing?S?S.p(x,F):(S=cr(x),S.c(),S.m(t,null)):S&&(S.d(1),S=null),(!y||F[0]&2&&s!==(s=`${x[1].x} ${x[1].y} ${x[1].width} ${x[1].height}`))&&v(t,"viewBox",s),F[0]&2176&&tt(t,"cursor",x[11][x[7]]);const P={};!l&&F[0]&32&&(l=!0,P.router=x[5],Ye(()=>l=!1)),!o&&F[0]&256&&(o=!0,P.dialog=x[8],Ye(()=>o=!1)),a.$set(P);const M={};!f&&F[0]&64&&(f=!0,M.link=x[6],Ye(()=>f=!1)),!p&&F[0]&512&&(p=!0,M.dialog=x[9],Ye(()=>p=!1)),u.$set(M)},i(x){y||(B($,x),B(a.$$.fragment,x),B(u.$$.fragment,x),y=!0)},o(x){j($,x),j(a.$$.fragment,x),j(u.$$.fragment,x),y=!1},d(x){x&&(d(e),d(t),d(i),d(c)),b&&b.d(x),g&&g.d(),$&&$.d(x),S&&S.d(),r[27](null),re(a,x),re(u,x),m=!1,Rt(_)}}}function Qi(r,e,t){let n,s,i,a;Fe(r,Lt,C=>t(0,s=C)),Fe(r,ft,C=>t(12,i=C)),Fe(r,Xe,C=>t(33,a=C));let{$$slots:l={},$$scope:o}=e;var c=(C=>(C[C.NONE=0]="NONE",C[C.DRAGGING=1]="DRAGGING",C[C.PANNING=2]="PANNING",C[C.CONNECTING=3]="CONNECTING",C[C.ADDING_DESTINATION=4]="ADDING_DESTINATION",C[C.ADDING_ROUTERS=5]="ADDING_ROUTERS",C))(c||{});const u={x:0,y:0,width:0,height:0,get scale(){return m?this.width/m.getBoundingClientRect().width:1}},f={x:0,y:0},p={x:0,y:0},y={x:0,y:0};let m=null,_=null,b=null,g=0,h,$,S=!1;ft.subscribe(C=>{C.placing&&["CE","LER","LSR"].includes(C.placing)?t(7,g=5):t(7,g=0)}),An(()=>{if(!m)return;new ResizeObserver(N).observe(m),requestAnimationFrame(()=>{m&&(t(1,u.x=m.getBoundingClientRect().width/-2,u),t(1,u.y=m.getBoundingClientRect().height/-2,u))}),t(10,S=!0)});function N(){if(!m)return;const C=u.scale||1;t(1,u.width=m.getBoundingClientRect().width*C,u),t(1,u.height=m.getBoundingClientRect().height*C,u)}function H(C){t(3,y.x=C.clientX,y),t(3,y.y=C.clientY,y)}function D(C){for(const le of document.querySelectorAll("dialog"))if(le.hasAttribute("open"))return;switch(C.code){case"Escape":st(ft,i.placing=null,i);break;case"Tab":if(h.open||$.open)return;C.preventDefault(),st(Lt,s=!s,s),st(ft,i.placing=null,i),W.clearPackets();break;case"Digit1":U("CE");break;case"Digit2":U("LER");break;case"Digit3":U("LSR");break;case"Space":C.preventDefault(),st(Xe,a.running=!a.running,a)}}function U(C){s||st(ft,i.placing=C,i)}function X(C){if(!(C.target instanceof Element))return;if(C.preventDefault(),g===5&&!s){switch(i.placing){case"CE":W.createCE(we(C.clientX),fe(C.clientY));break;case"LER":W.createLER(we(C.clientX),fe(C.clientY));break;case"LSR":W.createLSR(we(C.clientX),fe(C.clientY));break}C.shiftKey||st(ft,i.placing=null,i);return}m==null||m.addEventListener("pointermove",x),m==null||m.setPointerCapture(C.pointerId);const le=C.target.id;if(le){if(t(5,_=W.getRouter(parseInt(le))||null),!_)return;C.shiftKey?t(7,g=3):C.altKey&&_ instanceof Ge?t(7,g=4):(p.x=_.node.x,p.y=_.node.y,t(7,g=1))}else t(7,g=2);t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f)}function O(C){if(C.target instanceof Element&&g!==5){C.preventDefault();e:if(_&&g===4){const le=document.elementFromPoint(C.clientX,C.clientY),ve=(le==null?void 0:le.tagName)==="image"?le.id:null,Pe=W.getRouter(parseInt(ve??""));if(!Pe||_===Pe)break e;if(!(Pe instanceof Ge)){alert("Destination must be a CE");break e}const Me=Fn(_,Pe);if(Me.length<=1){alert("No path found");break e}Gr(Me,Pe.address),W.notify()}t(7,g=0),t(5,_=null),m==null||m.releasePointerCapture(C.pointerId),m==null||m.removeEventListener("pointermove",x)}}function x(C){C.preventDefault();const le={x:(C.clientX-f.x)*u.scale,y:(C.clientY-f.y)*u.scale};if(!s&&g===1&&_)t(5,_.node.x=Math.round(p.x+le.x),_),t(5,_.node.y=Math.round(p.y+le.y),_),W.notify();else if(g===2)t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f),t(1,u.x-=le.x,u),t(1,u.y-=le.y,u);else if(g===4)t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f);else if(!s&&g===3){t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f);const ve=document.elementFromPoint(C.clientX,C.clientY);if(!ve)return;const Pe=W.getRouter(parseInt(ve.id));ve.tagName==="image"&&Pe&&_&&(W.addLink({source:_,target:Pe}),t(5,_=Pe))}}function F(C){C.preventDefault(),t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f);const le=C.deltaY>0?1.025:.975;P(le,f)}function P(C,le){if(!m||u.scale<.1&&C<1||u.scale>5&&C>1)return;const ve=m.getBoundingClientRect(),Pe={x:(le.x-ve.left)/ve.width,y:(le.y-ve.top)/ve.height};t(1,u.x-=u.width*(C-1)*Pe.x,u),t(1,u.y-=u.height*(C-1)*Pe.y,u),t(1,u.width*=C,u),t(1,u.height*=C,u)}function M(C){if(!(C.target instanceof Element))return;C.preventDefault();const le=document.elementFromPoint(C.clientX,C.clientY);le&&(le.tagName==="image"?pe(le.id):le.tagName==="rect"&&ie(le.id))}function pe(C){const le=W.getRouter(parseInt(C));le&&(t(5,_=le),h.showModal())}function ie(C){const le=W.links.find(ve=>C===ve.id);le&&(t(6,b=le),$.showModal())}function he(C){var ve;C.preventDefault();const le=(ve=C.dataTransfer)==null?void 0:ve.getData("text/plain");if(le)switch(le){case"CE":W.createCE(we(C.clientX),fe(C.clientY));break;case"LER":W.createLER(we(C.clientX),fe(C.clientY));break;case"LSR":W.createLSR(we(C.clientX),fe(C.clientY));break}}function we(C){return m?(C-m.getBoundingClientRect().left)*u.scale+u.x:C}function fe(C){return m?(C-m.getBoundingClientRect().top)*u.scale+u.y:C}function Ze(C){Zr.call(this,r,C)}function Ie(C){je[C?"unshift":"push"](()=>{m=C,t(4,m)})}function Ne(C){_=C,t(5,_)}function Ae(C){h=C,t(8,h)}function z(C){b=C,t(6,b)}function oe(C){$=C,t(9,$)}return r.$$set=C=>{"$$scope"in C&&t(24,o=C.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(11,n={0:"move",1:s?"not-allowed":"grabbing",2:"grabbing",3:s?"not-allowed":"crosshair",4:"crosshair",5:"none"})},[s,u,f,y,m,_,b,g,h,$,S,n,i,c,H,D,X,O,F,M,he,we,fe,P,o,l,Ze,Ie,Ne,Ae,z,oe]}class ea extends Re{constructor(e){super(),Te(this,e,Qi,Ki,Le,{zoom:23},null,[-1,-1])}get zoom(){return this.$$.ctx[23]}}function dr(r){let e,t,n=r[0].address+"",s,i,a,l="",o,c,u=r[1].address+"",f,p,y,m,_,b;return y=new et({props:{text:"Play",callback:r[2]}}),_=new et({props:{text:"Delete",callback:r[3]}}),{c(){e=w("div"),t=w("p"),s=ge(n),i=R(),a=w("p"),a.textContent=l,o=R(),c=w("p"),f=ge(u),p=R(),ee(y.$$.fragment),m=R(),ee(_.$$.fragment),this.h()},l(g){e=E(g,"DIV",{class:!0});var h=A(e);t=E(h,"P",{class:!0});var $=A(t);s=_e($,n),$.forEach(d),i=T(h),a=E(h,"P",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-1giyjq6"&&(a.textContent=l),o=T(h),c=E(h,"P",{class:!0});var S=A(c);f=_e(S,u),S.forEach(d),p=T(h),te(y.$$.fragment,h),m=T(h),te(_.$$.fragment,h),h.forEach(d),this.h()},h(){v(t,"class","svelte-ikhsiz"),v(a,"class","svelte-ikhsiz"),v(c,"class","svelte-ikhsiz"),v(e,"class","svelte-ikhsiz")},m(g,h){k(g,e,h),I(e,t),I(t,s),I(e,i),I(e,a),I(e,o),I(e,c),I(c,f),I(e,p),ne(y,e,null),I(e,m),ne(_,e,null),b=!0},p(g,h){(!b||h&1)&&n!==(n=g[0].address+"")&&Ve(s,n),(!b||h&2)&&u!==(u=g[1].address+"")&&Ve(f,u)},i(g){b||(B(y.$$.fragment,g),B(_.$$.fragment,g),b=!0)},o(g){j(y.$$.fragment,g),j(_.$$.fragment,g),b=!1},d(g){g&&d(e),re(y),re(_)}}}function ta(r){let e,t,n=r[1]&&dr(r);return{c(){n&&n.c(),e=Ce()},l(s){n&&n.l(s),e=Ce()},m(s,i){n&&n.m(s,i),k(s,e,i),t=!0},p(s,[i]){s[1]?n?(n.p(s,i),i&2&&B(n,1)):(n=dr(s),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(He(),j(n,1,1,()=>{n=null}),Oe())},i(s){t||(B(n),t=!0)},o(s){j(n),t=!1},d(s){s&&d(e),n&&n.d(s)}}}function na(r,e,t){let{source:n}=e,{destination:s}=e;function i(){s&&W.addPacket(n,s)}function a(){!confirm("Are you sure you want to delete this LSP?")||!s||(n.deleteEntry(s.address),W.notify())}return r.$$set=l=>{"source"in l&&t(0,n=l.source),"destination"in l&&t(1,s=l.destination)},[n,s,i,a]}class ra extends Re{constructor(e){super(),Te(this,e,na,ta,Le,{source:0,destination:1})}}function fr(r,e,t){const n=r.slice();return n[2]=e[t],n}function hr(r,e,t){const n=r.slice();return n[5]=e[t][0],n}function pr(r){let e,t;return e=new ra({props:{source:r[2],destination:W.getCERouter(r[5])}}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.source=n[2]),s&1&&(i.destination=W.getCERouter(n[5])),e.$set(i)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}function mr(r){let e,t,n=Ee([...r[2].firstHop]),s=[];for(let a=0;a<n.length;a+=1)s[a]=pr(hr(r,n,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ce()},l(a){for(let l=0;l<s.length;l+=1)s[l].l(a);e=Ce()},m(a,l){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(a,l);k(a,e,l),t=!0},p(a,l){if(l&1){n=Ee([...a[2].firstHop]);let o;for(o=0;o<n.length;o+=1){const c=hr(a,n,o);s[o]?(s[o].p(c,l),B(s[o],1)):(s[o]=pr(c),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(He(),o=n.length;o<s.length;o+=1)i(o);Oe()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)B(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&d(e),ht(s,a)}}}function sa(r){let e,t,n=Ee(r[0]),s=[];for(let a=0;a<n.length;a+=1)s[a]=mr(fr(r,n,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){e=w("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0});var l=A(e);for(let o=0;o<s.length;o+=1)s[o].l(l);l.forEach(d),this.h()},h(){v(e,"class","svelte-kwkmok")},m(a,l){k(a,e,l);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(a,[l]){if(l&1){n=Ee(a[0]);let o;for(o=0;o<n.length;o+=1){const c=fr(a,n,o);s[o]?(s[o].p(c,l),B(s[o],1)):(s[o]=mr(c),s[o].c(),B(s[o],1),s[o].m(e,null))}for(He(),o=n.length;o<s.length;o+=1)i(o);Oe()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)B(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&d(e),ht(s,a)}}}function ia(r,e,t){let n,s;return Fe(r,W,i=>t(1,s=i)),r.$$.update=()=>{r.$$.dirty&2&&t(0,n=s.routers.filter(i=>i instanceof Ge))},[n,s]}class aa extends Re{constructor(e){super(),Te(this,e,ia,sa,Le,{})}}function gr(r,e,t){const n=r.slice();return n[15]=e[t],n}function _r(r){let e,t;const n=[r[15],{style:"padding: 10px 20px"}];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new et({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&64?an(n,[ln(i[15]),n[1]]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function la(r){let e,t,n,s,i,a,l,o="Simulation Panel",c,u,f="Packet Controls",p,y,m,_=r[2].packets.length+"",b,g,h,$,S,N,H,D,U=r[1].speedMultiplier.toFixed(1)+"",X,O,x,F,P,M,pe,ie=r[1].maxPackets+"",he,we,fe,Ze,Ie,Ne,Ae,z="Fallback to normal IP routing?",oe,C,le,ve,Pe,Me,rt,Ut,Je=Ee(r[6]),ye=[];for(let K=0;K<Je.length;K+=1)ye[K]=_r(gr(r,Je,K));const Zt=K=>j(ye[K],1,1,()=>{ye[K]=null});return ve=new aa({}),{c(){e=w("div"),t=w("div"),s=R(),i=w("div"),a=w("div"),l=w("h1"),l.textContent=o,c=R(),u=w("p"),u.textContent=f,p=R(),y=w("p"),m=ge("Count: "),b=ge(_),g=R(),h=w("div");for(let K=0;K<ye.length;K+=1)ye[K].c();$=R(),S=w("div"),N=w("div"),H=w("p"),D=ge("Speed Multiplier: "),X=ge(U),O=R(),x=w("input"),F=R(),P=w("div"),M=w("p"),pe=ge("Max Packets: "),he=ge(ie),we=R(),fe=w("input"),Ze=R(),Ie=w("div"),Ne=w("label"),Ae=w("p"),Ae.textContent=z,oe=R(),C=w("input"),le=R(),ee(ve.$$.fragment),this.h()},l(K){e=E(K,"DIV",{id:!0,style:!0,class:!0});var ke=A(e);t=E(ke,"DIV",{id:!0,class:!0}),A(t).forEach(d),ke.forEach(d),s=T(K),i=E(K,"DIV",{id:!0,style:!0,class:!0});var xe=A(i);a=E(xe,"DIV",{id:!0,class:!0});var Be=A(a);l=E(Be,"H1",{id:!0,class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-9oxc0e"&&(l.textContent=o),c=T(Be),u=E(Be,"P",{id:!0,class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1cfybk8"&&(u.textContent=f),p=T(Be),y=E(Be,"P",{id:!0,class:!0});var xt=A(y);m=_e(xt,"Count: "),b=_e(xt,_),xt.forEach(d),g=T(Be),h=E(Be,"DIV",{id:!0,class:!0});var dt=A(h);for(let At=0;At<ye.length;At+=1)ye[At].l(dt);dt.forEach(d),$=T(Be),S=E(Be,"DIV",{class:!0});var gt=A(S);N=E(gt,"DIV",{class:!0});var _t=A(N);H=E(_t,"P",{class:!0});var wt=A(H);D=_e(wt,"Speed Multiplier: "),X=_e(wt,U),wt.forEach(d),O=T(_t),x=E(_t,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),_t.forEach(d),F=T(gt),P=E(gt,"DIV",{class:!0});var bt=A(P);M=E(bt,"P",{class:!0});var qe=A(M);pe=_e(qe,"Max Packets: "),he=_e(qe,ie),qe.forEach(d),we=T(bt),fe=E(bt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),bt.forEach(d),Ze=T(gt),Ie=E(gt,"DIV",{class:!0});var jt=A(Ie);Ne=E(jt,"LABEL",{class:!0});var Ke=A(Ne);Ae=E(Ke,"P",{class:!0,"data-svelte-h":!0}),Q(Ae)!=="svelte-1re47ui"&&(Ae.textContent=z),oe=T(Ke),C=E(Ke,"INPUT",{type:!0,class:!0}),Ke.forEach(d),jt.forEach(d),gt.forEach(d),le=T(Be),te(ve.$$.fragment,Be),Be.forEach(d),xe.forEach(d),this.h()},h(){v(t,"id","resize-bar"),v(t,"class","svelte-1ac9h3y"),v(e,"id","visual-resize-bar"),v(e,"style",n=`width: ${r[0]?1:0}px`),v(e,"class","svelte-1ac9h3y"),v(l,"id","simulation-panel-title"),v(l,"class","svelte-1ac9h3y"),v(u,"id","packet-controls-title"),v(u,"class","svelte-1ac9h3y"),v(y,"id","packet-controls-count"),v(y,"class","svelte-1ac9h3y"),v(h,"id","control-panel-buttons"),v(h,"class","svelte-1ac9h3y"),v(H,"class","svelte-1ac9h3y"),v(x,"type","range"),v(x,"min","0.1"),v(x,"max","2"),v(x,"step","0.001"),v(x,"class","svelte-1ac9h3y"),v(N,"class","input-box svelte-1ac9h3y"),v(M,"class","svelte-1ac9h3y"),v(fe,"type","range"),v(fe,"min","1"),v(fe,"max","500"),v(fe,"step","1"),v(fe,"class","svelte-1ac9h3y"),v(P,"class","input-box svelte-1ac9h3y"),v(Ae,"class","svelte-1ac9h3y"),v(C,"type","checkbox"),v(C,"class","svelte-1ac9h3y"),v(Ne,"class","svelte-1ac9h3y"),v(Ie,"class","input-box svelte-1ac9h3y"),v(S,"class","inputs svelte-1ac9h3y"),v(a,"id","control-panel-content"),v(a,"class","svelte-1ac9h3y"),v(i,"id","control-panel"),v(i,"style",Pe=`width: ${r[5]}px; transition: ${r[4]};`),v(i,"class","svelte-1ac9h3y")},m(K,ke){k(K,e,ke),I(e,t),r[9](t),k(K,s,ke),k(K,i,ke),I(i,a),I(a,l),I(a,c),I(a,u),I(a,p),I(a,y),I(y,m),I(y,b),I(a,g),I(a,h);for(let xe=0;xe<ye.length;xe+=1)ye[xe]&&ye[xe].m(h,null);I(a,$),I(a,S),I(S,N),I(N,H),I(H,D),I(H,X),I(N,O),I(N,x),De(x,r[1].speedMultiplier),I(S,F),I(S,P),I(P,M),I(M,pe),I(M,he),I(P,we),I(P,fe),De(fe,r[1].maxPackets),I(S,Ze),I(S,Ie),I(Ie,Ne),I(Ne,Ae),I(Ne,oe),I(Ne,C),C.checked=r[1].enableFallback,I(a,le),ne(ve,a,null),Me=!0,rt||(Ut=[me(t,"pointerdown",r[7]),me(x,"change",r[10]),me(x,"input",r[10]),me(fe,"change",r[11]),me(fe,"input",r[11]),me(C,"change",r[12])],rt=!0)},p(K,[ke]){if((!Me||ke&1&&n!==(n=`width: ${K[0]?1:0}px`))&&v(e,"style",n),(!Me||ke&4)&&_!==(_=K[2].packets.length+"")&&Ve(b,_),ke&64){Je=Ee(K[6]);let xe;for(xe=0;xe<Je.length;xe+=1){const Be=gr(K,Je,xe);ye[xe]?(ye[xe].p(Be,ke),B(ye[xe],1)):(ye[xe]=_r(Be),ye[xe].c(),B(ye[xe],1),ye[xe].m(h,null))}for(He(),xe=Je.length;xe<ye.length;xe+=1)Zt(xe);Oe()}(!Me||ke&2)&&U!==(U=K[1].speedMultiplier.toFixed(1)+"")&&Ve(X,U),ke&2&&De(x,K[1].speedMultiplier),(!Me||ke&2)&&ie!==(ie=K[1].maxPackets+"")&&Ve(he,ie),ke&2&&De(fe,K[1].maxPackets),ke&2&&(C.checked=K[1].enableFallback),(!Me||ke&48&&Pe!==(Pe=`width: ${K[5]}px; transition: ${K[4]};`))&&v(i,"style",Pe)},i(K){if(!Me){for(let ke=0;ke<Je.length;ke+=1)B(ye[ke]);B(ve.$$.fragment,K),Me=!0}},o(K){ye=ye.filter(Boolean);for(let ke=0;ke<ye.length;ke+=1)j(ye[ke]);j(ve.$$.fragment,K),Me=!1},d(K){K&&(d(e),d(s),d(i)),r[9](null),ht(ye,K),re(ve),rt=!1,Rt(Ut)}}}function oa(r,e,t){let n,s,i,a,l,o;Fe(r,Lt,h=>t(0,a=h)),Fe(r,Xe,h=>t(1,l=h)),Fe(r,W,h=>t(2,o=h));let c,u="width 200ms";function f(h){a&&(t(4,u="none"),c.setPointerCapture(h.pointerId),c.addEventListener("pointermove",p),c.addEventListener("pointerup",y))}function p(h){t(5,i=window.innerWidth-h.clientX),i<=20&&t(5,i=0),i>=window.innerWidth-350&&t(5,i=window.innerWidth-350)}function y(h){c.removeEventListener("pointermove",p),c.removeEventListener("pointerup",y),c.releasePointerCapture(h.pointerId),t(4,u="width 200ms")}function m(h){je[h?"unshift":"push"](()=>{c=h,t(3,c)})}function _(){l.speedMultiplier=nt(this.value),Xe.set(l)}function b(){l.maxPackets=nt(this.value),Xe.set(l)}function g(){l.enableFallback=this.checked,Xe.set(l)}return r.$$.update=()=>{r.$$.dirty&4&&t(8,n=o.routers.filter(h=>h instanceof Ge)),r.$$.dirty&258&&t(6,s=[{text:l.running?" Pause":" Play",callback:()=>{st(Xe,l.running=!l.running,l)}},{text:"Reset",callback:()=>{W.clearPackets()}},{text:"Play All",callback:()=>{for(const h of n)for(const[$]of h.firstHop){const S=W.getCERouter($);S&&W.addPacket(h,S)}}}]),r.$$.dirty&1&&t(5,i=a?350:0)},[a,l,o,c,u,i,s,f,n,m,_,b,g]}class ua extends Re{constructor(e){super(),Te(this,e,oa,la,Le,{})}}function br(r){let e,t,n=r[0].label+"",s,i,a;return{c(){e=at("text"),t=ge("Label: "),s=ge(n),this.h()},l(l){e=lt(l,"text",{x:!0,y:!0,class:!0});var o=A(e);t=_e(o,"Label: "),s=_e(o,n),o.forEach(d),this.h()},h(){v(e,"x",i=r[2]-50),v(e,"y",a=r[3]-15),v(e,"class","svelte-w5r6ig")},m(l,o){k(l,e,o),I(e,t),I(e,s)},p(l,o){o&1&&n!==(n=l[0].label+"")&&Ve(s,n),o&4&&i!==(i=l[2]-50)&&v(e,"x",i),o&8&&a!==(a=l[3]-15)&&v(e,"y",a)},d(l){l&&d(e)}}}function ca(r){let e,t,n,s=r[1]&&br(r);return{c(){e=at("circle"),t=R(),s&&s.c(),n=Ce(),this.h()},l(i){e=lt(i,"circle",{r:!0,class:!0}),A(e).forEach(d),t=T(i),s&&s.l(i),n=Ce(),this.h()},h(){v(e,"r","5"),v(e,"class","svelte-w5r6ig"),qn(e,"labeled",r[0].label!==-1)},m(i,a){k(i,e,a),r[6](e),k(i,t,a),s&&s.m(i,a),k(i,n,a)},p(i,[a]){a&1&&qn(e,"labeled",i[0].label!==-1),i[1]?s?s.p(i,a):(s=br(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:Se,o:Se,d(i){i&&(d(e),d(t),d(n)),r[6](null),s&&s.d(i)}}}function da(r,e,t){let n;Fe(r,Xe,m=>t(5,n=m));let{packet:s}=e,i,a,l,o=0,c=0;function u(){const m=Math.sqrt((s.node.x-s.nextHop.node.x)**2+(s.node.y-s.nextHop.node.y)**2);i=Math.round(m/250*1e3)}function f(){if(u(),!l)return;const m=s.node,_=s.nextHop.node;t(4,a=l.animate({transform:[`translate(${m.x}px, ${m.y}px)`,`translate(${_.x}px, ${_.y}px)`]},{duration:i,easing:"linear"})),t(4,a.onfinish=p,a)}function p(){t(0,s.node=s.nextHop.node,s);const m=s.nextHop;if(m.receivePacket(s),m!==s.nextHop){if(!s.validateNextHop(m))return s.drop("Invalid next hop");f()}}s.validateFirstHop()?requestAnimationFrame(f):s.drop("Invalid first hop");function y(m){je[m?"unshift":"push"](()=>{l=m,t(1,l)})}return r.$$set=m=>{"packet"in m&&t(0,s=m.packet)},r.$$.update=()=>{r.$$.dirty&48&&a&&t(4,a.playbackRate=n.speedMultiplier,a),r.$$.dirty&50&&a&&requestAnimationFrame(()=>{if(l){const m=new DOMMatrixReadOnly(getComputedStyle(l).transform);t(2,o=m.m41),t(3,c=m.m42)}n.running?a==null||a.play():a==null||a.pause()})},[s,l,o,c,a,n,y]}class fa extends Re{constructor(e){super(),Te(this,e,da,ca,Le,{packet:0})}}function ha(r){let e,t,n,s,i,a,l,o,c=r[0].distance+"",u,f,p,y;return{c(){e=at("line"),t=R(),n=at("rect"),l=R(),o=at("text"),u=ge(c),f=ge(" km"),this.h()},l(m){e=lt(m,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),A(e).forEach(d),t=T(m),n=lt(m,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),A(n).forEach(d),l=T(m),o=lt(m,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var _=A(o);u=_e(_,c),f=_e(_," km"),_.forEach(d),this.h()},h(){v(e,"x1",r[4]),v(e,"y1",r[2]),v(e,"x2",r[3]),v(e,"y2",r[1]),v(n,"id",s=r[0].id),v(n,"x",i=r[5].x-Bn/2),v(n,"y",a=r[5].y-Dn/2),v(n,"width",Bn),v(n,"height",Dn),v(n,"class","svelte-zjn2k6"),v(o,"x",p=r[5].x),v(o,"y",y=r[5].y),v(o,"dominant-baseline","central"),v(o,"class","svelte-zjn2k6")},m(m,_){k(m,e,_),k(m,t,_),k(m,n,_),k(m,l,_),k(m,o,_),I(o,u),I(o,f)},p(m,[_]){_&16&&v(e,"x1",m[4]),_&4&&v(e,"y1",m[2]),_&8&&v(e,"x2",m[3]),_&2&&v(e,"y2",m[1]),_&1&&s!==(s=m[0].id)&&v(n,"id",s),_&32&&i!==(i=m[5].x-Bn/2)&&v(n,"x",i),_&32&&a!==(a=m[5].y-Dn/2)&&v(n,"y",a),_&1&&c!==(c=m[0].distance+"")&&Ve(u,c),_&32&&p!==(p=m[5].x)&&v(o,"x",p),_&32&&y!==(y=m[5].y)&&v(o,"y",y)},i:Se,o:Se,d(m){m&&(d(e),d(t),d(n),d(l),d(o))}}}const Bn=50,Dn=20;function yr(r,e){return(r+e)/2}function pa(r,e,t){let n,s,i,a,l,{link:o}=e;return r.$$set=c=>{"link"in c&&t(0,o=c.link)},r.$$.update=()=>{r.$$.dirty&1&&t(4,n=o.source.node.x),r.$$.dirty&1&&t(3,s=o.target.node.x),r.$$.dirty&1&&t(2,i=o.source.node.y),r.$$.dirty&1&&t(1,a=o.target.node.y),r.$$.dirty&30&&t(5,l={x:yr(n,s),y:yr(i,a)})},[o,a,i,s,n,l]}class ma extends Re{constructor(e){super(),Te(this,e,pa,ha,Le,{link:0})}}function ga(r){let e,t,n,s,i,a,l,o=r[0].node.label+"",c,u,f;return{c(){e=at("image"),a=R(),l=at("text"),c=ge(o),this.h()},l(p){e=lt(p,"image",{id:!0,x:!0,y:!0,width:!0,height:!0,href:!0,class:!0}),A(e).forEach(d),a=T(p),l=lt(p,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var y=A(l);c=_e(y,o),y.forEach(d),this.h()},h(){v(e,"id",t=r[0].id.toString()),v(e,"x",n=r[0].node.x-45/2),v(e,"y",s=r[0].node.y-45/2),v(e,"width","45"),v(e,"height","45"),v(e,"href",i=`Router/${r[0].type}.svg`),v(e,"class","svelte-1eo9fnr"),v(l,"x",u=r[0].node.x),v(l,"y",f=r[0].node.y+10),v(l,"dominant-baseline","central"),v(l,"font-size","smaller"),v(l,"class","svelte-1eo9fnr")},m(p,y){k(p,e,y),k(p,a,y),k(p,l,y),I(l,c)},p(p,[y]){y&1&&t!==(t=p[0].id.toString())&&v(e,"id",t),y&1&&n!==(n=p[0].node.x-45/2)&&v(e,"x",n),y&1&&s!==(s=p[0].node.y-45/2)&&v(e,"y",s),y&1&&i!==(i=`Router/${p[0].type}.svg`)&&v(e,"href",i),y&1&&o!==(o=p[0].node.label+"")&&Ve(c,o),y&1&&u!==(u=p[0].node.x)&&v(l,"x",u),y&1&&f!==(f=p[0].node.y+10)&&v(l,"y",f)},i:Se,o:Se,d(p){p&&(d(e),d(a),d(l))}}}function _a(r,e,t){let{router:n}=e;return r.$$set=s=>{"router"in s&&t(0,n=s.router)},[n]}class ba extends Re{constructor(e){super(),Te(this,e,_a,ga,Le,{router:0})}}function ya(r){let e,t,n,s;return{c(){e=w("div"),t=ge(r[0]),this.h()},l(i){e=E(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var a=A(e);t=_e(a,r[0]),a.forEach(d),this.h()},h(){v(e,"draggable","true"),v(e,"role","button"),v(e,"tabindex","-1"),tt(e,"background-color",r[1]),v(e,"class","svelte-dfkep2")},m(i,a){k(i,e,a),I(e,t),n||(s=[me(e,"dragstart",r[2]),me(e,"click",r[3])],n=!0)},p(i,[a]){a&1&&Ve(t,i[0]),a&2&&tt(e,"background-color",i[1])},i:Se,o:Se,d(i){i&&d(e),n=!1,Rt(s)}}}function va(r,e,t){let n,s;Fe(r,ft,u=>t(5,n=u)),Fe(r,Lt,u=>t(6,s=u));let{text:i}=e,{type:a}=e,{color:l}=e;function o(u){var f;if(s){alert("Network is locked.");return}(f=u.dataTransfer)==null||f.setData("text/plain",a)}function c(){st(ft,n.placing=a,n)}return r.$$set=u=>{"text"in u&&t(0,i=u.text),"type"in u&&t(4,a=u.type),"color"in u&&t(1,l=u.color)},[i,l,o,c,a]}class ka extends Re{constructor(e){super(),Te(this,e,va,ya,Le,{text:0,type:4,color:1})}}function vr(r,e,t){const n=r.slice();return n[7]=e[t],n}function kr(r,e,t){const n=r.slice();return n[7]=e[t],n}function xr(r,e,t){const n=r.slice();return n[10]=e[t],n}function xa(r){let e,t,n=Ee(r[0]),s=[];for(let a=0;a<n.length;a+=1)s[a]=wr(vr(r,n,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ce()},l(a){for(let l=0;l<s.length;l+=1)s[l].l(a);e=Ce()},m(a,l){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(a,l);k(a,e,l),t=!0},p(a,l){if(l&1){n=Ee(a[0]);let o;for(o=0;o<n.length;o+=1){const c=vr(a,n,o);s[o]?(s[o].p(c,l),B(s[o],1)):(s[o]=wr(c),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(He(),o=n.length;o<s.length;o+=1)i(o);Oe()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)B(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&d(e),ht(s,a)}}}function wa(r){let e,t,n,s=Ee(r[4]),i=[];for(let u=0;u<s.length;u+=1)i[u]=Er(xr(r,s,u));const a=u=>j(i[u],1,1,()=>{i[u]=null});let l=Ee(r[1]),o=[];for(let u=0;u<l.length;u+=1)o[u]=Cr(kr(r,l,u));const c=u=>j(o[u],1,1,()=>{o[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=R();for(let u=0;u<o.length;u+=1)o[u].c();t=Ce()},l(u){for(let f=0;f<i.length;f+=1)i[f].l(u);e=T(u);for(let f=0;f<o.length;f+=1)o[f].l(u);t=Ce()},m(u,f){for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(u,f);k(u,e,f);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(u,f);k(u,t,f),n=!0},p(u,f){if(f&16){s=Ee(u[4]);let p;for(p=0;p<s.length;p+=1){const y=xr(u,s,p);i[p]?(i[p].p(y,f),B(i[p],1)):(i[p]=Er(y),i[p].c(),B(i[p],1),i[p].m(e.parentNode,e))}for(He(),p=s.length;p<i.length;p+=1)a(p);Oe()}if(f&2){l=Ee(u[1]);let p;for(p=0;p<l.length;p+=1){const y=kr(u,l,p);o[p]?(o[p].p(y,f),B(o[p],1)):(o[p]=Cr(y),o[p].c(),B(o[p],1),o[p].m(t.parentNode,t))}for(He(),p=l.length;p<o.length;p+=1)c(p);Oe()}},i(u){if(!n){for(let f=0;f<s.length;f+=1)B(i[f]);for(let f=0;f<l.length;f+=1)B(o[f]);n=!0}},o(u){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)j(i[f]);o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)j(o[f]);n=!1},d(u){u&&(d(e),d(t)),ht(i,u),ht(o,u)}}}function wr(r){let e,t;const n=[r[7]];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new et({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&1?an(n,[ln(i[7])]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function Er(r){let e,t;const n=[r[10]];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new ka({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&16?an(n,[ln(i[10])]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function Cr(r){let e,t;const n=[r[7]];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new et({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&2?an(n,[ln(i[7])]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function Ea(r){let e,t,n,s,i,a;e=new et({props:{text:r[2]?"Edit":"Simulation",callback:r[6],style:`width: 100px; background-color: ${r[2]?"#3CB371":"#6495ED"};`}});const l=[wa,xa],o=[];function c(u,f){return u[2]?1:0}return n=c(r),s=o[n]=l[n](r),{c(){ee(e.$$.fragment),t=R(),s.c(),i=Ce()},l(u){te(e.$$.fragment,u),t=T(u),s.l(u),i=Ce()},m(u,f){ne(e,u,f),k(u,t,f),o[n].m(u,f),k(u,i,f),a=!0},p(u,[f]){const p={};f&4&&(p.text=u[2]?"Edit":"Simulation"),f&12&&(p.callback=u[6]),f&4&&(p.style=`width: 100px; background-color: ${u[2]?"#3CB371":"#6495ED"};`),e.$set(p);let y=n;n=c(u),n===y?o[n].p(u,f):(He(),j(o[y],1,1,()=>{o[y]=null}),Oe(),s=o[n],s?s.p(u,f):(s=o[n]=l[n](u),s.c()),B(s,1),s.m(i.parentNode,i))},i(u){a||(B(e.$$.fragment,u),B(s),a=!0)},o(u){j(e.$$.fragment,u),j(s),a=!1},d(u){u&&(d(t),d(i)),re(e,u),o[n].d(u)}}}function Ca(r,e,t){let n,s,i,a,l;Fe(r,W,u=>t(5,i=u)),Fe(r,Lt,u=>t(2,a=u)),Fe(r,ft,u=>t(3,l=u));const o=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],c=()=>{st(Lt,a=!a,a),st(ft,l.placing=null,l),W.clearPackets()};return r.$$.update=()=>{r.$$.dirty&32&&t(0,s=[{text:"Clear Tables",callback:()=>{confirm("Are you sure you want to clear the routing tables?")&&W.clearTables()}},{text:"Export",callback:()=>{const u={routers:i.routers.map(_=>{if(_ instanceof Ge)return{..._,type:_.type,firstHop:Object.fromEntries(_.firstHop)};if(_ instanceof Qe)return{..._,type:_.type,FIB:Object.fromEntries(_.FIB.map),LFIB:Object.fromEntries(_.LFIB.map)};if(_ instanceof Bt)return{..._,type:_.type,LFIB:Object.fromEntries(_.LFIB.map)}}),links:i.links.map(_=>({..._,source:_.source.id,target:_.target.id}))},f=JSON.stringify(u,null,2),p=new Blob([f],{type:"application/json"}),y=window.URL.createObjectURL(p),m=document.createElement("a");m.href=y,m.download="network.json",m.click(),window.URL.revokeObjectURL(y)}}]),r.$$.dirty&1&&t(1,n=[{text:"Clear Network",callback:()=>{confirm("Are you sure you want to clear the network?")&&W.clear()}},{text:"Clear Links",callback:()=>{confirm("Are you sure you want to clear the links?")&&W.clearLinks()}},...s])},[s,n,a,l,o,i,c]}class Ia extends Re{constructor(e){super(),Te(this,e,Ca,Ea,Le,{})}}function $a(r){let e,t="Drag and drop routers to add them to the network.",n,s,i,a,l=`Instead of drag and drop, you can also click and hold shift while continuously clicking to add
    many routers.`,o,c,u,f,p=`Pressing 1, 2 or 3 will respectively select CE, LER or LSR, this works with the holding of shift
    to insert routers.`,y,m,_,b,g="CEs can only connect to LERs",h,$,S="LERs can only connect to CEs and LSRs",N,H,D="LSRs can only connect to LERs and other LSRs",U,X,O,x,F="Pressing Space will pause/resume the packet animations.",P,M,pe,ie,he="Pressing Tab will open the simulation panel.",we,fe,Ze,Ie,Ne="Hold Shift, then click and drag between routers to create links",Ae,z,oe,C,le="Hold alt, then click and drag between CE's to create destinations",ve,Pe,Me,rt,Ut="Double click a router or link to configure it.",Je,ye,Zt,K,ke="The clear button will delete the entire network.",xe,Be,xt,dt,gt="The export button will download your network as a .json file",_t,wt,bt,qe,jt,Ke,At="red",Ln,Tt,zn="blue",Rn,cn,dn,fn,Pt,Vn="If you are experiencing packets going offroad, please lower the max packets count.",hn,pn,mn,Nt,Un="Press Esc to close this popup.";return{c(){e=w("p"),e.textContent=t,n=R(),s=w("br"),i=R(),a=w("p"),a.textContent=l,o=R(),c=w("br"),u=R(),f=w("p"),f.textContent=p,y=R(),m=w("br"),_=R(),b=w("p"),b.textContent=g,h=R(),$=w("p"),$.textContent=S,N=R(),H=w("p"),H.textContent=D,U=R(),X=w("br"),O=R(),x=w("p"),x.textContent=F,P=R(),M=w("br"),pe=R(),ie=w("p"),ie.textContent=he,we=R(),fe=w("br"),Ze=R(),Ie=w("p"),Ie.textContent=Ne,Ae=R(),z=w("br"),oe=R(),C=w("p"),C.textContent=le,ve=R(),Pe=w("br"),Me=R(),rt=w("p"),rt.textContent=Ut,Je=R(),ye=w("br"),Zt=R(),K=w("p"),K.textContent=ke,xe=R(),Be=w("br"),xt=R(),dt=w("p"),dt.textContent=gt,_t=R(),wt=w("br"),bt=R(),qe=w("p"),jt=ge("Packets colored "),Ke=w("span"),Ke.textContent=At,Ln=ge(` do not have a label, and packets colored
    `),Tt=w("span"),Tt.textContent=zn,Rn=ge(" have a label"),cn=R(),dn=w("br"),fn=R(),Pt=w("p"),Pt.textContent=Vn,hn=R(),pn=w("br"),mn=R(),Nt=w("p"),Nt.textContent=Un,this.h()},l(L){e=E(L,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-bhocp0"&&(e.textContent=t),n=T(L),s=E(L,"BR",{}),i=T(L),a=E(L,"P",{"data-svelte-h":!0}),Q(a)!=="svelte-12tzi3f"&&(a.textContent=l),o=T(L),c=E(L,"BR",{}),u=T(L),f=E(L,"P",{"data-svelte-h":!0}),Q(f)!=="svelte-1gxe9lx"&&(f.textContent=p),y=T(L),m=E(L,"BR",{}),_=T(L),b=E(L,"P",{"data-svelte-h":!0}),Q(b)!=="svelte-1rkor0y"&&(b.textContent=g),h=T(L),$=E(L,"P",{"data-svelte-h":!0}),Q($)!=="svelte-1o2dgqj"&&($.textContent=S),N=T(L),H=E(L,"P",{"data-svelte-h":!0}),Q(H)!=="svelte-shdl6a"&&(H.textContent=D),U=T(L),X=E(L,"BR",{}),O=T(L),x=E(L,"P",{"data-svelte-h":!0}),Q(x)!=="svelte-19sx7cb"&&(x.textContent=F),P=T(L),M=E(L,"BR",{}),pe=T(L),ie=E(L,"P",{"data-svelte-h":!0}),Q(ie)!=="svelte-1omjt2g"&&(ie.textContent=he),we=T(L),fe=E(L,"BR",{}),Ze=T(L),Ie=E(L,"P",{"data-svelte-h":!0}),Q(Ie)!=="svelte-15ud2zb"&&(Ie.textContent=Ne),Ae=T(L),z=E(L,"BR",{}),oe=T(L),C=E(L,"P",{"data-svelte-h":!0}),Q(C)!=="svelte-12b16vw"&&(C.textContent=le),ve=T(L),Pe=E(L,"BR",{}),Me=T(L),rt=E(L,"P",{"data-svelte-h":!0}),Q(rt)!=="svelte-qvtprs"&&(rt.textContent=Ut),Je=T(L),ye=E(L,"BR",{}),Zt=T(L),K=E(L,"P",{"data-svelte-h":!0}),Q(K)!=="svelte-vcl8s3"&&(K.textContent=ke),xe=T(L),Be=E(L,"BR",{}),xt=T(L),dt=E(L,"P",{"data-svelte-h":!0}),Q(dt)!=="svelte-1ww5ij7"&&(dt.textContent=gt),_t=T(L),wt=E(L,"BR",{}),bt=T(L),qe=E(L,"P",{});var Y=A(qe);jt=_e(Y,"Packets colored "),Ke=E(Y,"SPAN",{"data-svelte-h":!0}),Q(Ke)!=="svelte-isvkwn"&&(Ke.textContent=At),Ln=_e(Y,` do not have a label, and packets colored
    `),Tt=E(Y,"SPAN",{"data-svelte-h":!0}),Q(Tt)!=="svelte-jcjrgt"&&(Tt.textContent=zn),Rn=_e(Y," have a label"),Y.forEach(d),cn=T(L),dn=E(L,"BR",{}),fn=T(L),Pt=E(L,"P",{"data-svelte-h":!0}),Q(Pt)!=="svelte-15en2mv"&&(Pt.textContent=Vn),hn=T(L),pn=E(L,"BR",{}),mn=T(L),Nt=E(L,"P",{"data-svelte-h":!0}),Q(Nt)!=="svelte-1dvt5v1"&&(Nt.textContent=Un),this.h()},h(){tt(Ke,"color","#da443f"),tt(Tt,"color","#6495ed")},m(L,Y){k(L,e,Y),k(L,n,Y),k(L,s,Y),k(L,i,Y),k(L,a,Y),k(L,o,Y),k(L,c,Y),k(L,u,Y),k(L,f,Y),k(L,y,Y),k(L,m,Y),k(L,_,Y),k(L,b,Y),k(L,h,Y),k(L,$,Y),k(L,N,Y),k(L,H,Y),k(L,U,Y),k(L,X,Y),k(L,O,Y),k(L,x,Y),k(L,P,Y),k(L,M,Y),k(L,pe,Y),k(L,ie,Y),k(L,we,Y),k(L,fe,Y),k(L,Ze,Y),k(L,Ie,Y),k(L,Ae,Y),k(L,z,Y),k(L,oe,Y),k(L,C,Y),k(L,ve,Y),k(L,Pe,Y),k(L,Me,Y),k(L,rt,Y),k(L,Je,Y),k(L,ye,Y),k(L,Zt,Y),k(L,K,Y),k(L,xe,Y),k(L,Be,Y),k(L,xt,Y),k(L,dt,Y),k(L,_t,Y),k(L,wt,Y),k(L,bt,Y),k(L,qe,Y),I(qe,jt),I(qe,Ke),I(qe,Ln),I(qe,Tt),I(qe,Rn),k(L,cn,Y),k(L,dn,Y),k(L,fn,Y),k(L,Pt,Y),k(L,hn,Y),k(L,pn,Y),k(L,mn,Y),k(L,Nt,Y)},p:Se,d(L){L&&(d(e),d(n),d(s),d(i),d(a),d(o),d(c),d(u),d(f),d(y),d(m),d(_),d(b),d(h),d($),d(N),d(H),d(U),d(X),d(O),d(x),d(P),d(M),d(pe),d(ie),d(we),d(fe),d(Ze),d(Ie),d(Ae),d(z),d(oe),d(C),d(ve),d(Pe),d(Me),d(rt),d(Je),d(ye),d(Zt),d(K),d(xe),d(Be),d(xt),d(dt),d(_t),d(wt),d(bt),d(qe),d(cn),d(dn),d(fn),d(Pt),d(hn),d(pn),d(mn),d(Nt))}}}function La(r){let e,t,n,s,i,a;t=new et({props:{text:"Help",callback:r[1]}});function l(c){r[2](c)}let o={$$slots:{default:[$a]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.dialog=r[0]),s=new un({props:o}),je.push(()=>We(s,"dialog",l)),{c(){e=w("div"),ee(t.$$.fragment),n=R(),ee(s.$$.fragment)},l(c){e=E(c,"DIV",{});var u=A(e);te(t.$$.fragment,u),u.forEach(d),n=T(c),te(s.$$.fragment,c)},m(c,u){k(c,e,u),ne(t,e,null),k(c,n,u),ne(s,c,u),a=!0},p(c,[u]){const f={};u&1&&(f.callback=c[1]),t.$set(f);const p={};u&8&&(p.$$scope={dirty:u,ctx:c}),!i&&u&1&&(i=!0,p.dialog=c[0],Ye(()=>i=!1)),s.$set(p)},i(c){a||(B(t.$$.fragment,c),B(s.$$.fragment,c),a=!0)},o(c){j(t.$$.fragment,c),j(s.$$.fragment,c),a=!1},d(c){c&&(d(e),d(n)),re(t),re(s,c)}}}function Ra(r,e,t){let n;const s=()=>{n.showModal()};function i(a){n=a,t(0,n)}return[n,s,i]}class Ta extends Re{constructor(e){super(),Te(this,e,Ra,La,Le,{})}}function Pa(r){let e,t,n,s,i,a;return e=new et({props:{text:" - ",callback:r[1]}}),n=new et({props:{text:"Fullscreen",callback:r[2]}}),i=new et({props:{text:" + ",callback:r[3]}}),{c(){ee(e.$$.fragment),t=R(),ee(n.$$.fragment),s=R(),ee(i.$$.fragment)},l(l){te(e.$$.fragment,l),t=T(l),te(n.$$.fragment,l),s=T(l),te(i.$$.fragment,l)},m(l,o){ne(e,l,o),k(l,t,o),ne(n,l,o),k(l,s,o),ne(i,l,o),a=!0},p(l,[o]){const c={};o&1&&(c.callback=l[1]),e.$set(c);const u={};o&1&&(u.callback=l[3]),i.$set(u)},i(l){a||(B(e.$$.fragment,l),B(n.$$.fragment,l),B(i.$$.fragment,l),a=!0)},o(l){j(e.$$.fragment,l),j(n.$$.fragment,l),j(i.$$.fragment,l),a=!1},d(l){l&&(d(t),d(s)),re(e,l),re(n,l),re(i,l)}}}function Na(r,e,t){let{zoom:n}=e;const s=()=>{const l={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,l)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},a=()=>{const l={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,l)};return r.$$set=l=>{"zoom"in l&&t(0,n=l.zoom)},[n,s,i,a]}class Sa extends Re{constructor(e){super(),Te(this,e,Na,Pa,Le,{zoom:0})}}function Ba(r){let e,t="Attribution: The following Icon has been used",n,s,i,a,l="https://commons.wikimedia.org/wiki/File:Router.svg#",o,c,u,f,p="Share Alike: We hereby grant permission to",y,m,_=`Copy, distribute and/or modify this document under the terms of the GNU Free Documentation
    License.`,b,g,h="Version 1.2 or any later version published by the Free Software Foundation;",$,S,N="with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.",H,D,U="A copy of the license is included in the section entitled GNU Free Documentation License.",X,O,x,F,P="The Icon used for CE routers is almost identical to the one on Wikimedia (aspect ratio changed)",M,pe,ie,he,we=`The Icon used for LSR/LER routers is almost identical, except with different colors. (aspect
    ratio changed)`,fe,Ze,Ie,Ne,Ae="Press Esc to close this popup";return{c(){e=w("p"),e.textContent=t,n=R(),s=w("br"),i=R(),a=w("p"),a.textContent=l,o=R(),c=w("br"),u=R(),f=w("p"),f.textContent=p,y=R(),m=w("p"),m.textContent=_,b=R(),g=w("p"),g.textContent=h,$=R(),S=w("p"),S.textContent=N,H=R(),D=w("p"),D.textContent=U,X=R(),O=w("br"),x=R(),F=w("p"),F.textContent=P,M=R(),pe=w("br"),ie=R(),he=w("p"),he.textContent=we,fe=R(),Ze=w("br"),Ie=R(),Ne=w("p"),Ne.textContent=Ae},l(z){e=E(z,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-t8z8ph"&&(e.textContent=t),n=T(z),s=E(z,"BR",{}),i=T(z),a=E(z,"P",{"data-svelte-h":!0}),Q(a)!=="svelte-dbjryl"&&(a.textContent=l),o=T(z),c=E(z,"BR",{}),u=T(z),f=E(z,"P",{"data-svelte-h":!0}),Q(f)!=="svelte-1y4tl2"&&(f.textContent=p),y=T(z),m=E(z,"P",{"data-svelte-h":!0}),Q(m)!=="svelte-17660lf"&&(m.textContent=_),b=T(z),g=E(z,"P",{"data-svelte-h":!0}),Q(g)!=="svelte-vqht9l"&&(g.textContent=h),$=T(z),S=E(z,"P",{"data-svelte-h":!0}),Q(S)!=="svelte-1x9q3li"&&(S.textContent=N),H=T(z),D=E(z,"P",{"data-svelte-h":!0}),Q(D)!=="svelte-hnn81q"&&(D.textContent=U),X=T(z),O=E(z,"BR",{}),x=T(z),F=E(z,"P",{"data-svelte-h":!0}),Q(F)!=="svelte-q0q94c"&&(F.textContent=P),M=T(z),pe=E(z,"BR",{}),ie=T(z),he=E(z,"P",{"data-svelte-h":!0}),Q(he)!=="svelte-vmr7sg"&&(he.textContent=we),fe=T(z),Ze=E(z,"BR",{}),Ie=T(z),Ne=E(z,"P",{"data-svelte-h":!0}),Q(Ne)!=="svelte-mgckcf"&&(Ne.textContent=Ae)},m(z,oe){k(z,e,oe),k(z,n,oe),k(z,s,oe),k(z,i,oe),k(z,a,oe),k(z,o,oe),k(z,c,oe),k(z,u,oe),k(z,f,oe),k(z,y,oe),k(z,m,oe),k(z,b,oe),k(z,g,oe),k(z,$,oe),k(z,S,oe),k(z,H,oe),k(z,D,oe),k(z,X,oe),k(z,O,oe),k(z,x,oe),k(z,F,oe),k(z,M,oe),k(z,pe,oe),k(z,ie,oe),k(z,he,oe),k(z,fe,oe),k(z,Ze,oe),k(z,Ie,oe),k(z,Ne,oe)},p:Se,d(z){z&&(d(e),d(n),d(s),d(i),d(a),d(o),d(c),d(u),d(f),d(y),d(m),d(b),d(g),d($),d(S),d(H),d(D),d(X),d(O),d(x),d(F),d(M),d(pe),d(ie),d(he),d(fe),d(Ze),d(Ie),d(Ne))}}}function Da(r){let e,t,n,s,i,a;t=new et({props:{text:"Credits",callback:r[1]}});function l(c){r[2](c)}let o={$$slots:{default:[Ba]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.dialog=r[0]),s=new un({props:o}),je.push(()=>We(s,"dialog",l)),{c(){e=w("div"),ee(t.$$.fragment),n=R(),ee(s.$$.fragment)},l(c){e=E(c,"DIV",{});var u=A(e);te(t.$$.fragment,u),u.forEach(d),n=T(c),te(s.$$.fragment,c)},m(c,u){k(c,e,u),ne(t,e,null),k(c,n,u),ne(s,c,u),a=!0},p(c,[u]){const f={};u&1&&(f.callback=c[1]),t.$set(f);const p={};u&8&&(p.$$scope={dirty:u,ctx:c}),!i&&u&1&&(i=!0,p.dialog=c[0],Ye(()=>i=!1)),s.$set(p)},i(c){a||(B(t.$$.fragment,c),B(s.$$.fragment,c),a=!0)},o(c){j(t.$$.fragment,c),j(s.$$.fragment,c),a=!1},d(c){c&&(d(e),d(n)),re(t),re(s,c)}}}function Ha(r,e,t){let n;const s=()=>{n.showModal()};function i(a){n=a,t(0,n)}return[n,s,i]}class Oa extends Re{constructor(e){super(),Te(this,e,Ha,Da,Le,{})}}function Ir(r,e,t){const n=r.slice();return n[5]=e[t],n}function $r(r,e,t){const n=r.slice();return n[8]=e[t],n}function Lr(r,e,t){const n=r.slice();return n[11]=e[t],n}function Rr(r,e){let t,n,s;return n=new ma({props:{link:e[11]}}),{key:r,first:null,c(){t=Ce(),ee(n.$$.fragment),this.h()},l(i){t=Ce(),te(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){k(i,t,a),ne(n,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.link=e[11]),n.$set(l)},i(i){s||(B(n.$$.fragment,i),s=!0)},o(i){j(n.$$.fragment,i),s=!1},d(i){i&&d(t),re(n,i)}}}function Tr(r,e){let t,n,s;return n=new ba({props:{router:e[8]}}),{key:r,first:null,c(){t=Ce(),ee(n.$$.fragment),this.h()},l(i){t=Ce(),te(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){k(i,t,a),ne(n,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.router=e[8]),n.$set(l)},i(i){s||(B(n.$$.fragment,i),s=!0)},o(i){j(n.$$.fragment,i),s=!1},d(i){i&&d(t),re(n,i)}}}function Pr(r,e){let t,n,s;return n=new fa({props:{packet:e[5]}}),{key:r,first:null,c(){t=Ce(),ee(n.$$.fragment),this.h()},l(i){t=Ce(),te(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){k(i,t,a),ne(n,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.packet=e[5]),n.$set(l)},i(i){s||(B(n.$$.fragment,i),s=!0)},o(i){j(n.$$.fragment,i),s=!1},d(i){i&&d(t),re(n,i)}}}function Za(r){let e=[],t=new Map,n,s=[],i=new Map,a,l=[],o=new Map,c,u,f=Ee(r[1].links);const p=g=>g[11].id;for(let g=0;g<f.length;g+=1){let h=Lr(r,f,g),$=p(h);t.set($,e[g]=Rr($,h))}let y=Ee(r[1].routers);const m=g=>g[8].id;for(let g=0;g<y.length;g+=1){let h=$r(r,y,g),$=m(h);i.set($,s[g]=Tr($,h))}let _=Ee(r[1].packets);const b=g=>g[5].id;for(let g=0;g<_.length;g+=1){let h=Ir(r,_,g),$=b(h);o.set($,l[g]=Pr($,h))}return{c(){for(let g=0;g<e.length;g+=1)e[g].c();n=R();for(let g=0;g<s.length;g+=1)s[g].c();a=R();for(let g=0;g<l.length;g+=1)l[g].c();c=Ce()},l(g){for(let h=0;h<e.length;h+=1)e[h].l(g);n=T(g);for(let h=0;h<s.length;h+=1)s[h].l(g);a=T(g);for(let h=0;h<l.length;h+=1)l[h].l(g);c=Ce()},m(g,h){for(let $=0;$<e.length;$+=1)e[$]&&e[$].m(g,h);k(g,n,h);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(g,h);k(g,a,h);for(let $=0;$<l.length;$+=1)l[$]&&l[$].m(g,h);k(g,c,h),u=!0},p(g,h){h&2&&(f=Ee(g[1].links),He(),e=Pn(e,h,p,1,g,f,t,n.parentNode,Tn,Rr,n,Lr),Oe()),h&2&&(y=Ee(g[1].routers),He(),s=Pn(s,h,m,1,g,y,i,a.parentNode,Tn,Tr,a,$r),Oe()),h&2&&(_=Ee(g[1].packets),He(),l=Pn(l,h,b,1,g,_,o,c.parentNode,Tn,Pr,c,Ir),Oe())},i(g){if(!u){for(let h=0;h<f.length;h+=1)B(e[h]);for(let h=0;h<y.length;h+=1)B(s[h]);for(let h=0;h<_.length;h+=1)B(l[h]);u=!0}},o(g){for(let h=0;h<e.length;h+=1)j(e[h]);for(let h=0;h<s.length;h+=1)j(s[h]);for(let h=0;h<l.length;h+=1)j(l[h]);u=!1},d(g){g&&(d(n),d(a),d(c));for(let h=0;h<e.length;h+=1)e[h].d(g);for(let h=0;h<s.length;h+=1)s[h].d(g);for(let h=0;h<l.length;h+=1)l[h].d(g)}}}function ja(r){let e,t,n,s,i,a,l,o,c,u,f,p,y,m,_,b,g,h,$,S,N;t=new Ci({});function H(O){r[2](O)}let D={$$slots:{default:[Za]},$$scope:{ctx:r}};r[0]!==void 0&&(D.zoom=r[0]),i=new ea({props:D}),je.push(()=>We(i,"zoom",H)),c=new Ia({}),p=new Ta({}),m=new Oa({});function U(O){r[3](O)}let X={};return r[0]!==void 0&&(X.zoom=r[0]),g=new Sa({props:X}),je.push(()=>We(g,"zoom",U)),S=new ua({}),{c(){e=w("div"),ee(t.$$.fragment),n=R(),s=w("div"),ee(i.$$.fragment),l=R(),o=w("div"),ee(c.$$.fragment),u=R(),f=w("div"),ee(p.$$.fragment),y=R(),ee(m.$$.fragment),_=R(),b=w("div"),ee(g.$$.fragment),$=R(),ee(S.$$.fragment),this.h()},l(O){e=E(O,"DIV",{id:!0,class:!0});var x=A(e);te(t.$$.fragment,x),n=T(x),s=E(x,"DIV",{id:!0,class:!0});var F=A(s);te(i.$$.fragment,F),l=T(F),o=E(F,"DIV",{id:!0,class:!0});var P=A(o);te(c.$$.fragment,P),P.forEach(d),u=T(F),f=E(F,"DIV",{id:!0,class:!0});var M=A(f);te(p.$$.fragment,M),y=T(M),te(m.$$.fragment,M),M.forEach(d),_=T(F),b=E(F,"DIV",{id:!0,class:!0});var pe=A(b);te(g.$$.fragment,pe),pe.forEach(d),F.forEach(d),$=T(x),te(S.$$.fragment,x),x.forEach(d),this.h()},h(){v(o,"id","top-left-bar"),v(o,"class","absolute-flex svelte-1kpnzxr"),v(f,"id","bottom-left-bar"),v(f,"class","absolute-flex svelte-1kpnzxr"),v(b,"id","bottom-right-bar"),v(b,"class","absolute-flex svelte-1kpnzxr"),v(s,"id","network"),v(s,"class","svelte-1kpnzxr"),v(e,"id","mpls"),v(e,"class","svelte-1kpnzxr")},m(O,x){k(O,e,x),ne(t,e,null),I(e,n),I(e,s),ne(i,s,null),I(s,l),I(s,o),ne(c,o,null),I(s,u),I(s,f),ne(p,f,null),I(f,y),ne(m,f,null),I(s,_),I(s,b),ne(g,b,null),I(e,$),ne(S,e,null),N=!0},p(O,[x]){const F={};x&16386&&(F.$$scope={dirty:x,ctx:O}),!a&&x&1&&(a=!0,F.zoom=O[0],Ye(()=>a=!1)),i.$set(F);const P={};!h&&x&1&&(h=!0,P.zoom=O[0],Ye(()=>h=!1)),g.$set(P)},i(O){N||(B(t.$$.fragment,O),B(i.$$.fragment,O),B(c.$$.fragment,O),B(p.$$.fragment,O),B(m.$$.fragment,O),B(g.$$.fragment,O),B(S.$$.fragment,O),N=!0)},o(O){j(t.$$.fragment,O),j(i.$$.fragment,O),j(c.$$.fragment,O),j(p.$$.fragment,O),j(m.$$.fragment,O),j(g.$$.fragment,O),j(S.$$.fragment,O),N=!1},d(O){O&&d(e),re(t),re(i),re(c),re(p),re(m),re(g),re(S)}}}function Aa(r,e,t){let n,s;Fe(r,Xe,o=>t(4,n=o)),Fe(r,W,o=>t(1,s=o));let i;An(()=>{window.addEventListener("visibilitychanged",()=>{st(Xe,n.running=!document.hidden,n)})});function a(o){i=o,t(0,i)}function l(o){i=o,t(0,i)}return[i,s,a,l]}class Ma extends Re{constructor(e){super(),Te(this,e,Aa,ja,Le,{})}}function Fa(r){let e,t;return e=new Ma({}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,s){ne(e,n,s),t=!0},p:Se,i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}class Ka extends Re{constructor(e){super(),Te(this,e,null,Fa,Le,{})}}export{Ka as component};
