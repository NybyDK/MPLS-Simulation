var ut=Object.defineProperty;var at=(l,e,t)=>e in l?ut(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var D=(l,e,t)=>(at(l,typeof e!="symbol"?e+"":e,t),t);import{s as se,a as et,u as tt,g as nt,b as lt,x as ot,e as fe,n as K,i as Le,r as we,y as de,c as ye,o as ft,z as ct,A as st}from"../chunks/scheduler.C5v8YK5g.js";import{S as ie,i as re,e as C,c as E,a as $,d as b,l as g,g as y,z as H,m as A,n as z,o as ae,A as J,s as N,B as x,f as P,h as R,C as ge,D as S,E as he,v as ee,w as te,x as ne,y as le,r as Ee,p as Re,t as W,b as V,j as be,F as _e,G as pe,q as Be,H as dt}from"../chunks/index.quBbCW_3.js";import{w as $e}from"../chunks/index.CD1dNpfE.js";function Z(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function it(l,e){const t={},n={},s={$$scope:1};let o=l.length;for(;o--;){const u=l[o],a=e[o];if(a){for(const r in u)r in a||(n[r]=1);for(const r in a)s[r]||(t[r]=a[r],s[r]=1);l[o]=a}else for(const r in u)s[r]=1}for(const u in n)u in t||(t[u]=void 0);return t}function rt(l){return typeof l=="object"&&l!==null?l:{}}let Ue=class{constructor(e,t){D(this,"labelSpace");D(this,"neighborRouters");this.id=e,this.node=t,this.labelSpace=new Map,this.neighborRouters=new Set}addNeighborRouter(e){this.neighborRouters.add(e)}sendPacket(e,t){for(const n of this.neighborRouters)if(n.node.label===t){n.processPacket(e);return}}};class me extends Ue{constructor(){super(...arguments);D(this,"FIB",new Map([["0",{label:0,nextHop:"0"}]]));D(this,"allowedConnections",["CE","LSR"]);D(this,"assignLabel",(t,n)=>{this.labelSpace.set(t,n)});D(this,"addEmptyEntry",()=>{this.FIB.set("0",{label:0,nextHop:"0"})});D(this,"updateAddress",(t,n)=>{const s=this.FIB.get(t);if(!s)throw new Error(`Unable to update old FIB address '${t}' to '${n}'.`);this.FIB.set(n,s),this.FIB.delete(t)});D(this,"deleteEntry",t=>{this.FIB.delete(t)});D(this,"advertiseInformation",(t,n,s)=>{for(const o of this.neighborRouters)o instanceof me&&o.receiveInformation(t,n,s)});D(this,"receiveInformation",(t,n,s)=>{this.FIB.set(t,{label:n,nextHop:s})});D(this,"processPacket",t=>{const n=this.FIB.get(t.destination);n&&(t.label=n.label,t.destination=n.nextHop,this.sendPacket(t,n.nextHop))})}get type(){return"LER"}}class ve extends Ue{constructor(){super(...arguments);D(this,"LIB",new Map([[0,{outgoingLabel:0,nextHop:"0"}]]));D(this,"allowedConnections",["LSR","LER"]);D(this,"addEmptyEntry",()=>{this.LIB.set(0,{outgoingLabel:0,nextHop:"0"})});D(this,"updateLabel",(t,n)=>{const s=this.LIB.get(t);if(!s)throw new Error(`Unable to update old LIB label '${t}' to '${n}'.`);this.LIB.set(n,s),this.LIB.delete(t)});D(this,"deleteEntry",t=>{this.LIB.delete(t)});D(this,"advertiseInformation",(t,n,s)=>{for(const o of this.neighborRouters)o instanceof ve&&o.receiveInformation(t,n,s)});D(this,"receiveInformation",(t,n,s)=>{this.LIB.set(t,{outgoingLabel:n,nextHop:s})});D(this,"processPacket",t=>{const n=this.LIB.get(t.label);n&&(t.destination=n.nextHop,t.label=n.outgoingLabel,this.sendPacket(t,t.destination))})}get type(){return"LSR"}}class Ie extends Ue{constructor(){super(...arguments);D(this,"flows",[]);D(this,"address",`${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}`);D(this,"nextHop");D(this,"allowedConnections",["LER"]);D(this,"addEmptyFlow",()=>{this.flows.push({size:0,destination:""})});D(this,"deleteFlow",t=>{this.flows.splice(t,1)});D(this,"processPacket",t=>{this.nextHop&&this.sendPacket(t,this.nextHop)})}get type(){return"CE"}}class ht{constructor(){D(this,"store",$e({routers:[],connections:[]}));D(this,"set",this.store.set);D(this,"update",this.store.update);D(this,"subscribe",this.store.subscribe);D(this,"_routers",[]);D(this,"_connections",[]);D(this,"routerMap",new Map);D(this,"counter",0)}get routers(){return this._routers}get connections(){return this._connections}get networkState(){return{routers:this.routers,connections:this.connections}}addConnection(e){e.source!==e.target&&e.source.allowedConnections.includes(e.target.type)&&(this.doesConnectionExist(e)||this.doesConnectionExist({source:e.target,target:e.source})||(this._connections.push({id:`connection-${e.source.id}-${e.target.id}`,...e,bandwidth:0,distance:0,weight:0}),this.fastUpdate()))}deleteConnection(e){this._connections=this._connections.filter(t=>t.id!==e),this.fastUpdate()}doesConnectionExist(e){return this._connections.some(t=>t.source===e.source&&t.target===e.target)}createCE(e){const t=new Ie(this.counter++,e);this.addRouter(t)}createLER(e){const t=new me(this.counter++,e);this.addRouter(t)}createLSR(e){const t=new ve(this.counter++,e);this.addRouter(t)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),this.fastUpdate()}deleteRouter(e){this.getRouter(e)&&(this._routers=this._routers.filter(n=>n.id!==e),this._connections=this._connections.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),this.fastUpdate())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}clear(){this._routers=[],this._connections=[],this.routerMap.clear(),this.counter=0,this.fastUpdate()}fastUpdate(){this.store.set(this.networkState)}}const _t=new ht,q=_t,ke=$e(!1);function pt(l){let e,t,n,s;const o=l[2].default,u=et(o,l,l[1],null);return{c(){e=C("dialog"),u&&u.c(),this.h()},l(a){e=E(a,"DIALOG",{class:!0});var r=$(e);u&&u.l(r),r.forEach(b),this.h()},h(){g(e,"class","svelte-414ocx")},m(a,r){y(a,e,r),u&&u.m(e,null),l[4](e),t=!0,n||(s=H(e,"close",l[3]),n=!0)},p(a,[r]){u&&u.p&&(!t||r&2)&&tt(u,o,a,a[1],t?lt(o,a[1],r,null):nt(a[1]),null)},i(a){t||(A(u,a),t=!0)},o(a){z(u,a),t=!1},d(a){a&&b(e),u&&u.d(a),l[4](null),n=!1,s()}}}function gt(l,e,t){let{$$slots:n={},$$scope:s}=e,{dialog:o}=e;function u(r){ot.call(this,l,r)}function a(r){fe[r?"unshift":"push"](()=>{o=r,t(0,o)})}return l.$$set=r=>{"dialog"in r&&t(0,o=r.dialog),"$$scope"in r&&t(1,s=r.$$scope)},[o,s,n,u,a]}class Me extends ie{constructor(e){super(),re(this,e,gt,pt,se,{dialog:0})}}function He(l,e,t){const n=l.slice();return n[22]=e[t][0],n[19]=e[t][1],n[23]=e,n[24]=t,n}function Oe(l,e,t){const n=l.slice();return n[18]=e[t][0],n[19]=e[t][1],n[20]=e,n[21]=t,n}function Ae(l,e,t){const n=l.slice();return n[15]=e[t],n[16]=e,n[17]=t,n}function bt(l){let e,t="LIB:",n,s,o,u='<th class="svelte-71n8bk">Incoming</th> <th class="svelte-71n8bk">Outgoing</th> <th class="svelte-71n8bk">Next hop</th>',a,r,_,f="+",c,i,h=Z([...l[0].LIB]),m=[];for(let p=0;p<h.length;p+=1)m[p]=Fe(He(l,h,p));return{c(){e=C("p"),e.textContent=t,n=N(),s=C("table"),o=C("tr"),o.innerHTML=u,a=N();for(let p=0;p<m.length;p+=1)m[p].c();r=N(),_=C("button"),_.textContent=f,this.h()},l(p){e=E(p,"P",{"data-svelte-h":!0}),x(e)!=="svelte-1j64kst"&&(e.textContent=t),n=P(p),s=E(p,"TABLE",{class:!0});var w=$(s);o=E(w,"TR",{"data-svelte-h":!0}),x(o)!=="svelte-1nxelgl"&&(o.innerHTML=u),a=P(w);for(let d=0;d<m.length;d+=1)m[d].l(w);w.forEach(b),r=P(p),_=E(p,"BUTTON",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-1nn20mc"&&(_.textContent=f),this.h()},h(){g(s,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk")},m(p,w){y(p,e,w),y(p,n,w),y(p,s,w),R(s,o),R(s,a);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(s,null);y(p,r,w),y(p,_,w),c||(i=H(_,"click",function(){Le(l[1](l[0].addEmptyEntry))&&l[1](l[0].addEmptyEntry).apply(this,arguments)}),c=!0)},p(p,w){if(l=p,w&9){h=Z([...l[0].LIB]);let d;for(d=0;d<h.length;d+=1){const k=He(l,h,d);m[d]?m[d].p(k,w):(m[d]=Fe(k),m[d].c(),m[d].m(s,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=h.length}},d(p){p&&(b(e),b(n),b(s),b(r),b(_)),ge(m,p),c=!1,i()}}}function mt(l){let e,t="FIB:",n,s,o,u='<th class="svelte-71n8bk">Address</th> <th class="svelte-71n8bk">Label</th> <th class="svelte-71n8bk">Next hop</th>',a,r,_,f="+",c,i,h=Z([...l[0].FIB]),m=[];for(let p=0;p<h.length;p+=1)m[p]=ze(Oe(l,h,p));return{c(){e=C("p"),e.textContent=t,n=N(),s=C("table"),o=C("tr"),o.innerHTML=u,a=N();for(let p=0;p<m.length;p+=1)m[p].c();r=N(),_=C("button"),_.textContent=f,this.h()},l(p){e=E(p,"P",{"data-svelte-h":!0}),x(e)!=="svelte-1j6bdhj"&&(e.textContent=t),n=P(p),s=E(p,"TABLE",{class:!0});var w=$(s);o=E(w,"TR",{"data-svelte-h":!0}),x(o)!=="svelte-9j9p47"&&(o.innerHTML=u),a=P(w);for(let d=0;d<m.length;d+=1)m[d].l(w);w.forEach(b),r=P(p),_=E(p,"BUTTON",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-1nn20mc"&&(_.textContent=f),this.h()},h(){g(s,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk")},m(p,w){y(p,e,w),y(p,n,w),y(p,s,w),R(s,o),R(s,a);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(s,null);y(p,r,w),y(p,_,w),c||(i=H(_,"click",function(){Le(l[1](l[0].addEmptyEntry))&&l[1](l[0].addEmptyEntry).apply(this,arguments)}),c=!0)},p(p,w){if(l=p,w&5){h=Z([...l[0].FIB]);let d;for(d=0;d<h.length;d+=1){const k=Oe(l,h,d);m[d]?m[d].p(k,w):(m[d]=ze(k),m[d].c(),m[d].m(s,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=h.length}},d(p){p&&(b(e),b(n),b(s),b(r),b(_)),ge(m,p),c=!1,i()}}}function vt(l){let e,t="Flows:",n,s,o,u='<th class="svelte-71n8bk">Size (Megabits)</th> <th class="svelte-71n8bk">Destination</th>',a,r,_,f="+",c,i,h=Z(l[0].flows),m=[];for(let p=0;p<h.length;p+=1)m[p]=Se(Ae(l,h,p));return{c(){e=C("p"),e.textContent=t,n=N(),s=C("table"),o=C("tr"),o.innerHTML=u,a=N();for(let p=0;p<m.length;p+=1)m[p].c();r=N(),_=C("button"),_.textContent=f,this.h()},l(p){e=E(p,"P",{"data-svelte-h":!0}),x(e)!=="svelte-twjhxn"&&(e.textContent=t),n=P(p),s=E(p,"TABLE",{class:!0});var w=$(s);o=E(w,"TR",{"data-svelte-h":!0}),x(o)!=="svelte-1aanzqs"&&(o.innerHTML=u),a=P(w);for(let d=0;d<m.length;d+=1)m[d].l(w);w.forEach(b),r=P(p),_=E(p,"BUTTON",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-bqeh8i"&&(_.textContent=f),this.h()},h(){g(s,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk")},m(p,w){y(p,e,w),y(p,n,w),y(p,s,w),R(s,o),R(s,a);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(s,null);y(p,r,w),y(p,_,w),c||(i=H(_,"click",function(){Le(l[1](l[0].addEmptyFlow))&&l[1](l[0].addEmptyFlow).apply(this,arguments)}),c=!0)},p(p,w){if(l=p,w&1){h=Z(l[0].flows);let d;for(d=0;d<h.length;d+=1){const k=Ae(l,h,d);m[d]?m[d].p(k,w):(m[d]=Se(k),m[d].c(),m[d].m(s,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=h.length}},d(p){p&&(b(e),b(n),b(s),b(r),b(_)),ge(m,p),c=!1,i()}}}function Fe(l){let e,t,n,s,o,u,a,r,_,f,c,i,h="-",m,p,w;function d(...O){return l[11](l[22],...O)}function k(){l[12].call(a,l[23],l[24])}function I(){l[13].call(f,l[23],l[24])}function Y(){return l[14](l[22])}return{c(){e=C("tr"),t=C("td"),n=C("input"),o=N(),u=C("td"),a=C("input"),r=N(),_=C("td"),f=C("input"),c=N(),i=C("button"),i.textContent=h,m=N(),this.h()},l(O){e=E(O,"TR",{});var L=$(e);t=E(L,"TD",{class:!0});var oe=$(t);n=E(oe,"INPUT",{type:!0,class:!0}),oe.forEach(b),o=P(L),u=E(L,"TD",{class:!0});var Q=$(u);a=E(Q,"INPUT",{type:!0,class:!0}),Q.forEach(b),r=P(L),_=E(L,"TD",{class:!0});var j=$(_);f=E(j,"INPUT",{type:!0,class:!0}),j.forEach(b),c=P(L),i=E(L,"BUTTON",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-glgoyj"&&(i.textContent=h),m=P(L),L.forEach(b),this.h()},h(){g(n,"type","number"),n.value=s=l[22],g(n,"class","svelte-71n8bk"),g(t,"class","svelte-71n8bk"),g(a,"type","number"),g(a,"class","svelte-71n8bk"),g(u,"class","svelte-71n8bk"),g(f,"type","text"),g(f,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk"),g(i,"class","svelte-71n8bk")},m(O,L){y(O,e,L),R(e,t),R(t,n),R(e,o),R(e,u),R(u,a),S(a,l[19].outgoingLabel),R(e,r),R(e,_),R(_,f),S(f,l[19].nextHop),R(e,c),R(e,i),R(e,m),p||(w=[H(n,"change",d),H(a,"input",k),H(f,"input",I),H(i,"click",Y)],p=!0)},p(O,L){l=O,L&1&&s!==(s=l[22])&&n.value!==s&&(n.value=s),L&1&&J(a.value)!==l[19].outgoingLabel&&S(a,l[19].outgoingLabel),L&1&&f.value!==l[19].nextHop&&S(f,l[19].nextHop)},d(O){O&&b(e),p=!1,we(w)}}}function ze(l){let e,t,n,s,o,u,a,r,_,f,c,i,h="-",m,p,w;function d(...O){return l[7](l[18],...O)}function k(){l[8].call(a,l[20],l[21])}function I(){l[9].call(f,l[20],l[21])}function Y(){return l[10](l[18])}return{c(){e=C("tr"),t=C("td"),n=C("input"),o=N(),u=C("td"),a=C("input"),r=N(),_=C("td"),f=C("input"),c=N(),i=C("button"),i.textContent=h,m=N(),this.h()},l(O){e=E(O,"TR",{});var L=$(e);t=E(L,"TD",{class:!0});var oe=$(t);n=E(oe,"INPUT",{type:!0,class:!0}),oe.forEach(b),o=P(L),u=E(L,"TD",{class:!0});var Q=$(u);a=E(Q,"INPUT",{type:!0,class:!0}),Q.forEach(b),r=P(L),_=E(L,"TD",{class:!0});var j=$(_);f=E(j,"INPUT",{type:!0,class:!0}),j.forEach(b),c=P(L),i=E(L,"BUTTON",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-174iwf3"&&(i.textContent=h),m=P(L),L.forEach(b),this.h()},h(){g(n,"type","text"),n.value=s=l[18],g(n,"class","svelte-71n8bk"),g(t,"class","svelte-71n8bk"),g(a,"type","number"),g(a,"class","svelte-71n8bk"),g(u,"class","svelte-71n8bk"),g(f,"type","text"),g(f,"class","svelte-71n8bk"),g(_,"class","svelte-71n8bk"),g(i,"class","svelte-71n8bk")},m(O,L){y(O,e,L),R(e,t),R(t,n),R(e,o),R(e,u),R(u,a),S(a,l[19].label),R(e,r),R(e,_),R(_,f),S(f,l[19].nextHop),R(e,c),R(e,i),R(e,m),p||(w=[H(n,"change",d),H(a,"input",k),H(f,"input",I),H(i,"click",Y)],p=!0)},p(O,L){l=O,L&1&&s!==(s=l[18])&&n.value!==s&&(n.value=s),L&1&&J(a.value)!==l[19].label&&S(a,l[19].label),L&1&&f.value!==l[19].nextHop&&S(f,l[19].nextHop)},d(O){O&&b(e),p=!1,we(w)}}}function Se(l){let e,t,n,s,o,u,a,r,_="-",f,c,i;function h(){l[4].call(n,l[16],l[17])}function m(){l[5].call(u,l[16],l[17])}function p(){return l[6](l[17])}return{c(){e=C("tr"),t=C("td"),n=C("input"),s=N(),o=C("td"),u=C("input"),a=N(),r=C("button"),r.textContent=_,f=N(),this.h()},l(w){e=E(w,"TR",{});var d=$(e);t=E(d,"TD",{class:!0});var k=$(t);n=E(k,"INPUT",{type:!0,class:!0}),k.forEach(b),s=P(d),o=E(d,"TD",{class:!0});var I=$(o);u=E(I,"INPUT",{type:!0,placeholder:!0,class:!0}),I.forEach(b),a=P(d),r=E(d,"BUTTON",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-1px6e5a"&&(r.textContent=_),f=P(d),d.forEach(b),this.h()},h(){g(n,"type","number"),g(n,"class","svelte-71n8bk"),g(t,"class","svelte-71n8bk"),g(u,"type","text"),g(u,"placeholder","Address"),g(u,"class","svelte-71n8bk"),g(o,"class","svelte-71n8bk"),g(r,"class","svelte-71n8bk")},m(w,d){y(w,e,d),R(e,t),R(t,n),S(n,l[15].size),R(e,s),R(e,o),R(o,u),S(u,l[15].destination),R(e,a),R(e,r),R(e,f),c||(i=[H(n,"input",h),H(u,"input",m),H(r,"click",p)],c=!0)},p(w,d){l=w,d&1&&J(n.value)!==l[15].size&&S(n,l[15].size),d&1&&u.value!==l[15].destination&&S(u,l[15].destination)},d(w){w&&b(e),c=!1,we(i)}}}function kt(l){let e;function t(o,u){if(o[0]instanceof Ie)return vt;if(o[0]instanceof me)return mt;if(o[0]instanceof ve)return bt}let n=t(l),s=n&&n(l);return{c(){s&&s.c(),e=ae()},l(o){s&&s.l(o),e=ae()},m(o,u){s&&s.m(o,u),y(o,e,u)},p(o,[u]){n===(n=t(o))&&s?s.p(o,u):(s&&s.d(1),s=n&&n(o),s&&(s.c(),s.m(e.parentNode,e)))},i:K,o:K,d(o){o&&b(e),s&&s.d(o)}}}function wt(l,e,t){let{router:n}=e;function s(k){return()=>{k(),t(0,n)}}function o(k,I){if(!(k.target instanceof HTMLInputElement)||!(n instanceof me))return;const Y=k.target.value;if(n.FIB.get(Y)){alert("Address already exists in FIB.");return}n.updateAddress(I,Y)}function u(k,I){if(!(k.target instanceof HTMLInputElement)||!(n instanceof ve))return;const Y=parseInt(k.target.value);if(n.LIB.get(Y)){alert("Label already exists in LIB.");return}n.updateLabel(I,Y)}function a(k,I){k[I].size=J(this.value),t(0,n)}function r(k,I){k[I].destination=this.value,t(0,n)}const _=k=>{n instanceof Ie&&(n.deleteFlow(k),t(0,n))},f=(k,I)=>{o(I,k)};function c(k,I){k[I][1].label=J(this.value),t(0,n)}function i(k,I){k[I][1].nextHop=this.value,t(0,n)}const h=k=>{n instanceof me&&(n.deleteEntry(k),t(0,n))},m=(k,I)=>{u(I,k)};function p(k,I){k[I][1].outgoingLabel=J(this.value),t(0,n)}function w(k,I){k[I][1].nextHop=this.value,t(0,n)}const d=k=>{n instanceof ve&&(n.deleteEntry(k),t(0,n))};return l.$$set=k=>{"router"in k&&t(0,n=k.router)},[n,s,o,u,a,r,_,f,c,i,h,m,p,w,d]}class yt extends ie{constructor(e){super(),re(this,e,wt,kt,se,{router:0})}}function Ct(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=C("p"),e.textContent=t},l(n){e=E(n,"P",{"data-svelte-h":!0}),x(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,s){y(n,e,s)},p:K,i:K,o:K,d(n){n&&b(e)}}}function Et(l){let e,t,n,s,o,u,a=l[0].id+"",r,_,f,c,i=l[0].type+"",h,m,p,w,d,k,I,Y,O,L,oe,Q,j,B="Delete Router",U,ue,ce,X=l[0]instanceof Ie&&xe(l);function Ne(T){l[7](T)}let Te={};return l[0]!==void 0&&(Te.router=l[0]),L=new yt({props:Te}),fe.push(()=>he(L,"router",Ne)),{c(){e=C("label"),t=W(`Label:
      `),n=C("input"),s=N(),o=C("p"),u=W("ID: "),r=W(a),_=N(),f=C("p"),c=W("Type: "),h=W(i),m=N(),p=C("label"),w=W(`Position:
      `),d=C("input"),k=N(),I=C("input"),Y=N(),X&&X.c(),O=N(),ee(L.$$.fragment),Q=N(),j=C("button"),j.textContent=B,this.h()},l(T){e=E(T,"LABEL",{});var F=$(e);t=V(F,`Label:
      `),n=E(F,"INPUT",{type:!0}),F.forEach(b),s=P(T),o=E(T,"P",{});var v=$(o);u=V(v,"ID: "),r=V(v,a),v.forEach(b),_=P(T),f=E(T,"P",{});var M=$(f);c=V(M,"Type: "),h=V(M,i),M.forEach(b),m=P(T),p=E(T,"LABEL",{});var G=$(p);w=V(G,`Position:
      `),d=E(G,"INPUT",{type:!0}),k=P(G),I=E(G,"INPUT",{type:!0}),G.forEach(b),Y=P(T),X&&X.l(T),O=P(T),te(L.$$.fragment,T),Q=P(T),j=E(T,"BUTTON",{"data-svelte-h":!0}),x(j)!=="svelte-ufhzdt"&&(j.textContent=B),this.h()},h(){g(n,"type","text"),g(d,"type","number"),d.disabled=l[2],g(I,"type","number"),I.disabled=l[2]},m(T,F){y(T,e,F),R(e,t),R(e,n),S(n,l[0].node.label),y(T,s,F),y(T,o,F),R(o,u),R(o,r),y(T,_,F),y(T,f,F),R(f,c),R(f,h),y(T,m,F),y(T,p,F),R(p,w),R(p,d),S(d,l[0].node.x),R(p,k),R(p,I),S(I,l[0].node.y),y(T,Y,F),X&&X.m(T,F),y(T,O,F),ne(L,T,F),y(T,Q,F),y(T,j,F),U=!0,ue||(ce=[H(n,"input",l[4]),H(d,"input",l[5]),H(I,"input",l[6]),H(j,"click",l[3])],ue=!0)},p(T,F){F&1&&n.value!==T[0].node.label&&S(n,T[0].node.label),(!U||F&1)&&a!==(a=T[0].id+"")&&be(r,a),(!U||F&1)&&i!==(i=T[0].type+"")&&be(h,i),(!U||F&4)&&(d.disabled=T[2]),F&1&&J(d.value)!==T[0].node.x&&S(d,T[0].node.x),(!U||F&4)&&(I.disabled=T[2]),F&1&&J(I.value)!==T[0].node.y&&S(I,T[0].node.y),T[0]instanceof Ie?X?X.p(T,F):(X=xe(T),X.c(),X.m(O.parentNode,O)):X&&(X.d(1),X=null);const v={};!oe&&F&1&&(oe=!0,v.router=T[0],de(()=>oe=!1)),L.$set(v)},i(T){U||(A(L.$$.fragment,T),U=!0)},o(T){z(L.$$.fragment,T),U=!1},d(T){T&&(b(e),b(s),b(o),b(_),b(f),b(m),b(p),b(Y),b(O),b(Q),b(j)),X&&X.d(T),le(L,T),ue=!1,we(ce)}}}function xe(l){let e,t,n=l[0].address+"",s;return{c(){e=C("p"),t=W("Address: "),s=W(n)},l(o){e=E(o,"P",{});var u=$(e);t=V(u,"Address: "),s=V(u,n),u.forEach(b)},m(o,u){y(o,e,u),R(e,t),R(e,s)},p(o,u){u&1&&n!==(n=o[0].address+"")&&be(s,n)},d(o){o&&b(e)}}}function Rt(l){let e,t,n,s;const o=[Et,Ct],u=[];function a(r,_){return r[0]?0:1}return e=a(l),t=u[e]=o[e](l),{c(){t.c(),n=ae()},l(r){t.l(r),n=ae()},m(r,_){u[e].m(r,_),y(r,n,_),s=!0},p(r,_){let f=e;e=a(r),e===f?u[e].p(r,_):(Ee(),z(u[f],1,1,()=>{u[f]=null}),Re(),t=u[e],t?t.p(r,_):(t=u[e]=o[e](r),t.c()),A(t,1),t.m(n.parentNode,n))},i(r){s||(A(t),s=!0)},o(r){z(t),s=!1},d(r){r&&b(n),u[e].d(r)}}}function Bt(l){let e,t,n;function s(u){l[8](u)}let o={$$slots:{default:[Rt]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new Me({props:o}),fe.push(()=>he(e,"dialog",s)),e.$on("close",l[9]),{c(){ee(e.$$.fragment)},l(u){te(e.$$.fragment,u)},m(u,a){ne(e,u,a),n=!0},p(u,[a]){const r={};a&1029&&(r.$$scope={dirty:a,ctx:u}),!t&&a&2&&(t=!0,r.dialog=u[1],de(()=>t=!1)),e.$set(r)},i(u){n||(A(e.$$.fragment,u),n=!0)},o(u){z(e.$$.fragment,u),n=!1},d(u){le(e,u)}}}function It(l,e,t){let n;ye(l,ke,h=>t(2,n=h));let{router:s}=e,{dialog:o}=e;function u(){s&&confirm("Are you sure you want to delete this router?")&&(q.deleteRouter(s.id),o.close())}function a(){s.node.label=this.value,t(0,s)}function r(){s.node.x=J(this.value),t(0,s)}function _(){s.node.y=J(this.value),t(0,s)}function f(h){s=h,t(0,s)}function c(h){o=h,t(1,o)}const i=()=>{q.fastUpdate()};return l.$$set=h=>{"router"in h&&t(0,s=h.router),"dialog"in h&&t(1,o=h.dialog)},[s,o,n,u,a,r,_,f,c,i]}class Tt extends ie{constructor(e){super(),re(this,e,It,Bt,se,{router:0,dialog:1})}}function Lt(l){let e,t="You somehow double-clicked on a connection that can't be found?";return{c(){e=C("p"),e.textContent=t},l(n){e=E(n,"P",{"data-svelte-h":!0}),x(e)!=="svelte-139v24q"&&(e.textContent=t)},m(n,s){y(n,e,s)},p:K,d(n){n&&b(e)}}}function Nt(l){let e,t,n,s,o,u,a,r,_,f,c,i,h,m="Delete Connection",p,w;return{c(){e=C("label"),t=W(`Bandwidth:
      `),n=C("input"),s=N(),o=C("label"),u=W(`Distance:
      `),a=C("input"),r=N(),_=C("label"),f=W(`Weight:
      `),c=C("input"),i=N(),h=C("button"),h.textContent=m,this.h()},l(d){e=E(d,"LABEL",{class:!0});var k=$(e);t=V(k,`Bandwidth:
      `),n=E(k,"INPUT",{type:!0,class:!0}),k.forEach(b),s=P(d),o=E(d,"LABEL",{class:!0});var I=$(o);u=V(I,`Distance:
      `),a=E(I,"INPUT",{type:!0,class:!0}),I.forEach(b),r=P(d),_=E(d,"LABEL",{class:!0});var Y=$(_);f=V(Y,`Weight:
      `),c=E(Y,"INPUT",{type:!0,class:!0}),Y.forEach(b),i=P(d),h=E(d,"BUTTON",{"data-svelte-h":!0}),x(h)!=="svelte-10n96bo"&&(h.textContent=m),this.h()},h(){g(n,"type","number"),n.disabled=l[2],g(n,"class","svelte-mdz6ho"),g(e,"class","svelte-mdz6ho"),g(a,"type","number"),a.disabled=l[2],g(a,"class","svelte-mdz6ho"),g(o,"class","svelte-mdz6ho"),g(c,"type","number"),c.disabled=l[2],g(c,"class","svelte-mdz6ho"),g(_,"class","svelte-mdz6ho")},m(d,k){y(d,e,k),R(e,t),R(e,n),S(n,l[0].bandwidth),y(d,s,k),y(d,o,k),R(o,u),R(o,a),S(a,l[0].distance),y(d,r,k),y(d,_,k),R(_,f),R(_,c),S(c,l[0].weight),y(d,i,k),y(d,h,k),p||(w=[H(n,"input",l[4]),H(a,"input",l[5]),H(c,"input",l[6]),H(h,"click",l[3])],p=!0)},p(d,k){k&4&&(n.disabled=d[2]),k&1&&J(n.value)!==d[0].bandwidth&&S(n,d[0].bandwidth),k&4&&(a.disabled=d[2]),k&1&&J(a.value)!==d[0].distance&&S(a,d[0].distance),k&4&&(c.disabled=d[2]),k&1&&J(c.value)!==d[0].weight&&S(c,d[0].weight)},d(d){d&&(b(e),b(s),b(o),b(r),b(_),b(i),b(h)),p=!1,we(w)}}}function Pt(l){let e;function t(o,u){return o[0]?Nt:Lt}let n=t(l),s=n(l);return{c(){s.c(),e=ae()},l(o){s.l(o),e=ae()},m(o,u){s.m(o,u),y(o,e,u)},p(o,u){n===(n=t(o))&&s?s.p(o,u):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&b(e),s.d(o)}}}function Dt(l){let e,t,n;function s(u){l[7](u)}let o={$$slots:{default:[Pt]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new Me({props:o}),fe.push(()=>he(e,"dialog",s)),e.$on("close",l[8]),{c(){ee(e.$$.fragment)},l(u){te(e.$$.fragment,u)},m(u,a){ne(e,u,a),n=!0},p(u,[a]){const r={};a&517&&(r.$$scope={dirty:a,ctx:u}),!t&&a&2&&(t=!0,r.dialog=u[1],de(()=>t=!1)),e.$set(r)},i(u){n||(A(e.$$.fragment,u),n=!0)},o(u){z(e.$$.fragment,u),n=!1},d(u){le(e,u)}}}function $t(l,e,t){let n;ye(l,ke,i=>t(2,n=i));let{connection:s}=e,{dialog:o}=e;function u(){s&&confirm("Are you sure you want to delete this connection?")&&(q.deleteConnection(s.id),o.close())}function a(){s.bandwidth=J(this.value),t(0,s)}function r(){s.distance=J(this.value),t(0,s)}function _(){s.weight=J(this.value),t(0,s)}function f(i){o=i,t(1,o)}const c=()=>{q.fastUpdate()};return l.$$set=i=>{"connection"in i&&t(0,s=i.connection),"dialog"in i&&t(1,o=i.dialog)},[s,o,n,u,a,r,_,f,c]}class Ut extends ie{constructor(e){super(),re(this,e,$t,Dt,se,{connection:0,dialog:1})}}function Ye(l){let e,t="Loading...";return{c(){e=C("p"),e.textContent=t,this.h()},l(n){e=E(n,"P",{style:!0,"data-svelte-h":!0}),x(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Be(e,"font-size","200px")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function je(l){let e,t,n,s,o;return{c(){e=_e("line"),this.h()},l(u){e=pe(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),$(e).forEach(b),this.h()},h(){g(e,"x1",t=l[3].node.x),g(e,"y1",n=l[3].node.y),g(e,"x2",s=l[16](l[1].x)),g(e,"y2",o=l[17](l[1].y)),g(e,"stroke","black")},m(u,a){y(u,e,a)},p(u,a){a[0]&8&&t!==(t=u[3].node.x)&&g(e,"x1",t),a[0]&8&&n!==(n=u[3].node.y)&&g(e,"y1",n),a[0]&2&&s!==(s=u[16](u[1].x))&&g(e,"x2",s),a[0]&2&&o!==(o=u[17](u[1].y))&&g(e,"y2",o)},d(u){u&&b(e)}}}function Mt(l){let e,t,n,s,o,u,a,r,_,f,c,i,h,m,p,w=!l[8]&&Ye(),d=l[5]===l[9].CONNECTING&&l[3]&&je(l);const k=l[19].default,I=et(k,l,l[18],null);function Y(B){l[22](B)}function O(B){l[23](B)}let L={};l[3]!==void 0&&(L.router=l[3]),l[6]!==void 0&&(L.dialog=l[6]),u=new Tt({props:L}),fe.push(()=>he(u,"router",Y)),fe.push(()=>he(u,"dialog",O));function oe(B){l[24](B)}function Q(B){l[25](B)}let j={};return l[4]!==void 0&&(j.connection=l[4]),l[7]!==void 0&&(j.dialog=l[7]),f=new Ut({props:j}),fe.push(()=>he(f,"connection",oe)),fe.push(()=>he(f,"dialog",Q)),{c(){w&&w.c(),e=N(),t=_e("svg"),d&&d.c(),n=ae(),I&&I.c(),o=N(),ee(u.$$.fragment),_=N(),ee(f.$$.fragment),this.h()},l(B){w&&w.l(B),e=P(B),t=pe(B,"svg",{viewBox:!0,role:!0,tabindex:!0,style:!0,class:!0});var U=$(t);d&&d.l(U),n=ae(),I&&I.l(U),U.forEach(b),o=P(B),te(u.$$.fragment,B),_=P(B),te(f.$$.fragment,B),this.h()},h(){g(t,"viewBox",s=`${l[0].x} ${l[0].y} ${l[0].width} ${l[0].height}`),g(t,"role","button"),g(t,"tabindex","-1"),Be(t,"cursor",l[10][l[5]]),g(t,"class","svelte-8vtxkw")},m(B,U){w&&w.m(B,U),y(B,e,U),y(B,t,U),d&&d.m(t,null),R(t,n),I&&I.m(t,null),l[21](t),y(B,o,U),ne(u,B,U),y(B,_,U),ne(f,B,U),h=!0,m||(p=[H(t,"pointerdown",l[11]),H(t,"pointerup",l[12]),H(t,"wheel",l[13]),H(t,"dblclick",l[14]),H(t,"dragover",dt(l[20])),H(t,"drop",l[15])],m=!0)},p(B,U){B[8]?w&&(w.d(1),w=null):w||(w=Ye(),w.c(),w.m(e.parentNode,e)),B[5]===B[9].CONNECTING&&B[3]?d?d.p(B,U):(d=je(B),d.c(),d.m(t,n)):d&&(d.d(1),d=null),I&&I.p&&(!h||U[0]&262144)&&tt(I,k,B,B[18],h?lt(k,B[18],U,null):nt(B[18]),null),(!h||U[0]&1&&s!==(s=`${B[0].x} ${B[0].y} ${B[0].width} ${B[0].height}`))&&g(t,"viewBox",s),(!h||U[0]&32)&&Be(t,"cursor",B[10][B[5]]);const ue={};!a&&U[0]&8&&(a=!0,ue.router=B[3],de(()=>a=!1)),!r&&U[0]&64&&(r=!0,ue.dialog=B[6],de(()=>r=!1)),u.$set(ue);const ce={};!c&&U[0]&16&&(c=!0,ce.connection=B[4],de(()=>c=!1)),!i&&U[0]&128&&(i=!0,ce.dialog=B[7],de(()=>i=!1)),f.$set(ce)},i(B){h||(A(I,B),A(u.$$.fragment,B),A(f.$$.fragment,B),h=!0)},o(B){z(I,B),z(u.$$.fragment,B),z(f.$$.fragment,B),h=!1},d(B){B&&(b(e),b(t),b(o),b(_)),w&&w.d(B),d&&d.d(),I&&I.d(B),l[21](null),le(u,B),le(f,B),m=!1,we(p)}}}function Ht(l,e,t){let n;ye(l,ke,v=>t(27,n=v));let{$$slots:s={},$$scope:o}=e;var u=(v=>(v[v.NONE=0]="NONE",v[v.DRAGGING=1]="DRAGGING",v[v.PANNING=2]="PANNING",v[v.CONNECTING=3]="CONNECTING",v))(u||{});const a={x:0,y:0,width:0,height:0,get scale(){return c?this.width/c.getBoundingClientRect().width:1}},r={x:0,y:0},_={x:0,y:0},f={0:"move",1:"grabbing",2:"grabbing",3:"crosshair"};let c=null,i=null,h=null,m=0,p,w,d=!1;ft(()=>{if(!c)return;new ResizeObserver(k).observe(c),requestAnimationFrame(()=>{c&&(t(0,a.x=c.getBoundingClientRect().width/-2,a),t(0,a.y=c.getBoundingClientRect().height/-2,a))}),t(8,d=!0)});function k(){if(!c)return;const v=a.scale||1;t(0,a.width=c.getBoundingClientRect().width*v,a),t(0,a.height=c.getBoundingClientRect().height*v,a)}function I(v){if(!(v.target instanceof Element))return;v.preventDefault(),c==null||c.addEventListener("pointermove",O),c==null||c.setPointerCapture(v.pointerId);const M=v.target.id;if(M){if(t(3,i=q.getRouter(parseInt(M))||null),!i)return;v.shiftKey?t(5,m=3):(_.x=i.node.x,_.y=i.node.y,t(5,m=1))}else t(5,m=2);t(1,r.x=v.clientX,r),t(1,r.y=v.clientY,r)}function Y(v){if(v.target instanceof Element){if(v.preventDefault(),m===3&&i){const M=document.elementFromPoint(v.clientX,v.clientY),G=(M==null?void 0:M.tagName)==="circle"?M.id:null,Ce=q.getRouter(parseInt(G??""));Ce&&q.addConnection({source:i,target:Ce})}t(5,m=0),t(3,i=null),c==null||c.releasePointerCapture(v.pointerId),c==null||c.removeEventListener("pointermove",O)}}function O(v){v.preventDefault();const M={x:(v.clientX-r.x)*a.scale,y:(v.clientY-r.y)*a.scale};!n&&m===1&&i?(t(3,i.node.x=_.x+M.x,i),t(3,i.node.y=_.y+M.y,i),q.fastUpdate()):m===2?(t(1,r.x=v.clientX,r),t(1,r.y=v.clientY,r),t(0,a.x-=M.x,a),t(0,a.y-=M.y,a)):!n&&m===3&&(t(1,r.x=v.clientX,r),t(1,r.y=v.clientY,r))}function L(v){if(v.preventDefault(),!c||a.scale<.1&&v.deltaY<=0||a.scale>5&&v.deltaY>=0)return;t(1,r.x=v.clientX,r),t(1,r.y=v.clientY,r);const M=c.getBoundingClientRect(),G=v.deltaY>0?1+.025:1-.025,Ce={x:(r.x-M.left)/M.width,y:(r.y-M.top)/M.height};t(0,a.x-=a.width*(G-1)*Ce.x,a),t(0,a.y-=a.height*(G-1)*Ce.y,a),t(0,a.width*=G,a),t(0,a.height*=G,a)}function oe(v){if(!(v.target instanceof Element))return;v.preventDefault();const M=document.elementFromPoint(v.clientX,v.clientY);M&&(M.tagName==="circle"?Q(M.id):M.tagName==="rect"&&j(M.id))}function Q(v){const M=q.getRouter(parseInt(v));M&&(t(3,i=M),p.showModal())}function j(v){const M=q.connections.find(G=>v===G.id);M&&(t(4,h=M),w.showModal())}function B(v){var G;switch(v.preventDefault(),(G=v.dataTransfer)==null?void 0:G.getData("text/plain")){case"CE":q.createCE({label:"CE",x:U(v.clientX),y:ue(v.clientY)});break;case"LER":q.createLER({label:"LER",x:U(v.clientX),y:ue(v.clientY)});break;case"LSR":q.createLSR({label:"LSR",x:U(v.clientX),y:ue(v.clientY)});break}}function U(v){return c?(v-c.getBoundingClientRect().left)*a.scale+a.x:v}function ue(v){return c?(v-c.getBoundingClientRect().top)*a.scale+a.y:v}function ce(v){ot.call(this,l,v)}function X(v){fe[v?"unshift":"push"](()=>{c=v,t(2,c)})}function Ne(v){i=v,t(3,i)}function Te(v){p=v,t(6,p)}function T(v){h=v,t(4,h)}function F(v){w=v,t(7,w)}return l.$$set=v=>{"$$scope"in v&&t(18,o=v.$$scope)},[a,r,c,i,h,m,p,w,d,u,f,I,Y,L,oe,B,U,ue,o,s,ce,X,Ne,Te,T,F]}class Ot extends ie{constructor(e){super(),re(this,e,Ht,Mt,se,{},null,[-1,-1])}}function At(l){let e,t,n,s,o,u,a,r,_=l[0].distance+"",f,c;return{c(){e=_e("line"),t=N(),n=_e("rect"),a=N(),r=_e("text"),f=W(_),c=W(" km"),this.h()},l(i){e=pe(i,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),$(e).forEach(b),t=P(i),n=pe(i,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0}),$(n).forEach(b),a=P(i),r=pe(i,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,fill:!0,"font-size":!0,class:!0});var h=$(r);f=V(h,_),c=V(h," km"),h.forEach(b),this.h()},h(){g(e,"x1",l[4]),g(e,"y1",l[2]),g(e,"x2",l[3]),g(e,"y2",l[1]),g(e,"stroke","black"),g(n,"id",s=l[0].id),g(n,"x",o=l[6]-Pe/2),g(n,"y",u=l[5]-De/2),g(n,"width",Pe),g(n,"height",De),g(n,"fill","#222222"),g(n,"stroke","white"),g(r,"x",l[6]),g(r,"y",l[5]),g(r,"text-anchor","middle"),g(r,"dominant-baseline","middle"),g(r,"fill","white"),g(r,"font-size","12px"),g(r,"class","svelte-1ndjud8")},m(i,h){y(i,e,h),y(i,t,h),y(i,n,h),y(i,a,h),y(i,r,h),R(r,f),R(r,c)},p(i,[h]){h&16&&g(e,"x1",i[4]),h&4&&g(e,"y1",i[2]),h&8&&g(e,"x2",i[3]),h&2&&g(e,"y2",i[1]),h&1&&s!==(s=i[0].id)&&g(n,"id",s),h&64&&o!==(o=i[6]-Pe/2)&&g(n,"x",o),h&32&&u!==(u=i[5]-De/2)&&g(n,"y",u),h&1&&_!==(_=i[0].distance+"")&&be(f,_),h&64&&g(r,"x",i[6]),h&32&&g(r,"y",i[5])},i:K,o:K,d(i){i&&(b(e),b(t),b(n),b(a),b(r))}}}const Pe=50,De=20;function Xe(l,e){return(l+e)/2}function Ft(l,e,t){let n,s,o,u,a,r,{connection:_}=e;return l.$$set=f=>{"connection"in f&&t(0,_=f.connection)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=_.source.node.x),l.$$.dirty&1&&t(3,s=_.target.node.x),l.$$.dirty&1&&t(2,o=_.source.node.y),l.$$.dirty&1&&t(1,u=_.target.node.y),l.$$.dirty&24&&t(6,a=Xe(n,s)),l.$$.dirty&6&&t(5,r=Xe(o,u))},[_,u,o,s,n,r,a]}class zt extends ie{constructor(e){super(),re(this,e,Ft,At,se,{connection:0})}}function St(l){let e,t,n,s,o,u,a,r=l[0].node.label+"",_,f,c;return{c(){e=_e("circle"),u=N(),a=_e("text"),_=W(r),this.h()},l(i){e=pe(i,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),$(e).forEach(b),u=P(i),a=pe(i,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,class:!0});var h=$(a);_=V(h,r),h.forEach(b),this.h()},h(){g(e,"id",t=l[0].id.toString()),g(e,"cx",n=l[0].node.x),g(e,"cy",s=l[0].node.y),g(e,"r","20"),g(e,"fill",o=l[1][l[0].type]),g(e,"class","svelte-11bg7m5"),g(a,"x",f=l[0].node.x),g(a,"y",c=l[0].node.y),g(a,"text-anchor","middle"),g(a,"dominant-baseline","middle"),g(a,"class","svelte-11bg7m5")},m(i,h){y(i,e,h),y(i,u,h),y(i,a,h),R(a,_)},p(i,[h]){h&1&&t!==(t=i[0].id.toString())&&g(e,"id",t),h&1&&n!==(n=i[0].node.x)&&g(e,"cx",n),h&1&&s!==(s=i[0].node.y)&&g(e,"cy",s),h&1&&o!==(o=i[1][i[0].type])&&g(e,"fill",o),h&1&&r!==(r=i[0].node.label+"")&&be(_,r),h&1&&f!==(f=i[0].node.x)&&g(a,"x",f),h&1&&c!==(c=i[0].node.y)&&g(a,"y",c)},i:K,o:K,d(i){i&&(b(e),b(u),b(a))}}}function xt(l,e,t){let{router:n}=e;const s={CE:"lightgreen",LER:"cyan",LSR:"hotpink"};return l.$$set=o=>{"router"in o&&t(0,n=o.router)},[n,s]}class Yt extends ie{constructor(e){super(),re(this,e,xt,St,se,{router:0})}}function jt(l){let e,t,n,s;return{c(){e=C("div"),t=W(l[0]),this.h()},l(o){e=E(o,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var u=$(e);t=V(u,l[0]),u.forEach(b),this.h()},h(){g(e,"draggable","true"),g(e,"role","button"),g(e,"tabindex","-1"),Be(e,"background-color",l[1]),g(e,"class","svelte-17iodfq")},m(o,u){y(o,e,u),R(e,t),n||(s=H(e,"dragstart",l[2]),n=!0)},p(o,[u]){u&1&&be(t,o[0]),u&2&&Be(e,"background-color",o[1])},i:K,o:K,d(o){o&&b(e),n=!1,s()}}}function Xt(l,e,t){let n;ye(l,ke,r=>t(4,n=r));let{text:s}=e,{type:o}=e,{color:u}=e;function a(r){var _;if(n){alert("Network is locked.");return}(_=r.dataTransfer)==null||_.setData("text/plain",o)}return l.$$set=r=>{"text"in r&&t(0,s=r.text),"type"in r&&t(3,o=r.type),"color"in r&&t(1,u=r.color)},[s,u,a,o]}class qt extends ie{constructor(e){super(),re(this,e,Xt,jt,se,{text:0,type:3,color:1})}}function Gt(l){let e,t,n,s;return{c(){e=C("button"),t=W(l[0]),this.h()},l(o){e=E(o,"BUTTON",{class:!0});var u=$(e);t=V(u,l[0]),u.forEach(b),this.h()},h(){g(e,"class","svelte-1mil06r")},m(o,u){y(o,e,u),R(e,t),n||(s=H(e,"click",function(){Le(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(o,[u]){l=o,u&1&&be(t,l[0])},i:K,o:K,d(o){o&&b(e),n=!1,s()}}}function Wt(l,e,t){let{text:n}=e,{callback:s=()=>{}}=e;return l.$$set=o=>{"text"in o&&t(0,n=o.text),"callback"in o&&t(1,s=o.callback)},[n,s]}class Vt extends ie{constructor(e){super(),re(this,e,Wt,Gt,se,{text:0,callback:1})}}function Kt(l,e){const t=q.routers,n=t.length,s=new Array(n).fill(1/0),o=new Array(n).fill(!1),u=new Array(n).fill(null);s[t.indexOf(l)]=0;let a=!1;for(;!a;){let f=null,c=1/0;for(let i=0;i<n;i++)!o[i]&&s[i]<c&&(f=t[i],c=s[i]);if(f===null||f.id===e.id){a=!0;continue}o[t.indexOf(f)]=!0;for(const i of q.connections){let h;if(i.source===f)h=i.target;else if(i.target===f)h=i.source;else continue;const m=t.indexOf(h),p=c+i.distance;p<s[m]&&(s[m]=p,u[m]=f)}}const r=[];let _=e;for(;_;){r.unshift(_);const f=t.indexOf(_);_=u[f]}return r}class Jt{constructor(){D(this,"store",$e());D(this,"set",this.store.set);D(this,"update",this.store.update);D(this,"subscribe",this.store.subscribe);D(this,"_map",new Map)}setRawNestedMap(e){this._map=e,this.set(this._map),this.fastUpdate()}getPath(e,t){const n=this._map.get(e);if(n)return n.get(t)}findShortestPaths(){const e=new Map,t=q.routers.filter(n=>n.type==="CE");for(const n of t){const s=new Map;for(const o of t){if(n===o)continue;const u=Kt(n,o);s.set(o.id,u)}e.set(n.id,s)}this.setRawNestedMap(e)}fastUpdate(){this.store.set(this._map)}}const Qt=new Jt,Zt=Qt;function qe(l,e,t){const n=l.slice();return n[3]=e[t],n}function Ge(l,e,t){const n=l.slice();return n[6]=e[t],n}function We(l){let e,t;const n=[l[6]];let s={};for(let o=0;o<n.length;o+=1)s=st(s,n[o]);return e=new qt({props:s}),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,u){ne(e,o,u),t=!0},p(o,u){const a=u&2?it(n,[rt(o[6])]):{};e.$set(a)},i(o){t||(A(e.$$.fragment,o),t=!0)},o(o){z(e.$$.fragment,o),t=!1},d(o){le(e,o)}}}function Ve(l){let e,t;const n=[l[3]];let s={};for(let o=0;o<n.length;o+=1)s=st(s,n[o]);return e=new Vt({props:s}),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,u){ne(e,o,u),t=!0},p(o,u){const a=u&1?it(n,[rt(o[3])]):{};e.$set(a)},i(o){t||(A(e.$$.fragment,o),t=!0)},o(o){z(e.$$.fragment,o),t=!1},d(o){le(e,o)}}}function en(l){let e,t,n,s=Z(l[1]),o=[];for(let f=0;f<s.length;f+=1)o[f]=We(Ge(l,s,f));const u=f=>z(o[f],1,1,()=>{o[f]=null});let a=Z(l[0]),r=[];for(let f=0;f<a.length;f+=1)r[f]=Ve(qe(l,a,f));const _=f=>z(r[f],1,1,()=>{r[f]=null});return{c(){for(let f=0;f<o.length;f+=1)o[f].c();e=N();for(let f=0;f<r.length;f+=1)r[f].c();t=ae()},l(f){for(let c=0;c<o.length;c+=1)o[c].l(f);e=P(f);for(let c=0;c<r.length;c+=1)r[c].l(f);t=ae()},m(f,c){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(f,c);y(f,e,c);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(f,c);y(f,t,c),n=!0},p(f,[c]){if(c&2){s=Z(f[1]);let i;for(i=0;i<s.length;i+=1){const h=Ge(f,s,i);o[i]?(o[i].p(h,c),A(o[i],1)):(o[i]=We(h),o[i].c(),A(o[i],1),o[i].m(e.parentNode,e))}for(Ee(),i=s.length;i<o.length;i+=1)u(i);Re()}if(c&1){a=Z(f[0]);let i;for(i=0;i<a.length;i+=1){const h=qe(f,a,i);r[i]?(r[i].p(h,c),A(r[i],1)):(r[i]=Ve(h),r[i].c(),A(r[i],1),r[i].m(t.parentNode,t))}for(Ee(),i=a.length;i<r.length;i+=1)_(i);Re()}},i(f){if(!n){for(let c=0;c<s.length;c+=1)A(o[c]);for(let c=0;c<a.length;c+=1)A(r[c]);n=!0}},o(f){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)z(o[c]);r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)z(r[c]);n=!1},d(f){f&&(b(e),b(t)),ge(o,f),ge(r,f)}}}function tn(l,e,t){let n,s;ye(l,ke,u=>t(2,s=u));const o=[{text:"+ Customer",type:"CE",color:"lightgreen"},{text:"+ Edge",type:"LER",color:"cyan"},{text:"+ Switch",type:"LSR",color:"hotpink"}];return l.$$.update=()=>{l.$$.dirty&4&&t(0,n=[{text:s?"Unlock":"Lock",callback:()=>{ct(ke,s=!s,s)}},{text:"Clear",callback:()=>{if(s){alert("Network is locked.");return}confirm("Are you sure you want to clear the network?")&&q.clear()}},{text:"LDP (actually Dijkstra)",callback:()=>{Zt.findShortestPaths()}}])},[n,o,s]}class nn extends ie{constructor(e){super(),re(this,e,tn,en,se,{})}}function ln(l){let e,t="Drag and drop routers that you want to add.",n,s,o="Hold the shift key and drag routers to make connections between the routers.",u,a,r="Double press a router to configure/delete it.",_,f,c="The clear button will delete everything.",i,h,m,p,w="Press Esc to close this popup.";return{c(){e=C("p"),e.textContent=t,n=N(),s=C("p"),s.textContent=o,u=N(),a=C("p"),a.textContent=r,_=N(),f=C("p"),f.textContent=c,i=N(),h=C("br"),m=N(),p=C("p"),p.textContent=w},l(d){e=E(d,"P",{"data-svelte-h":!0}),x(e)!=="svelte-1e52y96"&&(e.textContent=t),n=P(d),s=E(d,"P",{"data-svelte-h":!0}),x(s)!=="svelte-b60b0b"&&(s.textContent=o),u=P(d),a=E(d,"P",{"data-svelte-h":!0}),x(a)!=="svelte-zhn422"&&(a.textContent=r),_=P(d),f=E(d,"P",{"data-svelte-h":!0}),x(f)!=="svelte-epfgnc"&&(f.textContent=c),i=P(d),h=E(d,"BR",{}),m=P(d),p=E(d,"P",{"data-svelte-h":!0}),x(p)!=="svelte-1dvt5v1"&&(p.textContent=w)},m(d,k){y(d,e,k),y(d,n,k),y(d,s,k),y(d,u,k),y(d,a,k),y(d,_,k),y(d,f,k),y(d,i,k),y(d,h,k),y(d,m,k),y(d,p,k)},p:K,d(d){d&&(b(e),b(n),b(s),b(u),b(a),b(_),b(f),b(i),b(h),b(m),b(p))}}}function on(l){let e,t,n="Help",s,o,u,a,r,_;function f(i){l[2](i)}let c={$$slots:{default:[ln]},$$scope:{ctx:l}};return l[0]!==void 0&&(c.dialog=l[0]),o=new Me({props:c}),fe.push(()=>he(o,"dialog",f)),{c(){e=C("div"),t=C("button"),t.textContent=n,s=N(),ee(o.$$.fragment),this.h()},l(i){e=E(i,"DIV",{});var h=$(e);t=E(h,"BUTTON",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-1l58twh"&&(t.textContent=n),h.forEach(b),s=P(i),te(o.$$.fragment,i),this.h()},h(){g(t,"class","svelte-g8xfna")},m(i,h){y(i,e,h),R(e,t),y(i,s,h),ne(o,i,h),a=!0,r||(_=H(t,"click",l[1]),r=!0)},p(i,[h]){const m={};h&8&&(m.$$scope={dirty:h,ctx:i}),!u&&h&1&&(u=!0,m.dialog=i[0],de(()=>u=!1)),o.$set(m)},i(i){a||(A(o.$$.fragment,i),a=!0)},o(i){z(o.$$.fragment,i),a=!1},d(i){i&&(b(e),b(s)),le(o,i),r=!1,_()}}}function sn(l,e,t){let n;const s=()=>{n.showModal()};function o(u){n=u,t(0,n)}return[n,s,o]}class rn extends ie{constructor(e){super(),re(this,e,sn,on,se,{})}}function Ke(l,e,t){const n=l.slice();return n[1]=e[t],n}function Je(l,e,t){const n=l.slice();return n[4]=e[t],n}function Qe(l){let e,t;return e=new zt({props:{connection:l[4]}}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,s){ne(e,n,s),t=!0},p(n,s){const o={};s&1&&(o.connection=n[4]),e.$set(o)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Ze(l){let e,t;return e=new Yt({props:{router:l[1]}}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,s){ne(e,n,s),t=!0},p(n,s){const o={};s&1&&(o.router=n[1]),e.$set(o)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function un(l){let e,t,n,s=Z(l[0].connections),o=[];for(let f=0;f<s.length;f+=1)o[f]=Qe(Je(l,s,f));const u=f=>z(o[f],1,1,()=>{o[f]=null});let a=Z(l[0].routers),r=[];for(let f=0;f<a.length;f+=1)r[f]=Ze(Ke(l,a,f));const _=f=>z(r[f],1,1,()=>{r[f]=null});return{c(){for(let f=0;f<o.length;f+=1)o[f].c();e=N();for(let f=0;f<r.length;f+=1)r[f].c();t=ae()},l(f){for(let c=0;c<o.length;c+=1)o[c].l(f);e=P(f);for(let c=0;c<r.length;c+=1)r[c].l(f);t=ae()},m(f,c){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(f,c);y(f,e,c);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(f,c);y(f,t,c),n=!0},p(f,c){if(c&1){s=Z(f[0].connections);let i;for(i=0;i<s.length;i+=1){const h=Je(f,s,i);o[i]?(o[i].p(h,c),A(o[i],1)):(o[i]=Qe(h),o[i].c(),A(o[i],1),o[i].m(e.parentNode,e))}for(Ee(),i=s.length;i<o.length;i+=1)u(i);Re()}if(c&1){a=Z(f[0].routers);let i;for(i=0;i<a.length;i+=1){const h=Ke(f,a,i);r[i]?(r[i].p(h,c),A(r[i],1)):(r[i]=Ze(h),r[i].c(),A(r[i],1),r[i].m(t.parentNode,t))}for(Ee(),i=a.length;i<r.length;i+=1)_(i);Re()}},i(f){if(!n){for(let c=0;c<s.length;c+=1)A(o[c]);for(let c=0;c<a.length;c+=1)A(r[c]);n=!0}},o(f){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)z(o[c]);r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)z(r[c]);n=!1},d(f){f&&(b(e),b(t)),ge(o,f),ge(r,f)}}}function an(l){let e,t,n,s,o,u,a,r,_;return t=new Ot({props:{$$slots:{default:[un]},$$scope:{ctx:l}}}),o=new nn({}),r=new rn({}),{c(){e=C("div"),ee(t.$$.fragment),n=N(),s=C("div"),ee(o.$$.fragment),u=N(),a=C("div"),ee(r.$$.fragment),this.h()},l(f){e=E(f,"DIV",{id:!0,class:!0});var c=$(e);te(t.$$.fragment,c),n=P(c),s=E(c,"DIV",{id:!0,class:!0});var i=$(s);te(o.$$.fragment,i),i.forEach(b),u=P(c),a=E(c,"DIV",{id:!0,class:!0});var h=$(a);te(r.$$.fragment,h),h.forEach(b),c.forEach(b),this.h()},h(){g(s,"id","top-left-bar"),g(s,"class","absolute-flex svelte-ixqfsc"),g(a,"id","bottom-left-bar"),g(a,"class","absolute-flex svelte-ixqfsc"),g(e,"id","network"),g(e,"class","svelte-ixqfsc")},m(f,c){y(f,e,c),ne(t,e,null),R(e,n),R(e,s),ne(o,s,null),R(e,u),R(e,a),ne(r,a,null),_=!0},p(f,[c]){const i={};c&129&&(i.$$scope={dirty:c,ctx:f}),t.$set(i)},i(f){_||(A(t.$$.fragment,f),A(o.$$.fragment,f),A(r.$$.fragment,f),_=!0)},o(f){z(t.$$.fragment,f),z(o.$$.fragment,f),z(r.$$.fragment,f),_=!1},d(f){f&&b(e),le(t),le(o),le(r)}}}function fn(l,e,t){let n;return ye(l,q,s=>t(0,n=s)),[n]}class cn extends ie{constructor(e){super(),re(this,e,fn,an,se,{})}}function dn(l){let e,t;return e=new cn({}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,s){ne(e,n,s),t=!0},p:K,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}class mn extends ie{constructor(e){super(),re(this,e,null,dn,se,{})}}export{mn as component};
