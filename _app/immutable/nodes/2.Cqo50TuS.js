var Gt=Object.defineProperty;var Wt=(l,e,t)=>e in l?Gt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var X=(l,e,t)=>(Wt(l,typeof e!="symbol"?e+"":e,t),t);import{r as Me,x as Kt,s as oe,a as Ft,u as At,g as Ot,b as St,y as Ut,e as ge,i as jt,n as fe,z as ye,c as ve,o as qt,A as Ze,B as Ue}from"../chunks/scheduler.DYvwBUv9.js";import{n as B,m as P,S as ie,i as se,e as I,c as R,a as x,d as b,l as k,g as L,z as J,t as ne,b as le,h as C,j as $e,s as N,v as U,A as ce,f as H,w as j,x as q,r as pe,p as _e,B as Pe,y as V,C as ae,D as we,E as Ee,o as re,q as ze,F as xe,G as Ne,H as Jt,I as ot}from"../chunks/index.CEZ_BoqP.js";import{w as et}from"../chunks/index.DX-KyX9r.js";function ee(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function We(l,e){B(l,1,1,()=>{e.delete(l.key)})}function Ke(l,e,t,n,r,i,o,s,u,c,a,p){let d=l.length,g=i.length,h=d;const $={};for(;h--;)$[l[h].key]=h;const _=[],f=new Map,m=new Map,v=[];for(h=g;h--;){const y=p(r,i,h),T=t(y);let S=o.get(T);S?n&&v.push(()=>S.p(y,e)):(S=c(T,y),S.c()),f.set(T,_[h]=S),T in $&&m.set(T,Math.abs(h-$[T]))}const A=new Set,M=new Set;function D(y){P(y,1),y.m(s,a),o.set(y.key,y),a=y.first,g--}for(;d&&g;){const y=_[g-1],T=l[d-1],S=y.key,E=T.key;y===T?(a=y.first,d--,g--):f.has(E)?!o.has(S)||A.has(S)?D(y):M.has(E)?d--:m.get(S)>m.get(E)?(M.add(S),D(y)):(A.add(E),d--):(u(T,o),d--)}for(;d--;){const y=l[d];f.has(y.key)||u(y,o)}for(;g;)D(_[g-1]);return Me(v),_}function je(l,e){const t={},n={},r={$$scope:1};let i=l.length;for(;i--;){const o=l[i],s=e[i];if(s){for(const u in o)u in s||(n[u]=1);for(const u in s)r[u]||(t[u]=s[u],r[u]=1);l[i]=s}else for(const u in o)r[u]=1}for(const o in n)o in t||(t[o]=void 0);return t}function qe(l){return typeof l=="object"&&l!==null?l:{}}const De=et({running:!0,speedMultiplier:1,maxPackets:100});let Qt=class{constructor(e,t,n){X(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},tt=class{constructor(e,t){this.id=e,this.node=t}};class me extends tt{constructor(){super(...arguments);X(this,"address",`CE-IP-${this.id}`);X(this,"firstHop",new Map);X(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});X(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});X(this,"updateAddress",(t,n)=>{const r=this.firstHop.get(t);if(r===void 0){alert(`Unable to update old first hop Address '${t}' to '${n}'.`);return}this.firstHop.set(n,r),this.firstHop.delete(t)});X(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop("CE received packet. Dropping.")}clearTables(){this.firstHop.clear()}get type(){return"CE"}}let Vt=class{constructor(){X(this,"map",new Map);X(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});X(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});X(this,"updateLabel",(e,t)=>{const n=this.map.get(e);if(!n){alert(`Unable to update old LIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,n),this.map.delete(e)});X(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}},Zt=class{constructor(){X(this,"map",new Map);X(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});X(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});X(this,"updateAddress",(e,t)=>{const n=this.map.get(e);if(n===void 0){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,n),this.map.delete(e)});X(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Le extends tt{constructor(){super(...arguments);X(this,"FIB",new Zt);X(this,"LIB",new Vt)}receivePacket(t){var n,r,i,o;if(t.fallbackRoute)return t.fallback(this);if(t.label===-1){const s=t.destination,u=(n=this.FIB.get(s.address))==null?void 0:n.nextHop;if(!u)return t.fallback(this);const c=(r=this.FIB.get(s.address))==null?void 0:r.label;if(!c)return t.fallback(this);t.label=c;const a=O.getRouter(parseInt(u));if(!a)return t.fallback(this);t.nextHop=a}else{const s=(i=this.LIB.get(t.label))==null?void 0:i.nextHop;if(!s)return t.fallback(this);const u=(o=this.LIB.get(t.label))==null?void 0:o.outgoingLabel;if(!u)return t.fallback(this);t.label=u;const c=O.getCERouter(s);if(!c)return t.fallback(this);t.nextHop=c}t.decrementTTL()}clearTables(){this.FIB.map.clear(),this.LIB.map.clear()}get type(){return"LER"}}function nt(l,e){const t=O.routers,n=t.length,r=new Array(n).fill(1/0),i=new Array(n).fill(!1),o=new Array(n).fill(null);r[t.indexOf(l)]=0;let s=!1,u=!1;for(;!s;){let p=null,d=1/0;for(const[g,h]of t.entries())if(!i[g]&&r[g]<d){if(h instanceof Le){if(!u)u=!0;else if(!O.links.some(_=>_.source===h&&_.target===e||_.target===h&&_.source===e))continue}p=h,d=r[g]}if(!p||p.id===e.id){s=!0;continue}i[t.indexOf(p)]=!0;for(const g of O.links){let h;if(g.source===p)h=g.target;else if(g.target===p)h=g.source;else continue;const $=t.indexOf(h),_=d+g.distance;_<r[$]&&(r[$]=_,o[$]=p)}}const c=[];let a=e;for(;a;){c.unshift(a);const p=t.indexOf(a);a=o[p]}return c}let en=class{constructor(e,t,n,r){X(this,"ttl",32);X(this,"label",-1);X(this,"fallbackRoute");X(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=r;const i=t.firstHop.get(n.address);if(!i){this.drop("No next hop router id found.");return}const o=O.getRouter(i);if(!o){this.drop("No next hop router found.");return}this.nextHop=o}decrementTTL(){--this.ttl<=0&&this.drop()}fallback(e){if(this.label=-1,this.decrementTTL(),this.fallbackRoute)return this.setFallbackNextHop();if(this.fallbackRoute=nt(e,this.destination),!(this.fallbackRoute[this.fallbackRoute.length-1]instanceof me))return this.drop("The destination is not a CE.");this.fallbackRoute.shift(),this.setFallbackNextHop()}validateNextHop(e){return!!(O.doesLinkExist({source:e,target:this.nextHop})||O.doesLinkExist({source:this.nextHop,target:e}))}setFallbackNextHop(){var t;const e=(t=this.fallbackRoute)==null?void 0:t.shift();this.fallbackRoute&&e?this.nextHop=e:this.drop("Unable to set fallback IP routing next hop")}drop(e="Unknown"){console.warn("Packet dropped: ",e),O.deletePacket(this.id)}};class Fe extends tt{constructor(){super(...arguments);X(this,"LIB",new Vt)}receivePacket(t){var o,s;if(t.fallbackRoute)return t.fallback(this);const n=(o=this.LIB.get(t.label))==null?void 0:o.nextHop;if(!n)return t.fallback(this);const r=(s=this.LIB.get(t.label))==null?void 0:s.outgoingLabel;if(!r)return t.fallback(this);t.label=r;const i=O.getRouter(parseInt(n));if(!i)return t.fallback(this);t.nextHop=i,t.decrementTTL()}clearTables(){this.LIB.map.clear()}get type(){return"LSR"}}const tn={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class nn{constructor(){X(this,"store",et({routers:[],links:[],packets:[]}));X(this,"set",this.store.set);X(this,"update",this.store.update);X(this,"subscribe",this.store.subscribe);X(this,"_routers",[]);X(this,"_links",[]);X(this,"_packets",[]);X(this,"routerMap",new Map);X(this,"CEMap",new Map);X(this,"routerCounter",1);X(this,"packetCounter",1);X(this,"maxPackets",Kt(De).maxPackets);De.subscribe(e=>{this.maxPackets=e.maxPackets,this._packets=this._packets.slice(0,this.maxPackets),this.notify()})}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!tn[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new Qt(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,r=new me(n,{label:`CE ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(r)}createLER(e,t){const n=this.routerCounter++,r=new Le(n,{label:`LER ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(r)}createLSR(e,t){const n=this.routerCounter++,r=new Fe(n,{label:`LSR ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(r)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof me&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),t instanceof me&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}getSureCERouter(e){const t=this.getCERouter(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){if(this._packets.length>=this.maxPackets)return;const n=new en(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearTables(){for(const e of this._routers)e.clearTables();this.notify()}clearLinks(){this._links=[],this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=1,this.packetCounter=1,this.notify()}notify(){this.store.set(this.networkState)}}const ln=new nn,O=ln,He=et(!1);function rn(l){let e,t,n,r;const i=l[2].default,o=Ft(i,l,l[1],null);return{c(){e=I("dialog"),o&&o.c(),this.h()},l(s){e=R(s,"DIALOG",{class:!0});var u=x(e);o&&o.l(u),u.forEach(b),this.h()},h(){k(e,"class","svelte-p5wejv")},m(s,u){L(s,e,u),o&&o.m(e,null),l[4](e),t=!0,n||(r=J(e,"close",l[3]),n=!0)},p(s,[u]){o&&o.p&&(!t||u&2)&&At(o,i,s,s[1],t?St(i,s[1],u,null):Ot(s[1]),null)},i(s){t||(P(o,s),t=!0)},o(s){B(o,s),t=!1},d(s){s&&b(e),o&&o.d(s),l[4](null),n=!1,r()}}}function on(l,e,t){let{$$slots:n={},$$scope:r}=e,{dialog:i}=e;function o(u){Ut.call(this,l,u)}function s(u){ge[u?"unshift":"push"](()=>{i=u,t(0,i)})}return l.$$set=u=>{"dialog"in u&&t(0,i=u.dialog),"$$scope"in u&&t(1,r=u.$$scope)},[i,r,n,o,s]}class lt extends ie{constructor(e){super(),se(this,e,on,rn,oe,{dialog:0})}}const it=16,sn=2**20-1;function Yt(l,e){const t=l[0];if(!(t instanceof me)){alert("The path does not start with a CE");return}const n=l[1];if(!(n instanceof Le)){alert("The source CE is not directly connected to an LER");return}if(t.firstHop.set(e,n.id),n.FIB.get(e))return;const r=l.length-2,i=l[r];if(!(i instanceof Le)){alert("Destination CE is not connected directly to a LER");return}let o=st(l[r]);i.LIB.receiveEntry(o,-1,e);for(let s=l.length-2;s>0;s--){const u=l[s],c=l[s-1],a=o;o=st(u),c instanceof Le?c.FIB.receiveEntry(e,a,u.id.toString()):c instanceof Fe&&c.LIB.receiveEntry(o,a,u.id.toString())}}function un(l,e){return l instanceof Fe||l instanceof Le?l.LIB.map.has(e):!1}function st(l){let e;do e=Math.floor(Math.random()*(sn-it+1)+it);while(un(l,e));return e}function an(l){let e,t,n,r;return{c(){e=I("button"),t=ne(l[0]),this.h()},l(i){e=R(i,"BUTTON",{class:!0});var o=x(e);t=le(o,l[0]),o.forEach(b),this.h()},h(){k(e,"class","svelte-17itt71")},m(i,o){L(i,e,o),C(e,t),n||(r=J(e,"click",function(){jt(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(i,[o]){l=i,o&1&&$e(t,l[0])},i:fe,o:fe,d(i){i&&b(e),n=!1,r()}}}function fn(l,e,t){let{text:n}=e,{callback:r}=e;return l.$$set=i=>{"text"in i&&t(0,n=i.text),"callback"in i&&t(1,r=i.callback)},[n,r]}class Te extends ie{constructor(e){super(),se(this,e,fn,an,oe,{text:0,callback:1})}}function ut(l,e,t){const n=l.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function at(l){let e,t,n,r,i,o,s,u,c,a,p,d,g,h,$,_,f,m;function v(...y){return l[5](l[9],...y)}function A(...y){return l[6](l[9],...y)}function M(){return l[7](l[9])}p=new Te({props:{text:"LDP",callback:M}});function D(){return l[8](l[9])}return h=new Te({props:{text:"-",callback:D}}),{c(){e=I("tr"),t=I("td"),n=I("input"),i=N(),o=I("td"),s=I("input"),c=N(),a=I("td"),U(p.$$.fragment),d=N(),g=I("td"),U(h.$$.fragment),$=N(),this.h()},l(y){e=R(y,"TR",{});var T=x(e);t=R(T,"TD",{});var S=x(t);n=R(S,"INPUT",{type:!0,placeholder:!0}),S.forEach(b),i=H(T),o=R(T,"TD",{});var E=x(o);s=R(E,"INPUT",{type:!0,placeholder:!0}),E.forEach(b),c=H(T),a=R(T,"TD",{});var F=x(a);j(p.$$.fragment,F),F.forEach(b),d=H(T),g=R(T,"TD",{});var G=x(g);j(h.$$.fragment,G),G.forEach(b),$=H(T),T.forEach(b),this.h()},h(){k(n,"type","text"),n.value=r=l[9],k(n,"placeholder","Address"),k(s,"type","text"),s.value=u=l[10],k(s,"placeholder","Link")},m(y,T){L(y,e,T),C(e,t),C(t,n),C(e,i),C(e,o),C(o,s),C(e,c),C(e,a),q(p,a,null),C(e,d),C(e,g),q(h,g,null),C(e,$),_=!0,f||(m=[J(n,"change",v),J(s,"change",A)],f=!0)},p(y,T){l=y,(!_||T&1&&r!==(r=l[9])&&n.value!==r)&&(n.value=r),(!_||T&1&&u!==(u=l[10])&&s.value!==u)&&(s.value=u);const S={};T&1&&(S.callback=M),p.$set(S);const E={};T&1&&(E.callback=D),h.$set(E)},i(y){_||(P(p.$$.fragment,y),P(h.$$.fragment,y),_=!0)},o(y){B(p.$$.fragment,y),B(h.$$.fragment,y),_=!1},d(y){y&&b(e),V(p),V(h),f=!1,Me(m)}}}function cn(l){let e,t="Destinations:",n,r,i,o='<tr><th class="svelte-1d4gizi">Destination</th> <th class="svelte-1d4gizi">First hop</th> <th class="svelte-1d4gizi"></th> <th class="svelte-1d4gizi"></th></tr>',s,u,c,a,p,d,g=ee([...l[0].firstHop]),h=[];for(let _=0;_<g.length;_+=1)h[_]=at(ut(l,g,_));const $=_=>B(h[_],1,1,()=>{h[_]=null});return p=new Te({props:{text:"+",callback:l[1](l[0].addEmptyEntry)}}),{c(){e=I("p"),e.textContent=t,n=N(),r=I("table"),i=I("thead"),i.innerHTML=o,s=N(),u=I("tbody");for(let _=0;_<h.length;_+=1)h[_].c();c=N(),a=I("div"),U(p.$$.fragment),this.h()},l(_){e=R(_,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1ixmdgd"&&(e.textContent=t),n=H(_),r=R(_,"TABLE",{});var f=x(r);i=R(f,"THEAD",{"data-svelte-h":!0}),ce(i)!=="svelte-1jq34m8"&&(i.innerHTML=o),s=H(f),u=R(f,"TBODY",{});var m=x(u);for(let A=0;A<h.length;A+=1)h[A].l(m);m.forEach(b),f.forEach(b),c=H(_),a=R(_,"DIV",{class:!0});var v=x(a);j(p.$$.fragment,v),v.forEach(b),this.h()},h(){k(a,"class","svelte-1d4gizi")},m(_,f){L(_,e,f),L(_,n,f),L(_,r,f),C(r,i),C(r,s),C(r,u);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(u,null);L(_,c,f),L(_,a,f),q(p,a,null),d=!0},p(_,[f]){if(f&29){g=ee([..._[0].firstHop]);let v;for(v=0;v<g.length;v+=1){const A=ut(_,g,v);h[v]?(h[v].p(A,f),P(h[v],1)):(h[v]=at(A),h[v].c(),P(h[v],1),h[v].m(u,null))}for(pe(),v=g.length;v<h.length;v+=1)$(v);_e()}const m={};f&1&&(m.callback=_[1](_[0].addEmptyEntry)),p.$set(m)},i(_){if(!d){for(let f=0;f<g.length;f+=1)P(h[f]);P(p.$$.fragment,_),d=!0}},o(_){h=h.filter(Boolean);for(let f=0;f<h.length;f+=1)B(h[f]);B(p.$$.fragment,_),d=!1},d(_){_&&(b(e),b(n),b(r),b(c),b(a)),Pe(h,_),V(p)}}}function dn(l,e,t){let{router:n}=e;function r(d){return()=>{d(),t(0,n)}}function i(d,g){if(!(d.target instanceof HTMLInputElement))return;const h=d.target.value.toUpperCase();if(!O.getCERouter(h)){alert("Destination router not found.");return}n.updateAddress(g,h),t(0,n)}function o(d){const g=O.getCERouter(d);if(!g){alert("Destination router not found.");return}const h=nt(n,g);if(h.length<=1){alert("No path found");return}Yt(h,d),t(0,n)}function s(d,g){if(!(d.target instanceof HTMLInputElement))return;const h=parseInt(d.target.value);n.firstHop.set(g,h)}const u=(d,g)=>{i(g,d)},c=(d,g)=>{s(g,d)},a=d=>{o(d)},p=d=>{n.firstHop.delete(d),t(0,n)};return l.$$set=d=>{"router"in d&&t(0,n=d.router)},[n,r,i,o,s,u,c,a,p]}class hn extends ie{constructor(e){super(),se(this,e,dn,cn,oe,{router:0})}}function ft(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function ct(l){let e,t,n,r,i,o,s,u,c,a,p,d,g,h,$,_;function f(...M){return l[3](l[7],...M)}function m(){l[4].call(s,l[9],l[10])}function v(){l[5].call(a,l[9],l[10])}function A(){return l[6](l[7])}return d=new Te({props:{text:"-",callback:A}}),{c(){e=I("tr"),t=I("td"),n=I("input"),i=N(),o=I("td"),s=I("input"),u=N(),c=I("td"),a=I("input"),p=N(),U(d.$$.fragment),g=N(),this.h()},l(M){e=R(M,"TR",{});var D=x(e);t=R(D,"TD",{});var y=x(t);n=R(y,"INPUT",{type:!0}),y.forEach(b),i=H(D),o=R(D,"TD",{});var T=x(o);s=R(T,"INPUT",{type:!0}),T.forEach(b),u=H(D),c=R(D,"TD",{});var S=x(c);a=R(S,"INPUT",{type:!0}),S.forEach(b),p=H(D),j(d.$$.fragment,D),g=H(D),D.forEach(b),this.h()},h(){k(n,"type","number"),n.value=r=l[7],k(s,"type","number"),k(a,"type","text")},m(M,D){L(M,e,D),C(e,t),C(t,n),C(e,i),C(e,o),C(o,s),ae(s,l[8].outgoingLabel),C(e,u),C(e,c),C(c,a),ae(a,l[8].nextHop),C(e,p),q(d,e,null),C(e,g),h=!0,$||(_=[J(n,"change",f),J(s,"input",m),J(a,"input",v)],$=!0)},p(M,D){l=M,(!h||D&1&&r!==(r=l[7])&&n.value!==r)&&(n.value=r),D&1&&we(s.value)!==l[8].outgoingLabel&&ae(s,l[8].outgoingLabel),D&1&&a.value!==l[8].nextHop&&ae(a,l[8].nextHop);const y={};D&1&&(y.callback=A),d.$set(y)},i(M){h||(P(d.$$.fragment,M),h=!0)},o(M){B(d.$$.fragment,M),h=!1},d(M){M&&b(e),V(d),$=!1,Me(_)}}}function pn(l){let e,t="LIB:",n,r,i,o="<tr><th>Incoming</th> <th>Outgoing</th> <th>Next hop</th> <th></th></tr>",s,u,c,a,p,d,g=ee([...l[0].LIB.map]),h=[];for(let _=0;_<g.length;_+=1)h[_]=ct(ft(l,g,_));const $=_=>B(h[_],1,1,()=>{h[_]=null});return p=new Te({props:{text:"+",callback:l[1](l[0].LIB.addEmptyEntry)}}),{c(){e=I("p"),e.textContent=t,n=N(),r=I("table"),i=I("thead"),i.innerHTML=o,s=N(),u=I("tbody");for(let _=0;_<h.length;_+=1)h[_].c();c=N(),a=I("div"),U(p.$$.fragment),this.h()},l(_){e=R(_,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1j64kst"&&(e.textContent=t),n=H(_),r=R(_,"TABLE",{});var f=x(r);i=R(f,"THEAD",{"data-svelte-h":!0}),ce(i)!=="svelte-1fy2y89"&&(i.innerHTML=o),s=H(f),u=R(f,"TBODY",{});var m=x(u);for(let A=0;A<h.length;A+=1)h[A].l(m);m.forEach(b),f.forEach(b),c=H(_),a=R(_,"DIV",{class:!0});var v=x(a);j(p.$$.fragment,v),v.forEach(b),this.h()},h(){k(a,"class","svelte-f8qi58")},m(_,f){L(_,e,f),L(_,n,f),L(_,r,f),C(r,i),C(r,s),C(r,u);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(u,null);L(_,c,f),L(_,a,f),q(p,a,null),d=!0},p(_,[f]){if(f&5){g=ee([..._[0].LIB.map]);let v;for(v=0;v<g.length;v+=1){const A=ft(_,g,v);h[v]?(h[v].p(A,f),P(h[v],1)):(h[v]=ct(A),h[v].c(),P(h[v],1),h[v].m(u,null))}for(pe(),v=g.length;v<h.length;v+=1)$(v);_e()}const m={};f&1&&(m.callback=_[1](_[0].LIB.addEmptyEntry)),p.$set(m)},i(_){if(!d){for(let f=0;f<g.length;f+=1)P(h[f]);P(p.$$.fragment,_),d=!0}},o(_){h=h.filter(Boolean);for(let f=0;f<h.length;f+=1)B(h[f]);B(p.$$.fragment,_),d=!1},d(_){_&&(b(e),b(n),b(r),b(c),b(a)),Pe(h,_),V(p)}}}function _n(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function i(a,p){if(!(a.target instanceof HTMLInputElement))return;const d=parseInt(a.target.value);n.LIB.updateLabel(p,d)}const o=(a,p)=>{i(p,a)};function s(a,p){a[p][1].outgoingLabel=we(this.value),t(0,n)}function u(a,p){a[p][1].nextHop=this.value,t(0,n)}const c=a=>{n.LIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,i,o,s,u,c]}class gn extends ie{constructor(e){super(),se(this,e,_n,pn,oe,{router:0})}}function dt(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function ht(l){let e,t,n,r,i,o,s,u,c,a,p,d,g,h,$,_;function f(...M){return l[3](l[7],...M)}function m(){l[4].call(s,l[9],l[10])}function v(){l[5].call(a,l[9],l[10])}function A(){return l[6](l[7])}return d=new Te({props:{text:"-",callback:A}}),{c(){e=I("tr"),t=I("td"),n=I("input"),i=N(),o=I("td"),s=I("input"),u=N(),c=I("td"),a=I("input"),p=N(),U(d.$$.fragment),g=N(),this.h()},l(M){e=R(M,"TR",{});var D=x(e);t=R(D,"TD",{});var y=x(t);n=R(y,"INPUT",{type:!0}),y.forEach(b),i=H(D),o=R(D,"TD",{});var T=x(o);s=R(T,"INPUT",{type:!0}),T.forEach(b),u=H(D),c=R(D,"TD",{});var S=x(c);a=R(S,"INPUT",{type:!0}),S.forEach(b),p=H(D),j(d.$$.fragment,D),g=H(D),D.forEach(b),this.h()},h(){k(n,"type","text"),n.value=r=l[7],k(s,"type","number"),k(a,"type","text")},m(M,D){L(M,e,D),C(e,t),C(t,n),C(e,i),C(e,o),C(o,s),ae(s,l[8].label),C(e,u),C(e,c),C(c,a),ae(a,l[8].nextHop),C(e,p),q(d,e,null),C(e,g),h=!0,$||(_=[J(n,"change",f),J(s,"input",m),J(a,"input",v)],$=!0)},p(M,D){l=M,(!h||D&1&&r!==(r=l[7])&&n.value!==r)&&(n.value=r),D&1&&we(s.value)!==l[8].label&&ae(s,l[8].label),D&1&&a.value!==l[8].nextHop&&ae(a,l[8].nextHop);const y={};D&1&&(y.callback=A),d.$set(y)},i(M){h||(P(d.$$.fragment,M),h=!0)},o(M){B(d.$$.fragment,M),h=!1},d(M){M&&b(e),V(d),$=!1,Me(_)}}}function mn(l){let e,t="FIB:",n,r,i,o="<tr><th>Address</th> <th>Label</th> <th>Next hop</th> <th></th></tr>",s,u,c,a,p,d,g=ee([...l[0].FIB.map]),h=[];for(let _=0;_<g.length;_+=1)h[_]=ht(dt(l,g,_));const $=_=>B(h[_],1,1,()=>{h[_]=null});return p=new Te({props:{text:"+",callback:l[1](l[0].FIB.addEmptyEntry)}}),{c(){e=I("p"),e.textContent=t,n=N(),r=I("table"),i=I("thead"),i.innerHTML=o,s=N(),u=I("tbody");for(let _=0;_<h.length;_+=1)h[_].c();c=N(),a=I("div"),U(p.$$.fragment),this.h()},l(_){e=R(_,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1j6bdhj"&&(e.textContent=t),n=H(_),r=R(_,"TABLE",{});var f=x(r);i=R(f,"THEAD",{"data-svelte-h":!0}),ce(i)!=="svelte-1qhs6t7"&&(i.innerHTML=o),s=H(f),u=R(f,"TBODY",{});var m=x(u);for(let A=0;A<h.length;A+=1)h[A].l(m);m.forEach(b),f.forEach(b),c=H(_),a=R(_,"DIV",{class:!0});var v=x(a);j(p.$$.fragment,v),v.forEach(b),this.h()},h(){k(a,"class","svelte-f8qi58")},m(_,f){L(_,e,f),L(_,n,f),L(_,r,f),C(r,i),C(r,s),C(r,u);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(u,null);L(_,c,f),L(_,a,f),q(p,a,null),d=!0},p(_,[f]){if(f&5){g=ee([..._[0].FIB.map]);let v;for(v=0;v<g.length;v+=1){const A=dt(_,g,v);h[v]?(h[v].p(A,f),P(h[v],1)):(h[v]=ht(A),h[v].c(),P(h[v],1),h[v].m(u,null))}for(pe(),v=g.length;v<h.length;v+=1)$(v);_e()}const m={};f&1&&(m.callback=_[1](_[0].FIB.addEmptyEntry)),p.$set(m)},i(_){if(!d){for(let f=0;f<g.length;f+=1)P(h[f]);P(p.$$.fragment,_),d=!0}},o(_){h=h.filter(Boolean);for(let f=0;f<h.length;f+=1)B(h[f]);B(p.$$.fragment,_),d=!1},d(_){_&&(b(e),b(n),b(r),b(c),b(a)),Pe(h,_),V(p)}}}function bn(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function i(a,p){if(!(a.target instanceof HTMLInputElement))return;const d=a.target.value;n.FIB.updateAddress(p,d)}const o=(a,p)=>{i(p,a)};function s(a,p){a[p][1].label=we(this.value),t(0,n)}function u(a,p){a[p][1].nextHop=this.value,t(0,n)}const c=a=>{n.FIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,i,o,s,u,c]}class kn extends ie{constructor(e){super(),se(this,e,bn,mn,oe,{router:0})}}function vn(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=I("p"),e.textContent=t},l(n){e=R(n,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,r){L(n,e,r)},p:fe,i:fe,o:fe,d(n){n&&b(e)}}}function $n(l){let e,t,n,r,i,o,s,u,c,a,p,d,g,h,$=l[0].id+"",_,f,m,v,A,M,D,y,T,S,E=l[0]instanceof me&&pt(l),F=l[0]instanceof Le&&_t(l),G=(l[0]instanceof Le||l[0]instanceof Fe)&&gt(l);return D=new Te({props:{text:"Delete Router",callback:l[3]}}),{c(){e=I("div"),t=I("div"),n=I("label"),r=ne(`Label:
          `),i=I("input"),o=N(),s=I("label"),u=ne(`Position:
        `),c=I("input"),a=N(),p=I("input"),d=N(),g=I("p"),h=ne("ID: "),_=ne($),f=N(),E&&E.c(),m=N(),F&&F.c(),v=N(),G&&G.c(),A=N(),M=I("div"),U(D.$$.fragment),this.h()},l(z){e=R(z,"DIV",{});var W=x(e);t=R(W,"DIV",{});var Be=x(t);n=R(Be,"LABEL",{});var de=x(n);r=le(de,`Label:
          `),i=R(de,"INPUT",{type:!0,class:!0}),de.forEach(b),Be.forEach(b),o=H(W),s=R(W,"LABEL",{});var Ce=x(s);u=le(Ce,`Position:
        `),c=R(Ce,"INPUT",{type:!0,class:!0}),a=H(Ce),p=R(Ce,"INPUT",{type:!0,class:!0}),Ce.forEach(b),d=H(W),g=R(W,"P",{});var be=x(g);h=le(be,"ID: "),_=le(be,$),be.forEach(b),W.forEach(b),f=H(z),E&&E.l(z),m=H(z),F&&F.l(z),v=H(z),G&&G.l(z),A=H(z),M=R(z,"DIV",{class:!0});var Re=x(M);j(D.$$.fragment,Re),Re.forEach(b),this.h()},h(){k(i,"type","text"),k(i,"class","svelte-cihl2i"),k(c,"type","number"),c.disabled=l[2],k(c,"class","svelte-cihl2i"),k(p,"type","number"),p.disabled=l[2],k(p,"class","svelte-cihl2i"),k(M,"class","margin-top svelte-cihl2i")},m(z,W){L(z,e,W),C(e,t),C(t,n),C(n,r),C(n,i),ae(i,l[0].node.label),C(e,o),C(e,s),C(s,u),C(s,c),ae(c,l[0].node.x),C(s,a),C(s,p),ae(p,l[0].node.y),C(e,d),C(e,g),C(g,h),C(g,_),L(z,f,W),E&&E.m(z,W),L(z,m,W),F&&F.m(z,W),L(z,v,W),G&&G.m(z,W),L(z,A,W),L(z,M,W),q(D,M,null),y=!0,T||(S=[J(i,"input",l[4]),J(c,"input",l[5]),J(p,"input",l[6]),J(e,"input",l[7])],T=!0)},p(z,W){W&1&&i.value!==z[0].node.label&&ae(i,z[0].node.label),(!y||W&4)&&(c.disabled=z[2]),W&1&&we(c.value)!==z[0].node.x&&ae(c,z[0].node.x),(!y||W&4)&&(p.disabled=z[2]),W&1&&we(p.value)!==z[0].node.y&&ae(p,z[0].node.y),(!y||W&1)&&$!==($=z[0].id+"")&&$e(_,$),z[0]instanceof me?E?(E.p(z,W),W&1&&P(E,1)):(E=pt(z),E.c(),P(E,1),E.m(m.parentNode,m)):E&&(pe(),B(E,1,1,()=>{E=null}),_e()),z[0]instanceof Le?F?(F.p(z,W),W&1&&P(F,1)):(F=_t(z),F.c(),P(F,1),F.m(v.parentNode,v)):F&&(pe(),B(F,1,1,()=>{F=null}),_e()),z[0]instanceof Le||z[0]instanceof Fe?G?(G.p(z,W),W&1&&P(G,1)):(G=gt(z),G.c(),P(G,1),G.m(A.parentNode,A)):G&&(pe(),B(G,1,1,()=>{G=null}),_e())},i(z){y||(P(E),P(F),P(G),P(D.$$.fragment,z),y=!0)},o(z){B(E),B(F),B(G),B(D.$$.fragment,z),y=!1},d(z){z&&(b(e),b(f),b(m),b(v),b(A),b(M)),E&&E.d(z),F&&F.d(z),G&&G.d(z),V(D),T=!1,Me(S)}}}function pt(l){let e,t="Address:",n,r,i=l[0].address+"",o,s,u,c,a,p,d,g;function h(_){l[9](_)}let $={};return l[0]!==void 0&&($.router=l[0]),c=new hn({props:$}),ge.push(()=>Ee(c,"router",h)),{c(){e=I("p"),e.textContent=t,n=N(),r=I("button"),o=ne(i),s=N(),u=I("div"),U(c.$$.fragment),this.h()},l(_){e=R(_,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-18hoeeh"&&(e.textContent=t),n=H(_),r=R(_,"BUTTON",{class:!0});var f=x(r);o=le(f,i),f.forEach(b),s=H(_),u=R(_,"DIV",{class:!0});var m=x(u);j(c.$$.fragment,m),m.forEach(b),this.h()},h(){ze(e,"display","inline"),k(r,"class","svelte-cihl2i"),k(u,"class","margin-top svelte-cihl2i")},m(_,f){L(_,e,f),L(_,n,f),L(_,r,f),C(r,o),L(_,s,f),L(_,u,f),q(c,u,null),p=!0,d||(g=J(r,"click",l[8]),d=!0)},p(_,f){(!p||f&1)&&i!==(i=_[0].address+"")&&$e(o,i);const m={};!a&&f&1&&(a=!0,m.router=_[0],ye(()=>a=!1)),c.$set(m)},i(_){p||(P(c.$$.fragment,_),p=!0)},o(_){B(c.$$.fragment,_),p=!1},d(_){_&&(b(e),b(n),b(r),b(s),b(u)),V(c),d=!1,g()}}}function _t(l){let e,t,n,r;function i(s){l[10](s)}let o={};return l[0]!==void 0&&(o.router=l[0]),t=new kn({props:o}),ge.push(()=>Ee(t,"router",i)),{c(){e=I("div"),U(t.$$.fragment),this.h()},l(s){e=R(s,"DIV",{class:!0});var u=x(e);j(t.$$.fragment,u),u.forEach(b),this.h()},h(){k(e,"class","margin-top svelte-cihl2i")},m(s,u){L(s,e,u),q(t,e,null),r=!0},p(s,u){const c={};!n&&u&1&&(n=!0,c.router=s[0],ye(()=>n=!1)),t.$set(c)},i(s){r||(P(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){s&&b(e),V(t)}}}function gt(l){let e,t,n,r;function i(s){l[11](s)}let o={};return l[0]!==void 0&&(o.router=l[0]),t=new gn({props:o}),ge.push(()=>Ee(t,"router",i)),{c(){e=I("div"),U(t.$$.fragment),this.h()},l(s){e=R(s,"DIV",{class:!0});var u=x(e);j(t.$$.fragment,u),u.forEach(b),this.h()},h(){k(e,"class","margin-top svelte-cihl2i")},m(s,u){L(s,e,u),q(t,e,null),r=!0},p(s,u){const c={};!n&&u&1&&(n=!0,c.router=s[0],ye(()=>n=!1)),t.$set(c)},i(s){r||(P(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){s&&b(e),V(t)}}}function yn(l){let e,t,n,r;const i=[$n,vn],o=[];function s(u,c){return u[0]?0:1}return e=s(l),t=o[e]=i[e](l),{c(){t.c(),n=re()},l(u){t.l(u),n=re()},m(u,c){o[e].m(u,c),L(u,n,c),r=!0},p(u,c){let a=e;e=s(u),e===a?o[e].p(u,c):(pe(),B(o[a],1,1,()=>{o[a]=null}),_e(),t=o[e],t?t.p(u,c):(t=o[e]=i[e](u),t.c()),P(t,1),t.m(n.parentNode,n))},i(u){r||(P(t),r=!0)},o(u){B(t),r=!1},d(u){u&&b(n),o[e].d(u)}}}function En(l){let e,t,n;function r(o){l[12](o)}let i={$$slots:{default:[yn]},$$scope:{ctx:l}};return l[1]!==void 0&&(i.dialog=l[1]),e=new lt({props:i}),ge.push(()=>Ee(e,"dialog",r)),e.$on("close",l[13]),{c(){U(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,s){q(e,o,s),n=!0},p(o,[s]){const u={};s&16389&&(u.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,u.dialog=o[1],ye(()=>t=!1)),e.$set(u)},i(o){n||(P(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){V(e,o)}}}function wn(l,e,t){let n;ve(l,He,f=>t(2,n=f));let{router:r}=e,{dialog:i}=e;function o(){if(!n&&r){if(!confirm("Are you sure you want to delete this router?"))return;O.deleteRouter(r.id),i.close()}else alert("You can't delete a router while the network is locked.")}function s(){r.node.label=this.value,t(0,r)}function u(){r.node.x=we(this.value),t(0,r)}function c(){r.node.y=we(this.value),t(0,r)}const a=()=>{O.notify()},p=async()=>{r instanceof me&&await navigator.clipboard.writeText(r.address)};function d(f){r=f,t(0,r)}function g(f){r=f,t(0,r)}function h(f){r=f,t(0,r)}function $(f){i=f,t(1,i)}const _=()=>{if(r instanceof me)for(const f of r.firstHop.keys())f===""&&r.firstHop.delete(f);O.notify()};return l.$$set=f=>{"router"in f&&t(0,r=f.router),"dialog"in f&&t(1,i=f.dialog)},[r,i,n,o,s,u,c,a,p,d,g,h,$,_]}class Cn extends ie{constructor(e){super(),se(this,e,wn,En,oe,{router:0,dialog:1})}}function Ln(l){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=I("p"),e.textContent=t},l(n){e=R(n,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,r){L(n,e,r)},p:fe,i:fe,o:fe,d(n){n&&b(e)}}}function In(l){let e,t=l[0].distance+"",n,r,i,o,s,u,c,a,p,d,g;return a=new Te({props:{text:"Delete Link",callback:l[3]}}),{c(){e=ne("Distance: "),n=ne(t),r=ne(` km
    `),i=I("label"),o=ne(`Bandwidth:
      `),s=I("input"),u=N(),c=I("div"),U(a.$$.fragment),this.h()},l(h){e=le(h,"Distance: "),n=le(h,t),r=le(h,` km
    `),i=R(h,"LABEL",{class:!0});var $=x(i);o=le($,`Bandwidth:
      `),s=R($,"INPUT",{type:!0,class:!0}),$.forEach(b),u=H(h),c=R(h,"DIV",{class:!0});var _=x(c);j(a.$$.fragment,_),_.forEach(b),this.h()},h(){k(s,"type","number"),s.disabled=l[2],k(s,"class","svelte-11gx5jd"),k(i,"class","svelte-11gx5jd"),k(c,"class","svelte-11gx5jd")},m(h,$){L(h,e,$),L(h,n,$),L(h,r,$),L(h,i,$),C(i,o),C(i,s),ae(s,l[0].bandwidth),L(h,u,$),L(h,c,$),q(a,c,null),p=!0,d||(g=J(s,"input",l[4]),d=!0)},p(h,$){(!p||$&1)&&t!==(t=h[0].distance+"")&&$e(n,t),(!p||$&4)&&(s.disabled=h[2]),$&1&&we(s.value)!==h[0].bandwidth&&ae(s,h[0].bandwidth)},i(h){p||(P(a.$$.fragment,h),p=!0)},o(h){B(a.$$.fragment,h),p=!1},d(h){h&&(b(e),b(n),b(r),b(i),b(u),b(c)),V(a),d=!1,g()}}}function Rn(l){let e,t,n,r;const i=[In,Ln],o=[];function s(u,c){return u[0]?0:1}return e=s(l),t=o[e]=i[e](l),{c(){t.c(),n=re()},l(u){t.l(u),n=re()},m(u,c){o[e].m(u,c),L(u,n,c),r=!0},p(u,c){let a=e;e=s(u),e===a?o[e].p(u,c):(pe(),B(o[a],1,1,()=>{o[a]=null}),_e(),t=o[e],t?t.p(u,c):(t=o[e]=i[e](u),t.c()),P(t,1),t.m(n.parentNode,n))},i(u){r||(P(t),r=!0)},o(u){B(t),r=!1},d(u){u&&b(n),o[e].d(u)}}}function Dn(l){let e,t,n;function r(o){l[5](o)}let i={$$slots:{default:[Rn]},$$scope:{ctx:l}};return l[1]!==void 0&&(i.dialog=l[1]),e=new lt({props:i}),ge.push(()=>Ee(e,"dialog",r)),e.$on("close",l[6]),{c(){U(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,s){q(e,o,s),n=!0},p(o,[s]){const u={};s&133&&(u.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,u.dialog=o[1],ye(()=>t=!1)),e.$set(u)},i(o){n||(P(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){V(e,o)}}}function Pn(l,e,t){let n;ve(l,He,a=>t(2,n=a));let{link:r}=e,{dialog:i}=e;function o(){if(!n&&r){if(!confirm("Are you sure you want to delete this link?"))return;O.deleteLink(r.id),i.close()}else alert("You can't delete a link while the network is locked.")}function s(){r.bandwidth=we(this.value),t(0,r)}function u(a){i=a,t(1,i)}const c=()=>{O.notify()};return l.$$set=a=>{"link"in a&&t(0,r=a.link),"dialog"in a&&t(1,i=a.dialog)},[r,i,n,o,s,u,c]}class Tn extends ie{constructor(e){super(),se(this,e,Pn,Dn,oe,{link:0,dialog:1})}}function mt(l){let e,t="Loading...";return{c(){e=I("p"),e.textContent=t,this.h()},l(n){e=R(n,"P",{style:!0,"data-svelte-h":!0}),ce(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){ze(e,"font-size","200px")},m(n,r){L(n,e,r)},d(n){n&&b(e)}}}function bt(l){let e,t,n,r,i,o;return{c(){e=xe("line"),this.h()},l(s){e=Ne(s,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),x(e).forEach(b),this.h()},h(){k(e,"class","preview"),k(e,"x1",t=l[4].node.x),k(e,"y1",n=l[4].node.y),k(e,"x2",r=l[17](l[2].x)),k(e,"y2",i=l[18](l[2].y)),k(e,"stroke",o=l[6]===l[11].CONNECTING?"green":"blue")},m(s,u){L(s,e,u)},p(s,u){u[0]&16&&t!==(t=s[4].node.x)&&k(e,"x1",t),u[0]&16&&n!==(n=s[4].node.y)&&k(e,"y1",n),u[0]&4&&r!==(r=s[17](s[2].x))&&k(e,"x2",r),u[0]&4&&i!==(i=s[18](s[2].y))&&k(e,"y2",i),u[0]&64&&o!==(o=s[6]===s[11].CONNECTING?"green":"blue")&&k(e,"stroke",o)},d(s){s&&b(e)}}}function Bn(l){let e,t,n,r,i,o,s,u,c,a,p,d,g,h,$,_=!l[9]&&mt(),f=(!l[0]&&l[6]===l[11].CONNECTING||l[6]===l[11].ADDING_DESTINATION)&&l[4]&&bt(l);const m=l[21].default,v=Ft(m,l,l[20],null);function A(E){l[24](E)}function M(E){l[25](E)}let D={};l[4]!==void 0&&(D.router=l[4]),l[7]!==void 0&&(D.dialog=l[7]),o=new Cn({props:D}),ge.push(()=>Ee(o,"router",A)),ge.push(()=>Ee(o,"dialog",M));function y(E){l[26](E)}function T(E){l[27](E)}let S={};return l[5]!==void 0&&(S.link=l[5]),l[8]!==void 0&&(S.dialog=l[8]),a=new Tn({props:S}),ge.push(()=>Ee(a,"link",y)),ge.push(()=>Ee(a,"dialog",T)),{c(){_&&_.c(),e=N(),t=xe("svg"),f&&f.c(),n=re(),v&&v.c(),i=N(),U(o.$$.fragment),c=N(),U(a.$$.fragment),this.h()},l(E){_&&_.l(E),e=H(E),t=Ne(E,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var F=x(t);f&&f.l(F),n=re(),v&&v.l(F),F.forEach(b),i=H(E),j(o.$$.fragment,E),c=H(E),j(a.$$.fragment,E),this.h()},h(){k(t,"viewBox",r=`${l[1].x} ${l[1].y} ${l[1].width} ${l[1].height}`),k(t,"role","button"),k(t,"tabindex","-1"),k(t,"class","svelte-1cmb9l6"),ze(t,"cursor",l[10][l[6]])},m(E,F){_&&_.m(E,F),L(E,e,F),L(E,t,F),f&&f.m(t,null),C(t,n),v&&v.m(t,null),l[23](t),L(E,i,F),q(o,E,F),L(E,c,F),q(a,E,F),g=!0,h||($=[J(t,"pointerdown",l[12]),J(t,"pointerup",l[13]),J(t,"wheel",l[14]),J(t,"dblclick",l[15]),J(t,"dragover",Jt(l[22])),J(t,"drop",l[16])],h=!0)},p(E,F){E[9]?_&&(_.d(1),_=null):_||(_=mt(),_.c(),_.m(e.parentNode,e)),(!E[0]&&E[6]===E[11].CONNECTING||E[6]===E[11].ADDING_DESTINATION)&&E[4]?f?f.p(E,F):(f=bt(E),f.c(),f.m(t,n)):f&&(f.d(1),f=null),v&&v.p&&(!g||F[0]&1048576)&&At(v,m,E,E[20],g?St(m,E[20],F,null):Ot(E[20]),null),(!g||F[0]&2&&r!==(r=`${E[1].x} ${E[1].y} ${E[1].width} ${E[1].height}`))&&k(t,"viewBox",r),F[0]&1088&&ze(t,"cursor",E[10][E[6]]);const G={};!s&&F[0]&16&&(s=!0,G.router=E[4],ye(()=>s=!1)),!u&&F[0]&128&&(u=!0,G.dialog=E[7],ye(()=>u=!1)),o.$set(G);const z={};!p&&F[0]&32&&(p=!0,z.link=E[5],ye(()=>p=!1)),!d&&F[0]&256&&(d=!0,z.dialog=E[8],ye(()=>d=!1)),a.$set(z)},i(E){g||(P(v,E),P(o.$$.fragment,E),P(a.$$.fragment,E),g=!0)},o(E){B(v,E),B(o.$$.fragment,E),B(a.$$.fragment,E),g=!1},d(E){E&&(b(e),b(t),b(i),b(c)),_&&_.d(E),f&&f.d(),v&&v.d(E),l[23](null),V(o,E),V(a,E),h=!1,Me($)}}}function xn(l,e,t){let n,r;ve(l,He,w=>t(0,r=w));let{$$slots:i={},$$scope:o}=e;var s=(w=>(w[w.NONE=0]="NONE",w[w.DRAGGING=1]="DRAGGING",w[w.PANNING=2]="PANNING",w[w.CONNECTING=3]="CONNECTING",w[w.ADDING_DESTINATION=4]="ADDING_DESTINATION",w))(s||{});const u={x:0,y:0,width:0,height:0,get scale(){return p?this.width/p.getBoundingClientRect().width:1}},c={x:0,y:0},a={x:0,y:0};let p=null,d=null,g=null,h=0,$,_,f=!1;qt(()=>{if(!p)return;new ResizeObserver(m).observe(p),requestAnimationFrame(()=>{p&&(t(1,u.x=p.getBoundingClientRect().width/-2,u),t(1,u.y=p.getBoundingClientRect().height/-2,u))}),t(9,f=!0)});function m(){if(!p)return;const w=u.scale||1;t(1,u.width=p.getBoundingClientRect().width*w,u),t(1,u.height=p.getBoundingClientRect().height*w,u)}function v(w){if(!(w.target instanceof Element))return;w.preventDefault(),p==null||p.addEventListener("pointermove",M),p==null||p.setPointerCapture(w.pointerId);const K=w.target.id;if(K){if(t(4,d=O.getRouter(parseInt(K))||null),!d)return;w.shiftKey?t(6,h=3):w.altKey&&d instanceof me?t(6,h=4):(a.x=d.node.x,a.y=d.node.y,t(6,h=1))}else t(6,h=2);t(2,c.x=w.clientX,c),t(2,c.y=w.clientY,c)}function A(w){if(w.target instanceof Element){w.preventDefault();e:if(d&&h===4){const K=document.elementFromPoint(w.clientX,w.clientY),he=(K==null?void 0:K.tagName)==="circle"?K.id:null,ue=O.getRouter(parseInt(he??""));if(!ue||d===ue)break e;if(!(ue instanceof me)){alert("Destination must be a CE");break e}const Q=nt(d,ue);if(Q.length<=1){alert("No path found");break e}Yt(Q,ue.address),O.notify()}t(6,h=0),t(4,d=null),p==null||p.releasePointerCapture(w.pointerId),p==null||p.removeEventListener("pointermove",M)}}function M(w){w.preventDefault();const K={x:(w.clientX-c.x)*u.scale,y:(w.clientY-c.y)*u.scale};if(!r&&h===1&&d)t(4,d.node.x=Math.round(a.x+K.x),d),t(4,d.node.y=Math.round(a.y+K.y),d),O.notify();else if(h===2)t(2,c.x=w.clientX,c),t(2,c.y=w.clientY,c),t(1,u.x-=K.x,u),t(1,u.y-=K.y,u);else if(h===4)t(2,c.x=w.clientX,c),t(2,c.y=w.clientY,c);else if(!r&&h===3){t(2,c.x=w.clientX,c),t(2,c.y=w.clientY,c);const he=document.elementFromPoint(w.clientX,w.clientY);if(!he)return;const ue=O.getRouter(parseInt(he.id));he.tagName==="circle"&&ue&&d&&(O.addLink({source:d,target:ue}),t(4,d=ue))}}function D(w){w.preventDefault(),t(2,c.x=w.clientX,c),t(2,c.y=w.clientY,c);const K=w.deltaY>0?1.025:.975;y(K,c)}function y(w,K){if(!p||u.scale<.1&&w<1||u.scale>5&&w>1)return;const he=p.getBoundingClientRect(),ue={x:(K.x-he.left)/he.width,y:(K.y-he.top)/he.height};t(1,u.x-=u.width*(w-1)*ue.x,u),t(1,u.y-=u.height*(w-1)*ue.y,u),t(1,u.width*=w,u),t(1,u.height*=w,u)}function T(w){if(!(w.target instanceof Element))return;w.preventDefault();const K=document.elementFromPoint(w.clientX,w.clientY);K&&(K.tagName==="circle"?S(K.id):K.tagName==="rect"&&E(K.id))}function S(w){const K=O.getRouter(parseInt(w));K&&(t(4,d=K),$.showModal())}function E(w){const K=O.links.find(he=>w===he.id);K&&(t(5,g=K),_.showModal())}function F(w){var he;w.preventDefault();const K=(he=w.dataTransfer)==null?void 0:he.getData("text/plain");if(K)switch(K){case"CE":O.createCE(G(w.clientX),z(w.clientY));break;case"LER":O.createLER(G(w.clientX),z(w.clientY));break;case"LSR":O.createLSR(G(w.clientX),z(w.clientY));break}}function G(w){return p?(w-p.getBoundingClientRect().left)*u.scale+u.x:w}function z(w){return p?(w-p.getBoundingClientRect().top)*u.scale+u.y:w}function W(w){Ut.call(this,l,w)}function Be(w){ge[w?"unshift":"push"](()=>{p=w,t(3,p)})}function de(w){d=w,t(4,d)}function Ce(w){$=w,t(7,$)}function be(w){g=w,t(5,g)}function Re(w){_=w,t(8,_)}return l.$$set=w=>{"$$scope"in w&&t(20,o=w.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(10,n={0:"move",1:r?"not-allowed":"grabbing",2:"grabbing",3:r?"not-allowed":"crosshair",4:"crosshair"})},[r,u,c,p,d,g,h,$,_,f,n,s,v,A,D,T,F,G,z,y,o,i,W,Be,de,Ce,be,Re]}class Nn extends ie{constructor(e){super(),se(this,e,xn,Bn,oe,{zoom:19},null,[-1,-1])}get zoom(){return this.$$.ctx[19]}}function Hn(l){let e,t,n,r;return{c(){e=I("button"),t=ne(l[0]),this.h()},l(i){e=R(i,"BUTTON",{style:!0,class:!0});var o=x(e);t=le(o,l[0]),o.forEach(b),this.h()},h(){k(e,"style",l[2]),k(e,"class","svelte-v6s8rg")},m(i,o){L(i,e,o),C(e,t),n||(r=J(e,"click",function(){jt(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(i,[o]){l=i,o&1&&$e(t,l[0]),o&4&&k(e,"style",l[2])},i:fe,o:fe,d(i){i&&b(e),n=!1,r()}}}function Mn(l,e,t){let{text:n}=e,{callback:r=()=>{}}=e,{style:i=void 0}=e;return l.$$set=o=>{"text"in o&&t(0,n=o.text),"callback"in o&&t(1,r=o.callback),"style"in o&&t(2,i=o.style)},[n,r,i]}class Ie extends ie{constructor(e){super(),se(this,e,Mn,Hn,oe,{text:0,callback:1,style:2})}}function zn(l){let e,t,n=l[0].address+"",r,i,o,s="→",u,c,a=l[1].address+"",p,d,g,h,$,_;return g=new Ie({props:{text:"Play",callback:l[2]}}),$=new Ie({props:{text:"Delete",callback:l[3]}}),{c(){e=I("div"),t=I("p"),r=ne(n),i=N(),o=I("p"),o.textContent=s,u=N(),c=I("p"),p=ne(a),d=N(),U(g.$$.fragment),h=N(),U($.$$.fragment),this.h()},l(f){e=R(f,"DIV",{class:!0});var m=x(e);t=R(m,"P",{class:!0});var v=x(t);r=le(v,n),v.forEach(b),i=H(m),o=R(m,"P",{class:!0,"data-svelte-h":!0}),ce(o)!=="svelte-1giyjq6"&&(o.textContent=s),u=H(m),c=R(m,"P",{class:!0});var A=x(c);p=le(A,a),A.forEach(b),d=H(m),j(g.$$.fragment,m),h=H(m),j($.$$.fragment,m),m.forEach(b),this.h()},h(){k(t,"class","svelte-ikhsiz"),k(o,"class","svelte-ikhsiz"),k(c,"class","svelte-ikhsiz"),k(e,"class","svelte-ikhsiz")},m(f,m){L(f,e,m),C(e,t),C(t,r),C(e,i),C(e,o),C(e,u),C(e,c),C(c,p),C(e,d),q(g,e,null),C(e,h),q($,e,null),_=!0},p(f,[m]){(!_||m&1)&&n!==(n=f[0].address+"")&&$e(r,n),(!_||m&2)&&a!==(a=f[1].address+"")&&$e(p,a)},i(f){_||(P(g.$$.fragment,f),P($.$$.fragment,f),_=!0)},o(f){B(g.$$.fragment,f),B($.$$.fragment,f),_=!1},d(f){f&&b(e),V(g),V($)}}}function Fn(l,e,t){let{source:n}=e,{destination:r}=e;function i(){O.addPacket(n,r)}function o(){confirm("Are you sure you want to delete this LSP?")&&(n.deleteEntry(r.address),O.notify())}return l.$$set=s=>{"source"in s&&t(0,n=s.source),"destination"in s&&t(1,r=s.destination)},[n,r,i,o]}class An extends ie{constructor(e){super(),se(this,e,Fn,zn,oe,{source:0,destination:1})}}function kt(l,e,t){const n=l.slice();return n[2]=e[t],n}function vt(l,e,t){const n=l.slice();return n[5]=e[t][0],n}function $t(l){let e,t;return e=new An({props:{source:l[2],destination:O.getSureCERouter(l[5])}}),{c(){U(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){q(e,n,r),t=!0},p(n,r){const i={};r&1&&(i.source=n[2]),r&1&&(i.destination=O.getSureCERouter(n[5])),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function yt(l){let e,t,n=ee([...l[2].firstHop]),r=[];for(let o=0;o<n.length;o+=1)r[o]=$t(vt(l,n,o));const i=o=>B(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=re()},l(o){for(let s=0;s<r.length;s+=1)r[s].l(o);e=re()},m(o,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,s);L(o,e,s),t=!0},p(o,s){if(s&1){n=ee([...o[2].firstHop]);let u;for(u=0;u<n.length;u+=1){const c=vt(o,n,u);r[u]?(r[u].p(c,s),P(r[u],1)):(r[u]=$t(c),r[u].c(),P(r[u],1),r[u].m(e.parentNode,e))}for(pe(),u=n.length;u<r.length;u+=1)i(u);_e()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)P(r[s]);t=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)B(r[s]);t=!1},d(o){o&&b(e),Pe(r,o)}}}function On(l){let e,t,n=ee(l[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=yt(kt(l,n,o));const i=o=>B(r[o],1,1,()=>{r[o]=null});return{c(){e=I("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=R(o,"DIV",{class:!0});var s=x(e);for(let u=0;u<r.length;u+=1)r[u].l(s);s.forEach(b),this.h()},h(){k(e,"class","svelte-kwkmok")},m(o,s){L(o,e,s);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);t=!0},p(o,[s]){if(s&1){n=ee(o[0]);let u;for(u=0;u<n.length;u+=1){const c=kt(o,n,u);r[u]?(r[u].p(c,s),P(r[u],1)):(r[u]=yt(c),r[u].c(),P(r[u],1),r[u].m(e,null))}for(pe(),u=n.length;u<r.length;u+=1)i(u);_e()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)P(r[s]);t=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)B(r[s]);t=!1},d(o){o&&b(e),Pe(r,o)}}}function Sn(l,e,t){let n,r;return ve(l,O,i=>t(1,r=i)),l.$$.update=()=>{l.$$.dirty&2&&t(0,n=r.routers.filter(i=>i instanceof me))},[n,r]}class Un extends ie{constructor(e){super(),se(this,e,Sn,On,oe,{})}}function Et(l,e,t){const n=l.slice();return n[14]=e[t],n}function wt(l){let e,t;const n=[l[14],{style:"padding: 10px 20px"}];let r={};for(let i=0;i<n.length;i+=1)r=Ue(r,n[i]);return e=new Ie({props:r}),{c(){U(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,o){q(e,i,o),t=!0},p(i,o){const s=o&64?je(n,[qe(i[14]),n[1]]):{};e.$set(s)},i(i){t||(P(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function jn(l){let e,t,n,r,i,o,s,u="Packet Controls",c,a,p,d=l[2].packets.length+"",g,h,$,_,f,m,v,A,M=l[1].speedMultiplier.toFixed(1)+"",D,y,T,S,E,F,G,z=l[1].maxPackets+"",W,Be,de,Ce,be,Re,w,K,he,ue=ee(l[6]),Q=[];for(let Y=0;Y<ue.length;Y+=1)Q[Y]=wt(Et(l,ue,Y));const Xt=Y=>B(Q[Y],1,1,()=>{Q[Y]=null});return be=new Un({}),{c(){e=I("div"),t=I("div"),r=N(),i=I("div"),o=I("div"),s=I("p"),s.textContent=u,c=N(),a=I("p"),p=ne("Count: "),g=ne(d),h=N(),$=I("div");for(let Y=0;Y<Q.length;Y+=1)Q[Y].c();_=N(),f=I("div"),m=I("div"),v=I("p"),A=ne("Speed Multiplier: "),D=ne(M),y=N(),T=I("input"),S=N(),E=I("div"),F=I("p"),G=ne("Max Packets: "),W=ne(z),Be=N(),de=I("input"),Ce=N(),U(be.$$.fragment),this.h()},l(Y){e=R(Y,"DIV",{id:!0,style:!0,class:!0});var Z=x(e);t=R(Z,"DIV",{id:!0,class:!0}),x(t).forEach(b),Z.forEach(b),r=H(Y),i=R(Y,"DIV",{id:!0,style:!0,class:!0});var te=x(i);o=R(te,"DIV",{id:!0,class:!0});var ke=x(o);s=R(ke,"P",{id:!0,class:!0,"data-svelte-h":!0}),ce(s)!=="svelte-1cfybk8"&&(s.textContent=u),c=H(ke),a=R(ke,"P",{id:!0,class:!0});var Ve=x(a);p=le(Ve,"Count: "),g=le(Ve,d),Ve.forEach(b),h=H(ke),$=R(ke,"DIV",{id:!0,class:!0});var rt=x($);for(let Ge=0;Ge<Q.length;Ge+=1)Q[Ge].l(rt);rt.forEach(b),_=H(ke),f=R(ke,"DIV",{class:!0});var Ae=x(f);m=R(Ae,"DIV",{class:!0});var Oe=x(m);v=R(Oe,"P",{});var Ye=x(v);A=le(Ye,"Speed Multiplier: "),D=le(Ye,M),Ye.forEach(b),y=H(Oe),T=R(Oe,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Oe.forEach(b),S=H(Ae),E=R(Ae,"DIV",{class:!0});var Se=x(E);F=R(Se,"P",{});var Xe=x(F);G=le(Xe,"Max Packets: "),W=le(Xe,z),Xe.forEach(b),Be=H(Se),de=R(Se,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Se.forEach(b),Ae.forEach(b),Ce=H(ke),j(be.$$.fragment,ke),ke.forEach(b),te.forEach(b),this.h()},h(){k(t,"id","resize-bar"),k(t,"class","svelte-1m97oqm"),k(e,"id","visual-resize-bar"),k(e,"style",n=`width: ${l[0]?1:0}px`),k(e,"class","svelte-1m97oqm"),k(s,"id","packet-controls-title"),k(s,"class","svelte-1m97oqm"),k(a,"id","packet-controls-count"),k(a,"class","svelte-1m97oqm"),k($,"id","control-panel-buttons"),k($,"class","svelte-1m97oqm"),k(T,"type","range"),k(T,"min","0.1"),k(T,"max","2"),k(T,"step","0.001"),k(T,"class","svelte-1m97oqm"),k(m,"class","slider svelte-1m97oqm"),k(de,"type","range"),k(de,"min","1"),k(de,"max","500"),k(de,"step","1"),k(de,"class","svelte-1m97oqm"),k(E,"class","slider svelte-1m97oqm"),k(f,"class","sliders svelte-1m97oqm"),k(o,"id","control-panel-content"),k(o,"class","svelte-1m97oqm"),k(i,"id","control-panel"),k(i,"style",Re=`width: ${l[5]}px; transition: ${l[4]};`),k(i,"class","svelte-1m97oqm")},m(Y,Z){L(Y,e,Z),C(e,t),l[9](t),L(Y,r,Z),L(Y,i,Z),C(i,o),C(o,s),C(o,c),C(o,a),C(a,p),C(a,g),C(o,h),C(o,$);for(let te=0;te<Q.length;te+=1)Q[te]&&Q[te].m($,null);C(o,_),C(o,f),C(f,m),C(m,v),C(v,A),C(v,D),C(m,y),C(m,T),ae(T,l[1].speedMultiplier),C(f,S),C(f,E),C(E,F),C(F,G),C(F,W),C(E,Be),C(E,de),ae(de,l[1].maxPackets),C(o,Ce),q(be,o,null),w=!0,K||(he=[J(t,"pointerdown",l[7]),J(T,"change",l[10]),J(T,"input",l[10]),J(de,"change",l[11]),J(de,"input",l[11])],K=!0)},p(Y,[Z]){if((!w||Z&1&&n!==(n=`width: ${Y[0]?1:0}px`))&&k(e,"style",n),(!w||Z&4)&&d!==(d=Y[2].packets.length+"")&&$e(g,d),Z&64){ue=ee(Y[6]);let te;for(te=0;te<ue.length;te+=1){const ke=Et(Y,ue,te);Q[te]?(Q[te].p(ke,Z),P(Q[te],1)):(Q[te]=wt(ke),Q[te].c(),P(Q[te],1),Q[te].m($,null))}for(pe(),te=ue.length;te<Q.length;te+=1)Xt(te);_e()}(!w||Z&2)&&M!==(M=Y[1].speedMultiplier.toFixed(1)+"")&&$e(D,M),Z&2&&ae(T,Y[1].speedMultiplier),(!w||Z&2)&&z!==(z=Y[1].maxPackets+"")&&$e(W,z),Z&2&&ae(de,Y[1].maxPackets),(!w||Z&48&&Re!==(Re=`width: ${Y[5]}px; transition: ${Y[4]};`))&&k(i,"style",Re)},i(Y){if(!w){for(let Z=0;Z<ue.length;Z+=1)P(Q[Z]);P(be.$$.fragment,Y),w=!0}},o(Y){Q=Q.filter(Boolean);for(let Z=0;Z<Q.length;Z+=1)B(Q[Z]);B(be.$$.fragment,Y),w=!1},d(Y){Y&&(b(e),b(r),b(i)),l[9](null),Pe(Q,Y),V(be),K=!1,Me(he)}}}function qn(l,e,t){let n,r,i,o,s,u;ve(l,He,f=>t(0,o=f)),ve(l,De,f=>t(1,s=f)),ve(l,O,f=>t(2,u=f));let c,a="width 250ms";function p(f){o&&(t(4,a="none"),c.setPointerCapture(f.pointerId),c.addEventListener("pointermove",d),c.addEventListener("pointerup",g))}function d(f){t(5,i=window.innerWidth-f.clientX),i<=20&&t(5,i=0),i>=window.innerWidth-350&&t(5,i=window.innerWidth-350)}function g(f){c.removeEventListener("pointermove",d),c.removeEventListener("pointerup",g),c.releasePointerCapture(f.pointerId),t(4,a="width 250ms")}function h(f){ge[f?"unshift":"push"](()=>{c=f,t(3,c)})}function $(){s.speedMultiplier=we(this.value),De.set(s)}function _(){s.maxPackets=we(this.value),De.set(s)}return l.$$.update=()=>{l.$$.dirty&4&&t(8,n=u.routers.filter(f=>f instanceof me)),l.$$.dirty&258&&t(6,r=[{text:s.running?"Pause":"Resume",callback:()=>{Ze(De,s.running=!s.running,s)}},{text:"Reset",callback:()=>{O.clearPackets()}},{text:"Play All",callback:()=>{for(const f of n)for(const[m]of f.firstHop)O.addPacket(f,O.getSureCERouter(m))}}]),l.$$.dirty&1&&t(5,i=o?350:0)},[o,s,u,c,a,i,r,p,n,h,$,_]}class Vn extends ie{constructor(e){super(),se(this,e,qn,jn,oe,{})}}function Yn(l){let e;return{c(){e=xe("circle"),this.h()},l(t){e=Ne(t,"circle",{r:!0,class:!0}),x(e).forEach(b),this.h()},h(){k(e,"r","5"),k(e,"class","svelte-rvo2j9"),ot(e,"labeled",l[0].label!==-1)},m(t,n){L(t,e,n),l[4](e)},p(t,[n]){n&1&&ot(e,"labeled",t[0].label!==-1)},i:fe,o:fe,d(t){t&&b(e),l[4](null)}}}function Xn(l,e,t){let n;ve(l,De,d=>t(3,n=d));let{packet:r}=e,i,o,s;function u(){const d=Math.sqrt((r.node.x-r.nextHop.node.x)**2+(r.node.y-r.nextHop.node.y)**2);i=Math.round(d/250*1e3)}function c(){u(),s&&(t(2,o=s.animate([{transform:`translate(${r.node.x}px, ${r.node.y}px)`},{transform:`translate(${r.nextHop.node.x}px, ${r.nextHop.node.y}px)`}],{duration:i,easing:"linear"})),t(2,o.onfinish=a,o))}function a(){t(0,r.node=r.nextHop.node,r);const d=r.nextHop;if(d===r.destination)return d.receivePacket(r);if(r.nextHop.receivePacket(r),r.validateNextHop(d))return c();r.fallbackRoute||(r.fallback(d),r.validateNextHop(d)&&c())}requestAnimationFrame(c);function p(d){ge[d?"unshift":"push"](()=>{s=d,t(1,s)})}return l.$$set=d=>{"packet"in d&&t(0,r=d.packet)},l.$$.update=()=>{l.$$.dirty&12&&o&&t(2,o.playbackRate=n.speedMultiplier,o),l.$$.dirty&12&&o&&(n.running?o.play():o.pause())},[r,s,o,n,p]}class Gn extends ie{constructor(e){super(),se(this,e,Xn,Yn,oe,{packet:0})}}function Wn(l){let e,t,n,r,i,o,s,u,c=l[0].distance+"",a,p,d,g;return{c(){e=xe("line"),t=N(),n=xe("rect"),s=N(),u=xe("text"),a=ne(c),p=ne(" km"),this.h()},l(h){e=Ne(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),x(e).forEach(b),t=H(h),n=Ne(h,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),x(n).forEach(b),s=H(h),u=Ne(h,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var $=x(u);a=le($,c),p=le($," km"),$.forEach(b),this.h()},h(){k(e,"x1",l[4]),k(e,"y1",l[2]),k(e,"x2",l[3]),k(e,"y2",l[1]),k(n,"id",r=l[0].id),k(n,"x",i=l[5].x-Je/2),k(n,"y",o=l[5].y-Qe/2),k(n,"width",Je),k(n,"height",Qe),k(n,"class","svelte-zjn2k6"),k(u,"x",d=l[5].x),k(u,"y",g=l[5].y),k(u,"dominant-baseline","central"),k(u,"class","svelte-zjn2k6")},m(h,$){L(h,e,$),L(h,t,$),L(h,n,$),L(h,s,$),L(h,u,$),C(u,a),C(u,p)},p(h,[$]){$&16&&k(e,"x1",h[4]),$&4&&k(e,"y1",h[2]),$&8&&k(e,"x2",h[3]),$&2&&k(e,"y2",h[1]),$&1&&r!==(r=h[0].id)&&k(n,"id",r),$&32&&i!==(i=h[5].x-Je/2)&&k(n,"x",i),$&32&&o!==(o=h[5].y-Qe/2)&&k(n,"y",o),$&1&&c!==(c=h[0].distance+"")&&$e(a,c),$&32&&d!==(d=h[5].x)&&k(u,"x",d),$&32&&g!==(g=h[5].y)&&k(u,"y",g)},i:fe,o:fe,d(h){h&&(b(e),b(t),b(n),b(s),b(u))}}}const Je=50,Qe=20;function Ct(l,e){return(l+e)/2}function Kn(l,e,t){let n,r,i,o,s,{link:u}=e;return l.$$set=c=>{"link"in c&&t(0,u=c.link)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=u.source.node.x),l.$$.dirty&1&&t(3,r=u.target.node.x),l.$$.dirty&1&&t(2,i=u.source.node.y),l.$$.dirty&1&&t(1,o=u.target.node.y),l.$$.dirty&30&&t(5,s={x:Ct(n,r),y:Ct(i,o)})},[u,o,i,r,n,s]}class Jn extends ie{constructor(e){super(),se(this,e,Kn,Wn,oe,{link:0})}}function Qn(l){let e,t,n,r,i,o,s,u=l[0].node.label+"",c,a,p;return{c(){e=xe("circle"),o=N(),s=xe("text"),c=ne(u),this.h()},l(d){e=Ne(d,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),x(e).forEach(b),o=H(d),s=Ne(d,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var g=x(s);c=le(g,u),g.forEach(b),this.h()},h(){k(e,"id",t=l[0].id.toString()),k(e,"cx",n=l[0].node.x),k(e,"cy",r=l[0].node.y),k(e,"r","20"),k(e,"fill",i=l[1][l[0].type]),k(e,"class","svelte-17jcsko"),k(s,"x",a=l[0].node.x),k(s,"y",p=l[0].node.y),k(s,"dominant-baseline","central"),k(s,"font-size","smaller"),k(s,"class","svelte-17jcsko")},m(d,g){L(d,e,g),L(d,o,g),L(d,s,g),C(s,c)},p(d,[g]){g&1&&t!==(t=d[0].id.toString())&&k(e,"id",t),g&1&&n!==(n=d[0].node.x)&&k(e,"cx",n),g&1&&r!==(r=d[0].node.y)&&k(e,"cy",r),g&1&&i!==(i=d[1][d[0].type])&&k(e,"fill",i),g&1&&u!==(u=d[0].node.label+"")&&$e(c,u),g&1&&a!==(a=d[0].node.x)&&k(s,"x",a),g&1&&p!==(p=d[0].node.y)&&k(s,"y",p)},i:fe,o:fe,d(d){d&&(b(e),b(o),b(s))}}}function Zn(l,e,t){let{router:n}=e;const r={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return l.$$set=i=>{"router"in i&&t(0,n=i.router)},[n,r]}class el extends ie{constructor(e){super(),se(this,e,Zn,Qn,oe,{router:0})}}function tl(l){let e,t,n,r;return{c(){e=I("div"),t=ne(l[0]),this.h()},l(i){e=R(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var o=x(e);t=le(o,l[0]),o.forEach(b),this.h()},h(){k(e,"draggable","true"),k(e,"role","button"),k(e,"tabindex","-1"),ze(e,"background-color",l[1]),k(e,"class","svelte-dfkep2")},m(i,o){L(i,e,o),C(e,t),n||(r=J(e,"dragstart",l[2]),n=!0)},p(i,[o]){o&1&&$e(t,i[0]),o&2&&ze(e,"background-color",i[1])},i:fe,o:fe,d(i){i&&b(e),n=!1,r()}}}function nl(l,e,t){let n;ve(l,He,u=>t(4,n=u));let{text:r}=e,{type:i}=e,{color:o}=e;function s(u){var c;if(n){alert("Network is locked.");return}(c=u.dataTransfer)==null||c.setData("text/plain",i)}return l.$$set=u=>{"text"in u&&t(0,r=u.text),"type"in u&&t(3,i=u.type),"color"in u&&t(1,o=u.color)},[r,o,s,i]}class ll extends ie{constructor(e){super(),se(this,e,nl,tl,oe,{text:0,type:3,color:1})}}function Lt(l,e,t){const n=l.slice();return n[6]=e[t],n}function It(l,e,t){const n=l.slice();return n[6]=e[t],n}function Rt(l,e,t){const n=l.slice();return n[9]=e[t],n}function rl(l){let e,t,n=ee(l[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=Dt(Lt(l,n,o));const i=o=>B(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=re()},l(o){for(let s=0;s<r.length;s+=1)r[s].l(o);e=re()},m(o,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,s);L(o,e,s),t=!0},p(o,s){if(s&1){n=ee(o[0]);let u;for(u=0;u<n.length;u+=1){const c=Lt(o,n,u);r[u]?(r[u].p(c,s),P(r[u],1)):(r[u]=Dt(c),r[u].c(),P(r[u],1),r[u].m(e.parentNode,e))}for(pe(),u=n.length;u<r.length;u+=1)i(u);_e()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)P(r[s]);t=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)B(r[s]);t=!1},d(o){o&&b(e),Pe(r,o)}}}function ol(l){let e,t,n,r=ee(l[3]),i=[];for(let a=0;a<r.length;a+=1)i[a]=Pt(Rt(l,r,a));const o=a=>B(i[a],1,1,()=>{i[a]=null});let s=ee(l[1]),u=[];for(let a=0;a<s.length;a+=1)u[a]=Tt(It(l,s,a));const c=a=>B(u[a],1,1,()=>{u[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=N();for(let a=0;a<u.length;a+=1)u[a].c();t=re()},l(a){for(let p=0;p<i.length;p+=1)i[p].l(a);e=H(a);for(let p=0;p<u.length;p+=1)u[p].l(a);t=re()},m(a,p){for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(a,p);L(a,e,p);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(a,p);L(a,t,p),n=!0},p(a,p){if(p&8){r=ee(a[3]);let d;for(d=0;d<r.length;d+=1){const g=Rt(a,r,d);i[d]?(i[d].p(g,p),P(i[d],1)):(i[d]=Pt(g),i[d].c(),P(i[d],1),i[d].m(e.parentNode,e))}for(pe(),d=r.length;d<i.length;d+=1)o(d);_e()}if(p&2){s=ee(a[1]);let d;for(d=0;d<s.length;d+=1){const g=It(a,s,d);u[d]?(u[d].p(g,p),P(u[d],1)):(u[d]=Tt(g),u[d].c(),P(u[d],1),u[d].m(t.parentNode,t))}for(pe(),d=s.length;d<u.length;d+=1)c(d);_e()}},i(a){if(!n){for(let p=0;p<r.length;p+=1)P(i[p]);for(let p=0;p<s.length;p+=1)P(u[p]);n=!0}},o(a){i=i.filter(Boolean);for(let p=0;p<i.length;p+=1)B(i[p]);u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)B(u[p]);n=!1},d(a){a&&(b(e),b(t)),Pe(i,a),Pe(u,a)}}}function Dt(l){let e,t;const n=[l[6]];let r={};for(let i=0;i<n.length;i+=1)r=Ue(r,n[i]);return e=new Ie({props:r}),{c(){U(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,o){q(e,i,o),t=!0},p(i,o){const s=o&1?je(n,[qe(i[6])]):{};e.$set(s)},i(i){t||(P(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Pt(l){let e,t;const n=[l[9]];let r={};for(let i=0;i<n.length;i+=1)r=Ue(r,n[i]);return e=new ll({props:r}),{c(){U(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,o){q(e,i,o),t=!0},p(i,o){const s=o&8?je(n,[qe(i[9])]):{};e.$set(s)},i(i){t||(P(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Tt(l){let e,t;const n=[l[6]];let r={};for(let i=0;i<n.length;i+=1)r=Ue(r,n[i]);return e=new Ie({props:r}),{c(){U(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,o){q(e,i,o),t=!0},p(i,o){const s=o&2?je(n,[qe(i[6])]):{};e.$set(s)},i(i){t||(P(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function il(l){let e,t,n,r,i,o;e=new Ie({props:{text:l[2]?"Edit":"Simulation",callback:l[5],style:`width: 100px; background-color: ${l[2]?"#3CB371":"#6495ED"};`}});const s=[ol,rl],u=[];function c(a,p){return a[2]?1:0}return n=c(l),r=u[n]=s[n](l),{c(){U(e.$$.fragment),t=N(),r.c(),i=re()},l(a){j(e.$$.fragment,a),t=H(a),r.l(a),i=re()},m(a,p){q(e,a,p),L(a,t,p),u[n].m(a,p),L(a,i,p),o=!0},p(a,[p]){const d={};p&4&&(d.text=a[2]?"Edit":"Simulation"),p&4&&(d.callback=a[5]),p&4&&(d.style=`width: 100px; background-color: ${a[2]?"#3CB371":"#6495ED"};`),e.$set(d);let g=n;n=c(a),n===g?u[n].p(a,p):(pe(),B(u[g],1,1,()=>{u[g]=null}),_e(),r=u[n],r?r.p(a,p):(r=u[n]=s[n](a),r.c()),P(r,1),r.m(i.parentNode,i))},i(a){o||(P(e.$$.fragment,a),P(r),o=!0)},o(a){B(e.$$.fragment,a),B(r),o=!1},d(a){a&&(b(t),b(i)),V(e,a),u[n].d(a)}}}function sl(l,e,t){let n,r,i,o;ve(l,O,c=>t(4,i=c)),ve(l,He,c=>t(2,o=c));const s=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],u=()=>{Ze(He,o=!o,o),O.clearPackets()};return l.$$.update=()=>{l.$$.dirty&16&&t(0,r=[{text:"Clear Tables",callback:()=>{confirm("Are you sure you want to clear the routing tables?")&&O.clearTables()}},{text:"Export",callback:()=>{const c={routers:i.routers.map(h=>{if(h instanceof me)return{...h,type:h.type,firstHop:Object.fromEntries(h.firstHop)};if(h instanceof Le)return{...h,type:h.type,FIB:Object.fromEntries(h.FIB.map),LIB:Object.fromEntries(h.LIB.map)};if(h instanceof Fe)return{...h,type:h.type,LIB:Object.fromEntries(h.LIB.map)}}),links:i.links.map(h=>({...h,source:h.source.id,target:h.target.id}))},a=JSON.stringify(c,null,2),p=new Blob([a],{type:"application/json"}),d=window.URL.createObjectURL(p),g=document.createElement("a");g.href=d,g.download="network.json",g.click(),window.URL.revokeObjectURL(d)}}]),l.$$.dirty&1&&t(1,n=[{text:"Clear Network",callback:()=>{confirm("Are you sure you want to clear the network?")&&O.clear()}},{text:"Clear Links",callback:()=>{confirm("Are you sure you want to clear the links?")&&O.clearLinks()}},...r])},[r,n,o,s,i,u]}class ul extends ie{constructor(e){super(),se(this,e,sl,il,oe,{})}}function al(l){let e,t="Drag and drop routers to add them to the network.",n,r,i="Hold the shift key and drag routers to make links.",o,s,u="Hold the ctrl key and drag CE's to add destinations.",c,a,p="Double click a router or link to configure it.",d,g,h="The clear button will delete the entire network.",$,_,f="The export button will download your network as a .json file",m,v,A,M,D="Press Esc to close this popup.";return{c(){e=I("p"),e.textContent=t,n=N(),r=I("p"),r.textContent=i,o=N(),s=I("p"),s.textContent=u,c=N(),a=I("p"),a.textContent=p,d=N(),g=I("p"),g.textContent=h,$=N(),_=I("p"),_.textContent=f,m=N(),v=I("br"),A=N(),M=I("p"),M.textContent=D},l(y){e=R(y,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-bhocp0"&&(e.textContent=t),n=H(y),r=R(y,"P",{"data-svelte-h":!0}),ce(r)!=="svelte-ddjc2m"&&(r.textContent=i),o=H(y),s=R(y,"P",{"data-svelte-h":!0}),ce(s)!=="svelte-33j76o"&&(s.textContent=u),c=H(y),a=R(y,"P",{"data-svelte-h":!0}),ce(a)!=="svelte-qvtprs"&&(a.textContent=p),d=H(y),g=R(y,"P",{"data-svelte-h":!0}),ce(g)!=="svelte-vcl8s3"&&(g.textContent=h),$=H(y),_=R(y,"P",{"data-svelte-h":!0}),ce(_)!=="svelte-1ww5ij7"&&(_.textContent=f),m=H(y),v=R(y,"BR",{}),A=H(y),M=R(y,"P",{"data-svelte-h":!0}),ce(M)!=="svelte-1dvt5v1"&&(M.textContent=D)},m(y,T){L(y,e,T),L(y,n,T),L(y,r,T),L(y,o,T),L(y,s,T),L(y,c,T),L(y,a,T),L(y,d,T),L(y,g,T),L(y,$,T),L(y,_,T),L(y,m,T),L(y,v,T),L(y,A,T),L(y,M,T)},p:fe,d(y){y&&(b(e),b(n),b(r),b(o),b(s),b(c),b(a),b(d),b(g),b($),b(_),b(m),b(v),b(A),b(M))}}}function fl(l){let e,t,n,r,i,o;t=new Ie({props:{text:"Help",callback:l[1]}});function s(c){l[2](c)}let u={$$slots:{default:[al]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.dialog=l[0]),r=new lt({props:u}),ge.push(()=>Ee(r,"dialog",s)),{c(){e=I("div"),U(t.$$.fragment),n=N(),U(r.$$.fragment)},l(c){e=R(c,"DIV",{});var a=x(e);j(t.$$.fragment,a),a.forEach(b),n=H(c),j(r.$$.fragment,c)},m(c,a){L(c,e,a),q(t,e,null),L(c,n,a),q(r,c,a),o=!0},p(c,[a]){const p={};a&1&&(p.callback=c[1]),t.$set(p);const d={};a&8&&(d.$$scope={dirty:a,ctx:c}),!i&&a&1&&(i=!0,d.dialog=c[0],ye(()=>i=!1)),r.$set(d)},i(c){o||(P(t.$$.fragment,c),P(r.$$.fragment,c),o=!0)},o(c){B(t.$$.fragment,c),B(r.$$.fragment,c),o=!1},d(c){c&&(b(e),b(n)),V(t),V(r,c)}}}function cl(l,e,t){let n;const r=()=>{n.showModal()};function i(o){n=o,t(0,n)}return[n,r,i]}class dl extends ie{constructor(e){super(),se(this,e,cl,fl,oe,{})}}function hl(l){let e,t,n,r,i,o;return e=new Ie({props:{text:" - ",callback:l[1]}}),n=new Ie({props:{text:"Fullscreen",callback:l[2]}}),i=new Ie({props:{text:" + ",callback:l[3]}}),{c(){U(e.$$.fragment),t=N(),U(n.$$.fragment),r=N(),U(i.$$.fragment)},l(s){j(e.$$.fragment,s),t=H(s),j(n.$$.fragment,s),r=H(s),j(i.$$.fragment,s)},m(s,u){q(e,s,u),L(s,t,u),q(n,s,u),L(s,r,u),q(i,s,u),o=!0},p(s,[u]){const c={};u&1&&(c.callback=s[1]),e.$set(c);const a={};u&1&&(a.callback=s[3]),i.$set(a)},i(s){o||(P(e.$$.fragment,s),P(n.$$.fragment,s),P(i.$$.fragment,s),o=!0)},o(s){B(e.$$.fragment,s),B(n.$$.fragment,s),B(i.$$.fragment,s),o=!1},d(s){s&&(b(t),b(r)),V(e,s),V(n,s),V(i,s)}}}function pl(l,e,t){let{zoom:n}=e;const r=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,s)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},o=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,s)};return l.$$set=s=>{"zoom"in s&&t(0,n=s.zoom)},[n,r,i,o]}class _l extends ie{constructor(e){super(),se(this,e,pl,hl,oe,{zoom:0})}}function Bt(l,e,t){const n=l.slice();return n[5]=e[t],n}function xt(l,e,t){const n=l.slice();return n[8]=e[t],n}function Nt(l,e,t){const n=l.slice();return n[11]=e[t],n}function Ht(l,e){let t,n,r;return n=new Jn({props:{link:e[11]}}),{key:l,first:null,c(){t=re(),U(n.$$.fragment),this.h()},l(i){t=re(),j(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){L(i,t,o),q(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.link=e[11]),n.$set(s)},i(i){r||(P(n.$$.fragment,i),r=!0)},o(i){B(n.$$.fragment,i),r=!1},d(i){i&&b(t),V(n,i)}}}function Mt(l,e){let t,n,r;return n=new el({props:{router:e[8]}}),{key:l,first:null,c(){t=re(),U(n.$$.fragment),this.h()},l(i){t=re(),j(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){L(i,t,o),q(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.router=e[8]),n.$set(s)},i(i){r||(P(n.$$.fragment,i),r=!0)},o(i){B(n.$$.fragment,i),r=!1},d(i){i&&b(t),V(n,i)}}}function zt(l,e){let t,n,r;return n=new Gn({props:{packet:e[5]}}),{key:l,first:null,c(){t=re(),U(n.$$.fragment),this.h()},l(i){t=re(),j(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){L(i,t,o),q(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.packet=e[5]),n.$set(s)},i(i){r||(P(n.$$.fragment,i),r=!0)},o(i){B(n.$$.fragment,i),r=!1},d(i){i&&b(t),V(n,i)}}}function gl(l){let e=[],t=new Map,n,r=[],i=new Map,o,s=[],u=new Map,c,a,p=ee(l[1].links);const d=f=>f[11].id;for(let f=0;f<p.length;f+=1){let m=Nt(l,p,f),v=d(m);t.set(v,e[f]=Ht(v,m))}let g=ee(l[1].routers);const h=f=>f[8].id;for(let f=0;f<g.length;f+=1){let m=xt(l,g,f),v=h(m);i.set(v,r[f]=Mt(v,m))}let $=ee(l[1].packets);const _=f=>f[5].id;for(let f=0;f<$.length;f+=1){let m=Bt(l,$,f),v=_(m);u.set(v,s[f]=zt(v,m))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();n=N();for(let f=0;f<r.length;f+=1)r[f].c();o=N();for(let f=0;f<s.length;f+=1)s[f].c();c=re()},l(f){for(let m=0;m<e.length;m+=1)e[m].l(f);n=H(f);for(let m=0;m<r.length;m+=1)r[m].l(f);o=H(f);for(let m=0;m<s.length;m+=1)s[m].l(f);c=re()},m(f,m){for(let v=0;v<e.length;v+=1)e[v]&&e[v].m(f,m);L(f,n,m);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(f,m);L(f,o,m);for(let v=0;v<s.length;v+=1)s[v]&&s[v].m(f,m);L(f,c,m),a=!0},p(f,m){m&2&&(p=ee(f[1].links),pe(),e=Ke(e,m,d,1,f,p,t,n.parentNode,We,Ht,n,Nt),_e()),m&2&&(g=ee(f[1].routers),pe(),r=Ke(r,m,h,1,f,g,i,o.parentNode,We,Mt,o,xt),_e()),m&2&&($=ee(f[1].packets),pe(),s=Ke(s,m,_,1,f,$,u,c.parentNode,We,zt,c,Bt),_e())},i(f){if(!a){for(let m=0;m<p.length;m+=1)P(e[m]);for(let m=0;m<g.length;m+=1)P(r[m]);for(let m=0;m<$.length;m+=1)P(s[m]);a=!0}},o(f){for(let m=0;m<e.length;m+=1)B(e[m]);for(let m=0;m<r.length;m+=1)B(r[m]);for(let m=0;m<s.length;m+=1)B(s[m]);a=!1},d(f){f&&(b(n),b(o),b(c));for(let m=0;m<e.length;m+=1)e[m].d(f);for(let m=0;m<r.length;m+=1)r[m].d(f);for(let m=0;m<s.length;m+=1)s[m].d(f)}}}function ml(l){let e,t,n,r,i,o,s,u,c,a,p,d,g,h,$,_,f;function m(D){l[2](D)}let v={$$slots:{default:[gl]},$$scope:{ctx:l}};l[0]!==void 0&&(v.zoom=l[0]),n=new Nn({props:v}),ge.push(()=>Ee(n,"zoom",m)),s=new ul({}),a=new dl({});function A(D){l[3](D)}let M={};return l[0]!==void 0&&(M.zoom=l[0]),g=new _l({props:M}),ge.push(()=>Ee(g,"zoom",A)),_=new Vn({}),{c(){e=I("div"),t=I("div"),U(n.$$.fragment),i=N(),o=I("div"),U(s.$$.fragment),u=N(),c=I("div"),U(a.$$.fragment),p=N(),d=I("div"),U(g.$$.fragment),$=N(),U(_.$$.fragment),this.h()},l(D){e=R(D,"DIV",{id:!0,class:!0});var y=x(e);t=R(y,"DIV",{id:!0,class:!0});var T=x(t);j(n.$$.fragment,T),i=H(T),o=R(T,"DIV",{id:!0,class:!0});var S=x(o);j(s.$$.fragment,S),S.forEach(b),u=H(T),c=R(T,"DIV",{id:!0,class:!0});var E=x(c);j(a.$$.fragment,E),E.forEach(b),p=H(T),d=R(T,"DIV",{id:!0,class:!0});var F=x(d);j(g.$$.fragment,F),F.forEach(b),T.forEach(b),$=H(y),j(_.$$.fragment,y),y.forEach(b),this.h()},h(){k(o,"id","top-left-bar"),k(o,"class","absolute-flex svelte-1kpnzxr"),k(c,"id","bottom-left-bar"),k(c,"class","absolute-flex svelte-1kpnzxr"),k(d,"id","bottom-right-bar"),k(d,"class","absolute-flex svelte-1kpnzxr"),k(t,"id","network"),k(t,"class","svelte-1kpnzxr"),k(e,"id","mpls"),k(e,"class","svelte-1kpnzxr")},m(D,y){L(D,e,y),C(e,t),q(n,t,null),C(t,i),C(t,o),q(s,o,null),C(t,u),C(t,c),q(a,c,null),C(t,p),C(t,d),q(g,d,null),C(e,$),q(_,e,null),f=!0},p(D,[y]){const T={};y&16386&&(T.$$scope={dirty:y,ctx:D}),!r&&y&1&&(r=!0,T.zoom=D[0],ye(()=>r=!1)),n.$set(T);const S={};!h&&y&1&&(h=!0,S.zoom=D[0],ye(()=>h=!1)),g.$set(S)},i(D){f||(P(n.$$.fragment,D),P(s.$$.fragment,D),P(a.$$.fragment,D),P(g.$$.fragment,D),P(_.$$.fragment,D),f=!0)},o(D){B(n.$$.fragment,D),B(s.$$.fragment,D),B(a.$$.fragment,D),B(g.$$.fragment,D),B(_.$$.fragment,D),f=!1},d(D){D&&b(e),V(n),V(s),V(a),V(g),V(_)}}}function bl(l,e,t){let n,r;ve(l,De,u=>t(4,n=u)),ve(l,O,u=>t(1,r=u));let i;qt(()=>{window.addEventListener("visibilitychanged",()=>{Ze(De,n.running=!document.hidden,n)})});function o(u){i=u,t(0,i)}function s(u){i=u,t(0,i)}return[i,r,o,s]}class kl extends ie{constructor(e){super(),se(this,e,bl,ml,oe,{})}}function vl(l){let e,t;return e=new kl({}),{c(){U(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,r){q(e,n,r),t=!0},p:fe,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}class Pl extends ie{constructor(e){super(),se(this,e,null,vl,oe,{})}}export{Pl as component};
