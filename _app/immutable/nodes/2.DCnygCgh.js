var Mt=Object.defineProperty;var zt=(l,e,t)=>e in l?Mt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var V=(l,e,t)=>(zt(l,typeof e!="symbol"?e+"":e,t),t);import{r as Be,s as Z,a as Lt,u as It,g as Rt,b as Dt,x as Bt,e as fe,i as Tt,n as ne,y as _e,c as he,o as Nt,z as je,A as xe}from"../chunks/scheduler.C5v8YK5g.js";import{n as N,m as R,S as ee,i as te,e as D,c as B,a as F,d as b,l as k,g as E,z as K,t as re,b as oe,h as L,j as me,s as H,v as Y,A as le,f as M,w as q,x as X,r as se,p as ue,B as ye,y as G,C as ie,D as be,E as ge,o as Q,q as Ne,F as Ie,G as Re,H as Ft,I as qe}from"../chunks/index.ChYF1Lys.js";import{w as He}from"../chunks/index.CD1dNpfE.js";function J(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Fe(l,e){N(l,1,1,()=>{e.delete(l.key)})}function Ae(l,e,t,n,r,i,o,s,u,c,a,_){let f=l.length,m=i.length,h=f;const w={};for(;h--;)w[l[h].key]=h;const d=[],p=new Map,g=new Map,v=[];for(h=m;h--;){const y=_(r,i,h),P=t(y);let j=o.get(P);j?n&&v.push(()=>j.p(y,e)):(j=c(P,y),j.c()),p.set(P,d[h]=j),P in w&&g.set(P,Math.abs(h-w[P]))}const A=new Set,z=new Set;function I(y){R(y,1),y.m(s,a),o.set(y.key,y),a=y.first,m--}for(;f&&m;){const y=d[m-1],P=l[f-1],j=y.key,$=P.key;y===P?(a=y.first,f--,m--):p.has($)?!o.has(j)||A.has(j)?I(y):z.has($)?f--:g.get(j)>g.get($)?(z.add(j),I(y)):(A.add($),f--):(u(P,o),f--)}for(;f--;){const y=l[f];p.has(y.key)||u(y,o)}for(;m;)I(d[m-1]);return Be(v),d}function Me(l,e){const t={},n={},r={$$scope:1};let i=l.length;for(;i--;){const o=l[i],s=e[i];if(s){for(const u in o)u in s||(n[u]=1);for(const u in s)r[u]||(t[u]=s[u],r[u]=1);l[i]=s}else for(const u in o)r[u]=1}for(const o in n)o in t||(t[o]=void 0);return t}function ze(l){return typeof l=="object"&&l!==null?l:{}}let At=class{constructor(e,t,n){V(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},Ue=class{constructor(e,t){this.id=e,this.node=t}};class de extends Ue{constructor(){super(...arguments);V(this,"address",`CE-IP-${this.id}`);V(this,"firstHop",new Map);V(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});V(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});V(this,"updateAddress",(t,n)=>{const r=this.firstHop.get(t);if(r===void 0){alert(`Unable to update old first hop Address '${t}' to '${n}'.`);return}this.firstHop.set(n,r),this.firstHop.delete(t)});V(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop("CE received packet. Dropping.")}clearTables(){this.firstHop.clear()}get type(){return"CE"}}class St{constructor(){V(this,"store",He());V(this,"set",this.store.set);V(this,"update",this.store.update);V(this,"subscribe",this.store.subscribe);V(this,"_map",new Map)}getPath(e,t){const n=this._map.get(e);if(n)return n.get(t)}findShortestPath(e,t){return Xe(e,t)}findShortestPaths(){const e=new Map,t=U.routers.filter(n=>n.type==="CE");for(const n of t){const r=new Map;for(const i of t){if(n===i)continue;const o=Xe(n,i);r.set(i.id,o)}e.set(n.id,r)}this._map=e}notify(){this.store.set(this._map)}}function Xe(l,e){const t=U.routers,n=t.length,r=new Array(n).fill(1/0),i=new Array(n).fill(!1),o=new Array(n).fill(null);r[t.indexOf(l)]=0;let s=!1;for(;!s;){let a=null,_=1/0;for(let f=0;f<n;f++)!i[f]&&r[f]<_&&(a=t[f],_=r[f]);if(!a||a.id===e.id){s=!0;continue}i[t.indexOf(a)]=!0;for(const f of U.links){let m;if(f.source===a)m=f.target;else if(f.target===a)m=f.source;else continue;const h=t.indexOf(m),w=_+f.distance;w<r[h]&&(r[h]=w,o[h]=a)}}const u=[];let c=e;for(;c;){u.unshift(c);const a=t.indexOf(c);c=o[a]}return u}const Ve=new St;let Ot=class{constructor(e,t,n,r){V(this,"ttl",32);V(this,"label",-1);V(this,"fallbackRoute");V(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=r;const i=t.firstHop.get(n.address);if(!i){this.drop("No next hop router id found.");return}const o=U.getRouter(i);if(!o){this.drop("No next hop router found.");return}this.nextHop=o}decrementTTL(){--this.ttl<=0&&this.drop()}fallback(e){if(this.label=-1,this.decrementTTL(),this.fallbackRoute)return this.setFallbackNextHop();if(this.fallbackRoute=Ve.findShortestPath(e,this.destination),!(this.fallbackRoute[this.fallbackRoute.length-1]instanceof de))return this.drop("The destination is not a CE.");this.fallbackRoute.shift(),this.setFallbackNextHop()}validateNextHop(e){return!!(U.doesLinkExist({source:e,target:this.nextHop})||U.doesLinkExist({source:this.nextHop,target:e}))}setFallbackNextHop(){var t;const e=(t=this.fallbackRoute)==null?void 0:t.shift();this.fallbackRoute&&e?this.nextHop=e:this.drop("Unable to set fallback IP routing next hop")}drop(e="Unknown"){console.warn("Packet dropped: ",e),U.deletePacket(this.id)}},Pt=class{constructor(){V(this,"map",new Map);V(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});V(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});V(this,"updateLabel",(e,t)=>{const n=this.map.get(e);if(!n){alert(`Unable to update old LIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,n),this.map.delete(e)});V(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}},jt=class{constructor(){V(this,"map",new Map);V(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});V(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});V(this,"updateAddress",(e,t)=>{const n=this.map.get(e);if(n===void 0){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,n),this.map.delete(e)});V(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class ve extends Ue{constructor(){super(...arguments);V(this,"FIB",new jt);V(this,"LIB",new Pt)}receivePacket(t){var n,r,i,o;if(t.fallbackRoute)return t.fallback(this);if(t.label===-1){const s=t.destination,u=(n=this.FIB.get(s.address))==null?void 0:n.nextHop;if(!u)return t.fallback(this);const c=(r=this.FIB.get(s.address))==null?void 0:r.label;if(!c)return t.fallback(this);t.label=c;const a=U.getRouter(parseInt(u));if(!a)return t.fallback(this);t.nextHop=a}else{const s=(i=this.LIB.get(t.label))==null?void 0:i.nextHop;if(!s)return t.fallback(this);const u=(o=this.LIB.get(t.label))==null?void 0:o.outgoingLabel;if(!u)return t.fallback(this);t.label=u;const c=U.getCERouter(s);if(!c)return t.fallback(this);t.nextHop=c}t.decrementTTL()}clearTables(){this.FIB.map.clear(),this.LIB.map.clear()}get type(){return"LER"}}class Pe extends Ue{constructor(){super(...arguments);V(this,"LIB",new Pt)}receivePacket(t){var o,s;if(t.fallbackRoute)return t.fallback(this);const n=(o=this.LIB.get(t.label))==null?void 0:o.nextHop;if(!n)return t.fallback(this);const r=(s=this.LIB.get(t.label))==null?void 0:s.outgoingLabel;if(!r)return t.fallback(this);t.label=r;const i=U.getRouter(parseInt(n));if(!i)return t.fallback(this);t.nextHop=i,t.decrementTTL()}clearTables(){this.LIB.map.clear()}get type(){return"LSR"}}const Ut={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class Vt{constructor(){V(this,"store",He({routers:[],links:[],packets:[]}));V(this,"set",this.store.set);V(this,"update",this.store.update);V(this,"subscribe",this.store.subscribe);V(this,"_routers",[]);V(this,"_links",[]);V(this,"_packets",[]);V(this,"routerMap",new Map);V(this,"CEMap",new Map);V(this,"routerCounter",1);V(this,"packetCounter",1)}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!Ut[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new At(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,r=new de(n,{label:`CE ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(r)}createLER(e,t){const n=this.routerCounter++,r=new ve(n,{label:`LER ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(r)}createLSR(e,t){const n=this.routerCounter++,r=new Pe(n,{label:`LSR ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(r)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof de&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),t instanceof de&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}getSureCERouter(e){const t=this.getCERouter(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){const n=new Ot(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearTables(){for(const e of this._routers)e.clearTables();this.notify()}clearLinks(){this._links=[],this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=1,this.packetCounter=1,this.notify()}notify(){this.store.set(this.networkState)}}const Yt=new Vt,U=Yt,Te=He({running:!0,speedMultiplier:1}),De=He(!1);function qt(l){let e,t,n,r;const i=l[2].default,o=Lt(i,l,l[1],null);return{c(){e=D("dialog"),o&&o.c(),this.h()},l(s){e=B(s,"DIALOG",{class:!0});var u=F(e);o&&o.l(u),u.forEach(b),this.h()},h(){k(e,"class","svelte-p5wejv")},m(s,u){E(s,e,u),o&&o.m(e,null),l[4](e),t=!0,n||(r=K(e,"close",l[3]),n=!0)},p(s,[u]){o&&o.p&&(!t||u&2)&&It(o,i,s,s[1],t?Dt(i,s[1],u,null):Rt(s[1]),null)},i(s){t||(R(o,s),t=!0)},o(s){N(o,s),t=!1},d(s){s&&b(e),o&&o.d(s),l[4](null),n=!1,r()}}}function Xt(l,e,t){let{$$slots:n={},$$scope:r}=e,{dialog:i}=e;function o(u){Bt.call(this,l,u)}function s(u){fe[u?"unshift":"push"](()=>{i=u,t(0,i)})}return l.$$set=u=>{"dialog"in u&&t(0,i=u.dialog),"$$scope"in u&&t(1,r=u.$$scope)},[i,r,n,o,s]}class Ye extends ee{constructor(e){super(),te(this,e,Xt,qt,Z,{dialog:0})}}const Ge=16,Gt=2**20-1;function xt(l,e){const t=l[0];if(!(t instanceof de)){alert("The path does not start with a CE");return}const n=l[1];if(!(n instanceof ve)){alert("The source CE is not directly connected to LER");return}if(t.firstHop.set(e,n.id),n.FIB.get(e))return;const r=l.length-2,i=l[r];if(!(i instanceof ve)){alert("Destination CE is not connected directly to a LER");return}let o=We(l[r]);i.LIB.receiveEntry(o,-1,e);for(let s=l.length-2;s>0;s--){const u=l[s],c=l[s-1],a=o;o=We(u),c instanceof ve?c.FIB.receiveEntry(e,a,u.id.toString()):c instanceof Pe&&c.LIB.receiveEntry(o,a,u.id.toString())}}function Wt(l,e){return l instanceof Pe||l instanceof ve?l.LIB.map.has(e):!1}function We(l){let e;do e=Math.floor(Math.random()*(Gt-Ge+1)+Ge);while(Wt(l,e));return e}function Kt(l){let e,t,n,r;return{c(){e=D("button"),t=re(l[0]),this.h()},l(i){e=B(i,"BUTTON",{class:!0});var o=F(e);t=oe(o,l[0]),o.forEach(b),this.h()},h(){k(e,"class","svelte-17itt71")},m(i,o){E(i,e,o),L(e,t),n||(r=K(e,"click",function(){Tt(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(i,[o]){l=i,o&1&&me(t,l[0])},i:ne,o:ne,d(i){i&&b(e),n=!1,r()}}}function Jt(l,e,t){let{text:n}=e,{callback:r}=e;return l.$$set=i=>{"text"in i&&t(0,n=i.text),"callback"in i&&t(1,r=i.callback)},[n,r]}class Ee extends ee{constructor(e){super(),te(this,e,Jt,Kt,Z,{text:0,callback:1})}}function Ke(l,e,t){const n=l.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function Je(l){let e,t,n,r,i,o,s,u,c,a,_,f,m,h,w,d,p,g;function v(...y){return l[5](l[9],...y)}function A(...y){return l[6](l[9],...y)}function z(){return l[7](l[9])}_=new Ee({props:{text:"LDP",callback:z}});function I(){return l[8](l[9])}return h=new Ee({props:{text:"-",callback:I}}),{c(){e=D("tr"),t=D("td"),n=D("input"),i=H(),o=D("td"),s=D("input"),c=H(),a=D("td"),Y(_.$$.fragment),f=H(),m=D("td"),Y(h.$$.fragment),w=H(),this.h()},l(y){e=B(y,"TR",{});var P=F(e);t=B(P,"TD",{});var j=F(t);n=B(j,"INPUT",{type:!0,placeholder:!0}),j.forEach(b),i=M(P),o=B(P,"TD",{});var $=F(o);s=B($,"INPUT",{type:!0,placeholder:!0}),$.forEach(b),c=M(P),a=B(P,"TD",{});var O=F(a);q(_.$$.fragment,O),O.forEach(b),f=M(P),m=B(P,"TD",{});var x=F(m);q(h.$$.fragment,x),x.forEach(b),w=M(P),P.forEach(b),this.h()},h(){k(n,"type","text"),n.value=r=l[9],k(n,"placeholder","Address"),k(s,"type","text"),s.value=u=l[10],k(s,"placeholder","Link")},m(y,P){E(y,e,P),L(e,t),L(t,n),L(e,i),L(e,o),L(o,s),L(e,c),L(e,a),X(_,a,null),L(e,f),L(e,m),X(h,m,null),L(e,w),d=!0,p||(g=[K(n,"change",v),K(s,"change",A)],p=!0)},p(y,P){l=y,(!d||P&1&&r!==(r=l[9])&&n.value!==r)&&(n.value=r),(!d||P&1&&u!==(u=l[10])&&s.value!==u)&&(s.value=u);const j={};P&1&&(j.callback=z),_.$set(j);const $={};P&1&&($.callback=I),h.$set($)},i(y){d||(R(_.$$.fragment,y),R(h.$$.fragment,y),d=!0)},o(y){N(_.$$.fragment,y),N(h.$$.fragment,y),d=!1},d(y){y&&b(e),G(_),G(h),p=!1,Be(g)}}}function Qt(l){let e,t="Destinations:",n,r,i,o='<tr><th class="svelte-1d4gizi">Destination</th> <th class="svelte-1d4gizi">First hop</th> <th class="svelte-1d4gizi"></th> <th class="svelte-1d4gizi"></th></tr>',s,u,c,a,_,f,m=J([...l[0].firstHop]),h=[];for(let d=0;d<m.length;d+=1)h[d]=Je(Ke(l,m,d));const w=d=>N(h[d],1,1,()=>{h[d]=null});return _=new Ee({props:{text:"+",callback:l[1](l[0].addEmptyEntry)}}),{c(){e=D("p"),e.textContent=t,n=H(),r=D("table"),i=D("thead"),i.innerHTML=o,s=H(),u=D("tbody");for(let d=0;d<h.length;d+=1)h[d].c();c=H(),a=D("div"),Y(_.$$.fragment),this.h()},l(d){e=B(d,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1ixmdgd"&&(e.textContent=t),n=M(d),r=B(d,"TABLE",{});var p=F(r);i=B(p,"THEAD",{"data-svelte-h":!0}),le(i)!=="svelte-1jq34m8"&&(i.innerHTML=o),s=M(p),u=B(p,"TBODY",{});var g=F(u);for(let A=0;A<h.length;A+=1)h[A].l(g);g.forEach(b),p.forEach(b),c=M(d),a=B(d,"DIV",{class:!0});var v=F(a);q(_.$$.fragment,v),v.forEach(b),this.h()},h(){k(a,"class","svelte-1d4gizi")},m(d,p){E(d,e,p),E(d,n,p),E(d,r,p),L(r,i),L(r,s),L(r,u);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(u,null);E(d,c,p),E(d,a,p),X(_,a,null),f=!0},p(d,[p]){if(p&29){m=J([...d[0].firstHop]);let v;for(v=0;v<m.length;v+=1){const A=Ke(d,m,v);h[v]?(h[v].p(A,p),R(h[v],1)):(h[v]=Je(A),h[v].c(),R(h[v],1),h[v].m(u,null))}for(se(),v=m.length;v<h.length;v+=1)w(v);ue()}const g={};p&1&&(g.callback=d[1](d[0].addEmptyEntry)),_.$set(g)},i(d){if(!f){for(let p=0;p<m.length;p+=1)R(h[p]);R(_.$$.fragment,d),f=!0}},o(d){h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)N(h[p]);N(_.$$.fragment,d),f=!1},d(d){d&&(b(e),b(n),b(r),b(c),b(a)),ye(h,d),G(_)}}}function Zt(l,e,t){let{router:n}=e;function r(f){return()=>{f(),t(0,n)}}function i(f,m){if(!(f.target instanceof HTMLInputElement))return;const h=f.target.value.toUpperCase();if(!U.getCERouter(h)){alert("Destination router not found.");return}n.updateAddress(m,h),t(0,n)}function o(f){const m=U.getCERouter(f);if(!m){alert("Destination router not found.");return}const h=Ve.findShortestPath(n,m);xt(h,f),t(0,n)}function s(f,m){if(!(f.target instanceof HTMLInputElement))return;const h=parseInt(f.target.value);n.firstHop.set(m,h)}const u=(f,m)=>{i(m,f)},c=(f,m)=>{s(m,f)},a=f=>{o(f)},_=f=>{n.firstHop.delete(f),t(0,n)};return l.$$set=f=>{"router"in f&&t(0,n=f.router)},[n,r,i,o,s,u,c,a,_]}class en extends ee{constructor(e){super(),te(this,e,Zt,Qt,Z,{router:0})}}function Qe(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Ze(l){let e,t,n,r,i,o,s,u,c,a,_,f,m,h,w,d;function p(...z){return l[3](l[7],...z)}function g(){l[4].call(s,l[9],l[10])}function v(){l[5].call(a,l[9],l[10])}function A(){return l[6](l[7])}return f=new Ee({props:{text:"-",callback:A}}),{c(){e=D("tr"),t=D("td"),n=D("input"),i=H(),o=D("td"),s=D("input"),u=H(),c=D("td"),a=D("input"),_=H(),Y(f.$$.fragment),m=H(),this.h()},l(z){e=B(z,"TR",{});var I=F(e);t=B(I,"TD",{});var y=F(t);n=B(y,"INPUT",{type:!0}),y.forEach(b),i=M(I),o=B(I,"TD",{});var P=F(o);s=B(P,"INPUT",{type:!0}),P.forEach(b),u=M(I),c=B(I,"TD",{});var j=F(c);a=B(j,"INPUT",{type:!0}),j.forEach(b),_=M(I),q(f.$$.fragment,I),m=M(I),I.forEach(b),this.h()},h(){k(n,"type","number"),n.value=r=l[7],k(s,"type","number"),k(a,"type","text")},m(z,I){E(z,e,I),L(e,t),L(t,n),L(e,i),L(e,o),L(o,s),ie(s,l[8].outgoingLabel),L(e,u),L(e,c),L(c,a),ie(a,l[8].nextHop),L(e,_),X(f,e,null),L(e,m),h=!0,w||(d=[K(n,"change",p),K(s,"input",g),K(a,"input",v)],w=!0)},p(z,I){l=z,(!h||I&1&&r!==(r=l[7])&&n.value!==r)&&(n.value=r),I&1&&be(s.value)!==l[8].outgoingLabel&&ie(s,l[8].outgoingLabel),I&1&&a.value!==l[8].nextHop&&ie(a,l[8].nextHop);const y={};I&1&&(y.callback=A),f.$set(y)},i(z){h||(R(f.$$.fragment,z),h=!0)},o(z){N(f.$$.fragment,z),h=!1},d(z){z&&b(e),G(f),w=!1,Be(d)}}}function tn(l){let e,t="LIB:",n,r,i,o="<tr><th>Incoming</th> <th>Outgoing</th> <th>Next hop</th> <th></th></tr>",s,u,c,a,_,f,m=J([...l[0].LIB.map]),h=[];for(let d=0;d<m.length;d+=1)h[d]=Ze(Qe(l,m,d));const w=d=>N(h[d],1,1,()=>{h[d]=null});return _=new Ee({props:{text:"+",callback:l[1](l[0].LIB.addEmptyEntry)}}),{c(){e=D("p"),e.textContent=t,n=H(),r=D("table"),i=D("thead"),i.innerHTML=o,s=H(),u=D("tbody");for(let d=0;d<h.length;d+=1)h[d].c();c=H(),a=D("div"),Y(_.$$.fragment),this.h()},l(d){e=B(d,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1j64kst"&&(e.textContent=t),n=M(d),r=B(d,"TABLE",{});var p=F(r);i=B(p,"THEAD",{"data-svelte-h":!0}),le(i)!=="svelte-1fy2y89"&&(i.innerHTML=o),s=M(p),u=B(p,"TBODY",{});var g=F(u);for(let A=0;A<h.length;A+=1)h[A].l(g);g.forEach(b),p.forEach(b),c=M(d),a=B(d,"DIV",{class:!0});var v=F(a);q(_.$$.fragment,v),v.forEach(b),this.h()},h(){k(a,"class","svelte-f8qi58")},m(d,p){E(d,e,p),E(d,n,p),E(d,r,p),L(r,i),L(r,s),L(r,u);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(u,null);E(d,c,p),E(d,a,p),X(_,a,null),f=!0},p(d,[p]){if(p&5){m=J([...d[0].LIB.map]);let v;for(v=0;v<m.length;v+=1){const A=Qe(d,m,v);h[v]?(h[v].p(A,p),R(h[v],1)):(h[v]=Ze(A),h[v].c(),R(h[v],1),h[v].m(u,null))}for(se(),v=m.length;v<h.length;v+=1)w(v);ue()}const g={};p&1&&(g.callback=d[1](d[0].LIB.addEmptyEntry)),_.$set(g)},i(d){if(!f){for(let p=0;p<m.length;p+=1)R(h[p]);R(_.$$.fragment,d),f=!0}},o(d){h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)N(h[p]);N(_.$$.fragment,d),f=!1},d(d){d&&(b(e),b(n),b(r),b(c),b(a)),ye(h,d),G(_)}}}function nn(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function i(a,_){if(!(a.target instanceof HTMLInputElement))return;const f=parseInt(a.target.value);n.LIB.updateLabel(_,f)}const o=(a,_)=>{i(_,a)};function s(a,_){a[_][1].outgoingLabel=be(this.value),t(0,n)}function u(a,_){a[_][1].nextHop=this.value,t(0,n)}const c=a=>{n.LIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,i,o,s,u,c]}class ln extends ee{constructor(e){super(),te(this,e,nn,tn,Z,{router:0})}}function et(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function tt(l){let e,t,n,r,i,o,s,u,c,a,_,f,m,h,w,d;function p(...z){return l[3](l[7],...z)}function g(){l[4].call(s,l[9],l[10])}function v(){l[5].call(a,l[9],l[10])}function A(){return l[6](l[7])}return f=new Ee({props:{text:"-",callback:A}}),{c(){e=D("tr"),t=D("td"),n=D("input"),i=H(),o=D("td"),s=D("input"),u=H(),c=D("td"),a=D("input"),_=H(),Y(f.$$.fragment),m=H(),this.h()},l(z){e=B(z,"TR",{});var I=F(e);t=B(I,"TD",{});var y=F(t);n=B(y,"INPUT",{type:!0}),y.forEach(b),i=M(I),o=B(I,"TD",{});var P=F(o);s=B(P,"INPUT",{type:!0}),P.forEach(b),u=M(I),c=B(I,"TD",{});var j=F(c);a=B(j,"INPUT",{type:!0}),j.forEach(b),_=M(I),q(f.$$.fragment,I),m=M(I),I.forEach(b),this.h()},h(){k(n,"type","text"),n.value=r=l[7],k(s,"type","number"),k(a,"type","text")},m(z,I){E(z,e,I),L(e,t),L(t,n),L(e,i),L(e,o),L(o,s),ie(s,l[8].label),L(e,u),L(e,c),L(c,a),ie(a,l[8].nextHop),L(e,_),X(f,e,null),L(e,m),h=!0,w||(d=[K(n,"change",p),K(s,"input",g),K(a,"input",v)],w=!0)},p(z,I){l=z,(!h||I&1&&r!==(r=l[7])&&n.value!==r)&&(n.value=r),I&1&&be(s.value)!==l[8].label&&ie(s,l[8].label),I&1&&a.value!==l[8].nextHop&&ie(a,l[8].nextHop);const y={};I&1&&(y.callback=A),f.$set(y)},i(z){h||(R(f.$$.fragment,z),h=!0)},o(z){N(f.$$.fragment,z),h=!1},d(z){z&&b(e),G(f),w=!1,Be(d)}}}function rn(l){let e,t="FIB:",n,r,i,o="<tr><th>Address</th> <th>Label</th> <th>Next hop</th> <th></th></tr>",s,u,c,a,_,f,m=J([...l[0].FIB.map]),h=[];for(let d=0;d<m.length;d+=1)h[d]=tt(et(l,m,d));const w=d=>N(h[d],1,1,()=>{h[d]=null});return _=new Ee({props:{text:"+",callback:l[1](l[0].FIB.addEmptyEntry)}}),{c(){e=D("p"),e.textContent=t,n=H(),r=D("table"),i=D("thead"),i.innerHTML=o,s=H(),u=D("tbody");for(let d=0;d<h.length;d+=1)h[d].c();c=H(),a=D("div"),Y(_.$$.fragment),this.h()},l(d){e=B(d,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1j6bdhj"&&(e.textContent=t),n=M(d),r=B(d,"TABLE",{});var p=F(r);i=B(p,"THEAD",{"data-svelte-h":!0}),le(i)!=="svelte-1qhs6t7"&&(i.innerHTML=o),s=M(p),u=B(p,"TBODY",{});var g=F(u);for(let A=0;A<h.length;A+=1)h[A].l(g);g.forEach(b),p.forEach(b),c=M(d),a=B(d,"DIV",{class:!0});var v=F(a);q(_.$$.fragment,v),v.forEach(b),this.h()},h(){k(a,"class","svelte-f8qi58")},m(d,p){E(d,e,p),E(d,n,p),E(d,r,p),L(r,i),L(r,s),L(r,u);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(u,null);E(d,c,p),E(d,a,p),X(_,a,null),f=!0},p(d,[p]){if(p&5){m=J([...d[0].FIB.map]);let v;for(v=0;v<m.length;v+=1){const A=et(d,m,v);h[v]?(h[v].p(A,p),R(h[v],1)):(h[v]=tt(A),h[v].c(),R(h[v],1),h[v].m(u,null))}for(se(),v=m.length;v<h.length;v+=1)w(v);ue()}const g={};p&1&&(g.callback=d[1](d[0].FIB.addEmptyEntry)),_.$set(g)},i(d){if(!f){for(let p=0;p<m.length;p+=1)R(h[p]);R(_.$$.fragment,d),f=!0}},o(d){h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)N(h[p]);N(_.$$.fragment,d),f=!1},d(d){d&&(b(e),b(n),b(r),b(c),b(a)),ye(h,d),G(_)}}}function on(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function i(a,_){if(!(a.target instanceof HTMLInputElement))return;const f=a.target.value;n.FIB.updateAddress(_,f)}const o=(a,_)=>{i(_,a)};function s(a,_){a[_][1].label=be(this.value),t(0,n)}function u(a,_){a[_][1].nextHop=this.value,t(0,n)}const c=a=>{n.FIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,i,o,s,u,c]}class sn extends ee{constructor(e){super(),te(this,e,on,rn,Z,{router:0})}}function un(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=D("p"),e.textContent=t},l(n){e=B(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,r){E(n,e,r)},p:ne,i:ne,o:ne,d(n){n&&b(e)}}}function an(l){let e,t,n,r,i,o,s,u,c,a,_,f,m,h,w=l[0].id+"",d,p,g,v,A,z,I,y,P,j,$=l[0]instanceof de&&nt(l),O=l[0]instanceof ve&&lt(l),x=(l[0]instanceof ve||l[0]instanceof Pe)&&rt(l);return I=new Ee({props:{text:"Delete Router",callback:l[3]}}),{c(){e=D("div"),t=D("div"),n=D("label"),r=re(`Label:
          `),i=D("input"),o=H(),s=D("label"),u=re(`Position:
        `),c=D("input"),a=H(),_=D("input"),f=H(),m=D("p"),h=re("ID: "),d=re(w),p=H(),$&&$.c(),g=H(),O&&O.c(),v=H(),x&&x.c(),A=H(),z=D("div"),Y(I.$$.fragment),this.h()},l(T){e=B(T,"DIV",{});var S=F(e);t=B(S,"DIV",{});var ae=F(t);n=B(ae,"LABEL",{});var Ce=F(n);r=oe(Ce,`Label:
          `),i=B(Ce,"INPUT",{type:!0,class:!0}),Ce.forEach(b),ae.forEach(b),o=M(S),s=B(S,"LABEL",{});var pe=F(s);u=oe(pe,`Position:
        `),c=B(pe,"INPUT",{type:!0,class:!0}),a=M(pe),_=B(pe,"INPUT",{type:!0,class:!0}),pe.forEach(b),f=M(S),m=B(S,"P",{});var we=F(m);h=oe(we,"ID: "),d=oe(we,w),we.forEach(b),S.forEach(b),p=M(T),$&&$.l(T),g=M(T),O&&O.l(T),v=M(T),x&&x.l(T),A=M(T),z=B(T,"DIV",{class:!0});var Le=F(z);q(I.$$.fragment,Le),Le.forEach(b),this.h()},h(){k(i,"type","text"),k(i,"class","svelte-cihl2i"),k(c,"type","number"),c.disabled=l[2],k(c,"class","svelte-cihl2i"),k(_,"type","number"),_.disabled=l[2],k(_,"class","svelte-cihl2i"),k(z,"class","margin-top svelte-cihl2i")},m(T,S){E(T,e,S),L(e,t),L(t,n),L(n,r),L(n,i),ie(i,l[0].node.label),L(e,o),L(e,s),L(s,u),L(s,c),ie(c,l[0].node.x),L(s,a),L(s,_),ie(_,l[0].node.y),L(e,f),L(e,m),L(m,h),L(m,d),E(T,p,S),$&&$.m(T,S),E(T,g,S),O&&O.m(T,S),E(T,v,S),x&&x.m(T,S),E(T,A,S),E(T,z,S),X(I,z,null),y=!0,P||(j=[K(i,"input",l[4]),K(c,"input",l[5]),K(_,"input",l[6]),K(e,"input",l[7])],P=!0)},p(T,S){S&1&&i.value!==T[0].node.label&&ie(i,T[0].node.label),(!y||S&4)&&(c.disabled=T[2]),S&1&&be(c.value)!==T[0].node.x&&ie(c,T[0].node.x),(!y||S&4)&&(_.disabled=T[2]),S&1&&be(_.value)!==T[0].node.y&&ie(_,T[0].node.y),(!y||S&1)&&w!==(w=T[0].id+"")&&me(d,w),T[0]instanceof de?$?($.p(T,S),S&1&&R($,1)):($=nt(T),$.c(),R($,1),$.m(g.parentNode,g)):$&&(se(),N($,1,1,()=>{$=null}),ue()),T[0]instanceof ve?O?(O.p(T,S),S&1&&R(O,1)):(O=lt(T),O.c(),R(O,1),O.m(v.parentNode,v)):O&&(se(),N(O,1,1,()=>{O=null}),ue()),T[0]instanceof ve||T[0]instanceof Pe?x?(x.p(T,S),S&1&&R(x,1)):(x=rt(T),x.c(),R(x,1),x.m(A.parentNode,A)):x&&(se(),N(x,1,1,()=>{x=null}),ue())},i(T){y||(R($),R(O),R(x),R(I.$$.fragment,T),y=!0)},o(T){N($),N(O),N(x),N(I.$$.fragment,T),y=!1},d(T){T&&(b(e),b(p),b(g),b(v),b(A),b(z)),$&&$.d(T),O&&O.d(T),x&&x.d(T),G(I),P=!1,Be(j)}}}function nt(l){let e,t="Address:",n,r,i=l[0].address+"",o,s,u,c,a,_,f,m;function h(d){l[9](d)}let w={};return l[0]!==void 0&&(w.router=l[0]),c=new en({props:w}),fe.push(()=>ge(c,"router",h)),{c(){e=D("p"),e.textContent=t,n=H(),r=D("button"),o=re(i),s=H(),u=D("div"),Y(c.$$.fragment),this.h()},l(d){e=B(d,"P",{"data-svelte-h":!0}),le(e)!=="svelte-18hoeeh"&&(e.textContent=t),n=M(d),r=B(d,"BUTTON",{class:!0});var p=F(r);o=oe(p,i),p.forEach(b),s=M(d),u=B(d,"DIV",{class:!0});var g=F(u);q(c.$$.fragment,g),g.forEach(b),this.h()},h(){Ne(e,"display","inline"),k(r,"class","svelte-cihl2i"),k(u,"class","margin-top svelte-cihl2i")},m(d,p){E(d,e,p),E(d,n,p),E(d,r,p),L(r,o),E(d,s,p),E(d,u,p),X(c,u,null),_=!0,f||(m=K(r,"click",l[8]),f=!0)},p(d,p){(!_||p&1)&&i!==(i=d[0].address+"")&&me(o,i);const g={};!a&&p&1&&(a=!0,g.router=d[0],_e(()=>a=!1)),c.$set(g)},i(d){_||(R(c.$$.fragment,d),_=!0)},o(d){N(c.$$.fragment,d),_=!1},d(d){d&&(b(e),b(n),b(r),b(s),b(u)),G(c),f=!1,m()}}}function lt(l){let e,t,n,r;function i(s){l[10](s)}let o={};return l[0]!==void 0&&(o.router=l[0]),t=new sn({props:o}),fe.push(()=>ge(t,"router",i)),{c(){e=D("div"),Y(t.$$.fragment),this.h()},l(s){e=B(s,"DIV",{class:!0});var u=F(e);q(t.$$.fragment,u),u.forEach(b),this.h()},h(){k(e,"class","margin-top svelte-cihl2i")},m(s,u){E(s,e,u),X(t,e,null),r=!0},p(s,u){const c={};!n&&u&1&&(n=!0,c.router=s[0],_e(()=>n=!1)),t.$set(c)},i(s){r||(R(t.$$.fragment,s),r=!0)},o(s){N(t.$$.fragment,s),r=!1},d(s){s&&b(e),G(t)}}}function rt(l){let e,t,n,r;function i(s){l[11](s)}let o={};return l[0]!==void 0&&(o.router=l[0]),t=new ln({props:o}),fe.push(()=>ge(t,"router",i)),{c(){e=D("div"),Y(t.$$.fragment),this.h()},l(s){e=B(s,"DIV",{class:!0});var u=F(e);q(t.$$.fragment,u),u.forEach(b),this.h()},h(){k(e,"class","margin-top svelte-cihl2i")},m(s,u){E(s,e,u),X(t,e,null),r=!0},p(s,u){const c={};!n&&u&1&&(n=!0,c.router=s[0],_e(()=>n=!1)),t.$set(c)},i(s){r||(R(t.$$.fragment,s),r=!0)},o(s){N(t.$$.fragment,s),r=!1},d(s){s&&b(e),G(t)}}}function fn(l){let e,t,n,r;const i=[an,un],o=[];function s(u,c){return u[0]?0:1}return e=s(l),t=o[e]=i[e](l),{c(){t.c(),n=Q()},l(u){t.l(u),n=Q()},m(u,c){o[e].m(u,c),E(u,n,c),r=!0},p(u,c){let a=e;e=s(u),e===a?o[e].p(u,c):(se(),N(o[a],1,1,()=>{o[a]=null}),ue(),t=o[e],t?t.p(u,c):(t=o[e]=i[e](u),t.c()),R(t,1),t.m(n.parentNode,n))},i(u){r||(R(t),r=!0)},o(u){N(t),r=!1},d(u){u&&b(n),o[e].d(u)}}}function cn(l){let e,t,n;function r(o){l[12](o)}let i={$$slots:{default:[fn]},$$scope:{ctx:l}};return l[1]!==void 0&&(i.dialog=l[1]),e=new Ye({props:i}),fe.push(()=>ge(e,"dialog",r)),e.$on("close",l[13]),{c(){Y(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){X(e,o,s),n=!0},p(o,[s]){const u={};s&16389&&(u.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,u.dialog=o[1],_e(()=>t=!1)),e.$set(u)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){N(e.$$.fragment,o),n=!1},d(o){G(e,o)}}}function dn(l,e,t){let n;he(l,De,p=>t(2,n=p));let{router:r}=e,{dialog:i}=e;function o(){if(!n&&r){if(!confirm("Are you sure you want to delete this router?"))return;U.deleteRouter(r.id),i.close()}else alert("You can't delete a router while the network is locked.")}function s(){r.node.label=this.value,t(0,r)}function u(){r.node.x=be(this.value),t(0,r)}function c(){r.node.y=be(this.value),t(0,r)}const a=()=>{U.notify()},_=async()=>{r instanceof de&&await navigator.clipboard.writeText(r.address)};function f(p){r=p,t(0,r)}function m(p){r=p,t(0,r)}function h(p){r=p,t(0,r)}function w(p){i=p,t(1,i)}const d=()=>{if(r instanceof de)for(const p of r.firstHop.keys())p===""&&r.firstHop.delete(p);U.notify()};return l.$$set=p=>{"router"in p&&t(0,r=p.router),"dialog"in p&&t(1,i=p.dialog)},[r,i,n,o,s,u,c,a,_,f,m,h,w,d]}class hn extends ee{constructor(e){super(),te(this,e,dn,cn,Z,{router:0,dialog:1})}}function pn(l){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=D("p"),e.textContent=t},l(n){e=B(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,r){E(n,e,r)},p:ne,i:ne,o:ne,d(n){n&&b(e)}}}function _n(l){let e,t=l[0].distance+"",n,r,i,o,s,u,c,a,_,f,m;return a=new Ee({props:{text:"Delete Link",callback:l[3]}}),{c(){e=re("Distance: "),n=re(t),r=re(` km
    `),i=D("label"),o=re(`Bandwidth:
      `),s=D("input"),u=H(),c=D("div"),Y(a.$$.fragment),this.h()},l(h){e=oe(h,"Distance: "),n=oe(h,t),r=oe(h,` km
    `),i=B(h,"LABEL",{class:!0});var w=F(i);o=oe(w,`Bandwidth:
      `),s=B(w,"INPUT",{type:!0,class:!0}),w.forEach(b),u=M(h),c=B(h,"DIV",{class:!0});var d=F(c);q(a.$$.fragment,d),d.forEach(b),this.h()},h(){k(s,"type","number"),s.disabled=l[2],k(s,"class","svelte-11gx5jd"),k(i,"class","svelte-11gx5jd"),k(c,"class","svelte-11gx5jd")},m(h,w){E(h,e,w),E(h,n,w),E(h,r,w),E(h,i,w),L(i,o),L(i,s),ie(s,l[0].bandwidth),E(h,u,w),E(h,c,w),X(a,c,null),_=!0,f||(m=K(s,"input",l[4]),f=!0)},p(h,w){(!_||w&1)&&t!==(t=h[0].distance+"")&&me(n,t),(!_||w&4)&&(s.disabled=h[2]),w&1&&be(s.value)!==h[0].bandwidth&&ie(s,h[0].bandwidth)},i(h){_||(R(a.$$.fragment,h),_=!0)},o(h){N(a.$$.fragment,h),_=!1},d(h){h&&(b(e),b(n),b(r),b(i),b(u),b(c)),G(a),f=!1,m()}}}function gn(l){let e,t,n,r;const i=[_n,pn],o=[];function s(u,c){return u[0]?0:1}return e=s(l),t=o[e]=i[e](l),{c(){t.c(),n=Q()},l(u){t.l(u),n=Q()},m(u,c){o[e].m(u,c),E(u,n,c),r=!0},p(u,c){let a=e;e=s(u),e===a?o[e].p(u,c):(se(),N(o[a],1,1,()=>{o[a]=null}),ue(),t=o[e],t?t.p(u,c):(t=o[e]=i[e](u),t.c()),R(t,1),t.m(n.parentNode,n))},i(u){r||(R(t),r=!0)},o(u){N(t),r=!1},d(u){u&&b(n),o[e].d(u)}}}function mn(l){let e,t,n;function r(o){l[5](o)}let i={$$slots:{default:[gn]},$$scope:{ctx:l}};return l[1]!==void 0&&(i.dialog=l[1]),e=new Ye({props:i}),fe.push(()=>ge(e,"dialog",r)),e.$on("close",l[6]),{c(){Y(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){X(e,o,s),n=!0},p(o,[s]){const u={};s&133&&(u.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,u.dialog=o[1],_e(()=>t=!1)),e.$set(u)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){N(e.$$.fragment,o),n=!1},d(o){G(e,o)}}}function bn(l,e,t){let n;he(l,De,a=>t(2,n=a));let{link:r}=e,{dialog:i}=e;function o(){if(!n&&r){if(!confirm("Are you sure you want to delete this link?"))return;U.deleteLink(r.id),i.close()}else alert("You can't delete a link while the network is locked.")}function s(){r.bandwidth=be(this.value),t(0,r)}function u(a){i=a,t(1,i)}const c=()=>{U.notify()};return l.$$set=a=>{"link"in a&&t(0,r=a.link),"dialog"in a&&t(1,i=a.dialog)},[r,i,n,o,s,u,c]}class kn extends ee{constructor(e){super(),te(this,e,bn,mn,Z,{link:0,dialog:1})}}function ot(l){let e,t="Loading...";return{c(){e=D("p"),e.textContent=t,this.h()},l(n){e=B(n,"P",{style:!0,"data-svelte-h":!0}),le(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Ne(e,"font-size","200px")},m(n,r){E(n,e,r)},d(n){n&&b(e)}}}function it(l){let e,t,n,r,i,o;return{c(){e=Ie("line"),this.h()},l(s){e=Re(s,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),F(e).forEach(b),this.h()},h(){k(e,"class","preview"),k(e,"x1",t=l[4].node.x),k(e,"y1",n=l[4].node.y),k(e,"x2",r=l[17](l[2].x)),k(e,"y2",i=l[18](l[2].y)),k(e,"stroke",o=l[6]===l[11].CONNECTING?"green":"blue")},m(s,u){E(s,e,u)},p(s,u){u[0]&16&&t!==(t=s[4].node.x)&&k(e,"x1",t),u[0]&16&&n!==(n=s[4].node.y)&&k(e,"y1",n),u[0]&4&&r!==(r=s[17](s[2].x))&&k(e,"x2",r),u[0]&4&&i!==(i=s[18](s[2].y))&&k(e,"y2",i),u[0]&64&&o!==(o=s[6]===s[11].CONNECTING?"green":"blue")&&k(e,"stroke",o)},d(s){s&&b(e)}}}function vn(l){let e,t,n,r,i,o,s,u,c,a,_,f,m,h,w,d=!l[9]&&ot(),p=(!l[0]&&l[6]===l[11].CONNECTING||l[6]===l[11].ADDING_DESTINATION)&&l[4]&&it(l);const g=l[21].default,v=Lt(g,l,l[20],null);function A($){l[24]($)}function z($){l[25]($)}let I={};l[4]!==void 0&&(I.router=l[4]),l[7]!==void 0&&(I.dialog=l[7]),o=new hn({props:I}),fe.push(()=>ge(o,"router",A)),fe.push(()=>ge(o,"dialog",z));function y($){l[26]($)}function P($){l[27]($)}let j={};return l[5]!==void 0&&(j.link=l[5]),l[8]!==void 0&&(j.dialog=l[8]),a=new kn({props:j}),fe.push(()=>ge(a,"link",y)),fe.push(()=>ge(a,"dialog",P)),{c(){d&&d.c(),e=H(),t=Ie("svg"),p&&p.c(),n=Q(),v&&v.c(),i=H(),Y(o.$$.fragment),c=H(),Y(a.$$.fragment),this.h()},l($){d&&d.l($),e=M($),t=Re($,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var O=F(t);p&&p.l(O),n=Q(),v&&v.l(O),O.forEach(b),i=M($),q(o.$$.fragment,$),c=M($),q(a.$$.fragment,$),this.h()},h(){k(t,"viewBox",r=`${l[1].x} ${l[1].y} ${l[1].width} ${l[1].height}`),k(t,"role","button"),k(t,"tabindex","-1"),k(t,"class","svelte-1cmb9l6"),Ne(t,"cursor",l[10][l[6]])},m($,O){d&&d.m($,O),E($,e,O),E($,t,O),p&&p.m(t,null),L(t,n),v&&v.m(t,null),l[23](t),E($,i,O),X(o,$,O),E($,c,O),X(a,$,O),m=!0,h||(w=[K(t,"pointerdown",l[12]),K(t,"pointerup",l[13]),K(t,"wheel",l[14]),K(t,"dblclick",l[15]),K(t,"dragover",Ft(l[22])),K(t,"drop",l[16])],h=!0)},p($,O){$[9]?d&&(d.d(1),d=null):d||(d=ot(),d.c(),d.m(e.parentNode,e)),(!$[0]&&$[6]===$[11].CONNECTING||$[6]===$[11].ADDING_DESTINATION)&&$[4]?p?p.p($,O):(p=it($),p.c(),p.m(t,n)):p&&(p.d(1),p=null),v&&v.p&&(!m||O[0]&1048576)&&It(v,g,$,$[20],m?Dt(g,$[20],O,null):Rt($[20]),null),(!m||O[0]&2&&r!==(r=`${$[1].x} ${$[1].y} ${$[1].width} ${$[1].height}`))&&k(t,"viewBox",r),O[0]&1088&&Ne(t,"cursor",$[10][$[6]]);const x={};!s&&O[0]&16&&(s=!0,x.router=$[4],_e(()=>s=!1)),!u&&O[0]&128&&(u=!0,x.dialog=$[7],_e(()=>u=!1)),o.$set(x);const T={};!_&&O[0]&32&&(_=!0,T.link=$[5],_e(()=>_=!1)),!f&&O[0]&256&&(f=!0,T.dialog=$[8],_e(()=>f=!1)),a.$set(T)},i($){m||(R(v,$),R(o.$$.fragment,$),R(a.$$.fragment,$),m=!0)},o($){N(v,$),N(o.$$.fragment,$),N(a.$$.fragment,$),m=!1},d($){$&&(b(e),b(t),b(i),b(c)),d&&d.d($),p&&p.d(),v&&v.d($),l[23](null),G(o,$),G(a,$),h=!1,Be(w)}}}function $n(l,e,t){let n,r;he(l,De,C=>t(0,r=C));let{$$slots:i={},$$scope:o}=e;var s=(C=>(C[C.NONE=0]="NONE",C[C.DRAGGING=1]="DRAGGING",C[C.PANNING=2]="PANNING",C[C.CONNECTING=3]="CONNECTING",C[C.ADDING_DESTINATION=4]="ADDING_DESTINATION",C))(s||{});const u={x:0,y:0,width:0,height:0,get scale(){return _?this.width/_.getBoundingClientRect().width:1}},c={x:0,y:0},a={x:0,y:0};let _=null,f=null,m=null,h=0,w,d,p=!1;Nt(()=>{if(!_)return;new ResizeObserver(g).observe(_),requestAnimationFrame(()=>{_&&(t(1,u.x=_.getBoundingClientRect().width/-2,u),t(1,u.y=_.getBoundingClientRect().height/-2,u))}),t(9,p=!0)});function g(){if(!_)return;const C=u.scale||1;t(1,u.width=_.getBoundingClientRect().width*C,u),t(1,u.height=_.getBoundingClientRect().height*C,u)}function v(C){if(!(C.target instanceof Element))return;C.preventDefault(),_==null||_.addEventListener("pointermove",z),_==null||_.setPointerCapture(C.pointerId);const W=C.target.id;if(W){if(t(4,f=U.getRouter(parseInt(W))||null),!f)return;C.shiftKey?t(6,h=3):C.altKey&&f instanceof de?t(6,h=4):(a.x=f.node.x,a.y=f.node.y,t(6,h=1))}else t(6,h=2);t(2,c.x=C.clientX,c),t(2,c.y=C.clientY,c)}function A(C){if(C.target instanceof Element){if(C.preventDefault(),f&&h===4){const W=document.elementFromPoint(C.clientX,C.clientY),ce=(W==null?void 0:W.tagName)==="circle"?W.id:null,ke=U.getRouter(parseInt(ce??""));if(ke instanceof de){const Ht=Ve.findShortestPath(f,ke);xt(Ht,ke.address.toUpperCase()),U.notify()}else alert("Destination must be a CE")}t(6,h=0),t(4,f=null),_==null||_.releasePointerCapture(C.pointerId),_==null||_.removeEventListener("pointermove",z)}}function z(C){C.preventDefault();const W={x:(C.clientX-c.x)*u.scale,y:(C.clientY-c.y)*u.scale};if(!r&&h===1&&f)t(4,f.node.x=Math.round(a.x+W.x),f),t(4,f.node.y=Math.round(a.y+W.y),f),U.notify();else if(h===2)t(2,c.x=C.clientX,c),t(2,c.y=C.clientY,c),t(1,u.x-=W.x,u),t(1,u.y-=W.y,u);else if(h===4)t(2,c.x=C.clientX,c),t(2,c.y=C.clientY,c);else if(!r&&h===3){t(2,c.x=C.clientX,c),t(2,c.y=C.clientY,c);const ce=document.elementFromPoint(C.clientX,C.clientY);if(!ce)return;const ke=U.getRouter(parseInt(ce.id));ce.tagName==="circle"&&ke&&f&&(U.addLink({source:f,target:ke}),t(4,f=ke))}}function I(C){C.preventDefault(),t(2,c.x=C.clientX,c),t(2,c.y=C.clientY,c);const W=C.deltaY>0?1.025:.975;y(W,c)}function y(C,W){if(!_||u.scale<.1&&C<1||u.scale>5&&C>1)return;const ce=_.getBoundingClientRect(),ke={x:(W.x-ce.left)/ce.width,y:(W.y-ce.top)/ce.height};t(1,u.x-=u.width*(C-1)*ke.x,u),t(1,u.y-=u.height*(C-1)*ke.y,u),t(1,u.width*=C,u),t(1,u.height*=C,u)}function P(C){if(!(C.target instanceof Element))return;C.preventDefault();const W=document.elementFromPoint(C.clientX,C.clientY);W&&(W.tagName==="circle"?j(W.id):W.tagName==="rect"&&$(W.id))}function j(C){const W=U.getRouter(parseInt(C));W&&(t(4,f=W),w.showModal())}function $(C){const W=U.links.find(ce=>C===ce.id);W&&(t(5,m=W),d.showModal())}function O(C){var ce;C.preventDefault();const W=(ce=C.dataTransfer)==null?void 0:ce.getData("text/plain");if(W)switch(W){case"CE":U.createCE(x(C.clientX),T(C.clientY));break;case"LER":U.createLER(x(C.clientX),T(C.clientY));break;case"LSR":U.createLSR(x(C.clientX),T(C.clientY));break}}function x(C){return _?(C-_.getBoundingClientRect().left)*u.scale+u.x:C}function T(C){return _?(C-_.getBoundingClientRect().top)*u.scale+u.y:C}function S(C){Bt.call(this,l,C)}function ae(C){fe[C?"unshift":"push"](()=>{_=C,t(3,_)})}function Ce(C){f=C,t(4,f)}function pe(C){w=C,t(7,w)}function we(C){m=C,t(5,m)}function Le(C){d=C,t(8,d)}return l.$$set=C=>{"$$scope"in C&&t(20,o=C.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(10,n={0:"move",1:r?"not-allowed":"grabbing",2:"grabbing",3:r?"not-allowed":"crosshair",4:"crosshair"})},[r,u,c,_,f,m,h,w,d,p,n,s,v,A,I,P,O,x,T,y,o,i,S,ae,Ce,pe,we,Le]}class wn extends ee{constructor(e){super(),te(this,e,$n,vn,Z,{zoom:19},null,[-1,-1])}get zoom(){return this.$$.ctx[19]}}function yn(l){let e,t,n,r;return{c(){e=D("button"),t=re(l[0]),this.h()},l(i){e=B(i,"BUTTON",{style:!0,class:!0});var o=F(e);t=oe(o,l[0]),o.forEach(b),this.h()},h(){k(e,"style",l[2]),k(e,"class","svelte-v6s8rg")},m(i,o){E(i,e,o),L(e,t),n||(r=K(e,"click",function(){Tt(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(i,[o]){l=i,o&1&&me(t,l[0]),o&4&&k(e,"style",l[2])},i:ne,o:ne,d(i){i&&b(e),n=!1,r()}}}function En(l,e,t){let{text:n}=e,{callback:r=()=>{}}=e,{style:i=void 0}=e;return l.$$set=o=>{"text"in o&&t(0,n=o.text),"callback"in o&&t(1,r=o.callback),"style"in o&&t(2,i=o.style)},[n,r,i]}class $e extends ee{constructor(e){super(),te(this,e,En,yn,Z,{text:0,callback:1,style:2})}}function Cn(l){let e,t,n=l[0].address+"",r,i,o,s="â†’",u,c,a=l[1].address+"",_,f,m,h,w,d;return m=new $e({props:{text:"Play",callback:l[2]}}),w=new $e({props:{text:"Delete",callback:l[3]}}),{c(){e=D("div"),t=D("p"),r=re(n),i=H(),o=D("p"),o.textContent=s,u=H(),c=D("p"),_=re(a),f=H(),Y(m.$$.fragment),h=H(),Y(w.$$.fragment),this.h()},l(p){e=B(p,"DIV",{class:!0});var g=F(e);t=B(g,"P",{class:!0});var v=F(t);r=oe(v,n),v.forEach(b),i=M(g),o=B(g,"P",{class:!0,"data-svelte-h":!0}),le(o)!=="svelte-1giyjq6"&&(o.textContent=s),u=M(g),c=B(g,"P",{class:!0});var A=F(c);_=oe(A,a),A.forEach(b),f=M(g),q(m.$$.fragment,g),h=M(g),q(w.$$.fragment,g),g.forEach(b),this.h()},h(){k(t,"class","svelte-ikhsiz"),k(o,"class","svelte-ikhsiz"),k(c,"class","svelte-ikhsiz"),k(e,"class","svelte-ikhsiz")},m(p,g){E(p,e,g),L(e,t),L(t,r),L(e,i),L(e,o),L(e,u),L(e,c),L(c,_),L(e,f),X(m,e,null),L(e,h),X(w,e,null),d=!0},p(p,[g]){(!d||g&1)&&n!==(n=p[0].address+"")&&me(r,n),(!d||g&2)&&a!==(a=p[1].address+"")&&me(_,a)},i(p){d||(R(m.$$.fragment,p),R(w.$$.fragment,p),d=!0)},o(p){N(m.$$.fragment,p),N(w.$$.fragment,p),d=!1},d(p){p&&b(e),G(m),G(w)}}}function Ln(l,e,t){let{source:n}=e,{destination:r}=e;function i(){U.addPacket(n,r)}function o(){confirm("Are you sure you want to delete this LSP?")&&(n.deleteEntry(r.address),U.notify())}return l.$$set=s=>{"source"in s&&t(0,n=s.source),"destination"in s&&t(1,r=s.destination)},[n,r,i,o]}class In extends ee{constructor(e){super(),te(this,e,Ln,Cn,Z,{source:0,destination:1})}}function st(l,e,t){const n=l.slice();return n[2]=e[t],n}function ut(l,e,t){const n=l.slice();return n[5]=e[t][0],n}function at(l){let e,t;return e=new In({props:{source:l[2],destination:U.getSureCERouter(l[5])}}),{c(){Y(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,r){X(e,n,r),t=!0},p(n,r){const i={};r&1&&(i.source=n[2]),r&1&&(i.destination=U.getSureCERouter(n[5])),e.$set(i)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}function ft(l){let e,t,n=J([...l[2].firstHop]),r=[];for(let o=0;o<n.length;o+=1)r[o]=at(ut(l,n,o));const i=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Q()},l(o){for(let s=0;s<r.length;s+=1)r[s].l(o);e=Q()},m(o,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,s);E(o,e,s),t=!0},p(o,s){if(s&1){n=J([...o[2].firstHop]);let u;for(u=0;u<n.length;u+=1){const c=ut(o,n,u);r[u]?(r[u].p(c,s),R(r[u],1)):(r[u]=at(c),r[u].c(),R(r[u],1),r[u].m(e.parentNode,e))}for(se(),u=n.length;u<r.length;u+=1)i(u);ue()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)R(r[s]);t=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)N(r[s]);t=!1},d(o){o&&b(e),ye(r,o)}}}function Rn(l){let e,t,n=J(l[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=ft(st(l,n,o));const i=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Q()},l(o){for(let s=0;s<r.length;s+=1)r[s].l(o);e=Q()},m(o,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,s);E(o,e,s),t=!0},p(o,[s]){if(s&1){n=J(o[0]);let u;for(u=0;u<n.length;u+=1){const c=st(o,n,u);r[u]?(r[u].p(c,s),R(r[u],1)):(r[u]=ft(c),r[u].c(),R(r[u],1),r[u].m(e.parentNode,e))}for(se(),u=n.length;u<r.length;u+=1)i(u);ue()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)R(r[s]);t=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)N(r[s]);t=!1},d(o){o&&b(e),ye(r,o)}}}function Dn(l,e,t){let n,r;return he(l,U,i=>t(1,r=i)),l.$$.update=()=>{l.$$.dirty&2&&t(0,n=r.routers.filter(i=>i instanceof de))},[n,r]}class Bn extends ee{constructor(e){super(),te(this,e,Dn,Rn,Z,{})}}function ct(l,e,t){const n=l.slice();return n[13]=e[t],n}function dt(l){let e,t;const n=[l[13],{style:"padding: 10px 20px"}];let r={};for(let i=0;i<n.length;i+=1)r=xe(r,n[i]);return e=new $e({props:r}),{c(){Y(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,o){X(e,i,o),t=!0},p(i,o){const s=o&32?Me(n,[ze(i[13]),n[1]]):{};e.$set(s)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){G(e,i)}}}function Tn(l){let e,t,n,r,i,o,s,u="Packet Controls",c,a,_,f,m,h,w=l[1].speedMultiplier.toFixed(1)+"",d,p,g,v,A,z,I,y,P,j=J(l[5]),$=[];for(let x=0;x<j.length;x+=1)$[x]=dt(ct(l,j,x));const O=x=>N($[x],1,1,()=>{$[x]=null});return A=new Bn({}),{c(){e=D("div"),t=D("div"),r=H(),i=D("div"),o=D("div"),s=D("p"),s.textContent=u,c=H(),a=D("div");for(let x=0;x<$.length;x+=1)$[x].c();_=H(),f=D("div"),m=D("p"),h=re("Speed Multiplier: "),d=re(w),p=H(),g=D("input"),v=H(),Y(A.$$.fragment),this.h()},l(x){e=B(x,"DIV",{id:!0,style:!0,class:!0});var T=F(e);t=B(T,"DIV",{id:!0,class:!0}),F(t).forEach(b),T.forEach(b),r=M(x),i=B(x,"DIV",{id:!0,style:!0,class:!0});var S=F(i);o=B(S,"DIV",{id:!0,class:!0});var ae=F(o);s=B(ae,"P",{id:!0,class:!0,"data-svelte-h":!0}),le(s)!=="svelte-1cfybk8"&&(s.textContent=u),c=M(ae),a=B(ae,"DIV",{id:!0,class:!0});var Ce=F(a);for(let Le=0;Le<$.length;Le+=1)$[Le].l(Ce);Ce.forEach(b),_=M(ae),f=B(ae,"DIV",{id:!0,class:!0});var pe=F(f);m=B(pe,"P",{});var we=F(m);h=oe(we,"Speed Multiplier: "),d=oe(we,w),we.forEach(b),p=M(pe),g=B(pe,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),pe.forEach(b),v=M(ae),q(A.$$.fragment,ae),ae.forEach(b),S.forEach(b),this.h()},h(){k(t,"id","resize-bar"),k(t,"class","svelte-17azkas"),k(e,"id","visual-resize-bar"),k(e,"style",n=`width: ${l[0]?1:0}px`),k(e,"class","svelte-17azkas"),k(s,"id","packet-controls-title"),k(s,"class","svelte-17azkas"),k(a,"id","control-panel-buttons"),k(a,"class","svelte-17azkas"),k(g,"type","range"),k(g,"min","0.1"),k(g,"max","2"),k(g,"step","0.001"),k(g,"class","svelte-17azkas"),k(f,"id","slider"),k(f,"class","svelte-17azkas"),k(o,"id","control-panel-content"),k(o,"class","svelte-17azkas"),k(i,"id","control-panel"),k(i,"style",z=`width: ${l[4]}px; transition: ${l[3]};`),k(i,"class","svelte-17azkas")},m(x,T){E(x,e,T),L(e,t),l[9](t),E(x,r,T),E(x,i,T),L(i,o),L(o,s),L(o,c),L(o,a);for(let S=0;S<$.length;S+=1)$[S]&&$[S].m(a,null);L(o,_),L(o,f),L(f,m),L(m,h),L(m,d),L(f,p),L(f,g),ie(g,l[1].speedMultiplier),L(o,v),X(A,o,null),I=!0,y||(P=[K(t,"pointerdown",l[6]),K(g,"change",l[10]),K(g,"input",l[10])],y=!0)},p(x,[T]){if((!I||T&1&&n!==(n=`width: ${x[0]?1:0}px`))&&k(e,"style",n),T&32){j=J(x[5]);let S;for(S=0;S<j.length;S+=1){const ae=ct(x,j,S);$[S]?($[S].p(ae,T),R($[S],1)):($[S]=dt(ae),$[S].c(),R($[S],1),$[S].m(a,null))}for(se(),S=j.length;S<$.length;S+=1)O(S);ue()}(!I||T&2)&&w!==(w=x[1].speedMultiplier.toFixed(1)+"")&&me(d,w),T&2&&ie(g,x[1].speedMultiplier),(!I||T&24&&z!==(z=`width: ${x[4]}px; transition: ${x[3]};`))&&k(i,"style",z)},i(x){if(!I){for(let T=0;T<j.length;T+=1)R($[T]);R(A.$$.fragment,x),I=!0}},o(x){$=$.filter(Boolean);for(let T=0;T<$.length;T+=1)N($[T]);N(A.$$.fragment,x),I=!1},d(x){x&&(b(e),b(r),b(i)),l[9](null),ye($,x),G(A),y=!1,Be(P)}}}function Nn(l,e,t){let n,r,i,o,s,u;he(l,De,d=>t(0,o=d)),he(l,Te,d=>t(1,s=d)),he(l,U,d=>t(8,u=d));let c,a="width 250ms";function _(d){o&&(t(3,a="none"),c.setPointerCapture(d.pointerId),c.addEventListener("pointermove",f),c.addEventListener("pointerup",m))}function f(d){t(4,i=window.innerWidth-d.clientX),i<=20&&t(4,i=0),i>=window.innerWidth-350&&t(4,i=window.innerWidth-350)}function m(d){c.removeEventListener("pointermove",f),c.removeEventListener("pointerup",m),c.releasePointerCapture(d.pointerId),t(3,a="width 250ms")}function h(d){fe[d?"unshift":"push"](()=>{c=d,t(2,c)})}function w(){s.speedMultiplier=be(this.value),Te.set(s)}return l.$$.update=()=>{l.$$.dirty&256&&t(7,n=u.routers.filter(d=>d instanceof de)),l.$$.dirty&130&&t(5,r=[{text:s.running?"Pause":"Resume",callback:()=>{je(Te,s.running=!s.running,s)}},{text:"Reset",callback:()=>{U.clearPackets()}},{text:"Play All",callback:()=>{for(const d of n)for(const[p]of d.firstHop)U.addPacket(d,U.getSureCERouter(p))}}]),l.$$.dirty&1&&t(4,i=o?350:0)},[o,s,c,a,i,r,_,n,u,h,w]}class Pn extends ee{constructor(e){super(),te(this,e,Nn,Tn,Z,{})}}function xn(l){let e;return{c(){e=Ie("circle"),this.h()},l(t){e=Re(t,"circle",{r:!0,class:!0}),F(e).forEach(b),this.h()},h(){k(e,"r","5"),k(e,"class","svelte-rvo2j9"),qe(e,"labeled",l[0].label!==-1)},m(t,n){E(t,e,n),l[4](e)},p(t,[n]){n&1&&qe(e,"labeled",t[0].label!==-1)},i:ne,o:ne,d(t){t&&b(e),l[4](null)}}}function Hn(l,e,t){let n;he(l,Te,f=>t(3,n=f));let{packet:r}=e,i,o,s;function u(){const f=Math.sqrt((r.node.x-r.nextHop.node.x)**2+(r.node.y-r.nextHop.node.y)**2);i=Math.round(f/250*1e3)}function c(){u(),s&&(t(2,o=s.animate([{transform:`translate(${r.node.x}px, ${r.node.y}px)`},{transform:`translate(${r.nextHop.node.x}px, ${r.nextHop.node.y}px)`}],{duration:i,easing:"linear"})),t(2,o.onfinish=a,o))}function a(){t(0,r.node=r.nextHop.node,r);const f=r.nextHop;if(f===r.destination)return f.receivePacket(r);if(r.nextHop.receivePacket(r),r.validateNextHop(f))return c();r.fallbackRoute||(r.fallback(f),r.validateNextHop(f)&&c())}requestAnimationFrame(c);function _(f){fe[f?"unshift":"push"](()=>{s=f,t(1,s)})}return l.$$set=f=>{"packet"in f&&t(0,r=f.packet)},l.$$.update=()=>{l.$$.dirty&12&&o&&t(2,o.playbackRate=n.speedMultiplier,o),l.$$.dirty&12&&o&&(n.running?o.play():o.pause())},[r,s,o,n,_]}class Mn extends ee{constructor(e){super(),te(this,e,Hn,xn,Z,{packet:0})}}function zn(l){let e,t,n,r,i,o,s,u,c=l[0].distance+"",a,_,f,m;return{c(){e=Ie("line"),t=H(),n=Ie("rect"),s=H(),u=Ie("text"),a=re(c),_=re(" km"),this.h()},l(h){e=Re(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),F(e).forEach(b),t=M(h),n=Re(h,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),F(n).forEach(b),s=M(h),u=Re(h,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var w=F(u);a=oe(w,c),_=oe(w," km"),w.forEach(b),this.h()},h(){k(e,"x1",l[4]),k(e,"y1",l[2]),k(e,"x2",l[3]),k(e,"y2",l[1]),k(n,"id",r=l[0].id),k(n,"x",i=l[5].x-Se/2),k(n,"y",o=l[5].y-Oe/2),k(n,"width",Se),k(n,"height",Oe),k(n,"class","svelte-zjn2k6"),k(u,"x",f=l[5].x),k(u,"y",m=l[5].y),k(u,"dominant-baseline","central"),k(u,"class","svelte-zjn2k6")},m(h,w){E(h,e,w),E(h,t,w),E(h,n,w),E(h,s,w),E(h,u,w),L(u,a),L(u,_)},p(h,[w]){w&16&&k(e,"x1",h[4]),w&4&&k(e,"y1",h[2]),w&8&&k(e,"x2",h[3]),w&2&&k(e,"y2",h[1]),w&1&&r!==(r=h[0].id)&&k(n,"id",r),w&32&&i!==(i=h[5].x-Se/2)&&k(n,"x",i),w&32&&o!==(o=h[5].y-Oe/2)&&k(n,"y",o),w&1&&c!==(c=h[0].distance+"")&&me(a,c),w&32&&f!==(f=h[5].x)&&k(u,"x",f),w&32&&m!==(m=h[5].y)&&k(u,"y",m)},i:ne,o:ne,d(h){h&&(b(e),b(t),b(n),b(s),b(u))}}}const Se=50,Oe=20;function ht(l,e){return(l+e)/2}function Fn(l,e,t){let n,r,i,o,s,{link:u}=e;return l.$$set=c=>{"link"in c&&t(0,u=c.link)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=u.source.node.x),l.$$.dirty&1&&t(3,r=u.target.node.x),l.$$.dirty&1&&t(2,i=u.source.node.y),l.$$.dirty&1&&t(1,o=u.target.node.y),l.$$.dirty&30&&t(5,s={x:ht(n,r),y:ht(i,o)})},[u,o,i,r,n,s]}class An extends ee{constructor(e){super(),te(this,e,Fn,zn,Z,{link:0})}}function Sn(l){let e,t,n,r,i,o,s,u=l[0].node.label+"",c,a,_;return{c(){e=Ie("circle"),o=H(),s=Ie("text"),c=re(u),this.h()},l(f){e=Re(f,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),F(e).forEach(b),o=M(f),s=Re(f,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var m=F(s);c=oe(m,u),m.forEach(b),this.h()},h(){k(e,"id",t=l[0].id.toString()),k(e,"cx",n=l[0].node.x),k(e,"cy",r=l[0].node.y),k(e,"r","20"),k(e,"fill",i=l[1][l[0].type]),k(e,"class","svelte-17jcsko"),k(s,"x",a=l[0].node.x),k(s,"y",_=l[0].node.y),k(s,"dominant-baseline","central"),k(s,"font-size","smaller"),k(s,"class","svelte-17jcsko")},m(f,m){E(f,e,m),E(f,o,m),E(f,s,m),L(s,c)},p(f,[m]){m&1&&t!==(t=f[0].id.toString())&&k(e,"id",t),m&1&&n!==(n=f[0].node.x)&&k(e,"cx",n),m&1&&r!==(r=f[0].node.y)&&k(e,"cy",r),m&1&&i!==(i=f[1][f[0].type])&&k(e,"fill",i),m&1&&u!==(u=f[0].node.label+"")&&me(c,u),m&1&&a!==(a=f[0].node.x)&&k(s,"x",a),m&1&&_!==(_=f[0].node.y)&&k(s,"y",_)},i:ne,o:ne,d(f){f&&(b(e),b(o),b(s))}}}function On(l,e,t){let{router:n}=e;const r={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return l.$$set=i=>{"router"in i&&t(0,n=i.router)},[n,r]}class jn extends ee{constructor(e){super(),te(this,e,On,Sn,Z,{router:0})}}function Un(l){let e,t,n,r;return{c(){e=D("div"),t=re(l[0]),this.h()},l(i){e=B(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var o=F(e);t=oe(o,l[0]),o.forEach(b),this.h()},h(){k(e,"draggable","true"),k(e,"role","button"),k(e,"tabindex","-1"),Ne(e,"background-color",l[1]),k(e,"class","svelte-dfkep2")},m(i,o){E(i,e,o),L(e,t),n||(r=K(e,"dragstart",l[2]),n=!0)},p(i,[o]){o&1&&me(t,i[0]),o&2&&Ne(e,"background-color",i[1])},i:ne,o:ne,d(i){i&&b(e),n=!1,r()}}}function Vn(l,e,t){let n;he(l,De,u=>t(4,n=u));let{text:r}=e,{type:i}=e,{color:o}=e;function s(u){var c;if(n){alert("Network is locked.");return}(c=u.dataTransfer)==null||c.setData("text/plain",i)}return l.$$set=u=>{"text"in u&&t(0,r=u.text),"type"in u&&t(3,i=u.type),"color"in u&&t(1,o=u.color)},[r,o,s,i]}class Yn extends ee{constructor(e){super(),te(this,e,Vn,Un,Z,{text:0,type:3,color:1})}}function pt(l,e,t){const n=l.slice();return n[6]=e[t],n}function _t(l,e,t){const n=l.slice();return n[6]=e[t],n}function gt(l,e,t){const n=l.slice();return n[9]=e[t],n}function qn(l){let e,t,n=J(l[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=mt(pt(l,n,o));const i=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Q()},l(o){for(let s=0;s<r.length;s+=1)r[s].l(o);e=Q()},m(o,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,s);E(o,e,s),t=!0},p(o,s){if(s&1){n=J(o[0]);let u;for(u=0;u<n.length;u+=1){const c=pt(o,n,u);r[u]?(r[u].p(c,s),R(r[u],1)):(r[u]=mt(c),r[u].c(),R(r[u],1),r[u].m(e.parentNode,e))}for(se(),u=n.length;u<r.length;u+=1)i(u);ue()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)R(r[s]);t=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)N(r[s]);t=!1},d(o){o&&b(e),ye(r,o)}}}function Xn(l){let e,t,n,r=J(l[3]),i=[];for(let a=0;a<r.length;a+=1)i[a]=bt(gt(l,r,a));const o=a=>N(i[a],1,1,()=>{i[a]=null});let s=J(l[2]),u=[];for(let a=0;a<s.length;a+=1)u[a]=kt(_t(l,s,a));const c=a=>N(u[a],1,1,()=>{u[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=H();for(let a=0;a<u.length;a+=1)u[a].c();t=Q()},l(a){for(let _=0;_<i.length;_+=1)i[_].l(a);e=M(a);for(let _=0;_<u.length;_+=1)u[_].l(a);t=Q()},m(a,_){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(a,_);E(a,e,_);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(a,_);E(a,t,_),n=!0},p(a,_){if(_&8){r=J(a[3]);let f;for(f=0;f<r.length;f+=1){const m=gt(a,r,f);i[f]?(i[f].p(m,_),R(i[f],1)):(i[f]=bt(m),i[f].c(),R(i[f],1),i[f].m(e.parentNode,e))}for(se(),f=r.length;f<i.length;f+=1)o(f);ue()}if(_&4){s=J(a[2]);let f;for(f=0;f<s.length;f+=1){const m=_t(a,s,f);u[f]?(u[f].p(m,_),R(u[f],1)):(u[f]=kt(m),u[f].c(),R(u[f],1),u[f].m(t.parentNode,t))}for(se(),f=s.length;f<u.length;f+=1)c(f);ue()}},i(a){if(!n){for(let _=0;_<r.length;_+=1)R(i[_]);for(let _=0;_<s.length;_+=1)R(u[_]);n=!0}},o(a){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)N(i[_]);u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)N(u[_]);n=!1},d(a){a&&(b(e),b(t)),ye(i,a),ye(u,a)}}}function mt(l){let e,t;const n=[l[6]];let r={};for(let i=0;i<n.length;i+=1)r=xe(r,n[i]);return e=new $e({props:r}),{c(){Y(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,o){X(e,i,o),t=!0},p(i,o){const s=o&1?Me(n,[ze(i[6])]):{};e.$set(s)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){G(e,i)}}}function bt(l){let e,t;const n=[l[9]];let r={};for(let i=0;i<n.length;i+=1)r=xe(r,n[i]);return e=new Yn({props:r}),{c(){Y(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,o){X(e,i,o),t=!0},p(i,o){const s=o&8?Me(n,[ze(i[9])]):{};e.$set(s)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){G(e,i)}}}function kt(l){let e,t;const n=[l[6]];let r={};for(let i=0;i<n.length;i+=1)r=xe(r,n[i]);return e=new $e({props:r}),{c(){Y(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,o){X(e,i,o),t=!0},p(i,o){const s=o&4?Me(n,[ze(i[6])]):{};e.$set(s)},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){G(e,i)}}}function Gn(l){let e,t,n,r,i,o;e=new $e({props:{text:l[1]?"Edit":"Simulation",callback:l[5],style:`width: 100px; background-color: ${l[1]?"#3CB371":"#6495ED"};`}});const s=[Xn,qn],u=[];function c(a,_){return a[1]?1:0}return n=c(l),r=u[n]=s[n](l),{c(){Y(e.$$.fragment),t=H(),r.c(),i=Q()},l(a){q(e.$$.fragment,a),t=M(a),r.l(a),i=Q()},m(a,_){X(e,a,_),E(a,t,_),u[n].m(a,_),E(a,i,_),o=!0},p(a,[_]){const f={};_&2&&(f.text=a[1]?"Edit":"Simulation"),_&2&&(f.callback=a[5]),_&2&&(f.style=`width: 100px; background-color: ${a[1]?"#3CB371":"#6495ED"};`),e.$set(f);let m=n;n=c(a),n===m?u[n].p(a,_):(se(),N(u[m],1,1,()=>{u[m]=null}),ue(),r=u[n],r?r.p(a,_):(r=u[n]=s[n](a),r.c()),R(r,1),r.m(i.parentNode,i))},i(a){o||(R(e.$$.fragment,a),R(r),o=!0)},o(a){N(e.$$.fragment,a),N(r),o=!1},d(a){a&&(b(t),b(i)),G(e,a),u[n].d(a)}}}function Wn(l,e,t){let n,r,i,o;he(l,U,c=>t(4,i=c)),he(l,De,c=>t(1,o=c));const s=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],u=()=>{je(De,o=!o,o),U.clearPackets()};return l.$$.update=()=>{l.$$.dirty&18&&t(0,r=[{text:"Clear Tables",callback:()=>{if(o){alert("Network is locked.");return}confirm("Are you sure you want to clear the routing tables?")&&U.clearTables()}},{text:"Export",callback:()=>{const c={routers:i.routers.map(h=>{if(h instanceof de)return{...h,type:h.type,firstHop:Object.fromEntries(h.firstHop)};if(h instanceof ve)return{...h,type:h.type,FIB:Object.fromEntries(h.FIB.map),LIB:Object.fromEntries(h.LIB.map)};if(h instanceof Pe)return{...h,type:h.type,LIB:Object.fromEntries(h.LIB.map)}}),links:i.links.map(h=>({...h,source:h.source.id,target:h.target.id}))},a=JSON.stringify(c,null,2),_=new Blob([a],{type:"application/json"}),f=window.URL.createObjectURL(_),m=document.createElement("a");m.href=f,m.download="network.json",m.click(),window.URL.revokeObjectURL(f)}}]),l.$$.dirty&3&&t(2,n=[{text:"Clear Network",callback:()=>{if(o){alert("Network is locked.");return}confirm("Are you sure you want to clear the network?")&&U.clear()}},{text:"Clear Links",callback:()=>{if(o){alert("Network is locked.");return}confirm("Are you sure you want to clear the links?")&&U.clearLinks()}},...r])},[r,o,n,s,i,u]}class Kn extends ee{constructor(e){super(),te(this,e,Wn,Gn,Z,{})}}function Jn(l){let e,t="Drag and drop routers to add them to the network.",n,r,i="Hold the shift key and drag routers to make links.",o,s,u="Hold the ctrl key and drag CE's to add destinations.",c,a,_="Double click a router or link to configure it.",f,m,h="The clear button will delete the entire network.",w,d,p="The export button will download your network as a .json file",g,v,A,z,I="Press Esc to close this popup.";return{c(){e=D("p"),e.textContent=t,n=H(),r=D("p"),r.textContent=i,o=H(),s=D("p"),s.textContent=u,c=H(),a=D("p"),a.textContent=_,f=H(),m=D("p"),m.textContent=h,w=H(),d=D("p"),d.textContent=p,g=H(),v=D("br"),A=H(),z=D("p"),z.textContent=I},l(y){e=B(y,"P",{"data-svelte-h":!0}),le(e)!=="svelte-bhocp0"&&(e.textContent=t),n=M(y),r=B(y,"P",{"data-svelte-h":!0}),le(r)!=="svelte-ddjc2m"&&(r.textContent=i),o=M(y),s=B(y,"P",{"data-svelte-h":!0}),le(s)!=="svelte-33j76o"&&(s.textContent=u),c=M(y),a=B(y,"P",{"data-svelte-h":!0}),le(a)!=="svelte-qvtprs"&&(a.textContent=_),f=M(y),m=B(y,"P",{"data-svelte-h":!0}),le(m)!=="svelte-vcl8s3"&&(m.textContent=h),w=M(y),d=B(y,"P",{"data-svelte-h":!0}),le(d)!=="svelte-1ww5ij7"&&(d.textContent=p),g=M(y),v=B(y,"BR",{}),A=M(y),z=B(y,"P",{"data-svelte-h":!0}),le(z)!=="svelte-1dvt5v1"&&(z.textContent=I)},m(y,P){E(y,e,P),E(y,n,P),E(y,r,P),E(y,o,P),E(y,s,P),E(y,c,P),E(y,a,P),E(y,f,P),E(y,m,P),E(y,w,P),E(y,d,P),E(y,g,P),E(y,v,P),E(y,A,P),E(y,z,P)},p:ne,d(y){y&&(b(e),b(n),b(r),b(o),b(s),b(c),b(a),b(f),b(m),b(w),b(d),b(g),b(v),b(A),b(z))}}}function Qn(l){let e,t,n,r,i,o;t=new $e({props:{text:"Help",callback:l[1]}});function s(c){l[2](c)}let u={$$slots:{default:[Jn]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.dialog=l[0]),r=new Ye({props:u}),fe.push(()=>ge(r,"dialog",s)),{c(){e=D("div"),Y(t.$$.fragment),n=H(),Y(r.$$.fragment)},l(c){e=B(c,"DIV",{});var a=F(e);q(t.$$.fragment,a),a.forEach(b),n=M(c),q(r.$$.fragment,c)},m(c,a){E(c,e,a),X(t,e,null),E(c,n,a),X(r,c,a),o=!0},p(c,[a]){const _={};a&1&&(_.callback=c[1]),t.$set(_);const f={};a&8&&(f.$$scope={dirty:a,ctx:c}),!i&&a&1&&(i=!0,f.dialog=c[0],_e(()=>i=!1)),r.$set(f)},i(c){o||(R(t.$$.fragment,c),R(r.$$.fragment,c),o=!0)},o(c){N(t.$$.fragment,c),N(r.$$.fragment,c),o=!1},d(c){c&&(b(e),b(n)),G(t),G(r,c)}}}function Zn(l,e,t){let n;const r=()=>{n.showModal()};function i(o){n=o,t(0,n)}return[n,r,i]}class el extends ee{constructor(e){super(),te(this,e,Zn,Qn,Z,{})}}function tl(l){let e,t,n,r,i,o;return e=new $e({props:{text:" - ",callback:l[1]}}),n=new $e({props:{text:"Fullscreen",callback:l[2]}}),i=new $e({props:{text:" + ",callback:l[3]}}),{c(){Y(e.$$.fragment),t=H(),Y(n.$$.fragment),r=H(),Y(i.$$.fragment)},l(s){q(e.$$.fragment,s),t=M(s),q(n.$$.fragment,s),r=M(s),q(i.$$.fragment,s)},m(s,u){X(e,s,u),E(s,t,u),X(n,s,u),E(s,r,u),X(i,s,u),o=!0},p(s,[u]){const c={};u&1&&(c.callback=s[1]),e.$set(c);const a={};u&1&&(a.callback=s[3]),i.$set(a)},i(s){o||(R(e.$$.fragment,s),R(n.$$.fragment,s),R(i.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),N(i.$$.fragment,s),o=!1},d(s){s&&(b(t),b(r)),G(e,s),G(n,s),G(i,s)}}}function nl(l,e,t){let{zoom:n}=e;const r=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,s)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},o=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,s)};return l.$$set=s=>{"zoom"in s&&t(0,n=s.zoom)},[n,r,i,o]}class ll extends ee{constructor(e){super(),te(this,e,nl,tl,Z,{zoom:0})}}function vt(l,e,t){const n=l.slice();return n[5]=e[t],n}function $t(l,e,t){const n=l.slice();return n[8]=e[t],n}function wt(l,e,t){const n=l.slice();return n[11]=e[t],n}function yt(l,e){let t,n,r;return n=new An({props:{link:e[11]}}),{key:l,first:null,c(){t=Q(),Y(n.$$.fragment),this.h()},l(i){t=Q(),q(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){E(i,t,o),X(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.link=e[11]),n.$set(s)},i(i){r||(R(n.$$.fragment,i),r=!0)},o(i){N(n.$$.fragment,i),r=!1},d(i){i&&b(t),G(n,i)}}}function Et(l,e){let t,n,r;return n=new jn({props:{router:e[8]}}),{key:l,first:null,c(){t=Q(),Y(n.$$.fragment),this.h()},l(i){t=Q(),q(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){E(i,t,o),X(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.router=e[8]),n.$set(s)},i(i){r||(R(n.$$.fragment,i),r=!0)},o(i){N(n.$$.fragment,i),r=!1},d(i){i&&b(t),G(n,i)}}}function Ct(l,e){let t,n,r;return n=new Mn({props:{packet:e[5]}}),{key:l,first:null,c(){t=Q(),Y(n.$$.fragment),this.h()},l(i){t=Q(),q(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){E(i,t,o),X(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.packet=e[5]),n.$set(s)},i(i){r||(R(n.$$.fragment,i),r=!0)},o(i){N(n.$$.fragment,i),r=!1},d(i){i&&b(t),G(n,i)}}}function rl(l){let e=[],t=new Map,n,r=[],i=new Map,o,s=[],u=new Map,c,a,_=J(l[1].links);const f=p=>p[11].id;for(let p=0;p<_.length;p+=1){let g=wt(l,_,p),v=f(g);t.set(v,e[p]=yt(v,g))}let m=J(l[1].routers);const h=p=>p[8].id;for(let p=0;p<m.length;p+=1){let g=$t(l,m,p),v=h(g);i.set(v,r[p]=Et(v,g))}let w=J(l[1].packets);const d=p=>p[5].id;for(let p=0;p<w.length;p+=1){let g=vt(l,w,p),v=d(g);u.set(v,s[p]=Ct(v,g))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();n=H();for(let p=0;p<r.length;p+=1)r[p].c();o=H();for(let p=0;p<s.length;p+=1)s[p].c();c=Q()},l(p){for(let g=0;g<e.length;g+=1)e[g].l(p);n=M(p);for(let g=0;g<r.length;g+=1)r[g].l(p);o=M(p);for(let g=0;g<s.length;g+=1)s[g].l(p);c=Q()},m(p,g){for(let v=0;v<e.length;v+=1)e[v]&&e[v].m(p,g);E(p,n,g);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(p,g);E(p,o,g);for(let v=0;v<s.length;v+=1)s[v]&&s[v].m(p,g);E(p,c,g),a=!0},p(p,g){g&2&&(_=J(p[1].links),se(),e=Ae(e,g,f,1,p,_,t,n.parentNode,Fe,yt,n,wt),ue()),g&2&&(m=J(p[1].routers),se(),r=Ae(r,g,h,1,p,m,i,o.parentNode,Fe,Et,o,$t),ue()),g&2&&(w=J(p[1].packets),se(),s=Ae(s,g,d,1,p,w,u,c.parentNode,Fe,Ct,c,vt),ue())},i(p){if(!a){for(let g=0;g<_.length;g+=1)R(e[g]);for(let g=0;g<m.length;g+=1)R(r[g]);for(let g=0;g<w.length;g+=1)R(s[g]);a=!0}},o(p){for(let g=0;g<e.length;g+=1)N(e[g]);for(let g=0;g<r.length;g+=1)N(r[g]);for(let g=0;g<s.length;g+=1)N(s[g]);a=!1},d(p){p&&(b(n),b(o),b(c));for(let g=0;g<e.length;g+=1)e[g].d(p);for(let g=0;g<r.length;g+=1)r[g].d(p);for(let g=0;g<s.length;g+=1)s[g].d(p)}}}function ol(l){let e,t,n,r,i,o,s,u,c,a,_,f,m,h,w,d,p;function g(I){l[2](I)}let v={$$slots:{default:[rl]},$$scope:{ctx:l}};l[0]!==void 0&&(v.zoom=l[0]),n=new wn({props:v}),fe.push(()=>ge(n,"zoom",g)),s=new Kn({}),a=new el({});function A(I){l[3](I)}let z={};return l[0]!==void 0&&(z.zoom=l[0]),m=new ll({props:z}),fe.push(()=>ge(m,"zoom",A)),d=new Pn({}),{c(){e=D("div"),t=D("div"),Y(n.$$.fragment),i=H(),o=D("div"),Y(s.$$.fragment),u=H(),c=D("div"),Y(a.$$.fragment),_=H(),f=D("div"),Y(m.$$.fragment),w=H(),Y(d.$$.fragment),this.h()},l(I){e=B(I,"DIV",{id:!0,class:!0});var y=F(e);t=B(y,"DIV",{id:!0,class:!0});var P=F(t);q(n.$$.fragment,P),i=M(P),o=B(P,"DIV",{id:!0,class:!0});var j=F(o);q(s.$$.fragment,j),j.forEach(b),u=M(P),c=B(P,"DIV",{id:!0,class:!0});var $=F(c);q(a.$$.fragment,$),$.forEach(b),_=M(P),f=B(P,"DIV",{id:!0,class:!0});var O=F(f);q(m.$$.fragment,O),O.forEach(b),P.forEach(b),w=M(y),q(d.$$.fragment,y),y.forEach(b),this.h()},h(){k(o,"id","top-left-bar"),k(o,"class","absolute-flex svelte-1kpnzxr"),k(c,"id","bottom-left-bar"),k(c,"class","absolute-flex svelte-1kpnzxr"),k(f,"id","bottom-right-bar"),k(f,"class","absolute-flex svelte-1kpnzxr"),k(t,"id","network"),k(t,"class","svelte-1kpnzxr"),k(e,"id","mpls"),k(e,"class","svelte-1kpnzxr")},m(I,y){E(I,e,y),L(e,t),X(n,t,null),L(t,i),L(t,o),X(s,o,null),L(t,u),L(t,c),X(a,c,null),L(t,_),L(t,f),X(m,f,null),L(e,w),X(d,e,null),p=!0},p(I,[y]){const P={};y&16386&&(P.$$scope={dirty:y,ctx:I}),!r&&y&1&&(r=!0,P.zoom=I[0],_e(()=>r=!1)),n.$set(P);const j={};!h&&y&1&&(h=!0,j.zoom=I[0],_e(()=>h=!1)),m.$set(j)},i(I){p||(R(n.$$.fragment,I),R(s.$$.fragment,I),R(a.$$.fragment,I),R(m.$$.fragment,I),R(d.$$.fragment,I),p=!0)},o(I){N(n.$$.fragment,I),N(s.$$.fragment,I),N(a.$$.fragment,I),N(m.$$.fragment,I),N(d.$$.fragment,I),p=!1},d(I){I&&b(e),G(n),G(s),G(a),G(m),G(d)}}}function il(l,e,t){let n,r;he(l,Te,u=>t(4,n=u)),he(l,U,u=>t(1,r=u));let i;Nt(()=>{window.addEventListener("visibilitychanged",()=>{je(Te,n.running=!document.hidden,n)})});function o(u){i=u,t(0,i)}function s(u){i=u,t(0,i)}return[i,r,o,s]}class sl extends ee{constructor(e){super(),te(this,e,il,ol,Z,{})}}function ul(l){let e,t;return e=new sl({}),{c(){Y(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,r){X(e,n,r),t=!0},p:ne,i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}class bl extends ee{constructor(e){super(),te(this,e,null,ul,Z,{})}}export{bl as component};
