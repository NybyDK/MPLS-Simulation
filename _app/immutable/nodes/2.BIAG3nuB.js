var Tr=Object.defineProperty;var Rr=(n,e,t)=>e in n?Tr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ae=(n,e,t)=>(Rr(n,typeof e!="symbol"?e+"":e,t),t);import{r as pt,x as lr,s as Ee,a as or,u as ur,g as cr,b as dr,y as fr,e as Oe,i as hr,n as Re,z as He,c as Be,o as pr,A as qe,B as en}from"../chunks/scheduler.DYvwBUv9.js";import{n as j,m as S,S as Ce,i as $e,e as E,c as C,a as A,d as _,l as b,g as k,z as oe,t as me,b as _e,h as T,j as Me,s as R,v as K,A as ce,f as I,w as Q,x as ee,r as Pe,p as De,B as at,y as te,C as Le,D as We,E as Ve,o as xe,q as Et,F as tt,G as nt,H as Ir,I as Cn}from"../chunks/index.CEZ_BoqP.js";import{w as tn}from"../chunks/index.DX-KyX9r.js";function ge(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function dn(n,e){j(n,1,1,()=>{e.delete(n.key)})}function fn(n,e,t,r,s,i,a,l,o,c,u,f){let m=n.length,g=i.length,d=m;const w={};for(;d--;)w[n[d].key]=d;const p=[],h=new Map,v=new Map,x=[];for(d=g;d--;){const D=f(s,i,d),N=t(D);let q=a.get(N);q?r&&x.push(()=>q.p(D,e)):(q=c(N,D),q.c()),h.set(N,p[d]=q),N in w&&v.set(N,Math.abs(d-w[N]))}const O=new Set,U=new Set;function V(D){S(D,1),D.m(l,u),a.set(D.key,D),u=D.first,g--}for(;m&&g;){const D=p[g-1],N=n[m-1],q=D.key,Z=N.key;D===N?(u=D.first,m--,g--):h.has(Z)?!a.has(q)||O.has(q)?V(D):U.has(Z)?m--:v.get(q)>v.get(Z)?(U.add(q),V(D)):(O.add(Z),m--):(o(N,a),m--)}for(;m--;){const D=n[m];h.has(D.key)||o(D,a)}for(;g;)V(p[g-1]);return pt(x),p}function nn(n,e){const t={},r={},s={$$scope:1};let i=n.length;for(;i--;){const a=n[i],l=e[i];if(l){for(const o in a)o in l||(r[o]=1);for(const o in l)s[o]||(t[o]=l[o],s[o]=1);n[i]=l}else for(const o in a)s[o]=1}for(const a in r)a in t||(t[a]=void 0);return t}function rn(n){return typeof n=="object"&&n!==null?n:{}}var de;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of i)a[l]=s[l];return n.objectValues(a)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},n.find=(s,i)=>{for(const a of s)if(i(a))return a},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(de||(de={}));var _n;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(_n||(_n={}));const H=de.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ut=n=>{switch(typeof n){case"undefined":return H.undefined;case"string":return H.string;case"number":return isNaN(n)?H.nan:H.number;case"boolean":return H.boolean;case"function":return H.function;case"bigint":return H.bigint;case"symbol":return H.symbol;case"object":return Array.isArray(n)?H.array:n===null?H.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?H.promise:typeof Map<"u"&&n instanceof Map?H.map:typeof Set<"u"&&n instanceof Set?H.set:typeof Date<"u"&&n instanceof Date?H.date:H.object;default:return H.unknown}},P=de.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Lr=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Je extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(t(a));else{let l=r,o=0;for(;o<a.path.length;){const c=a.path[o];o===a.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(t(a))):l[c]=l[c]||{_errors:[]},l=l[c],o++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,de.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Je.create=n=>new Je(n);const Tt=(n,e)=>{let t;switch(n.code){case P.invalid_type:n.received===H.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case P.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,de.jsonStringifyReplacer)}`;break;case P.unrecognized_keys:t=`Unrecognized key(s) in object: ${de.joinValues(n.keys,", ")}`;break;case P.invalid_union:t="Invalid input";break;case P.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${de.joinValues(n.options)}`;break;case P.invalid_enum_value:t=`Invalid enum value. Expected ${de.joinValues(n.options)}, received '${n.received}'`;break;case P.invalid_arguments:t="Invalid function arguments";break;case P.invalid_return_type:t="Invalid function return type";break;case P.invalid_date:t="Invalid date";break;case P.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:de.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case P.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case P.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case P.custom:t="Invalid input";break;case P.invalid_intersection_types:t="Intersection results could not be merged";break;case P.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case P.not_finite:t="Number must be finite";break;default:t=e.defaultError,de.assertNever(n)}return{message:t}};let mr=Tt;function Nr(n){mr=n}function Ut(){return mr}const qt=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],a={...s,path:i};let l="";const o=r.filter(c=>!!c).slice().reverse();for(const c of o)l=c(a,{data:e,defaultError:l}).message;return{...s,path:i,message:s.message||l}},Sr=[];function F(n,e){const t=qt({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ut(),Tt].filter(r=>!!r)});n.common.issues.push(t)}class je{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return J;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t)r.push({key:await s.key,value:await s.value});return je.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return J;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const J=Object.freeze({status:"aborted"}),_r=n=>({status:"dirty",value:n}),Ae=n=>({status:"valid",value:n}),gn=n=>n.status==="aborted",vn=n=>n.status==="dirty",Rt=n=>n.status==="valid",Yt=n=>typeof Promise<"u"&&n instanceof Promise;var W;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(W||(W={}));class rt{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $n=(n,e)=>{if(Rt(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Je(n.common.issues);return this._error=t,this._error}}};function ne(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,l)=>a.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:r??l.defaultError}:{message:t??l.defaultError},description:s}}class se{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ut(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ut(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new je,ctx:{common:e.parent.common,data:e.data,parsedType:ut(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Yt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ut(e)},i=this._parseSync({data:e,path:s.path,parent:s});return $n(s,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ut(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Yt(s)?s:Promise.resolve(s));return $n(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const a=e(s),l=()=>i.addIssue({code:P.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(o=>o?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new et({schema:this,typeName:X.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return it.create(this,this._def)}nullable(){return yt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ke.create(this,this._def)}promise(){return $t.create(this,this._def)}or(e){return St.create([this,e],this._def)}and(e){return Pt.create(this,e,this._def)}transform(e){return new et({...ne(this._def),schema:this,typeName:X.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Zt({...ne(this._def),innerType:this,defaultValue:t,typeName:X.ZodDefault})}brand(){return new vr({typeName:X.ZodBranded,type:this,...ne(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Jt({...ne(this._def),innerType:this,catchValue:t,typeName:X.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return At.create(this,e)}readonly(){return Qt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Pr=/^c[^\s-]{8,}$/i,Dr=/^[a-z][a-z0-9]*$/,Or=/^[0-9A-HJKMNP-TV-Z]{26}$/,Br=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jr=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Zr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hn;const Ar=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Mr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,zr=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Hr(n,e){return!!((e==="v4"||!e)&&Ar.test(n)||(e==="v6"||!e)&&Mr.test(n))}class Xe extends se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==H.string){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_type,expected:H.string,received:i.parsedType}),J}const r=new je;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:P.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:P.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,l=e.data.length<i.value;(a||l)&&(s=this._getOrReturnCtx(e,s),a?F(s,{code:P.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&F(s,{code:P.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")jr.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"email",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")hn||(hn=new RegExp(Zr,"u")),hn.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"emoji",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Br.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"uuid",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Pr.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"cuid",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Dr.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"cuid2",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Or.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"ulid",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),F(s,{validation:"url",code:P.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"regex",code:P.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),F(s,{code:P.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),F(s,{code:P.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),F(s,{code:P.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?zr(i).test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{code:P.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Hr(e.data,i.version)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"ip",code:P.invalid_string,message:i.message}),r.dirty()):de.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:P.invalid_string,...W.errToObj(r)})}_addCheck(e){return new Xe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...W.errToObj(e)})}url(e){return this._addCheck({kind:"url",...W.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...W.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...W.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...W.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...W.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...W.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...W.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...W.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...W.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...W.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...W.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...W.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...W.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...W.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...W.errToObj(t)})}nonempty(e){return this.min(1,W.errToObj(e))}trim(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Xe.create=n=>{var e;return new Xe({checks:[],typeName:X.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...ne(n)})};function Vr(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=parseInt(n.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class ct extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==H.number){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_type,expected:H.number,received:i.parsedType}),J}let r;const s=new je;for(const i of this._def.checks)i.kind==="int"?de.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),F(r,{code:P.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Vr(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),F(r,{code:P.not_finite,message:i.message}),s.dirty()):de.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,W.toString(t))}gt(e,t){return this.setLimit("min",e,!1,W.toString(t))}lte(e,t){return this.setLimit("max",e,!0,W.toString(t))}lt(e,t){return this.setLimit("max",e,!1,W.toString(t))}setLimit(e,t,r,s){return new ct({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:W.toString(s)}]})}_addCheck(e){return new ct({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:W.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:W.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:W.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:W.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:W.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:W.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:W.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:W.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:W.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&de.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ct.create=n=>new ct({checks:[],typeName:X.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...ne(n)});class dt extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==H.bigint){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_type,expected:H.bigint,received:i.parsedType}),J}let r;const s=new je;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):de.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,W.toString(t))}gt(e,t){return this.setLimit("min",e,!1,W.toString(t))}lte(e,t){return this.setLimit("max",e,!0,W.toString(t))}lt(e,t){return this.setLimit("max",e,!1,W.toString(t))}setLimit(e,t,r,s){return new dt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:W.toString(s)}]})}_addCheck(e){return new dt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:W.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:W.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:W.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:W.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:W.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}dt.create=n=>{var e;return new dt({checks:[],typeName:X.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...ne(n)})};class It extends se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==H.boolean){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:H.boolean,received:r.parsedType}),J}return Ae(e.data)}}It.create=n=>new It({typeName:X.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...ne(n)});class gt extends se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==H.date){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_type,expected:H.date,received:i.parsedType}),J}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_date}),J}const r=new je;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:P.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:P.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):de.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new gt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:W.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:W.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}gt.create=n=>new gt({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:X.ZodDate,...ne(n)});class Wt extends se{_parse(e){if(this._getType(e)!==H.symbol){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:H.symbol,received:r.parsedType}),J}return Ae(e.data)}}Wt.create=n=>new Wt({typeName:X.ZodSymbol,...ne(n)});class Lt extends se{_parse(e){if(this._getType(e)!==H.undefined){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:H.undefined,received:r.parsedType}),J}return Ae(e.data)}}Lt.create=n=>new Lt({typeName:X.ZodUndefined,...ne(n)});class Nt extends se{_parse(e){if(this._getType(e)!==H.null){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:H.null,received:r.parsedType}),J}return Ae(e.data)}}Nt.create=n=>new Nt({typeName:X.ZodNull,...ne(n)});class Ct extends se{constructor(){super(...arguments),this._any=!0}_parse(e){return Ae(e.data)}}Ct.create=n=>new Ct({typeName:X.ZodAny,...ne(n)});class _t extends se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ae(e.data)}}_t.create=n=>new _t({typeName:X.ZodUnknown,...ne(n)});class lt extends se{_parse(e){const t=this._getOrReturnCtx(e);return F(t,{code:P.invalid_type,expected:H.never,received:t.parsedType}),J}}lt.create=n=>new lt({typeName:X.ZodNever,...ne(n)});class Gt extends se{_parse(e){if(this._getType(e)!==H.undefined){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:H.void,received:r.parsedType}),J}return Ae(e.data)}}Gt.create=n=>new Gt({typeName:X.ZodVoid,...ne(n)});class Ke extends se{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==H.array)return F(t,{code:P.invalid_type,expected:H.array,received:t.parsedType}),J;if(s.exactLength!==null){const a=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(a||l)&&(F(t,{code:a?P.too_big:P.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(F(t,{code:P.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(F(t,{code:P.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((a,l)=>s.type._parseAsync(new rt(t,a,t.path,l)))).then(a=>je.mergeArray(r,a));const i=[...t.data].map((a,l)=>s.type._parseSync(new rt(t,a,t.path,l)));return je.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Ke({...this._def,minLength:{value:e,message:W.toString(t)}})}max(e,t){return new Ke({...this._def,maxLength:{value:e,message:W.toString(t)}})}length(e,t){return new Ke({...this._def,exactLength:{value:e,message:W.toString(t)}})}nonempty(e){return this.min(1,e)}}Ke.create=(n,e)=>new Ke({type:n,minLength:null,maxLength:null,exactLength:null,typeName:X.ZodArray,...ne(e)});function wt(n){if(n instanceof ke){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=it.create(wt(r))}return new ke({...n._def,shape:()=>e})}else return n instanceof Ke?new Ke({...n._def,type:wt(n.element)}):n instanceof it?it.create(wt(n.unwrap())):n instanceof yt?yt.create(wt(n.unwrap())):n instanceof st?st.create(n.items.map(e=>wt(e))):n}class ke extends se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=de.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==H.object){const c=this._getOrReturnCtx(e);return F(c,{code:P.invalid_type,expected:H.object,received:c.parsedType}),J}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof lt&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||l.push(c);const o=[];for(const c of a){const u=i[c],f=s.data[c];o.push({key:{status:"valid",value:c},value:u._parse(new rt(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof lt){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of l)o.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")l.length>0&&(F(s,{code:P.unrecognized_keys,keys:l}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of l){const f=s.data[u];o.push({key:{status:"valid",value:u},value:c._parse(new rt(s,f,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of o){const f=await u.key;c.push({key:f,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>je.mergeObjectSync(r,c)):je.mergeObjectSync(r,o)}get shape(){return this._def.shape()}strict(e){return W.errToObj,new ke({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,i,a,l;const o=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,r).message)!==null&&a!==void 0?a:r.defaultError;return t.code==="unrecognized_keys"?{message:(l=W.errToObj(e).message)!==null&&l!==void 0?l:o}:{message:o}}}:{}})}strip(){return new ke({...this._def,unknownKeys:"strip"})}passthrough(){return new ke({...this._def,unknownKeys:"passthrough"})}extend(e){return new ke({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ke({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:X.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ke({...this._def,catchall:e})}pick(e){const t={};return de.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ke({...this._def,shape:()=>t})}omit(e){const t={};return de.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ke({...this._def,shape:()=>t})}deepPartial(){return wt(this)}partial(e){const t={};return de.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new ke({...this._def,shape:()=>t})}required(e){const t={};return de.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof it;)i=i._def.innerType;t[r]=i}}),new ke({...this._def,shape:()=>t})}keyof(){return gr(de.objectKeys(this.shape))}}ke.create=(n,e)=>new ke({shape:()=>n,unknownKeys:"strip",catchall:lt.create(),typeName:X.ZodObject,...ne(e)});ke.strictCreate=(n,e)=>new ke({shape:()=>n,unknownKeys:"strict",catchall:lt.create(),typeName:X.ZodObject,...ne(e)});ke.lazycreate=(n,e)=>new ke({shape:n,unknownKeys:"strip",catchall:lt.create(),typeName:X.ZodObject,...ne(e)});class St extends se{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const a=i.map(l=>new Je(l.ctx.common.issues));return F(t,{code:P.invalid_union,unionErrors:a}),J}if(t.common.async)return Promise.all(r.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const o of r){const c={...t,common:{...t.common,issues:[]},parent:null},u=o._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=a.map(o=>new Je(o));return F(t,{code:P.invalid_union,unionErrors:l}),J}}get options(){return this._def.options}}St.create=(n,e)=>new St({options:n,typeName:X.ZodUnion,...ne(e)});const Ft=n=>n instanceof Ot?Ft(n.schema):n instanceof et?Ft(n.innerType()):n instanceof Bt?[n.value]:n instanceof ft?n.options:n instanceof jt?Object.keys(n.enum):n instanceof Zt?Ft(n._def.innerType):n instanceof Lt?[void 0]:n instanceof Nt?[null]:null;class sn extends se{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.object)return F(t,{code:P.invalid_type,expected:H.object,received:t.parsedType}),J;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(F(t,{code:P.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),J)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const a=Ft(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new sn({typeName:X.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ne(r)})}}function yn(n,e){const t=ut(n),r=ut(e);if(n===e)return{valid:!0,data:n};if(t===H.object&&r===H.object){const s=de.objectKeys(e),i=de.objectKeys(n).filter(l=>s.indexOf(l)!==-1),a={...n,...e};for(const l of i){const o=yn(n[l],e[l]);if(!o.valid)return{valid:!1};a[l]=o.data}return{valid:!0,data:a}}else if(t===H.array&&r===H.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const a=n[i],l=e[i],o=yn(a,l);if(!o.valid)return{valid:!1};s.push(o.data)}return{valid:!0,data:s}}else return t===H.date&&r===H.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Pt extends se{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(gn(i)||gn(a))return J;const l=yn(i.value,a.value);return l.valid?((vn(i)||vn(a))&&t.dirty(),{status:t.value,value:l.data}):(F(r,{code:P.invalid_intersection_types}),J)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Pt.create=(n,e,t)=>new Pt({left:n,right:e,typeName:X.ZodIntersection,...ne(t)});class st extends se{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.array)return F(r,{code:P.invalid_type,expected:H.array,received:r.parsedType}),J;if(r.data.length<this._def.items.length)return F(r,{code:P.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),J;!this._def.rest&&r.data.length>this._def.items.length&&(F(r,{code:P.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((a,l)=>{const o=this._def.items[l]||this._def.rest;return o?o._parse(new rt(r,a,r.path,l)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>je.mergeArray(t,a)):je.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new st({...this._def,rest:e})}}st.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new st({items:n,typeName:X.ZodTuple,rest:null,...ne(e)})};class Dt extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.object)return F(r,{code:P.invalid_type,expected:H.object,received:r.parsedType}),J;const s=[],i=this._def.keyType,a=this._def.valueType;for(const l in r.data)s.push({key:i._parse(new rt(r,l,r.path,l)),value:a._parse(new rt(r,r.data[l],r.path,l))});return r.common.async?je.mergeObjectAsync(t,s):je.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof se?new Dt({keyType:e,valueType:t,typeName:X.ZodRecord,...ne(r)}):new Dt({keyType:Xe.create(),valueType:e,typeName:X.ZodRecord,...ne(t)})}}class Xt extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.map)return F(r,{code:P.invalid_type,expected:H.map,received:r.parsedType}),J;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([l,o],c)=>({key:s._parse(new rt(r,l,r.path,[c,"key"])),value:i._parse(new rt(r,o,r.path,[c,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const o of a){const c=await o.key,u=await o.value;if(c.status==="aborted"||u.status==="aborted")return J;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(c.value,u.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const o of a){const c=o.key,u=o.value;if(c.status==="aborted"||u.status==="aborted")return J;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(c.value,u.value)}return{status:t.value,value:l}}}}Xt.create=(n,e,t)=>new Xt({valueType:e,keyType:n,typeName:X.ZodMap,...ne(t)});class vt extends se{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.set)return F(r,{code:P.invalid_type,expected:H.set,received:r.parsedType}),J;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(F(r,{code:P.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(F(r,{code:P.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function a(o){const c=new Set;for(const u of o){if(u.status==="aborted")return J;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const l=[...r.data.values()].map((o,c)=>i._parse(new rt(r,o,r.path,c)));return r.common.async?Promise.all(l).then(o=>a(o)):a(l)}min(e,t){return new vt({...this._def,minSize:{value:e,message:W.toString(t)}})}max(e,t){return new vt({...this._def,maxSize:{value:e,message:W.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}vt.create=(n,e)=>new vt({valueType:n,minSize:null,maxSize:null,typeName:X.ZodSet,...ne(e)});class xt extends se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.function)return F(t,{code:P.invalid_type,expected:H.function,received:t.parsedType}),J;function r(l,o){return qt({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ut(),Tt].filter(c=>!!c),issueData:{code:P.invalid_arguments,argumentsError:o}})}function s(l,o){return qt({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ut(),Tt].filter(c=>!!c),issueData:{code:P.invalid_return_type,returnTypeError:o}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof $t){const l=this;return Ae(async function(...o){const c=new Je([]),u=await l._def.args.parseAsync(o,i).catch(g=>{throw c.addIssue(r(o,g)),c}),f=await Reflect.apply(a,this,u);return await l._def.returns._def.type.parseAsync(f,i).catch(g=>{throw c.addIssue(s(f,g)),c})})}else{const l=this;return Ae(function(...o){const c=l._def.args.safeParse(o,i);if(!c.success)throw new Je([r(o,c.error)]);const u=Reflect.apply(a,this,c.data),f=l._def.returns.safeParse(u,i);if(!f.success)throw new Je([s(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new xt({...this._def,args:st.create(e).rest(_t.create())})}returns(e){return new xt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new xt({args:e||st.create([]).rest(_t.create()),returns:t||_t.create(),typeName:X.ZodFunction,...ne(r)})}}class Ot extends se{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ot.create=(n,e)=>new Ot({getter:n,typeName:X.ZodLazy,...ne(e)});class Bt extends se{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return F(t,{received:t.data,code:P.invalid_literal,expected:this._def.value}),J}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bt.create=(n,e)=>new Bt({value:n,typeName:X.ZodLiteral,...ne(e)});function gr(n,e){return new ft({values:n,typeName:X.ZodEnum,...ne(e)})}class ft extends se{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return F(t,{expected:de.joinValues(r),received:t.parsedType,code:P.invalid_type}),J}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return F(t,{received:t.data,code:P.invalid_enum_value,options:r}),J}return Ae(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return ft.create(e)}exclude(e){return ft.create(this.options.filter(t=>!e.includes(t)))}}ft.create=gr;class jt extends se{_parse(e){const t=de.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==H.string&&r.parsedType!==H.number){const s=de.objectValues(t);return F(r,{expected:de.joinValues(s),received:r.parsedType,code:P.invalid_type}),J}if(t.indexOf(e.data)===-1){const s=de.objectValues(t);return F(r,{received:r.data,code:P.invalid_enum_value,options:s}),J}return Ae(e.data)}get enum(){return this._def.values}}jt.create=(n,e)=>new jt({values:n,typeName:X.ZodNativeEnum,...ne(e)});class $t extends se{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.promise&&t.common.async===!1)return F(t,{code:P.invalid_type,expected:H.promise,received:t.parsedType}),J;const r=t.parsedType===H.promise?t.data:Promise.resolve(t.data);return Ae(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}$t.create=(n,e)=>new $t({type:n,typeName:X.ZodPromise,...ne(e)});class et extends se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===X.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{F(r,a),a.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(a).then(l=>this._def.schema._parseAsync({data:l,path:r.path,parent:r})):this._def.schema._parseSync({data:a,path:r.path,parent:r})}if(s.type==="refinement"){const a=l=>{const o=s.refinement(l,i);if(r.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?J:(l.status==="dirty"&&t.dirty(),a(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?J:(l.status==="dirty"&&t.dirty(),a(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Rt(a))return a;const l=s.transform(a.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Rt(a)?Promise.resolve(s.transform(a.value,i)).then(l=>({status:t.value,value:l})):a);de.assertNever(s)}}et.create=(n,e,t)=>new et({schema:n,typeName:X.ZodEffects,effect:e,...ne(t)});et.createWithPreprocess=(n,e,t)=>new et({schema:e,effect:{type:"preprocess",transform:n},typeName:X.ZodEffects,...ne(t)});class it extends se{_parse(e){return this._getType(e)===H.undefined?Ae(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}it.create=(n,e)=>new it({innerType:n,typeName:X.ZodOptional,...ne(e)});class yt extends se{_parse(e){return this._getType(e)===H.null?Ae(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yt.create=(n,e)=>new yt({innerType:n,typeName:X.ZodNullable,...ne(e)});class Zt extends se{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===H.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Zt.create=(n,e)=>new Zt({innerType:n,typeName:X.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ne(e)});class Jt extends se{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Yt(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Je(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Je(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Jt.create=(n,e)=>new Jt({innerType:n,typeName:X.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ne(e)});class Kt extends se{_parse(e){if(this._getType(e)!==H.nan){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:H.nan,received:r.parsedType}),J}return{status:"valid",value:e.data}}}Kt.create=n=>new Kt({typeName:X.ZodNaN,...ne(n)});const Fr=Symbol("zod_brand");class vr extends se{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class At extends se{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?J:i.status==="dirty"?(t.dirty(),_r(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?J:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new At({in:e,out:t,typeName:X.ZodPipeline})}}class Qt extends se{_parse(e){const t=this._def.innerType._parse(e);return Rt(t)&&(t.value=Object.freeze(t.value)),t}}Qt.create=(n,e)=>new Qt({innerType:n,typeName:X.ZodReadonly,...ne(e)});const yr=(n,e={},t)=>n?Ct.create().superRefine((r,s)=>{var i,a;if(!n(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,o=(a=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,c=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...c,fatal:o})}}):Ct.create(),Ur={object:ke.lazycreate};var X;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(X||(X={}));const qr=(n,e={message:`Input not instance of ${n.name}`})=>yr(t=>t instanceof n,e),br=Xe.create,kr=ct.create,Yr=Kt.create,Wr=dt.create,wr=It.create,Gr=gt.create,Xr=Wt.create,Jr=Lt.create,Kr=Nt.create,Qr=Ct.create,es=_t.create,ts=lt.create,ns=Gt.create,rs=Ke.create,ss=ke.create,is=ke.strictCreate,as=St.create,ls=sn.create,os=Pt.create,us=st.create,cs=Dt.create,ds=Xt.create,fs=vt.create,hs=xt.create,ps=Ot.create,ms=Bt.create,_s=ft.create,gs=jt.create,vs=$t.create,Tn=et.create,ys=it.create,bs=yt.create,ks=et.createWithPreprocess,ws=At.create,xs=()=>br().optional(),Es=()=>kr().optional(),Cs=()=>wr().optional(),$s={string:n=>Xe.create({...n,coerce:!0}),number:n=>ct.create({...n,coerce:!0}),boolean:n=>It.create({...n,coerce:!0}),bigint:n=>dt.create({...n,coerce:!0}),date:n=>gt.create({...n,coerce:!0})},Ts=J;var le=Object.freeze({__proto__:null,defaultErrorMap:Tt,setErrorMap:Nr,getErrorMap:Ut,makeIssue:qt,EMPTY_PATH:Sr,addIssueToContext:F,ParseStatus:je,INVALID:J,DIRTY:_r,OK:Ae,isAborted:gn,isDirty:vn,isValid:Rt,isAsync:Yt,get util(){return de},get objectUtil(){return _n},ZodParsedType:H,getParsedType:ut,ZodType:se,ZodString:Xe,ZodNumber:ct,ZodBigInt:dt,ZodBoolean:It,ZodDate:gt,ZodSymbol:Wt,ZodUndefined:Lt,ZodNull:Nt,ZodAny:Ct,ZodUnknown:_t,ZodNever:lt,ZodVoid:Gt,ZodArray:Ke,ZodObject:ke,ZodUnion:St,ZodDiscriminatedUnion:sn,ZodIntersection:Pt,ZodTuple:st,ZodRecord:Dt,ZodMap:Xt,ZodSet:vt,ZodFunction:xt,ZodLazy:Ot,ZodLiteral:Bt,ZodEnum:ft,ZodNativeEnum:jt,ZodPromise:$t,ZodEffects:et,ZodTransformer:et,ZodOptional:it,ZodNullable:yt,ZodDefault:Zt,ZodCatch:Jt,ZodNaN:Kt,BRAND:Fr,ZodBranded:vr,ZodPipeline:At,ZodReadonly:Qt,custom:yr,Schema:se,ZodSchema:se,late:Ur,get ZodFirstPartyTypeKind(){return X},coerce:$s,any:Qr,array:rs,bigint:Wr,boolean:wr,date:Gr,discriminatedUnion:ls,effect:Tn,enum:_s,function:hs,instanceof:qr,intersection:os,lazy:ps,literal:ms,map:ds,nan:Yr,nativeEnum:gs,never:ts,null:Kr,nullable:bs,number:kr,object:ss,oboolean:Cs,onumber:Es,optional:ys,ostring:xs,pipeline:ws,preprocess:ks,promise:vs,record:cs,set:fs,strictObject:is,string:br,symbol:Xr,transformer:Tn,tuple:us,undefined:Jr,union:as,unknown:es,void:ns,NEVER:Ts,ZodIssueCode:P,quotelessJson:Lr,ZodError:Je});const Rs=[{id:1,node:{label:"CE 1",x:-350,y:-25},address:"CE-IP-1",firstHop:{"CE-IP-5":2,"CE-IP-6":2},type:"CE"},{id:2,node:{label:"LER 2",x:-200,y:-25},FIB:{"CE-IP-5":{label:306030,nextHop:"3"},"CE-IP-6":{label:61379,nextHop:"3"}},LFIB:{},type:"LER"},{id:3,node:{label:"LSR 3",x:-100,y:-25},LFIB:{61379:{outgoingLabel:974214,nextHop:"4"},306030:{outgoingLabel:349733,nextHop:"4"}},type:"LSR"},{id:4,node:{label:"LER 4",x:0,y:-25},FIB:{},LFIB:{349733:{outgoingLabel:-1,nextHop:"CE-IP-5"},974214:{outgoingLabel:-1,nextHop:"CE-IP-6"}},type:"LER"},{id:5,node:{label:"CE 5",x:125,y:-100},address:"CE-IP-5",firstHop:{},type:"CE"},{id:6,node:{label:"CE 6",x:125,y:50},address:"CE-IP-6",firstHop:{},type:"CE"}],Is=[{bandwidth:0,id:"1-2",source:1,target:2},{bandwidth:0,id:"2-3",source:2,target:3},{bandwidth:0,id:"3-4",source:3,target:4},{bandwidth:0,id:"4-5",source:4,target:5},{bandwidth:0,id:"4-6",source:4,target:6}],Ls={routers:Rs,links:Is},Ns=le.object({label:le.string(),x:le.number(),y:le.number()}),xr=le.record(le.coerce.number(),le.object({outgoingLabel:le.number(),nextHop:le.string()})),Ss=le.record(le.string(),le.object({label:le.number(),nextHop:le.string()})),Ps=le.record(le.number()),Ds=le.object({address:le.string(),firstHop:Ps.or(le.object({})),type:le.literal("CE")}),Os=le.object({LFIB:xr.or(le.object({})),FIB:Ss.or(le.object({})),type:le.literal("LER")}),Bs=le.object({LFIB:xr.or(le.object({})),type:le.literal("LSR")}),js=le.object({id:le.number(),node:Ns}).and(le.union([Ds,Os,Bs])),Zs=le.object({id:le.string(),source:le.number(),target:le.number(),bandwidth:le.number()}),As=le.object({routers:le.array(js),links:le.array(Zs)}),Vt=As.safeParse(Ls),Ge=tn({running:!0,enableFallback:!1,speedMultiplier:1,maxPackets:100});let Ms=class{constructor(e,t,r){ae(this,"bandwidth",0);this.id=e,this.source=t,this.target=r}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},bn=class{constructor(e,t){this.id=e,this.node=t}};class Ze extends bn{constructor(){super(...arguments);ae(this,"address",`CE-IP-${this.id}`);ae(this,"firstHop",new Map);ae(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});ae(this,"receiveEntry",(t,r)=>{this.firstHop.set(t,r)});ae(this,"updateAddress",(t,r)=>{const s=this.firstHop.get(t);if(s===void 0){alert(`Unable to update old first hop Address '${t}' to '${r}'.`);return}this.firstHop.set(r,s),this.firstHop.delete(t)});ae(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop("CE received packet. Dropping.")}clearTables(){this.firstHop.clear()}get type(){return"CE"}}let zs=class{constructor(e=void 0){ae(this,"map");ae(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});ae(this,"receiveEntry",(e,t,r)=>{this.map.set(e,{label:t,nextHop:r})});ae(this,"updateAddress",(e,t)=>{const r=this.map.get(e);if(r===void 0){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,r),this.map.delete(e)});ae(this,"deleteEntry",e=>{this.map.delete(e)});this.map=e||new Map}get(e){return this.map.get(e)}},Er=class{constructor(){ae(this,"map",new Map);ae(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});ae(this,"receiveEntry",(e,t,r)=>{this.map.set(e,{outgoingLabel:t,nextHop:r})});ae(this,"updateLabel",(e,t)=>{const r=this.map.get(e);if(!r){alert(`Unable to update old LFIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,r),this.map.delete(e)});ae(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Ye extends bn{constructor(){super(...arguments);ae(this,"FIB",new zs);ae(this,"LFIB",new Er)}receivePacket(t){var r,s,i,a;if(t.fallbackRoute)return t.fallback(this);if(t.label===-1){const l=t.destination,o=(r=this.FIB.get(l.address))==null?void 0:r.nextHop;if(!o)return t.fallback(this);const c=(s=this.FIB.get(l.address))==null?void 0:s.label;if(!c)return t.fallback(this);t.label=c;const u=Y.getRouter(parseInt(o));if(!u)return t.fallback(this);t.nextHop=u}else{const l=(i=this.LFIB.get(t.label))==null?void 0:i.nextHop;if(!l)return t.fallback(this);const o=(a=this.LFIB.get(t.label))==null?void 0:a.outgoingLabel;if(!o)return t.fallback(this);t.label=o;const c=Y.getCERouter(l);if(!c)return t.fallback(this);t.nextHop=c}t.decrementTTL()}clearTables(){this.FIB.map.clear(),this.LFIB.map.clear()}get type(){return"LER"}}function kn(n,e){const t=Y.routers,r=t.length,s=new Array(r).fill(1/0),i=new Array(r).fill(!1),a=new Array(r).fill(null);s[t.indexOf(n)]=0;let l=!1,o=!1;for(;!l;){let f=null,m=1/0;for(const[g,d]of t.entries())if(!i[g]&&s[g]<m){if(d instanceof Ye){if(!o)o=!0;else if(!Y.links.some(p=>p.source===d&&p.target===e||p.target===d&&p.source===e))continue}f=d,m=s[g]}if(!f||f.id===e.id){l=!0;continue}i[t.indexOf(f)]=!0;for(const g of Y.links){let d;if(g.source===f)d=g.target;else if(g.target===f)d=g.source;else continue;const w=t.indexOf(d),p=m+g.distance;p<s[w]&&(s[w]=p,a[w]=f)}}const c=[];let u=e;for(;u;){c.unshift(u);const f=t.indexOf(u);u=a[f]}return c}let Hs=class{constructor(e,t,r,s){ae(this,"ttl",32);ae(this,"label",-1);ae(this,"fallbackRoute");ae(this,"nextHop");this.id=e,this.source=t,this.destination=r,this.node=s;const i=t.firstHop.get(r.address);if(!i){this.drop("No next hop router id found.");return}const a=Y.getRouter(i);if(!a){this.drop("No next hop router found.");return}this.nextHop=a}decrementTTL(){--this.ttl<=0&&this.drop()}fallback(e){if(!lr(Ge).enableFallback)return this.drop("Fallback is disabled.");if(this.label=-1,this.decrementTTL(),this.fallbackRoute)return this.setFallbackNextHop();if(this.fallbackRoute=kn(e,this.destination),!(this.fallbackRoute[this.fallbackRoute.length-1]instanceof Ze))return this.drop("The destination is not a CE.");this.fallbackRoute.shift(),this.setFallbackNextHop()}validateNextHop(e){return Y.doesLinkExist({source:e,target:this.nextHop})||Y.doesLinkExist({source:this.nextHop,target:e})}setFallbackNextHop(){var t;const e=(t=this.fallbackRoute)==null?void 0:t.shift();this.fallbackRoute&&e?this.nextHop=e:this.drop("Unable to set fallback IP routing next hop")}drop(e="Unknown"){console.warn("Packet dropped: ",e),Y.deletePacket(this.id)}};class bt extends bn{constructor(){super(...arguments);ae(this,"LFIB",new Er)}receivePacket(t){var a,l;if(t.fallbackRoute)return t.fallback(this);const r=(a=this.LFIB.get(t.label))==null?void 0:a.nextHop;if(!r)return t.fallback(this);const s=(l=this.LFIB.get(t.label))==null?void 0:l.outgoingLabel;if(!s)return t.fallback(this);t.label=s;const i=Y.getRouter(parseInt(r));if(!i)return t.fallback(this);t.nextHop=i,t.decrementTTL()}clearTables(){this.LFIB.map.clear()}get type(){return"LSR"}}const Vs={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class Fs{constructor(){ae(this,"store",tn({routers:[],links:[],packets:[]}));ae(this,"set",this.store.set);ae(this,"update",this.store.update);ae(this,"subscribe",this.store.subscribe);ae(this,"_routers",[]);ae(this,"_links",[]);ae(this,"_packets",[]);ae(this,"routerMap",new Map);ae(this,"CEMap",new Map);ae(this,"routerCounter",1);ae(this,"packetCounter",1);ae(this,"maxPackets",lr(Ge).maxPackets);ae(this,"setRouterCount",e=>this.routerCounter=e);Ge.subscribe(e=>{this.maxPackets=e.maxPackets,this._packets=this._packets.slice(-this.maxPackets),this.notify()})}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!Vs[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new Ms(`${e.source.id}-${e.target.id}`,e.source,e.target);e.bandwidth!==void 0&&(t.bandwidth=e.bandwidth),this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const r=this.routerCounter++,s=new Ze(r,{label:`CE ${r}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}createLER(e,t){const r=this.routerCounter++,s=new Ye(r,{label:`LER ${r}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}createLSR(e,t){const r=this.routerCounter++,s=new bt(r,{label:`LSR ${r}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof Ze&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(r=>r.id!==e),this._links=this._links.filter(r=>r.source.id!==e&&r.target.id!==e),this.routerMap.delete(e),t instanceof Ze&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}getSureCERouter(e){const t=this.getCERouter(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){if(this._packets.length>=this.maxPackets)return;const r=new Hs(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(r),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearTables(){for(const e of this._routers)e.clearTables();this.notify()}clearLinks(){this._links=[],this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=1,this.packetCounter=1,this.notify()}notify(){this.store.set(this.networkState)}}const Us=new Fs,Y=Us;function qs(){if(!Vt.success)throw Vt.error;let n=0;for(const e of Vt.data.routers)switch(n=Math.max(n,e.id),e.type){case"LER":{const t=new Ye(e.id,e.node);Object.entries(e.LFIB).forEach(([r,s])=>{t.LFIB.receiveEntry(parseInt(r),s.outgoingLabel,s.nextHop)}),Object.entries(e.FIB).forEach(([r,s])=>{t.FIB.receiveEntry(r,s.label,s.nextHop)}),Y.addRouter(t);break}case"LSR":{const t=new bt(e.id,e.node);Object.entries(e.LFIB).forEach(([r,s])=>{t.LFIB.receiveEntry(parseInt(r),s.outgoingLabel,s.nextHop)}),Y.addRouter(t);break}case"CE":{const t=new Ze(e.id,e.node);Object.entries(e.firstHop).forEach(([r,s])=>{t.receiveEntry(r,s)}),Y.addRouter(t);break}}Y.setRouterCount(n+1);for(const e of Vt.data.links){const t=Y.getRouter(e.source),r=Y.getRouter(e.target);t&&r&&Y.addLink({source:t,target:r,bandwidth:e.bandwidth})}}const Ys={placing:null},Ue=tn(Ys),ht=tn(!1);function Ws(n){let e,t,r,s;const i=n[2].default,a=or(i,n,n[1],null);return{c(){e=E("dialog"),a&&a.c(),this.h()},l(l){e=C(l,"DIALOG",{class:!0});var o=A(e);a&&a.l(o),o.forEach(_),this.h()},h(){b(e,"class","svelte-p5wejv")},m(l,o){k(l,e,o),a&&a.m(e,null),n[4](e),t=!0,r||(s=oe(e,"close",n[3]),r=!0)},p(l,[o]){a&&a.p&&(!t||o&2)&&ur(a,i,l,l[1],t?dr(i,l[1],o,null):cr(l[1]),null)},i(l){t||(S(a,l),t=!0)},o(l){j(a,l),t=!1},d(l){l&&_(e),a&&a.d(l),n[4](null),r=!1,s()}}}function Gs(n,e,t){let{$$slots:r={},$$scope:s}=e,{dialog:i}=e;function a(o){fr.call(this,n,o)}function l(o){Oe[o?"unshift":"push"](()=>{i=o,t(0,i)})}return n.$$set=o=>{"dialog"in o&&t(0,i=o.dialog),"$$scope"in o&&t(1,s=o.$$scope)},[i,s,r,a,l]}class an extends Ce{constructor(e){super(),$e(this,e,Gs,Ws,Ee,{dialog:0})}}const Rn=16,Xs=2**20-1;function Cr(n,e){const t=n[0];if(!(t instanceof Ze)){alert("The path does not start with a CE");return}const r=n[1];if(!(r instanceof Ye)){alert("The source CE is not directly connected to an LER");return}if(t.firstHop.set(e,r.id),r.FIB.get(e))return;const s=n.length-2,i=n[s];if(!(i instanceof Ye)){alert("Destination CE is not connected directly to a LER");return}let a=In(n[s]);i.LFIB.receiveEntry(a,-1,e);for(let l=n.length-2;l>0;l--){const o=n[l],c=n[l-1],u=a;a=In(o),c instanceof Ye?c.FIB.receiveEntry(e,u,o.id.toString()):c instanceof bt&&c.LFIB.receiveEntry(a,u,o.id.toString())}}function Js(n,e){return n instanceof bt||n instanceof Ye?n.LFIB.map.has(e):!1}function In(n){let e;do e=Math.floor(Math.random()*(Xs-Rn+1)+Rn);while(Js(n,e));return e}function Ks(n){let e,t,r,s;return{c(){e=E("button"),t=me(n[0]),this.h()},l(i){e=C(i,"BUTTON",{class:!0});var a=A(e);t=_e(a,n[0]),a.forEach(_),this.h()},h(){b(e,"class","svelte-17itt71")},m(i,a){k(i,e,a),T(e,t),r||(s=oe(e,"click",function(){hr(n[1])&&n[1].apply(this,arguments)}),r=!0)},p(i,[a]){n=i,a&1&&Me(t,n[0])},i:Re,o:Re,d(i){i&&_(e),r=!1,s()}}}function Qs(n,e,t){let{text:r}=e,{callback:s}=e;return n.$$set=i=>{"text"in i&&t(0,r=i.text),"callback"in i&&t(1,s=i.callback)},[r,s]}class ot extends Ce{constructor(e){super(),$e(this,e,Qs,Ks,Ee,{text:0,callback:1})}}function Ln(n,e,t){const r=n.slice();return r[9]=e[t][0],r[10]=e[t][1],r}function Nn(n){let e,t,r,s,i,a,l,o,c,u,f,m,g,d,w,p,h,v;function x(...D){return n[5](n[9],...D)}function O(...D){return n[6](n[9],...D)}function U(){return n[7](n[9])}f=new ot({props:{text:"LDP",callback:U}});function V(){return n[8](n[9])}return d=new ot({props:{text:"-",callback:V}}),{c(){e=E("tr"),t=E("td"),r=E("input"),i=R(),a=E("td"),l=E("input"),c=R(),u=E("td"),K(f.$$.fragment),m=R(),g=E("td"),K(d.$$.fragment),w=R(),this.h()},l(D){e=C(D,"TR",{});var N=A(e);t=C(N,"TD",{});var q=A(t);r=C(q,"INPUT",{type:!0,placeholder:!0}),q.forEach(_),i=I(N),a=C(N,"TD",{});var Z=A(a);l=C(Z,"INPUT",{type:!0,placeholder:!0}),Z.forEach(_),c=I(N),u=C(N,"TD",{});var $=A(u);Q(f.$$.fragment,$),$.forEach(_),m=I(N),g=C(N,"TD",{});var M=A(g);Q(d.$$.fragment,M),M.forEach(_),w=I(N),N.forEach(_),this.h()},h(){b(r,"type","text"),r.value=s=n[9],b(r,"placeholder","Address"),b(l,"type","text"),l.value=o=n[10],b(l,"placeholder","Link")},m(D,N){k(D,e,N),T(e,t),T(t,r),T(e,i),T(e,a),T(a,l),T(e,c),T(e,u),ee(f,u,null),T(e,m),T(e,g),ee(d,g,null),T(e,w),p=!0,h||(v=[oe(r,"change",x),oe(l,"change",O)],h=!0)},p(D,N){n=D,(!p||N&1&&s!==(s=n[9])&&r.value!==s)&&(r.value=s),(!p||N&1&&o!==(o=n[10])&&l.value!==o)&&(l.value=o);const q={};N&1&&(q.callback=U),f.$set(q);const Z={};N&1&&(Z.callback=V),d.$set(Z)},i(D){p||(S(f.$$.fragment,D),S(d.$$.fragment,D),p=!0)},o(D){j(f.$$.fragment,D),j(d.$$.fragment,D),p=!1},d(D){D&&_(e),te(f),te(d),h=!1,pt(v)}}}function ei(n){let e,t="Destinations:",r,s,i,a='<tr><th class="svelte-1d4gizi">Destination</th> <th class="svelte-1d4gizi">First hop</th> <th class="svelte-1d4gizi"></th> <th class="svelte-1d4gizi"></th></tr>',l,o,c,u,f,m,g=ge([...n[0].firstHop]),d=[];for(let p=0;p<g.length;p+=1)d[p]=Nn(Ln(n,g,p));const w=p=>j(d[p],1,1,()=>{d[p]=null});return f=new ot({props:{text:"+",callback:n[1](n[0].addEmptyEntry)}}),{c(){e=E("p"),e.textContent=t,r=R(),s=E("table"),i=E("thead"),i.innerHTML=a,l=R(),o=E("tbody");for(let p=0;p<d.length;p+=1)d[p].c();c=R(),u=E("div"),K(f.$$.fragment),this.h()},l(p){e=C(p,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1ixmdgd"&&(e.textContent=t),r=I(p),s=C(p,"TABLE",{});var h=A(s);i=C(h,"THEAD",{"data-svelte-h":!0}),ce(i)!=="svelte-1jq34m8"&&(i.innerHTML=a),l=I(h),o=C(h,"TBODY",{});var v=A(o);for(let O=0;O<d.length;O+=1)d[O].l(v);v.forEach(_),h.forEach(_),c=I(p),u=C(p,"DIV",{class:!0});var x=A(u);Q(f.$$.fragment,x),x.forEach(_),this.h()},h(){b(u,"class","svelte-1d4gizi")},m(p,h){k(p,e,h),k(p,r,h),k(p,s,h),T(s,i),T(s,l),T(s,o);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(o,null);k(p,c,h),k(p,u,h),ee(f,u,null),m=!0},p(p,[h]){if(h&29){g=ge([...p[0].firstHop]);let x;for(x=0;x<g.length;x+=1){const O=Ln(p,g,x);d[x]?(d[x].p(O,h),S(d[x],1)):(d[x]=Nn(O),d[x].c(),S(d[x],1),d[x].m(o,null))}for(Pe(),x=g.length;x<d.length;x+=1)w(x);De()}const v={};h&1&&(v.callback=p[1](p[0].addEmptyEntry)),f.$set(v)},i(p){if(!m){for(let h=0;h<g.length;h+=1)S(d[h]);S(f.$$.fragment,p),m=!0}},o(p){d=d.filter(Boolean);for(let h=0;h<d.length;h+=1)j(d[h]);j(f.$$.fragment,p),m=!1},d(p){p&&(_(e),_(r),_(s),_(c),_(u)),at(d,p),te(f)}}}function ti(n,e,t){let{router:r}=e;function s(m){return()=>{m(),t(0,r)}}function i(m,g){if(!(m.target instanceof HTMLInputElement))return;const d=m.target.value.toUpperCase(),w=Y.getCERouter(d);if(r.address===d){alert("Destination router cannot be the same as the source router.");return}if(!w){alert("Destination router not found.");return}r.updateAddress(g,d),t(0,r)}function a(m){const g=Y.getCERouter(m);if(!g){alert("Destination router not found.");return}const d=kn(r,g);if(d.length<=1){alert("No path found");return}Cr(d,m),t(0,r)}function l(m,g){if(!(m.target instanceof HTMLInputElement))return;const d=parseInt(m.target.value);r.firstHop.set(g,d)}const o=(m,g)=>{i(g,m)},c=(m,g)=>{l(g,m)},u=m=>{a(m)},f=m=>{r.firstHop.delete(m),t(0,r)};return n.$$set=m=>{"router"in m&&t(0,r=m.router)},[r,s,i,a,l,o,c,u,f]}class ni extends Ce{constructor(e){super(),$e(this,e,ti,ei,Ee,{router:0})}}function Sn(n,e,t){const r=n.slice();return r[7]=e[t][0],r[8]=e[t][1],r[9]=e,r[10]=t,r}function Pn(n){let e,t,r,s,i,a,l,o,c,u,f,m,g,d,w,p;function h(...U){return n[3](n[7],...U)}function v(){n[4].call(l,n[9],n[10])}function x(){n[5].call(u,n[9],n[10])}function O(){return n[6](n[7])}return m=new ot({props:{text:"-",callback:O}}),{c(){e=E("tr"),t=E("td"),r=E("input"),i=R(),a=E("td"),l=E("input"),o=R(),c=E("td"),u=E("input"),f=R(),K(m.$$.fragment),g=R(),this.h()},l(U){e=C(U,"TR",{});var V=A(e);t=C(V,"TD",{});var D=A(t);r=C(D,"INPUT",{type:!0}),D.forEach(_),i=I(V),a=C(V,"TD",{});var N=A(a);l=C(N,"INPUT",{type:!0}),N.forEach(_),o=I(V),c=C(V,"TD",{});var q=A(c);u=C(q,"INPUT",{type:!0}),q.forEach(_),f=I(V),Q(m.$$.fragment,V),g=I(V),V.forEach(_),this.h()},h(){b(r,"type","number"),r.value=s=n[7],b(l,"type","number"),b(u,"type","text")},m(U,V){k(U,e,V),T(e,t),T(t,r),T(e,i),T(e,a),T(a,l),Le(l,n[8].outgoingLabel),T(e,o),T(e,c),T(c,u),Le(u,n[8].nextHop),T(e,f),ee(m,e,null),T(e,g),d=!0,w||(p=[oe(r,"change",h),oe(l,"input",v),oe(u,"input",x)],w=!0)},p(U,V){n=U,(!d||V&1&&s!==(s=n[7])&&r.value!==s)&&(r.value=s),V&1&&We(l.value)!==n[8].outgoingLabel&&Le(l,n[8].outgoingLabel),V&1&&u.value!==n[8].nextHop&&Le(u,n[8].nextHop);const D={};V&1&&(D.callback=O),m.$set(D)},i(U){d||(S(m.$$.fragment,U),d=!0)},o(U){j(m.$$.fragment,U),d=!1},d(U){U&&_(e),te(m),w=!1,pt(p)}}}function ri(n){let e,t="LFIB:",r,s,i,a="<tr><th>Incoming</th> <th>Outgoing</th> <th>Next hop</th> <th></th></tr>",l,o,c,u,f,m,g=ge([...n[0].LFIB.map]),d=[];for(let p=0;p<g.length;p+=1)d[p]=Pn(Sn(n,g,p));const w=p=>j(d[p],1,1,()=>{d[p]=null});return f=new ot({props:{text:"+",callback:n[1](n[0].LFIB.addEmptyEntry)}}),{c(){e=E("p"),e.textContent=t,r=R(),s=E("table"),i=E("thead"),i.innerHTML=a,l=R(),o=E("tbody");for(let p=0;p<d.length;p+=1)d[p].c();c=R(),u=E("div"),K(f.$$.fragment),this.h()},l(p){e=C(p,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-5opw2d"&&(e.textContent=t),r=I(p),s=C(p,"TABLE",{});var h=A(s);i=C(h,"THEAD",{"data-svelte-h":!0}),ce(i)!=="svelte-1fy2y89"&&(i.innerHTML=a),l=I(h),o=C(h,"TBODY",{});var v=A(o);for(let O=0;O<d.length;O+=1)d[O].l(v);v.forEach(_),h.forEach(_),c=I(p),u=C(p,"DIV",{class:!0});var x=A(u);Q(f.$$.fragment,x),x.forEach(_),this.h()},h(){b(u,"class","svelte-f8qi58")},m(p,h){k(p,e,h),k(p,r,h),k(p,s,h),T(s,i),T(s,l),T(s,o);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(o,null);k(p,c,h),k(p,u,h),ee(f,u,null),m=!0},p(p,[h]){if(h&5){g=ge([...p[0].LFIB.map]);let x;for(x=0;x<g.length;x+=1){const O=Sn(p,g,x);d[x]?(d[x].p(O,h),S(d[x],1)):(d[x]=Pn(O),d[x].c(),S(d[x],1),d[x].m(o,null))}for(Pe(),x=g.length;x<d.length;x+=1)w(x);De()}const v={};h&1&&(v.callback=p[1](p[0].LFIB.addEmptyEntry)),f.$set(v)},i(p){if(!m){for(let h=0;h<g.length;h+=1)S(d[h]);S(f.$$.fragment,p),m=!0}},o(p){d=d.filter(Boolean);for(let h=0;h<d.length;h+=1)j(d[h]);j(f.$$.fragment,p),m=!1},d(p){p&&(_(e),_(r),_(s),_(c),_(u)),at(d,p),te(f)}}}function si(n,e,t){let{router:r}=e;function s(u){return()=>{u(),t(0,r)}}function i(u,f){if(!(u.target instanceof HTMLInputElement))return;const m=parseInt(u.target.value);r.LFIB.updateLabel(f,m)}const a=(u,f)=>{i(f,u)};function l(u,f){u[f][1].outgoingLabel=We(this.value),t(0,r)}function o(u,f){u[f][1].nextHop=this.value,t(0,r)}const c=u=>{r.LFIB.deleteEntry(u),t(0,r)};return n.$$set=u=>{"router"in u&&t(0,r=u.router)},[r,s,i,a,l,o,c]}class ii extends Ce{constructor(e){super(),$e(this,e,si,ri,Ee,{router:0})}}function Dn(n,e,t){const r=n.slice();return r[7]=e[t][0],r[8]=e[t][1],r[9]=e,r[10]=t,r}function On(n){let e,t,r,s,i,a,l,o,c,u,f,m,g,d,w,p;function h(...U){return n[3](n[7],...U)}function v(){n[4].call(l,n[9],n[10])}function x(){n[5].call(u,n[9],n[10])}function O(){return n[6](n[7])}return m=new ot({props:{text:"-",callback:O}}),{c(){e=E("tr"),t=E("td"),r=E("input"),i=R(),a=E("td"),l=E("input"),o=R(),c=E("td"),u=E("input"),f=R(),K(m.$$.fragment),g=R(),this.h()},l(U){e=C(U,"TR",{});var V=A(e);t=C(V,"TD",{});var D=A(t);r=C(D,"INPUT",{type:!0}),D.forEach(_),i=I(V),a=C(V,"TD",{});var N=A(a);l=C(N,"INPUT",{type:!0}),N.forEach(_),o=I(V),c=C(V,"TD",{});var q=A(c);u=C(q,"INPUT",{type:!0}),q.forEach(_),f=I(V),Q(m.$$.fragment,V),g=I(V),V.forEach(_),this.h()},h(){b(r,"type","text"),r.value=s=n[7],b(l,"type","number"),b(u,"type","text")},m(U,V){k(U,e,V),T(e,t),T(t,r),T(e,i),T(e,a),T(a,l),Le(l,n[8].label),T(e,o),T(e,c),T(c,u),Le(u,n[8].nextHop),T(e,f),ee(m,e,null),T(e,g),d=!0,w||(p=[oe(r,"change",h),oe(l,"input",v),oe(u,"input",x)],w=!0)},p(U,V){n=U,(!d||V&1&&s!==(s=n[7])&&r.value!==s)&&(r.value=s),V&1&&We(l.value)!==n[8].label&&Le(l,n[8].label),V&1&&u.value!==n[8].nextHop&&Le(u,n[8].nextHop);const D={};V&1&&(D.callback=O),m.$set(D)},i(U){d||(S(m.$$.fragment,U),d=!0)},o(U){j(m.$$.fragment,U),d=!1},d(U){U&&_(e),te(m),w=!1,pt(p)}}}function ai(n){let e,t="FIB:",r,s,i,a="<tr><th>Address</th> <th>Label</th> <th>Next hop</th> <th></th></tr>",l,o,c,u,f,m,g=ge([...n[0].FIB.map]),d=[];for(let p=0;p<g.length;p+=1)d[p]=On(Dn(n,g,p));const w=p=>j(d[p],1,1,()=>{d[p]=null});return f=new ot({props:{text:"+",callback:n[1](n[0].FIB.addEmptyEntry)}}),{c(){e=E("p"),e.textContent=t,r=R(),s=E("table"),i=E("thead"),i.innerHTML=a,l=R(),o=E("tbody");for(let p=0;p<d.length;p+=1)d[p].c();c=R(),u=E("div"),K(f.$$.fragment),this.h()},l(p){e=C(p,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1j6bdhj"&&(e.textContent=t),r=I(p),s=C(p,"TABLE",{});var h=A(s);i=C(h,"THEAD",{"data-svelte-h":!0}),ce(i)!=="svelte-1qhs6t7"&&(i.innerHTML=a),l=I(h),o=C(h,"TBODY",{});var v=A(o);for(let O=0;O<d.length;O+=1)d[O].l(v);v.forEach(_),h.forEach(_),c=I(p),u=C(p,"DIV",{class:!0});var x=A(u);Q(f.$$.fragment,x),x.forEach(_),this.h()},h(){b(u,"class","svelte-f8qi58")},m(p,h){k(p,e,h),k(p,r,h),k(p,s,h),T(s,i),T(s,l),T(s,o);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(o,null);k(p,c,h),k(p,u,h),ee(f,u,null),m=!0},p(p,[h]){if(h&5){g=ge([...p[0].FIB.map]);let x;for(x=0;x<g.length;x+=1){const O=Dn(p,g,x);d[x]?(d[x].p(O,h),S(d[x],1)):(d[x]=On(O),d[x].c(),S(d[x],1),d[x].m(o,null))}for(Pe(),x=g.length;x<d.length;x+=1)w(x);De()}const v={};h&1&&(v.callback=p[1](p[0].FIB.addEmptyEntry)),f.$set(v)},i(p){if(!m){for(let h=0;h<g.length;h+=1)S(d[h]);S(f.$$.fragment,p),m=!0}},o(p){d=d.filter(Boolean);for(let h=0;h<d.length;h+=1)j(d[h]);j(f.$$.fragment,p),m=!1},d(p){p&&(_(e),_(r),_(s),_(c),_(u)),at(d,p),te(f)}}}function li(n,e,t){let{router:r}=e;function s(u){return()=>{u(),t(0,r)}}function i(u,f){if(!(u.target instanceof HTMLInputElement))return;const m=u.target.value;r.FIB.updateAddress(f,m)}const a=(u,f)=>{i(f,u)};function l(u,f){u[f][1].label=We(this.value),t(0,r)}function o(u,f){u[f][1].nextHop=this.value,t(0,r)}const c=u=>{r.FIB.deleteEntry(u),t(0,r)};return n.$$set=u=>{"router"in u&&t(0,r=u.router)},[r,s,i,a,l,o,c]}class oi extends Ce{constructor(e){super(),$e(this,e,li,ai,Ee,{router:0})}}function ui(n){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=E("p"),e.textContent=t},l(r){e=C(r,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1214eal"&&(e.textContent=t)},m(r,s){k(r,e,s)},p:Re,i:Re,o:Re,d(r){r&&_(e)}}}function ci(n){let e,t,r,s,i,a,l,o,c,u,f,m,g,d,w=n[0].id+"",p,h,v,x,O,U,V,D,N,q,Z=n[0]instanceof Ze&&Bn(n),$=n[0]instanceof Ye&&jn(n),M=(n[0]instanceof Ye||n[0]instanceof bt)&&Zn(n);return V=new ot({props:{text:"Delete Router",callback:n[3]}}),{c(){e=E("div"),t=E("div"),r=E("label"),s=me(`Label:
          `),i=E("input"),a=R(),l=E("label"),o=me(`Position:
        `),c=E("input"),u=R(),f=E("input"),m=R(),g=E("p"),d=me("ID: "),p=me(w),h=R(),Z&&Z.c(),v=R(),$&&$.c(),x=R(),M&&M.c(),O=R(),U=E("div"),K(V.$$.fragment),this.h()},l(z){e=C(z,"DIV",{});var G=A(e);t=C(G,"DIV",{});var Te=A(t);r=C(Te,"LABEL",{});var ue=A(r);s=_e(ue,`Label:
          `),i=C(ue,"INPUT",{type:!0,class:!0}),ue.forEach(_),Te.forEach(_),a=I(G),l=C(G,"LABEL",{});var fe=A(l);o=_e(fe,`Position:
        `),c=C(fe,"INPUT",{type:!0,class:!0}),u=I(fe),f=C(fe,"INPUT",{type:!0,class:!0}),fe.forEach(_),m=I(G),g=C(G,"P",{});var Ie=A(g);d=_e(Ie,"ID: "),p=_e(Ie,w),Ie.forEach(_),G.forEach(_),h=I(z),Z&&Z.l(z),v=I(z),$&&$.l(z),x=I(z),M&&M.l(z),O=I(z),U=C(z,"DIV",{class:!0});var ve=A(U);Q(V.$$.fragment,ve),ve.forEach(_),this.h()},h(){b(i,"type","text"),b(i,"class","svelte-cihl2i"),b(c,"type","number"),c.disabled=n[2],b(c,"class","svelte-cihl2i"),b(f,"type","number"),f.disabled=n[2],b(f,"class","svelte-cihl2i"),b(U,"class","margin-top svelte-cihl2i")},m(z,G){k(z,e,G),T(e,t),T(t,r),T(r,s),T(r,i),Le(i,n[0].node.label),T(e,a),T(e,l),T(l,o),T(l,c),Le(c,n[0].node.x),T(l,u),T(l,f),Le(f,n[0].node.y),T(e,m),T(e,g),T(g,d),T(g,p),k(z,h,G),Z&&Z.m(z,G),k(z,v,G),$&&$.m(z,G),k(z,x,G),M&&M.m(z,G),k(z,O,G),k(z,U,G),ee(V,U,null),D=!0,N||(q=[oe(i,"input",n[4]),oe(c,"input",n[5]),oe(f,"input",n[6]),oe(e,"input",n[7])],N=!0)},p(z,G){G&1&&i.value!==z[0].node.label&&Le(i,z[0].node.label),(!D||G&4)&&(c.disabled=z[2]),G&1&&We(c.value)!==z[0].node.x&&Le(c,z[0].node.x),(!D||G&4)&&(f.disabled=z[2]),G&1&&We(f.value)!==z[0].node.y&&Le(f,z[0].node.y),(!D||G&1)&&w!==(w=z[0].id+"")&&Me(p,w),z[0]instanceof Ze?Z?(Z.p(z,G),G&1&&S(Z,1)):(Z=Bn(z),Z.c(),S(Z,1),Z.m(v.parentNode,v)):Z&&(Pe(),j(Z,1,1,()=>{Z=null}),De()),z[0]instanceof Ye?$?($.p(z,G),G&1&&S($,1)):($=jn(z),$.c(),S($,1),$.m(x.parentNode,x)):$&&(Pe(),j($,1,1,()=>{$=null}),De()),z[0]instanceof Ye||z[0]instanceof bt?M?(M.p(z,G),G&1&&S(M,1)):(M=Zn(z),M.c(),S(M,1),M.m(O.parentNode,O)):M&&(Pe(),j(M,1,1,()=>{M=null}),De())},i(z){D||(S(Z),S($),S(M),S(V.$$.fragment,z),D=!0)},o(z){j(Z),j($),j(M),j(V.$$.fragment,z),D=!1},d(z){z&&(_(e),_(h),_(v),_(x),_(O),_(U)),Z&&Z.d(z),$&&$.d(z),M&&M.d(z),te(V),N=!1,pt(q)}}}function Bn(n){let e,t="Address:",r,s,i=n[0].address+"",a,l,o,c,u,f,m,g;function d(p){n[9](p)}let w={};return n[0]!==void 0&&(w.router=n[0]),c=new ni({props:w}),Oe.push(()=>Ve(c,"router",d)),{c(){e=E("p"),e.textContent=t,r=R(),s=E("button"),a=me(i),l=R(),o=E("div"),K(c.$$.fragment),this.h()},l(p){e=C(p,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-18hoeeh"&&(e.textContent=t),r=I(p),s=C(p,"BUTTON",{class:!0});var h=A(s);a=_e(h,i),h.forEach(_),l=I(p),o=C(p,"DIV",{class:!0});var v=A(o);Q(c.$$.fragment,v),v.forEach(_),this.h()},h(){Et(e,"display","inline"),b(s,"class","svelte-cihl2i"),b(o,"class","margin-top svelte-cihl2i")},m(p,h){k(p,e,h),k(p,r,h),k(p,s,h),T(s,a),k(p,l,h),k(p,o,h),ee(c,o,null),f=!0,m||(g=oe(s,"click",n[8]),m=!0)},p(p,h){(!f||h&1)&&i!==(i=p[0].address+"")&&Me(a,i);const v={};!u&&h&1&&(u=!0,v.router=p[0],He(()=>u=!1)),c.$set(v)},i(p){f||(S(c.$$.fragment,p),f=!0)},o(p){j(c.$$.fragment,p),f=!1},d(p){p&&(_(e),_(r),_(s),_(l),_(o)),te(c),m=!1,g()}}}function jn(n){let e,t,r,s;function i(l){n[10](l)}let a={};return n[0]!==void 0&&(a.router=n[0]),t=new oi({props:a}),Oe.push(()=>Ve(t,"router",i)),{c(){e=E("div"),K(t.$$.fragment),this.h()},l(l){e=C(l,"DIV",{class:!0});var o=A(e);Q(t.$$.fragment,o),o.forEach(_),this.h()},h(){b(e,"class","margin-top svelte-cihl2i")},m(l,o){k(l,e,o),ee(t,e,null),s=!0},p(l,o){const c={};!r&&o&1&&(r=!0,c.router=l[0],He(()=>r=!1)),t.$set(c)},i(l){s||(S(t.$$.fragment,l),s=!0)},o(l){j(t.$$.fragment,l),s=!1},d(l){l&&_(e),te(t)}}}function Zn(n){let e,t,r,s;function i(l){n[11](l)}let a={};return n[0]!==void 0&&(a.router=n[0]),t=new ii({props:a}),Oe.push(()=>Ve(t,"router",i)),{c(){e=E("div"),K(t.$$.fragment),this.h()},l(l){e=C(l,"DIV",{class:!0});var o=A(e);Q(t.$$.fragment,o),o.forEach(_),this.h()},h(){b(e,"class","margin-top svelte-cihl2i")},m(l,o){k(l,e,o),ee(t,e,null),s=!0},p(l,o){const c={};!r&&o&1&&(r=!0,c.router=l[0],He(()=>r=!1)),t.$set(c)},i(l){s||(S(t.$$.fragment,l),s=!0)},o(l){j(t.$$.fragment,l),s=!1},d(l){l&&_(e),te(t)}}}function di(n){let e,t,r,s;const i=[ci,ui],a=[];function l(o,c){return o[0]?0:1}return e=l(n),t=a[e]=i[e](n),{c(){t.c(),r=xe()},l(o){t.l(o),r=xe()},m(o,c){a[e].m(o,c),k(o,r,c),s=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(Pe(),j(a[u],1,1,()=>{a[u]=null}),De(),t=a[e],t?t.p(o,c):(t=a[e]=i[e](o),t.c()),S(t,1),t.m(r.parentNode,r))},i(o){s||(S(t),s=!0)},o(o){j(t),s=!1},d(o){o&&_(r),a[e].d(o)}}}function fi(n){let e,t,r;function s(a){n[12](a)}let i={$$slots:{default:[di]},$$scope:{ctx:n}};return n[1]!==void 0&&(i.dialog=n[1]),e=new an({props:i}),Oe.push(()=>Ve(e,"dialog",s)),e.$on("close",n[13]),{c(){K(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,l){ee(e,a,l),r=!0},p(a,[l]){const o={};l&16389&&(o.$$scope={dirty:l,ctx:a}),!t&&l&2&&(t=!0,o.dialog=a[1],He(()=>t=!1)),e.$set(o)},i(a){r||(S(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){te(e,a)}}}function hi(n,e,t){let r;Be(n,ht,h=>t(2,r=h));let{router:s}=e,{dialog:i}=e;function a(){if(!r&&s){if(!confirm("Are you sure you want to delete this router?"))return;Y.deleteRouter(s.id),i.close()}else alert("You can't delete a router while the network is locked.")}function l(){s.node.label=this.value,t(0,s)}function o(){s.node.x=We(this.value),t(0,s)}function c(){s.node.y=We(this.value),t(0,s)}const u=()=>{Y.notify()},f=async()=>{s instanceof Ze&&await navigator.clipboard.writeText(s.address)};function m(h){s=h,t(0,s)}function g(h){s=h,t(0,s)}function d(h){s=h,t(0,s)}function w(h){i=h,t(1,i)}const p=()=>{if(s instanceof Ze)for(const h of s.firstHop.keys())h===""&&s.firstHop.delete(h);Y.notify()};return n.$$set=h=>{"router"in h&&t(0,s=h.router),"dialog"in h&&t(1,i=h.dialog)},[s,i,r,a,l,o,c,u,f,m,g,d,w,p]}class pi extends Ce{constructor(e){super(),$e(this,e,hi,fi,Ee,{router:0,dialog:1})}}function mi(n){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=E("p"),e.textContent=t},l(r){e=C(r,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(r,s){k(r,e,s)},p:Re,i:Re,o:Re,d(r){r&&_(e)}}}function _i(n){let e,t=n[0].distance+"",r,s,i,a,l,o,c,u,f,m,g;return u=new ot({props:{text:"Delete Link",callback:n[3]}}),{c(){e=me("Distance: "),r=me(t),s=me(` km
    `),i=E("label"),a=me(`Bandwidth:
      `),l=E("input"),o=R(),c=E("div"),K(u.$$.fragment),this.h()},l(d){e=_e(d,"Distance: "),r=_e(d,t),s=_e(d,` km
    `),i=C(d,"LABEL",{class:!0});var w=A(i);a=_e(w,`Bandwidth:
      `),l=C(w,"INPUT",{type:!0,class:!0}),w.forEach(_),o=I(d),c=C(d,"DIV",{class:!0});var p=A(c);Q(u.$$.fragment,p),p.forEach(_),this.h()},h(){b(l,"type","number"),l.disabled=n[2],b(l,"class","svelte-11gx5jd"),b(i,"class","svelte-11gx5jd"),b(c,"class","svelte-11gx5jd")},m(d,w){k(d,e,w),k(d,r,w),k(d,s,w),k(d,i,w),T(i,a),T(i,l),Le(l,n[0].bandwidth),k(d,o,w),k(d,c,w),ee(u,c,null),f=!0,m||(g=oe(l,"input",n[4]),m=!0)},p(d,w){(!f||w&1)&&t!==(t=d[0].distance+"")&&Me(r,t),(!f||w&4)&&(l.disabled=d[2]),w&1&&We(l.value)!==d[0].bandwidth&&Le(l,d[0].bandwidth)},i(d){f||(S(u.$$.fragment,d),f=!0)},o(d){j(u.$$.fragment,d),f=!1},d(d){d&&(_(e),_(r),_(s),_(i),_(o),_(c)),te(u),m=!1,g()}}}function gi(n){let e,t,r,s;const i=[_i,mi],a=[];function l(o,c){return o[0]?0:1}return e=l(n),t=a[e]=i[e](n),{c(){t.c(),r=xe()},l(o){t.l(o),r=xe()},m(o,c){a[e].m(o,c),k(o,r,c),s=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(Pe(),j(a[u],1,1,()=>{a[u]=null}),De(),t=a[e],t?t.p(o,c):(t=a[e]=i[e](o),t.c()),S(t,1),t.m(r.parentNode,r))},i(o){s||(S(t),s=!0)},o(o){j(t),s=!1},d(o){o&&_(r),a[e].d(o)}}}function vi(n){let e,t,r;function s(a){n[5](a)}let i={$$slots:{default:[gi]},$$scope:{ctx:n}};return n[1]!==void 0&&(i.dialog=n[1]),e=new an({props:i}),Oe.push(()=>Ve(e,"dialog",s)),e.$on("close",n[6]),{c(){K(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,l){ee(e,a,l),r=!0},p(a,[l]){const o={};l&133&&(o.$$scope={dirty:l,ctx:a}),!t&&l&2&&(t=!0,o.dialog=a[1],He(()=>t=!1)),e.$set(o)},i(a){r||(S(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){te(e,a)}}}function yi(n,e,t){let r;Be(n,ht,u=>t(2,r=u));let{link:s}=e,{dialog:i}=e;function a(){if(!r&&s){if(!confirm("Are you sure you want to delete this link?"))return;Y.deleteLink(s.id),i.close()}else alert("You can't delete a link while the network is locked.")}function l(){s.bandwidth=We(this.value),t(0,s)}function o(u){i=u,t(1,i)}const c=()=>{Y.notify()};return n.$$set=u=>{"link"in u&&t(0,s=u.link),"dialog"in u&&t(1,i=u.dialog)},[s,i,r,a,l,o,c]}class bi extends Ce{constructor(e){super(),$e(this,e,yi,vi,Ee,{link:0,dialog:1})}}function An(n){let e,t="Loading...";return{c(){e=E("p"),e.textContent=t,this.h()},l(r){e=C(r,"P",{style:!0,"data-svelte-h":!0}),ce(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Et(e,"font-size","200px")},m(r,s){k(r,e,s)},d(r){r&&_(e)}}}function Mn(n){let e,t,r,s,i,a;return{c(){e=tt("line"),this.h()},l(l){e=nt(l,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),A(e).forEach(_),this.h()},h(){b(e,"class","preview"),b(e,"x1",t=n[5].node.x),b(e,"y1",r=n[5].node.y),b(e,"x2",s=n[21](n[2].x)),b(e,"y2",i=n[22](n[2].y)),b(e,"stroke",a=n[7]===n[13].CONNECTING?"green":"blue")},m(l,o){k(l,e,o)},p(l,o){o[0]&32&&t!==(t=l[5].node.x)&&b(e,"x1",t),o[0]&32&&r!==(r=l[5].node.y)&&b(e,"y1",r),o[0]&4&&s!==(s=l[21](l[2].x))&&b(e,"x2",s),o[0]&4&&i!==(i=l[22](l[2].y))&&b(e,"y2",i),o[0]&128&&a!==(a=l[7]===l[13].CONNECTING?"green":"blue")&&b(e,"stroke",a)},d(l){l&&_(e)}}}function zn(n){let e,t,r,s,i,a=n[12].placing+"",l,o,c;return{c(){e=tt("image"),i=tt("text"),l=me(a),this.h()},l(u){e=nt(u,"image",{x:!0,y:!0,width:!0,height:!0,href:!0}),A(e).forEach(_),i=nt(u,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var f=A(i);l=_e(f,a),f.forEach(_),this.h()},h(){b(e,"x",t=n[21](n[3].x)-45/2),b(e,"y",r=n[22](n[3].y)-45/2),b(e,"width","45"),b(e,"height","45"),b(e,"href",s=`/Router/${n[12].placing}.svg`),b(i,"x",o=n[21](n[3].x)),b(i,"y",c=n[22](n[3].y)),b(i,"dominant-baseline","central"),b(i,"font-size","smaller"),b(i,"class","svelte-huetud")},m(u,f){k(u,e,f),k(u,i,f),T(i,l)},p(u,f){f[0]&8&&t!==(t=u[21](u[3].x)-45/2)&&b(e,"x",t),f[0]&8&&r!==(r=u[22](u[3].y)-45/2)&&b(e,"y",r),f[0]&4096&&s!==(s=`/Router/${u[12].placing}.svg`)&&b(e,"href",s),f[0]&4096&&a!==(a=u[12].placing+"")&&Me(l,a),f[0]&8&&o!==(o=u[21](u[3].x))&&b(i,"x",o),f[0]&8&&c!==(c=u[22](u[3].y))&&b(i,"y",c)},d(u){u&&(_(e),_(i))}}}function ki(n){let e,t,r,s,i,a,l,o,c,u,f,m,g,d,w,p=!n[10]&&An(),h=(!n[0]&&n[7]===n[13].CONNECTING||n[7]===n[13].ADDING_DESTINATION)&&n[5]&&Mn(n);const v=n[25].default,x=or(v,n,n[24],null);let O=n[7]===n[13].ADDING_ROUTERS&&n[12].placing&&zn(n);function U($){n[28]($)}function V($){n[29]($)}let D={};n[5]!==void 0&&(D.router=n[5]),n[8]!==void 0&&(D.dialog=n[8]),a=new pi({props:D}),Oe.push(()=>Ve(a,"router",U)),Oe.push(()=>Ve(a,"dialog",V));function N($){n[30]($)}function q($){n[31]($)}let Z={};return n[6]!==void 0&&(Z.link=n[6]),n[9]!==void 0&&(Z.dialog=n[9]),u=new bi({props:Z}),Oe.push(()=>Ve(u,"link",N)),Oe.push(()=>Ve(u,"dialog",q)),{c(){p&&p.c(),e=R(),t=tt("svg"),h&&h.c(),r=xe(),x&&x.c(),O&&O.c(),i=R(),K(a.$$.fragment),c=R(),K(u.$$.fragment),this.h()},l($){p&&p.l($),e=I($),t=nt($,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var M=A(t);h&&h.l(M),r=xe(),x&&x.l(M),O&&O.l(M),M.forEach(_),i=I($),Q(a.$$.fragment,$),c=I($),Q(u.$$.fragment,$),this.h()},h(){b(t,"viewBox",s=`${n[1].x} ${n[1].y} ${n[1].width} ${n[1].height}`),b(t,"role","button"),b(t,"tabindex","-1"),b(t,"class","svelte-huetud"),Et(t,"cursor",n[11][n[7]])},m($,M){p&&p.m($,M),k($,e,M),k($,t,M),h&&h.m(t,null),T(t,r),x&&x.m(t,null),O&&O.m(t,null),n[27](t),k($,i,M),ee(a,$,M),k($,c,M),ee(u,$,M),g=!0,d||(w=[oe(window,"keydown",n[15]),oe(t,"pointerdown",n[16]),oe(t,"pointermove",n[14]),oe(t,"pointerup",n[17]),oe(t,"wheel",n[18]),oe(t,"dblclick",n[19]),oe(t,"dragover",Ir(n[26])),oe(t,"drop",n[20])],d=!0)},p($,M){$[10]?p&&(p.d(1),p=null):p||(p=An(),p.c(),p.m(e.parentNode,e)),(!$[0]&&$[7]===$[13].CONNECTING||$[7]===$[13].ADDING_DESTINATION)&&$[5]?h?h.p($,M):(h=Mn($),h.c(),h.m(t,r)):h&&(h.d(1),h=null),x&&x.p&&(!g||M[0]&16777216)&&ur(x,v,$,$[24],g?dr(v,$[24],M,null):cr($[24]),null),$[7]===$[13].ADDING_ROUTERS&&$[12].placing?O?O.p($,M):(O=zn($),O.c(),O.m(t,null)):O&&(O.d(1),O=null),(!g||M[0]&2&&s!==(s=`${$[1].x} ${$[1].y} ${$[1].width} ${$[1].height}`))&&b(t,"viewBox",s),M[0]&2176&&Et(t,"cursor",$[11][$[7]]);const z={};!l&&M[0]&32&&(l=!0,z.router=$[5],He(()=>l=!1)),!o&&M[0]&256&&(o=!0,z.dialog=$[8],He(()=>o=!1)),a.$set(z);const G={};!f&&M[0]&64&&(f=!0,G.link=$[6],He(()=>f=!1)),!m&&M[0]&512&&(m=!0,G.dialog=$[9],He(()=>m=!1)),u.$set(G)},i($){g||(S(x,$),S(a.$$.fragment,$),S(u.$$.fragment,$),g=!0)},o($){j(x,$),j(a.$$.fragment,$),j(u.$$.fragment,$),g=!1},d($){$&&(_(e),_(t),_(i),_(c)),p&&p.d($),h&&h.d(),x&&x.d($),O&&O.d(),n[27](null),te(a,$),te(u,$),d=!1,pt(w)}}}function wi(n,e,t){let r,s,i;Be(n,ht,y=>t(0,s=y)),Be(n,Ue,y=>t(12,i=y));let{$$slots:a={},$$scope:l}=e;var o=(y=>(y[y.NONE=0]="NONE",y[y.DRAGGING=1]="DRAGGING",y[y.PANNING=2]="PANNING",y[y.CONNECTING=3]="CONNECTING",y[y.ADDING_DESTINATION=4]="ADDING_DESTINATION",y[y.ADDING_ROUTERS=5]="ADDING_ROUTERS",y))(o||{});const c={x:0,y:0,width:0,height:0,get scale(){return g?this.width/g.getBoundingClientRect().width:1}},u={x:0,y:0},f={x:0,y:0},m={x:0,y:0};let g=null,d=null,w=null,p=0,h,v,x=!1;Ue.subscribe(y=>{y.placing&&["CE","LER","LSR"].includes(y.placing)?t(7,p=5):t(7,p=0)}),pr(()=>{if(!g)return;new ResizeObserver(O).observe(g),requestAnimationFrame(()=>{g&&(t(1,c.x=g.getBoundingClientRect().width/-2,c),t(1,c.y=g.getBoundingClientRect().height/-2,c))}),t(10,x=!0)});function O(){if(!g)return;const y=c.scale||1;t(1,c.width=g.getBoundingClientRect().width*y,c),t(1,c.height=g.getBoundingClientRect().height*y,c)}function U(y){t(3,m.x=y.clientX,m),t(3,m.y=y.clientY,m)}function V(y){switch(y.code){case"Escape":qe(Ue,i.placing=null,i);break;case"Space":y.preventDefault(),qe(ht,s=!s,s),qe(Ue,i.placing=null,i),Y.clearPackets();break;case"Digit1":qe(Ue,i.placing="CE",i);break;case"Digit2":qe(Ue,i.placing="LER",i);break;case"Digit3":qe(Ue,i.placing="LSR",i);break}}function D(y){if(!(y.target instanceof Element))return;if(y.preventDefault(),p===5){switch(i.placing){case"CE":Y.createCE(ue(y.clientX),fe(y.clientY));break;case"LER":Y.createLER(ue(y.clientX),fe(y.clientY));break;case"LSR":Y.createLSR(ue(y.clientX),fe(y.clientY));break}y.shiftKey||qe(Ue,i.placing=null,i);return}g==null||g.addEventListener("pointermove",q),g==null||g.setPointerCapture(y.pointerId);const B=y.target.id;if(B){if(t(5,d=Y.getRouter(parseInt(B))||null),!d)return;y.shiftKey?t(7,p=3):y.altKey&&d instanceof Ze?t(7,p=4):(f.x=d.node.x,f.y=d.node.y,t(7,p=1))}else t(7,p=2);t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u)}function N(y){if(y.target instanceof Element&&p!==5){y.preventDefault();e:if(d&&p===4){const B=document.elementFromPoint(y.clientX,y.clientY),ye=(B==null?void 0:B.tagName)==="image"?B.id:null,L=Y.getRouter(parseInt(ye??""));if(!L||d===L)break e;if(!(L instanceof Ze)){alert("Destination must be a CE");break e}const re=kn(d,L);if(re.length<=1){alert("No path found");break e}Cr(re,L.address),Y.notify()}t(7,p=0),t(5,d=null),g==null||g.releasePointerCapture(y.pointerId),g==null||g.removeEventListener("pointermove",q)}}function q(y){y.preventDefault();const B={x:(y.clientX-u.x)*c.scale,y:(y.clientY-u.y)*c.scale};if(!s&&p===1&&d)t(5,d.node.x=Math.round(f.x+B.x),d),t(5,d.node.y=Math.round(f.y+B.y),d),Y.notify();else if(p===2)t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u),t(1,c.x-=B.x,c),t(1,c.y-=B.y,c);else if(p===4)t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u);else if(!s&&p===3){t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u);const ye=document.elementFromPoint(y.clientX,y.clientY);if(!ye)return;const L=Y.getRouter(parseInt(ye.id));ye.tagName==="image"&&L&&d&&(Y.addLink({source:d,target:L}),t(5,d=L))}}function Z(y){y.preventDefault(),t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u);const B=y.deltaY>0?1.025:.975;$(B,u)}function $(y,B){if(!g||c.scale<.1&&y<1||c.scale>5&&y>1)return;const ye=g.getBoundingClientRect(),L={x:(B.x-ye.left)/ye.width,y:(B.y-ye.top)/ye.height};t(1,c.x-=c.width*(y-1)*L.x,c),t(1,c.y-=c.height*(y-1)*L.y,c),t(1,c.width*=y,c),t(1,c.height*=y,c)}function M(y){if(!(y.target instanceof Element))return;y.preventDefault();const B=document.elementFromPoint(y.clientX,y.clientY);B&&(B.tagName==="image"?z(B.id):B.tagName==="rect"&&G(B.id))}function z(y){const B=Y.getRouter(parseInt(y));B&&(t(5,d=B),h.showModal())}function G(y){const B=Y.links.find(ye=>y===ye.id);B&&(t(6,w=B),v.showModal())}function Te(y){var ye;y.preventDefault();const B=(ye=y.dataTransfer)==null?void 0:ye.getData("text/plain");if(B)switch(B){case"CE":Y.createCE(ue(y.clientX),fe(y.clientY));break;case"LER":Y.createLER(ue(y.clientX),fe(y.clientY));break;case"LSR":Y.createLSR(ue(y.clientX),fe(y.clientY));break}}function ue(y){return g?(y-g.getBoundingClientRect().left)*c.scale+c.x:y}function fe(y){return g?(y-g.getBoundingClientRect().top)*c.scale+c.y:y}function Ie(y){fr.call(this,n,y)}function ve(y){Oe[y?"unshift":"push"](()=>{g=y,t(4,g)})}function we(y){d=y,t(5,d)}function Fe(y){h=y,t(8,h)}function Ne(y){w=y,t(6,w)}function Se(y){v=y,t(9,v)}return n.$$set=y=>{"$$scope"in y&&t(24,l=y.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(11,r={0:"move",1:s?"not-allowed":"grabbing",2:"grabbing",3:s?"not-allowed":"crosshair",4:"crosshair",5:"none"})},[s,c,u,m,g,d,w,p,h,v,x,r,i,o,U,V,D,N,Z,M,Te,ue,fe,$,l,a,Ie,ve,we,Fe,Ne,Se]}class xi extends Ce{constructor(e){super(),$e(this,e,wi,ki,Ee,{zoom:23},null,[-1,-1])}get zoom(){return this.$$.ctx[23]}}function Ei(n){let e,t,r,s;return{c(){e=E("button"),t=me(n[0]),this.h()},l(i){e=C(i,"BUTTON",{style:!0,class:!0});var a=A(e);t=_e(a,n[0]),a.forEach(_),this.h()},h(){b(e,"style",n[2]),b(e,"class","svelte-v6s8rg")},m(i,a){k(i,e,a),T(e,t),r||(s=oe(e,"click",function(){hr(n[1])&&n[1].apply(this,arguments)}),r=!0)},p(i,[a]){n=i,a&1&&Me(t,n[0]),a&4&&b(e,"style",n[2])},i:Re,o:Re,d(i){i&&_(e),r=!1,s()}}}function Ci(n,e,t){let{text:r}=e,{callback:s=()=>{}}=e,{style:i=void 0}=e;return n.$$set=a=>{"text"in a&&t(0,r=a.text),"callback"in a&&t(1,s=a.callback),"style"in a&&t(2,i=a.style)},[r,s,i]}class Qe extends Ce{constructor(e){super(),$e(this,e,Ci,Ei,Ee,{text:0,callback:1,style:2})}}function $i(n){let e,t,r=n[0].address+"",s,i,a,l="",o,c,u=n[1].address+"",f,m,g,d,w,p;return g=new Qe({props:{text:"Play",callback:n[2]}}),w=new Qe({props:{text:"Delete",callback:n[3]}}),{c(){e=E("div"),t=E("p"),s=me(r),i=R(),a=E("p"),a.textContent=l,o=R(),c=E("p"),f=me(u),m=R(),K(g.$$.fragment),d=R(),K(w.$$.fragment),this.h()},l(h){e=C(h,"DIV",{class:!0});var v=A(e);t=C(v,"P",{class:!0});var x=A(t);s=_e(x,r),x.forEach(_),i=I(v),a=C(v,"P",{class:!0,"data-svelte-h":!0}),ce(a)!=="svelte-1giyjq6"&&(a.textContent=l),o=I(v),c=C(v,"P",{class:!0});var O=A(c);f=_e(O,u),O.forEach(_),m=I(v),Q(g.$$.fragment,v),d=I(v),Q(w.$$.fragment,v),v.forEach(_),this.h()},h(){b(t,"class","svelte-ikhsiz"),b(a,"class","svelte-ikhsiz"),b(c,"class","svelte-ikhsiz"),b(e,"class","svelte-ikhsiz")},m(h,v){k(h,e,v),T(e,t),T(t,s),T(e,i),T(e,a),T(e,o),T(e,c),T(c,f),T(e,m),ee(g,e,null),T(e,d),ee(w,e,null),p=!0},p(h,[v]){(!p||v&1)&&r!==(r=h[0].address+"")&&Me(s,r),(!p||v&2)&&u!==(u=h[1].address+"")&&Me(f,u)},i(h){p||(S(g.$$.fragment,h),S(w.$$.fragment,h),p=!0)},o(h){j(g.$$.fragment,h),j(w.$$.fragment,h),p=!1},d(h){h&&_(e),te(g),te(w)}}}function Ti(n,e,t){let{source:r}=e,{destination:s}=e;function i(){Y.addPacket(r,s)}function a(){confirm("Are you sure you want to delete this LSP?")&&(r.deleteEntry(s.address),Y.notify())}return n.$$set=l=>{"source"in l&&t(0,r=l.source),"destination"in l&&t(1,s=l.destination)},[r,s,i,a]}class Ri extends Ce{constructor(e){super(),$e(this,e,Ti,$i,Ee,{source:0,destination:1})}}function Hn(n,e,t){const r=n.slice();return r[2]=e[t],r}function Vn(n,e,t){const r=n.slice();return r[5]=e[t][0],r}function Fn(n){let e,t;return e=new Ri({props:{source:n[2],destination:Y.getSureCERouter(n[5])}}),{c(){K(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,s){ee(e,r,s),t=!0},p(r,s){const i={};s&1&&(i.source=r[2]),s&1&&(i.destination=Y.getSureCERouter(r[5])),e.$set(i)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){te(e,r)}}}function Un(n){let e,t,r=ge([...n[2].firstHop]),s=[];for(let a=0;a<r.length;a+=1)s[a]=Fn(Vn(n,r,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=xe()},l(a){for(let l=0;l<s.length;l+=1)s[l].l(a);e=xe()},m(a,l){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(a,l);k(a,e,l),t=!0},p(a,l){if(l&1){r=ge([...a[2].firstHop]);let o;for(o=0;o<r.length;o+=1){const c=Vn(a,r,o);s[o]?(s[o].p(c,l),S(s[o],1)):(s[o]=Fn(c),s[o].c(),S(s[o],1),s[o].m(e.parentNode,e))}for(Pe(),o=r.length;o<s.length;o+=1)i(o);De()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)S(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&_(e),at(s,a)}}}function Ii(n){let e,t,r=ge(n[0]),s=[];for(let a=0;a<r.length;a+=1)s[a]=Un(Hn(n,r,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){e=E("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=C(a,"DIV",{class:!0});var l=A(e);for(let o=0;o<s.length;o+=1)s[o].l(l);l.forEach(_),this.h()},h(){b(e,"class","svelte-kwkmok")},m(a,l){k(a,e,l);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(a,[l]){if(l&1){r=ge(a[0]);let o;for(o=0;o<r.length;o+=1){const c=Hn(a,r,o);s[o]?(s[o].p(c,l),S(s[o],1)):(s[o]=Un(c),s[o].c(),S(s[o],1),s[o].m(e,null))}for(Pe(),o=r.length;o<s.length;o+=1)i(o);De()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)S(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&_(e),at(s,a)}}}function Li(n,e,t){let r,s;return Be(n,Y,i=>t(1,s=i)),n.$$.update=()=>{n.$$.dirty&2&&t(0,r=s.routers.filter(i=>i instanceof Ze))},[r,s]}class Ni extends Ce{constructor(e){super(),$e(this,e,Li,Ii,Ee,{})}}function qn(n,e,t){const r=n.slice();return r[15]=e[t],r}function Yn(n){let e,t;const r=[n[15],{style:"padding: 10px 20px"}];let s={};for(let i=0;i<r.length;i+=1)s=en(s,r[i]);return e=new Qe({props:s}),{c(){K(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,a){ee(e,i,a),t=!0},p(i,a){const l=a&64?nn(r,[rn(i[15]),r[1]]):{};e.$set(l)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Si(n){let e,t,r,s,i,a,l,o="Packet Controls",c,u,f,m=n[2].packets.length+"",g,d,w,p,h,v,x,O,U=n[1].speedMultiplier.toFixed(1)+"",V,D,N,q,Z,$,M,z=n[1].maxPackets+"",G,Te,ue,fe,Ie,ve,we,Fe="Fallback to normal IP routing?",Ne,Se,y,B,ye,L,re,wn,mt=ge(n[6]),pe=[];for(let ie=0;ie<mt.length;ie+=1)pe[ie]=Yn(qn(n,mt,ie));const $r=ie=>j(pe[ie],1,1,()=>{pe[ie]=null});return B=new Ni({}),{c(){e=E("div"),t=E("div"),s=R(),i=E("div"),a=E("div"),l=E("p"),l.textContent=o,c=R(),u=E("p"),f=me("Count: "),g=me(m),d=R(),w=E("div");for(let ie=0;ie<pe.length;ie+=1)pe[ie].c();p=R(),h=E("div"),v=E("div"),x=E("p"),O=me("Speed Multiplier: "),V=me(U),D=R(),N=E("input"),q=R(),Z=E("div"),$=E("p"),M=me("Max Packets: "),G=me(z),Te=R(),ue=E("input"),fe=R(),Ie=E("div"),ve=E("label"),we=E("p"),we.textContent=Fe,Ne=R(),Se=E("input"),y=R(),K(B.$$.fragment),this.h()},l(ie){e=C(ie,"DIV",{id:!0,style:!0,class:!0});var he=A(e);t=C(he,"DIV",{id:!0,class:!0}),A(t).forEach(_),he.forEach(_),s=I(ie),i=C(ie,"DIV",{id:!0,style:!0,class:!0});var be=A(i);a=C(be,"DIV",{id:!0,class:!0});var ze=A(a);l=C(ze,"P",{id:!0,class:!0,"data-svelte-h":!0}),ce(l)!=="svelte-1cfybk8"&&(l.textContent=o),c=I(ze),u=C(ze,"P",{id:!0,class:!0});var ln=A(u);f=_e(ln,"Count: "),g=_e(ln,m),ln.forEach(_),d=I(ze),w=C(ze,"DIV",{id:!0,class:!0});var xn=A(w);for(let cn=0;cn<pe.length;cn+=1)pe[cn].l(xn);xn.forEach(_),p=I(ze),h=C(ze,"DIV",{class:!0});var kt=A(h);v=C(kt,"DIV",{class:!0});var Mt=A(v);x=C(Mt,"P",{class:!0});var on=A(x);O=_e(on,"Speed Multiplier: "),V=_e(on,U),on.forEach(_),D=I(Mt),N=C(Mt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Mt.forEach(_),q=I(kt),Z=C(kt,"DIV",{class:!0});var zt=A(Z);$=C(zt,"P",{class:!0});var un=A($);M=_e(un,"Max Packets: "),G=_e(un,z),un.forEach(_),Te=I(zt),ue=C(zt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),zt.forEach(_),fe=I(kt),Ie=C(kt,"DIV",{class:!0});var En=A(Ie);ve=C(En,"LABEL",{class:!0});var Ht=A(ve);we=C(Ht,"P",{class:!0,"data-svelte-h":!0}),ce(we)!=="svelte-1re47ui"&&(we.textContent=Fe),Ne=I(Ht),Se=C(Ht,"INPUT",{type:!0,class:!0}),Ht.forEach(_),En.forEach(_),kt.forEach(_),y=I(ze),Q(B.$$.fragment,ze),ze.forEach(_),be.forEach(_),this.h()},h(){b(t,"id","resize-bar"),b(t,"class","svelte-1jfhuaz"),b(e,"id","visual-resize-bar"),b(e,"style",r=`width: ${n[0]?1:0}px`),b(e,"class","svelte-1jfhuaz"),b(l,"id","packet-controls-title"),b(l,"class","svelte-1jfhuaz"),b(u,"id","packet-controls-count"),b(u,"class","svelte-1jfhuaz"),b(w,"id","control-panel-buttons"),b(w,"class","svelte-1jfhuaz"),b(x,"class","svelte-1jfhuaz"),b(N,"type","range"),b(N,"min","0.1"),b(N,"max","2"),b(N,"step","0.001"),b(N,"class","svelte-1jfhuaz"),b(v,"class","input-box svelte-1jfhuaz"),b($,"class","svelte-1jfhuaz"),b(ue,"type","range"),b(ue,"min","1"),b(ue,"max","500"),b(ue,"step","1"),b(ue,"class","svelte-1jfhuaz"),b(Z,"class","input-box svelte-1jfhuaz"),b(we,"class","svelte-1jfhuaz"),b(Se,"type","checkbox"),b(Se,"class","svelte-1jfhuaz"),b(ve,"class","svelte-1jfhuaz"),b(Ie,"class","input-box svelte-1jfhuaz"),b(h,"class","inputs svelte-1jfhuaz"),b(a,"id","control-panel-content"),b(a,"class","svelte-1jfhuaz"),b(i,"id","control-panel"),b(i,"style",ye=`width: ${n[5]}px; transition: ${n[4]};`),b(i,"class","svelte-1jfhuaz")},m(ie,he){k(ie,e,he),T(e,t),n[9](t),k(ie,s,he),k(ie,i,he),T(i,a),T(a,l),T(a,c),T(a,u),T(u,f),T(u,g),T(a,d),T(a,w);for(let be=0;be<pe.length;be+=1)pe[be]&&pe[be].m(w,null);T(a,p),T(a,h),T(h,v),T(v,x),T(x,O),T(x,V),T(v,D),T(v,N),Le(N,n[1].speedMultiplier),T(h,q),T(h,Z),T(Z,$),T($,M),T($,G),T(Z,Te),T(Z,ue),Le(ue,n[1].maxPackets),T(h,fe),T(h,Ie),T(Ie,ve),T(ve,we),T(ve,Ne),T(ve,Se),Se.checked=n[1].enableFallback,T(a,y),ee(B,a,null),L=!0,re||(wn=[oe(t,"pointerdown",n[7]),oe(N,"change",n[10]),oe(N,"input",n[10]),oe(ue,"change",n[11]),oe(ue,"input",n[11]),oe(Se,"change",n[12])],re=!0)},p(ie,[he]){if((!L||he&1&&r!==(r=`width: ${ie[0]?1:0}px`))&&b(e,"style",r),(!L||he&4)&&m!==(m=ie[2].packets.length+"")&&Me(g,m),he&64){mt=ge(ie[6]);let be;for(be=0;be<mt.length;be+=1){const ze=qn(ie,mt,be);pe[be]?(pe[be].p(ze,he),S(pe[be],1)):(pe[be]=Yn(ze),pe[be].c(),S(pe[be],1),pe[be].m(w,null))}for(Pe(),be=mt.length;be<pe.length;be+=1)$r(be);De()}(!L||he&2)&&U!==(U=ie[1].speedMultiplier.toFixed(1)+"")&&Me(V,U),he&2&&Le(N,ie[1].speedMultiplier),(!L||he&2)&&z!==(z=ie[1].maxPackets+"")&&Me(G,z),he&2&&Le(ue,ie[1].maxPackets),he&2&&(Se.checked=ie[1].enableFallback),(!L||he&48&&ye!==(ye=`width: ${ie[5]}px; transition: ${ie[4]};`))&&b(i,"style",ye)},i(ie){if(!L){for(let he=0;he<mt.length;he+=1)S(pe[he]);S(B.$$.fragment,ie),L=!0}},o(ie){pe=pe.filter(Boolean);for(let he=0;he<pe.length;he+=1)j(pe[he]);j(B.$$.fragment,ie),L=!1},d(ie){ie&&(_(e),_(s),_(i)),n[9](null),at(pe,ie),te(B),re=!1,pt(wn)}}}function Pi(n,e,t){let r,s,i,a,l,o;Be(n,ht,v=>t(0,a=v)),Be(n,Ge,v=>t(1,l=v)),Be(n,Y,v=>t(2,o=v));let c,u="width 250ms";function f(v){a&&(t(4,u="none"),c.setPointerCapture(v.pointerId),c.addEventListener("pointermove",m),c.addEventListener("pointerup",g))}function m(v){t(5,i=window.innerWidth-v.clientX),i<=20&&t(5,i=0),i>=window.innerWidth-350&&t(5,i=window.innerWidth-350)}function g(v){c.removeEventListener("pointermove",m),c.removeEventListener("pointerup",g),c.releasePointerCapture(v.pointerId),t(4,u="width 250ms")}function d(v){Oe[v?"unshift":"push"](()=>{c=v,t(3,c)})}function w(){l.speedMultiplier=We(this.value),Ge.set(l)}function p(){l.maxPackets=We(this.value),Ge.set(l)}function h(){l.enableFallback=this.checked,Ge.set(l)}return n.$$.update=()=>{n.$$.dirty&4&&t(8,r=o.routers.filter(v=>v instanceof Ze)),n.$$.dirty&258&&t(6,s=[{text:l.running?"Pause":"Resume",callback:()=>{qe(Ge,l.running=!l.running,l)}},{text:"Reset",callback:()=>{Y.clearPackets()}},{text:"Play All",callback:()=>{for(const v of r)for(const[x]of v.firstHop)Y.addPacket(v,Y.getSureCERouter(x))}}]),n.$$.dirty&1&&t(5,i=a?350:0)},[a,l,o,c,u,i,s,f,r,d,w,p,h]}class Di extends Ce{constructor(e){super(),$e(this,e,Pi,Si,Ee,{})}}function Oi(n){let e;return{c(){e=tt("circle"),this.h()},l(t){e=nt(t,"circle",{r:!0,class:!0}),A(e).forEach(_),this.h()},h(){b(e,"r","5"),b(e,"class","svelte-rvo2j9"),Cn(e,"labeled",n[0].label!==-1)},m(t,r){k(t,e,r),n[4](e)},p(t,[r]){r&1&&Cn(e,"labeled",t[0].label!==-1)},i:Re,o:Re,d(t){t&&_(e),n[4](null)}}}function Bi(n,e,t){let r;Be(n,Ge,m=>t(3,r=m));let{packet:s}=e,i,a,l;function o(){const m=Math.sqrt((s.node.x-s.nextHop.node.x)**2+(s.node.y-s.nextHop.node.y)**2);i=Math.round(m/250*1e3)}function c(){if(o(),!l)return;const m=s.node,g=s.nextHop.node;t(2,a=l.animate({transform:[`translate(${m.x}px, ${m.y}px)`,`translate(${g.x}px, ${g.y}px)`]},{duration:i,easing:"linear"})),t(2,a.onfinish=u,a)}function u(){t(0,s.node=s.nextHop.node,s);const m=s.nextHop;if(m.receivePacket(s),m!==s.nextHop){if(!s.validateNextHop(m))return s.drop("Invalid next hop");c()}}requestAnimationFrame(c);function f(m){Oe[m?"unshift":"push"](()=>{l=m,t(1,l)})}return n.$$set=m=>{"packet"in m&&t(0,s=m.packet)},n.$$.update=()=>{n.$$.dirty&12&&a&&t(2,a.playbackRate=r.speedMultiplier,a),n.$$.dirty&12&&a&&(r.running?a.play():a.pause())},[s,l,a,r,f]}class ji extends Ce{constructor(e){super(),$e(this,e,Bi,Oi,Ee,{packet:0})}}function Zi(n){let e,t,r,s,i,a,l,o,c=n[0].distance+"",u,f,m,g;return{c(){e=tt("line"),t=R(),r=tt("rect"),l=R(),o=tt("text"),u=me(c),f=me(" km"),this.h()},l(d){e=nt(d,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),A(e).forEach(_),t=I(d),r=nt(d,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),A(r).forEach(_),l=I(d),o=nt(d,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var w=A(o);u=_e(w,c),f=_e(w," km"),w.forEach(_),this.h()},h(){b(e,"x1",n[4]),b(e,"y1",n[2]),b(e,"x2",n[3]),b(e,"y2",n[1]),b(r,"id",s=n[0].id),b(r,"x",i=n[5].x-pn/2),b(r,"y",a=n[5].y-mn/2),b(r,"width",pn),b(r,"height",mn),b(r,"class","svelte-zjn2k6"),b(o,"x",m=n[5].x),b(o,"y",g=n[5].y),b(o,"dominant-baseline","central"),b(o,"class","svelte-zjn2k6")},m(d,w){k(d,e,w),k(d,t,w),k(d,r,w),k(d,l,w),k(d,o,w),T(o,u),T(o,f)},p(d,[w]){w&16&&b(e,"x1",d[4]),w&4&&b(e,"y1",d[2]),w&8&&b(e,"x2",d[3]),w&2&&b(e,"y2",d[1]),w&1&&s!==(s=d[0].id)&&b(r,"id",s),w&32&&i!==(i=d[5].x-pn/2)&&b(r,"x",i),w&32&&a!==(a=d[5].y-mn/2)&&b(r,"y",a),w&1&&c!==(c=d[0].distance+"")&&Me(u,c),w&32&&m!==(m=d[5].x)&&b(o,"x",m),w&32&&g!==(g=d[5].y)&&b(o,"y",g)},i:Re,o:Re,d(d){d&&(_(e),_(t),_(r),_(l),_(o))}}}const pn=50,mn=20;function Wn(n,e){return(n+e)/2}function Ai(n,e,t){let r,s,i,a,l,{link:o}=e;return n.$$set=c=>{"link"in c&&t(0,o=c.link)},n.$$.update=()=>{n.$$.dirty&1&&t(4,r=o.source.node.x),n.$$.dirty&1&&t(3,s=o.target.node.x),n.$$.dirty&1&&t(2,i=o.source.node.y),n.$$.dirty&1&&t(1,a=o.target.node.y),n.$$.dirty&30&&t(5,l={x:Wn(r,s),y:Wn(i,a)})},[o,a,i,s,r,l]}class Mi extends Ce{constructor(e){super(),$e(this,e,Ai,Zi,Ee,{link:0})}}function zi(n){let e,t,r,s,i,a,l,o=n[0].node.label+"",c,u,f;return{c(){e=tt("image"),a=R(),l=tt("text"),c=me(o),this.h()},l(m){e=nt(m,"image",{id:!0,x:!0,y:!0,width:!0,height:!0,href:!0,class:!0}),A(e).forEach(_),a=I(m),l=nt(m,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var g=A(l);c=_e(g,o),g.forEach(_),this.h()},h(){b(e,"id",t=n[0].id.toString()),b(e,"x",r=n[0].node.x-45/2),b(e,"y",s=n[0].node.y-45/2),b(e,"width","45"),b(e,"height","45"),b(e,"href",i=`/Router/${n[0].type}.svg`),b(e,"class","svelte-1eo9fnr"),b(l,"x",u=n[0].node.x),b(l,"y",f=n[0].node.y+10),b(l,"dominant-baseline","central"),b(l,"font-size","smaller"),b(l,"class","svelte-1eo9fnr")},m(m,g){k(m,e,g),k(m,a,g),k(m,l,g),T(l,c)},p(m,[g]){g&1&&t!==(t=m[0].id.toString())&&b(e,"id",t),g&1&&r!==(r=m[0].node.x-45/2)&&b(e,"x",r),g&1&&s!==(s=m[0].node.y-45/2)&&b(e,"y",s),g&1&&i!==(i=`/Router/${m[0].type}.svg`)&&b(e,"href",i),g&1&&o!==(o=m[0].node.label+"")&&Me(c,o),g&1&&u!==(u=m[0].node.x)&&b(l,"x",u),g&1&&f!==(f=m[0].node.y+10)&&b(l,"y",f)},i:Re,o:Re,d(m){m&&(_(e),_(a),_(l))}}}function Hi(n,e,t){let{router:r}=e;return n.$$set=s=>{"router"in s&&t(0,r=s.router)},[r]}class Vi extends Ce{constructor(e){super(),$e(this,e,Hi,zi,Ee,{router:0})}}function Fi(n){let e,t,r,s;return{c(){e=E("div"),t=me(n[0]),this.h()},l(i){e=C(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var a=A(e);t=_e(a,n[0]),a.forEach(_),this.h()},h(){b(e,"draggable","true"),b(e,"role","button"),b(e,"tabindex","-1"),Et(e,"background-color",n[1]),b(e,"class","svelte-dfkep2")},m(i,a){k(i,e,a),T(e,t),r||(s=[oe(e,"dragstart",n[2]),oe(e,"click",n[3])],r=!0)},p(i,[a]){a&1&&Me(t,i[0]),a&2&&Et(e,"background-color",i[1])},i:Re,o:Re,d(i){i&&_(e),r=!1,pt(s)}}}function Ui(n,e,t){let r,s;Be(n,Ue,u=>t(5,r=u)),Be(n,ht,u=>t(6,s=u));let{text:i}=e,{type:a}=e,{color:l}=e;function o(u){var f;if(s){alert("Network is locked.");return}(f=u.dataTransfer)==null||f.setData("text/plain",a)}function c(){qe(Ue,r.placing=a,r)}return n.$$set=u=>{"text"in u&&t(0,i=u.text),"type"in u&&t(4,a=u.type),"color"in u&&t(1,l=u.color)},[i,l,o,c,a]}class qi extends Ce{constructor(e){super(),$e(this,e,Ui,Fi,Ee,{text:0,type:4,color:1})}}function Gn(n,e,t){const r=n.slice();return r[7]=e[t],r}function Xn(n,e,t){const r=n.slice();return r[7]=e[t],r}function Jn(n,e,t){const r=n.slice();return r[10]=e[t],r}function Yi(n){let e,t,r=ge(n[0]),s=[];for(let a=0;a<r.length;a+=1)s[a]=Kn(Gn(n,r,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=xe()},l(a){for(let l=0;l<s.length;l+=1)s[l].l(a);e=xe()},m(a,l){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(a,l);k(a,e,l),t=!0},p(a,l){if(l&1){r=ge(a[0]);let o;for(o=0;o<r.length;o+=1){const c=Gn(a,r,o);s[o]?(s[o].p(c,l),S(s[o],1)):(s[o]=Kn(c),s[o].c(),S(s[o],1),s[o].m(e.parentNode,e))}for(Pe(),o=r.length;o<s.length;o+=1)i(o);De()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)S(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&_(e),at(s,a)}}}function Wi(n){let e,t,r,s=ge(n[4]),i=[];for(let u=0;u<s.length;u+=1)i[u]=Qn(Jn(n,s,u));const a=u=>j(i[u],1,1,()=>{i[u]=null});let l=ge(n[1]),o=[];for(let u=0;u<l.length;u+=1)o[u]=er(Xn(n,l,u));const c=u=>j(o[u],1,1,()=>{o[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=R();for(let u=0;u<o.length;u+=1)o[u].c();t=xe()},l(u){for(let f=0;f<i.length;f+=1)i[f].l(u);e=I(u);for(let f=0;f<o.length;f+=1)o[f].l(u);t=xe()},m(u,f){for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(u,f);k(u,e,f);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(u,f);k(u,t,f),r=!0},p(u,f){if(f&16){s=ge(u[4]);let m;for(m=0;m<s.length;m+=1){const g=Jn(u,s,m);i[m]?(i[m].p(g,f),S(i[m],1)):(i[m]=Qn(g),i[m].c(),S(i[m],1),i[m].m(e.parentNode,e))}for(Pe(),m=s.length;m<i.length;m+=1)a(m);De()}if(f&2){l=ge(u[1]);let m;for(m=0;m<l.length;m+=1){const g=Xn(u,l,m);o[m]?(o[m].p(g,f),S(o[m],1)):(o[m]=er(g),o[m].c(),S(o[m],1),o[m].m(t.parentNode,t))}for(Pe(),m=l.length;m<o.length;m+=1)c(m);De()}},i(u){if(!r){for(let f=0;f<s.length;f+=1)S(i[f]);for(let f=0;f<l.length;f+=1)S(o[f]);r=!0}},o(u){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)j(i[f]);o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)j(o[f]);r=!1},d(u){u&&(_(e),_(t)),at(i,u),at(o,u)}}}function Kn(n){let e,t;const r=[n[7]];let s={};for(let i=0;i<r.length;i+=1)s=en(s,r[i]);return e=new Qe({props:s}),{c(){K(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,a){ee(e,i,a),t=!0},p(i,a){const l=a&1?nn(r,[rn(i[7])]):{};e.$set(l)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Qn(n){let e,t;const r=[n[10]];let s={};for(let i=0;i<r.length;i+=1)s=en(s,r[i]);return e=new qi({props:s}),{c(){K(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,a){ee(e,i,a),t=!0},p(i,a){const l=a&16?nn(r,[rn(i[10])]):{};e.$set(l)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function er(n){let e,t;const r=[n[7]];let s={};for(let i=0;i<r.length;i+=1)s=en(s,r[i]);return e=new Qe({props:s}),{c(){K(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,a){ee(e,i,a),t=!0},p(i,a){const l=a&2?nn(r,[rn(i[7])]):{};e.$set(l)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Gi(n){let e,t,r,s,i,a;e=new Qe({props:{text:n[2]?"Edit":"Simulation",callback:n[6],style:`width: 100px; background-color: ${n[2]?"#3CB371":"#6495ED"};`}});const l=[Wi,Yi],o=[];function c(u,f){return u[2]?1:0}return r=c(n),s=o[r]=l[r](n),{c(){K(e.$$.fragment),t=R(),s.c(),i=xe()},l(u){Q(e.$$.fragment,u),t=I(u),s.l(u),i=xe()},m(u,f){ee(e,u,f),k(u,t,f),o[r].m(u,f),k(u,i,f),a=!0},p(u,[f]){const m={};f&4&&(m.text=u[2]?"Edit":"Simulation"),f&12&&(m.callback=u[6]),f&4&&(m.style=`width: 100px; background-color: ${u[2]?"#3CB371":"#6495ED"};`),e.$set(m);let g=r;r=c(u),r===g?o[r].p(u,f):(Pe(),j(o[g],1,1,()=>{o[g]=null}),De(),s=o[r],s?s.p(u,f):(s=o[r]=l[r](u),s.c()),S(s,1),s.m(i.parentNode,i))},i(u){a||(S(e.$$.fragment,u),S(s),a=!0)},o(u){j(e.$$.fragment,u),j(s),a=!1},d(u){u&&(_(t),_(i)),te(e,u),o[r].d(u)}}}function Xi(n,e,t){let r,s,i,a,l;Be(n,Y,u=>t(5,i=u)),Be(n,ht,u=>t(2,a=u)),Be(n,Ue,u=>t(3,l=u));const o=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],c=()=>{qe(ht,a=!a,a),qe(Ue,l.placing=null,l),Y.clearPackets()};return n.$$.update=()=>{n.$$.dirty&32&&t(0,s=[{text:"Clear Tables",callback:()=>{confirm("Are you sure you want to clear the routing tables?")&&Y.clearTables()}},{text:"Export",callback:()=>{const u={routers:i.routers.map(w=>{if(w instanceof Ze)return{...w,type:w.type,firstHop:Object.fromEntries(w.firstHop)};if(w instanceof Ye)return{...w,type:w.type,FIB:Object.fromEntries(w.FIB.map),LFIB:Object.fromEntries(w.LFIB.map)};if(w instanceof bt)return{...w,type:w.type,LFIB:Object.fromEntries(w.LFIB.map)}}),links:i.links.map(w=>({...w,source:w.source.id,target:w.target.id}))},f=JSON.stringify(u,null,2),m=new Blob([f],{type:"application/json"}),g=window.URL.createObjectURL(m),d=document.createElement("a");d.href=g,d.download="network.json",d.click(),window.URL.revokeObjectURL(g)}}]),n.$$.dirty&1&&t(1,r=[{text:"Clear Network",callback:()=>{confirm("Are you sure you want to clear the network?")&&Y.clear()}},{text:"Clear Links",callback:()=>{confirm("Are you sure you want to clear the links?")&&Y.clearLinks()}},...s])},[s,r,a,l,o,i,c]}class Ji extends Ce{constructor(e){super(),$e(this,e,Xi,Gi,Ee,{})}}function Ki(n){let e,t="Drag and drop routers to add them to the network.",r,s,i,a,l=`Instead of drag and drop, you can also click and hold shift while continuously clicking to add
    many routers.`,o,c,u,f,m=`Pressing 1, 2 or 3 will respectively select CE, LER or LSR, this works with the holding of shift
    to insert routers.`,g,d,w,p,h="Hold the shift key and drag routers to make links.",v,x,O,U,V="Hold the ctrl key and drag CE's to add destinations.",D,N,q,Z,$="Double click a router or link to configure it.",M,z,G,Te,ue="The clear button will delete the entire network.",fe,Ie,ve,we,Fe="The export button will download your network as a .json file",Ne,Se,y,B,ye="Press Esc to close this popup.";return{c(){e=E("p"),e.textContent=t,r=R(),s=E("br"),i=R(),a=E("p"),a.textContent=l,o=R(),c=E("br"),u=R(),f=E("p"),f.textContent=m,g=R(),d=E("br"),w=R(),p=E("p"),p.textContent=h,v=R(),x=E("br"),O=R(),U=E("p"),U.textContent=V,D=R(),N=E("br"),q=R(),Z=E("p"),Z.textContent=$,M=R(),z=E("br"),G=R(),Te=E("p"),Te.textContent=ue,fe=R(),Ie=E("br"),ve=R(),we=E("p"),we.textContent=Fe,Ne=R(),Se=E("br"),y=R(),B=E("p"),B.textContent=ye},l(L){e=C(L,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-bhocp0"&&(e.textContent=t),r=I(L),s=C(L,"BR",{}),i=I(L),a=C(L,"P",{"data-svelte-h":!0}),ce(a)!=="svelte-12tzi3f"&&(a.textContent=l),o=I(L),c=C(L,"BR",{}),u=I(L),f=C(L,"P",{"data-svelte-h":!0}),ce(f)!=="svelte-1gxe9lx"&&(f.textContent=m),g=I(L),d=C(L,"BR",{}),w=I(L),p=C(L,"P",{"data-svelte-h":!0}),ce(p)!=="svelte-ddjc2m"&&(p.textContent=h),v=I(L),x=C(L,"BR",{}),O=I(L),U=C(L,"P",{"data-svelte-h":!0}),ce(U)!=="svelte-33j76o"&&(U.textContent=V),D=I(L),N=C(L,"BR",{}),q=I(L),Z=C(L,"P",{"data-svelte-h":!0}),ce(Z)!=="svelte-qvtprs"&&(Z.textContent=$),M=I(L),z=C(L,"BR",{}),G=I(L),Te=C(L,"P",{"data-svelte-h":!0}),ce(Te)!=="svelte-vcl8s3"&&(Te.textContent=ue),fe=I(L),Ie=C(L,"BR",{}),ve=I(L),we=C(L,"P",{"data-svelte-h":!0}),ce(we)!=="svelte-1ww5ij7"&&(we.textContent=Fe),Ne=I(L),Se=C(L,"BR",{}),y=I(L),B=C(L,"P",{"data-svelte-h":!0}),ce(B)!=="svelte-1dvt5v1"&&(B.textContent=ye)},m(L,re){k(L,e,re),k(L,r,re),k(L,s,re),k(L,i,re),k(L,a,re),k(L,o,re),k(L,c,re),k(L,u,re),k(L,f,re),k(L,g,re),k(L,d,re),k(L,w,re),k(L,p,re),k(L,v,re),k(L,x,re),k(L,O,re),k(L,U,re),k(L,D,re),k(L,N,re),k(L,q,re),k(L,Z,re),k(L,M,re),k(L,z,re),k(L,G,re),k(L,Te,re),k(L,fe,re),k(L,Ie,re),k(L,ve,re),k(L,we,re),k(L,Ne,re),k(L,Se,re),k(L,y,re),k(L,B,re)},p:Re,d(L){L&&(_(e),_(r),_(s),_(i),_(a),_(o),_(c),_(u),_(f),_(g),_(d),_(w),_(p),_(v),_(x),_(O),_(U),_(D),_(N),_(q),_(Z),_(M),_(z),_(G),_(Te),_(fe),_(Ie),_(ve),_(we),_(Ne),_(Se),_(y),_(B))}}}function Qi(n){let e,t,r,s,i,a;t=new Qe({props:{text:"Help",callback:n[1]}});function l(c){n[2](c)}let o={$$slots:{default:[Ki]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.dialog=n[0]),s=new an({props:o}),Oe.push(()=>Ve(s,"dialog",l)),{c(){e=E("div"),K(t.$$.fragment),r=R(),K(s.$$.fragment)},l(c){e=C(c,"DIV",{});var u=A(e);Q(t.$$.fragment,u),u.forEach(_),r=I(c),Q(s.$$.fragment,c)},m(c,u){k(c,e,u),ee(t,e,null),k(c,r,u),ee(s,c,u),a=!0},p(c,[u]){const f={};u&1&&(f.callback=c[1]),t.$set(f);const m={};u&8&&(m.$$scope={dirty:u,ctx:c}),!i&&u&1&&(i=!0,m.dialog=c[0],He(()=>i=!1)),s.$set(m)},i(c){a||(S(t.$$.fragment,c),S(s.$$.fragment,c),a=!0)},o(c){j(t.$$.fragment,c),j(s.$$.fragment,c),a=!1},d(c){c&&(_(e),_(r)),te(t),te(s,c)}}}function ea(n,e,t){let r;const s=()=>{r.showModal()};function i(a){r=a,t(0,r)}return[r,s,i]}class ta extends Ce{constructor(e){super(),$e(this,e,ea,Qi,Ee,{})}}function na(n){let e,t,r,s,i,a;return e=new Qe({props:{text:" - ",callback:n[1]}}),r=new Qe({props:{text:"Fullscreen",callback:n[2]}}),i=new Qe({props:{text:" + ",callback:n[3]}}),{c(){K(e.$$.fragment),t=R(),K(r.$$.fragment),s=R(),K(i.$$.fragment)},l(l){Q(e.$$.fragment,l),t=I(l),Q(r.$$.fragment,l),s=I(l),Q(i.$$.fragment,l)},m(l,o){ee(e,l,o),k(l,t,o),ee(r,l,o),k(l,s,o),ee(i,l,o),a=!0},p(l,[o]){const c={};o&1&&(c.callback=l[1]),e.$set(c);const u={};o&1&&(u.callback=l[3]),i.$set(u)},i(l){a||(S(e.$$.fragment,l),S(r.$$.fragment,l),S(i.$$.fragment,l),a=!0)},o(l){j(e.$$.fragment,l),j(r.$$.fragment,l),j(i.$$.fragment,l),a=!1},d(l){l&&(_(t),_(s)),te(e,l),te(r,l),te(i,l)}}}function ra(n,e,t){let{zoom:r}=e;const s=()=>{const l={x:window.innerWidth/2,y:window.innerHeight/2};r(1.1,l)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},a=()=>{const l={x:window.innerWidth/2,y:window.innerHeight/2};r(.9,l)};return n.$$set=l=>{"zoom"in l&&t(0,r=l.zoom)},[r,s,i,a]}class sa extends Ce{constructor(e){super(),$e(this,e,ra,na,Ee,{zoom:0})}}function ia(n){let e,t="Attribution: The following Icon has been used",r,s,i,a,l="https://commons.wikimedia.org/wiki/File:Router.svg#",o,c,u,f,m="Share Alike: We hereby grant permission to",g,d,w=`Copy, distribute and/or modify this document under the terms of the GNU Free Documentation
    License.`,p,h,v="Version 1.2 or any later version published by the Free Software Foundation;",x,O,U="with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.",V,D,N="A copy of the license is included in the section entitled GNU Free Documentation License.",q,Z,$,M,z="The Icon used for CE routers is almost identical to the on on Wikimedia (aspect ratio changed)",G,Te,ue,fe,Ie=`The Icon used for LSR/LER routers is almost identical, except with different colors. (aspect
    ratio changed)`,ve,we,Fe,Ne,Se="Press Esc to close this popup";return{c(){e=E("p"),e.textContent=t,r=R(),s=E("br"),i=R(),a=E("p"),a.textContent=l,o=R(),c=E("br"),u=R(),f=E("p"),f.textContent=m,g=R(),d=E("p"),d.textContent=w,p=R(),h=E("p"),h.textContent=v,x=R(),O=E("p"),O.textContent=U,V=R(),D=E("p"),D.textContent=N,q=R(),Z=E("br"),$=R(),M=E("p"),M.textContent=z,G=R(),Te=E("br"),ue=R(),fe=E("p"),fe.textContent=Ie,ve=R(),we=E("br"),Fe=R(),Ne=E("p"),Ne.textContent=Se},l(y){e=C(y,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-t8z8ph"&&(e.textContent=t),r=I(y),s=C(y,"BR",{}),i=I(y),a=C(y,"P",{"data-svelte-h":!0}),ce(a)!=="svelte-dbjryl"&&(a.textContent=l),o=I(y),c=C(y,"BR",{}),u=I(y),f=C(y,"P",{"data-svelte-h":!0}),ce(f)!=="svelte-1y4tl2"&&(f.textContent=m),g=I(y),d=C(y,"P",{"data-svelte-h":!0}),ce(d)!=="svelte-17660lf"&&(d.textContent=w),p=I(y),h=C(y,"P",{"data-svelte-h":!0}),ce(h)!=="svelte-vqht9l"&&(h.textContent=v),x=I(y),O=C(y,"P",{"data-svelte-h":!0}),ce(O)!=="svelte-1x9q3li"&&(O.textContent=U),V=I(y),D=C(y,"P",{"data-svelte-h":!0}),ce(D)!=="svelte-hnn81q"&&(D.textContent=N),q=I(y),Z=C(y,"BR",{}),$=I(y),M=C(y,"P",{"data-svelte-h":!0}),ce(M)!=="svelte-pqeqwb"&&(M.textContent=z),G=I(y),Te=C(y,"BR",{}),ue=I(y),fe=C(y,"P",{"data-svelte-h":!0}),ce(fe)!=="svelte-vmr7sg"&&(fe.textContent=Ie),ve=I(y),we=C(y,"BR",{}),Fe=I(y),Ne=C(y,"P",{"data-svelte-h":!0}),ce(Ne)!=="svelte-mgckcf"&&(Ne.textContent=Se)},m(y,B){k(y,e,B),k(y,r,B),k(y,s,B),k(y,i,B),k(y,a,B),k(y,o,B),k(y,c,B),k(y,u,B),k(y,f,B),k(y,g,B),k(y,d,B),k(y,p,B),k(y,h,B),k(y,x,B),k(y,O,B),k(y,V,B),k(y,D,B),k(y,q,B),k(y,Z,B),k(y,$,B),k(y,M,B),k(y,G,B),k(y,Te,B),k(y,ue,B),k(y,fe,B),k(y,ve,B),k(y,we,B),k(y,Fe,B),k(y,Ne,B)},p:Re,d(y){y&&(_(e),_(r),_(s),_(i),_(a),_(o),_(c),_(u),_(f),_(g),_(d),_(p),_(h),_(x),_(O),_(V),_(D),_(q),_(Z),_($),_(M),_(G),_(Te),_(ue),_(fe),_(ve),_(we),_(Fe),_(Ne))}}}function aa(n){let e,t,r,s,i,a;t=new Qe({props:{text:"Credits",callback:n[1]}});function l(c){n[2](c)}let o={$$slots:{default:[ia]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.dialog=n[0]),s=new an({props:o}),Oe.push(()=>Ve(s,"dialog",l)),{c(){e=E("div"),K(t.$$.fragment),r=R(),K(s.$$.fragment)},l(c){e=C(c,"DIV",{});var u=A(e);Q(t.$$.fragment,u),u.forEach(_),r=I(c),Q(s.$$.fragment,c)},m(c,u){k(c,e,u),ee(t,e,null),k(c,r,u),ee(s,c,u),a=!0},p(c,[u]){const f={};u&1&&(f.callback=c[1]),t.$set(f);const m={};u&8&&(m.$$scope={dirty:u,ctx:c}),!i&&u&1&&(i=!0,m.dialog=c[0],He(()=>i=!1)),s.$set(m)},i(c){a||(S(t.$$.fragment,c),S(s.$$.fragment,c),a=!0)},o(c){j(t.$$.fragment,c),j(s.$$.fragment,c),a=!1},d(c){c&&(_(e),_(r)),te(t),te(s,c)}}}function la(n,e,t){let r;const s=()=>{r.showModal()};function i(a){r=a,t(0,r)}return[r,s,i]}class oa extends Ce{constructor(e){super(),$e(this,e,la,aa,Ee,{})}}function tr(n,e,t){const r=n.slice();return r[5]=e[t],r}function nr(n,e,t){const r=n.slice();return r[8]=e[t],r}function rr(n,e,t){const r=n.slice();return r[11]=e[t],r}function sr(n,e){let t,r,s;return r=new Mi({props:{link:e[11]}}),{key:n,first:null,c(){t=xe(),K(r.$$.fragment),this.h()},l(i){t=xe(),Q(r.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){k(i,t,a),ee(r,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.link=e[11]),r.$set(l)},i(i){s||(S(r.$$.fragment,i),s=!0)},o(i){j(r.$$.fragment,i),s=!1},d(i){i&&_(t),te(r,i)}}}function ir(n,e){let t,r,s;return r=new Vi({props:{router:e[8]}}),{key:n,first:null,c(){t=xe(),K(r.$$.fragment),this.h()},l(i){t=xe(),Q(r.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){k(i,t,a),ee(r,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.router=e[8]),r.$set(l)},i(i){s||(S(r.$$.fragment,i),s=!0)},o(i){j(r.$$.fragment,i),s=!1},d(i){i&&_(t),te(r,i)}}}function ar(n,e){let t,r,s;return r=new ji({props:{packet:e[5]}}),{key:n,first:null,c(){t=xe(),K(r.$$.fragment),this.h()},l(i){t=xe(),Q(r.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){k(i,t,a),ee(r,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.packet=e[5]),r.$set(l)},i(i){s||(S(r.$$.fragment,i),s=!0)},o(i){j(r.$$.fragment,i),s=!1},d(i){i&&_(t),te(r,i)}}}function ua(n){let e=[],t=new Map,r,s=[],i=new Map,a,l=[],o=new Map,c,u,f=ge(n[1].links);const m=h=>h[11].id;for(let h=0;h<f.length;h+=1){let v=rr(n,f,h),x=m(v);t.set(x,e[h]=sr(x,v))}let g=ge(n[1].routers);const d=h=>h[8].id;for(let h=0;h<g.length;h+=1){let v=nr(n,g,h),x=d(v);i.set(x,s[h]=ir(x,v))}let w=ge(n[1].packets);const p=h=>h[5].id;for(let h=0;h<w.length;h+=1){let v=tr(n,w,h),x=p(v);o.set(x,l[h]=ar(x,v))}return{c(){for(let h=0;h<e.length;h+=1)e[h].c();r=R();for(let h=0;h<s.length;h+=1)s[h].c();a=R();for(let h=0;h<l.length;h+=1)l[h].c();c=xe()},l(h){for(let v=0;v<e.length;v+=1)e[v].l(h);r=I(h);for(let v=0;v<s.length;v+=1)s[v].l(h);a=I(h);for(let v=0;v<l.length;v+=1)l[v].l(h);c=xe()},m(h,v){for(let x=0;x<e.length;x+=1)e[x]&&e[x].m(h,v);k(h,r,v);for(let x=0;x<s.length;x+=1)s[x]&&s[x].m(h,v);k(h,a,v);for(let x=0;x<l.length;x+=1)l[x]&&l[x].m(h,v);k(h,c,v),u=!0},p(h,v){v&2&&(f=ge(h[1].links),Pe(),e=fn(e,v,m,1,h,f,t,r.parentNode,dn,sr,r,rr),De()),v&2&&(g=ge(h[1].routers),Pe(),s=fn(s,v,d,1,h,g,i,a.parentNode,dn,ir,a,nr),De()),v&2&&(w=ge(h[1].packets),Pe(),l=fn(l,v,p,1,h,w,o,c.parentNode,dn,ar,c,tr),De())},i(h){if(!u){for(let v=0;v<f.length;v+=1)S(e[v]);for(let v=0;v<g.length;v+=1)S(s[v]);for(let v=0;v<w.length;v+=1)S(l[v]);u=!0}},o(h){for(let v=0;v<e.length;v+=1)j(e[v]);for(let v=0;v<s.length;v+=1)j(s[v]);for(let v=0;v<l.length;v+=1)j(l[v]);u=!1},d(h){h&&(_(r),_(a),_(c));for(let v=0;v<e.length;v+=1)e[v].d(h);for(let v=0;v<s.length;v+=1)s[v].d(h);for(let v=0;v<l.length;v+=1)l[v].d(h)}}}function ca(n){let e,t,r,s,i,a,l,o,c,u,f,m,g,d,w,p,h,v,x;function O(N){n[2](N)}let U={$$slots:{default:[ua]},$$scope:{ctx:n}};n[0]!==void 0&&(U.zoom=n[0]),r=new xi({props:U}),Oe.push(()=>Ve(r,"zoom",O)),l=new Ji({}),u=new ta({}),m=new oa({});function V(N){n[3](N)}let D={};return n[0]!==void 0&&(D.zoom=n[0]),w=new sa({props:D}),Oe.push(()=>Ve(w,"zoom",V)),v=new Di({}),{c(){e=E("div"),t=E("div"),K(r.$$.fragment),i=R(),a=E("div"),K(l.$$.fragment),o=R(),c=E("div"),K(u.$$.fragment),f=R(),K(m.$$.fragment),g=R(),d=E("div"),K(w.$$.fragment),h=R(),K(v.$$.fragment),this.h()},l(N){e=C(N,"DIV",{id:!0,class:!0});var q=A(e);t=C(q,"DIV",{id:!0,class:!0});var Z=A(t);Q(r.$$.fragment,Z),i=I(Z),a=C(Z,"DIV",{id:!0,class:!0});var $=A(a);Q(l.$$.fragment,$),$.forEach(_),o=I(Z),c=C(Z,"DIV",{id:!0,class:!0});var M=A(c);Q(u.$$.fragment,M),f=I(M),Q(m.$$.fragment,M),M.forEach(_),g=I(Z),d=C(Z,"DIV",{id:!0,class:!0});var z=A(d);Q(w.$$.fragment,z),z.forEach(_),Z.forEach(_),h=I(q),Q(v.$$.fragment,q),q.forEach(_),this.h()},h(){b(a,"id","top-left-bar"),b(a,"class","absolute-flex svelte-1kpnzxr"),b(c,"id","bottom-left-bar"),b(c,"class","absolute-flex svelte-1kpnzxr"),b(d,"id","bottom-right-bar"),b(d,"class","absolute-flex svelte-1kpnzxr"),b(t,"id","network"),b(t,"class","svelte-1kpnzxr"),b(e,"id","mpls"),b(e,"class","svelte-1kpnzxr")},m(N,q){k(N,e,q),T(e,t),ee(r,t,null),T(t,i),T(t,a),ee(l,a,null),T(t,o),T(t,c),ee(u,c,null),T(c,f),ee(m,c,null),T(t,g),T(t,d),ee(w,d,null),T(e,h),ee(v,e,null),x=!0},p(N,[q]){const Z={};q&16386&&(Z.$$scope={dirty:q,ctx:N}),!s&&q&1&&(s=!0,Z.zoom=N[0],He(()=>s=!1)),r.$set(Z);const $={};!p&&q&1&&(p=!0,$.zoom=N[0],He(()=>p=!1)),w.$set($)},i(N){x||(S(r.$$.fragment,N),S(l.$$.fragment,N),S(u.$$.fragment,N),S(m.$$.fragment,N),S(w.$$.fragment,N),S(v.$$.fragment,N),x=!0)},o(N){j(r.$$.fragment,N),j(l.$$.fragment,N),j(u.$$.fragment,N),j(m.$$.fragment,N),j(w.$$.fragment,N),j(v.$$.fragment,N),x=!1},d(N){N&&_(e),te(r),te(l),te(u),te(m),te(w),te(v)}}}function da(n,e,t){let r,s;Be(n,Ge,o=>t(4,r=o)),Be(n,Y,o=>t(1,s=o));let i;pr(()=>{window.addEventListener("visibilitychanged",()=>{qe(Ge,r.running=!document.hidden,r)})}),qs();function a(o){i=o,t(0,i)}function l(o){i=o,t(0,i)}return[i,s,a,l]}class fa extends Ce{constructor(e){super(),$e(this,e,da,ca,Ee,{})}}function ha(n){let e,t;return e=new fa({}),{c(){K(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,s){ee(e,r,s),t=!0},p:Re,i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){te(e,r)}}}class xa extends Ce{constructor(e){super(),$e(this,e,null,ha,Ee,{})}}export{xa as component};
