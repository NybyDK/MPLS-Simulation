var Pt=Object.defineProperty;var Nt=(l,e,t)=>e in l?Pt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var A=(l,e,t)=>(Nt(l,typeof e!="symbol"?e+"":e,t),t);import{r as $e,s as re,a as Et,u as $t,g as Ct,b as Lt,x as Rt,e as fe,i as De,n as Z,y as ce,c as _e,o as It,z as Fe,A as Ue}from"../chunks/scheduler.C5v8YK5g.js";import{n as M,m as B,S as se,i as ue,e as L,c as R,a as S,d as m,l as v,g as E,z as q,s as N,A as le,f as D,h as $,B as Ee,C as ae,D as me,E as de,v as X,w as G,x as W,y as K,o as te,r as he,p as pe,t as oe,b as ie,j as be,F as ve,G as we,q as Pe,H as Dt}from"../chunks/index.CS2IdBlG.js";import{w as He}from"../chunks/index.CD1dNpfE.js";function ee(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Me(l,e){M(l,1,1,()=>{e.delete(l.key)})}function xe(l,e,t,n,r,i,o,s,u,d,a,c){let f=l.length,_=i.length,h=f;const g={};for(;h--;)g[l[h].key]=h;const k=[],p=new Map,b=new Map,C=[];for(h=_;h--;){const I=c(r,i,h),F=t(I);let P=o.get(F);P?n&&C.push(()=>P.p(I,e)):(P=d(F,I),P.c()),p.set(F,k[h]=P),F in g&&b.set(F,Math.abs(h-g[F]))}const U=new Set,z=new Set;function H(I){B(I,1),I.m(s,a),o.set(I.key,I),a=I.first,_--}for(;f&&_;){const I=k[_-1],F=l[f-1],P=I.key,w=F.key;I===F?(a=I.first,f--,_--):p.has(w)?!o.has(P)||U.has(P)?H(I):z.has(w)?f--:b.get(P)>b.get(w)?(z.add(P),H(I)):(U.add(w),f--):(u(F,o),f--)}for(;f--;){const I=l[f];p.has(I.key)||u(I,o)}for(;_;)H(k[_-1]);return $e(C),k}function Ae(l,e){const t={},n={},r={$$scope:1};let i=l.length;for(;i--;){const o=l[i],s=e[i];if(s){for(const u in o)u in s||(n[u]=1);for(const u in s)r[u]||(t[u]=s[u],r[u]=1);l[i]=s}else for(const u in o)r[u]=1}for(const o in n)o in t||(t[o]=void 0);return t}function Oe(l){return typeof l=="object"&&l!==null?l:{}}let Ht=class{constructor(e,t,n){A(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},Mt=class{constructor(e,t,n,r){A(this,"ttl",32);A(this,"label",-1);A(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=r;const i=t.firstHop.get(n.address);if(i===void 0)return;const o=j.getRouter(i);o!==void 0&&(this.nextHop=o)}decrementTTL(){--this.ttl<=0&&this.drop()}drop(){j.deletePacket(this.id)}},je=class{constructor(e,t){this.id=e,this.node=t}};class ke extends je{constructor(){super(...arguments);A(this,"address",`CE-IP-${this.id}`);A(this,"firstHop",new Map);A(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});A(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});A(this,"updateAddress",(t,n)=>{const r=this.firstHop.get(t);if(r===void 0)throw new Error(`Unable to update old first hop Address '${t}' to '${n}'.`);this.firstHop.set(n,r),this.firstHop.delete(t)});A(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop()}get type(){return"CE"}}let Tt=class{constructor(){A(this,"map",new Map);A(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});A(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});A(this,"updateLabel",(e,t)=>{const n=this.map.get(e);if(!n)throw new Error(`Unable to update old LIB label '${e}' to '${t}'.`);if(this.map.get(t))throw new Error(`Label entry '${t}' already exists.`);this.map.set(t,n),this.map.delete(e)});A(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}},xt=class{constructor(){A(this,"map",new Map);A(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});A(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});A(this,"updateAddress",(e,t)=>{const n=this.map.get(e);if(!n)throw new Error(`Unable to update old FIB address '${e}' to '${t}'.`);if(this.map.get(t))throw new Error(`Address '${t}' already exists in FIB.`);this.map.set(t,n),this.map.delete(e)});A(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Re extends je{constructor(){super(...arguments);A(this,"FIB",new xt);A(this,"LIB",new Tt)}receivePacket(t){var r,i,o,s;const n=t.destination;if(t.label===-1){const u=(r=this.FIB.get(n.address))==null?void 0:r.nextHop;if(!u)return;const d=(i=this.FIB.get(n.address))==null?void 0:i.label;if(!d)return;t.label=d;const a=j.getRouter(parseInt(u));if(!a)return;t.nextHop=a}else{const u=(o=this.LIB.get(t.label))==null?void 0:o.nextHop;if(!u)return;const d=(s=this.LIB.get(t.label))==null?void 0:s.outgoingLabel;if(!d)return;t.label=d;const a=j.routers.find(c=>c instanceof ke&&c.address===u);if(!a)return;t.nextHop=a}t.decrementTTL()}get type(){return"LER"}}class Ne extends je{constructor(){super(...arguments);A(this,"LIB",new Tt)}receivePacket(t){var o,s;const n=(o=this.LIB.get(t.label))==null?void 0:o.nextHop;if(!n)return;const r=(s=this.LIB.get(t.label))==null?void 0:s.outgoingLabel;if(!r)return;t.label=r;const i=j.getRouter(parseInt(n));i&&(t.nextHop=i,t.decrementTTL())}get type(){return"LSR"}}const zt={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class St{constructor(){A(this,"store",He({routers:[],links:[],packets:[]}));A(this,"set",this.store.set);A(this,"update",this.store.update);A(this,"subscribe",this.store.subscribe);A(this,"_routers",[]);A(this,"_links",[]);A(this,"_packets",[]);A(this,"routerMap",new Map);A(this,"CEMap",new Map);A(this,"routerCounter",0);A(this,"packetCounter",0)}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!zt[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new Ht(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,r=new ke(n,{label:`CE ${n}`,x:e,y:t});this.addRouter(r)}createLER(e,t){const n=this.routerCounter++,r=new Re(n,{label:`LER ${n}`,x:e,y:t});this.addRouter(r)}createLSR(e,t){const n=this.routerCounter++,r=new Ne(n,{label:`LSR ${n}`,x:e,y:t});this.addRouter(r)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof ke&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),t instanceof ke&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}getSureCERouter(e){const t=this.getCERouter(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){const n=new Mt(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=0,this.packetCounter=0,this.notify()}notify(){this.store.set(this.networkState)}}const Ft=new St,j=Ft,Le=He({running:!0,speedMultiplier:1}),Ce=He(!1);function Ut(l){let e,t,n,r;const i=l[2].default,o=Et(i,l,l[1],null);return{c(){e=L("dialog"),o&&o.c(),this.h()},l(s){e=R(s,"DIALOG",{class:!0});var u=S(e);o&&o.l(u),u.forEach(m),this.h()},h(){v(e,"class","svelte-414ocx")},m(s,u){E(s,e,u),o&&o.m(e,null),l[4](e),t=!0,n||(r=q(e,"close",l[3]),n=!0)},p(s,[u]){o&&o.p&&(!t||u&2)&&$t(o,i,s,s[1],t?Lt(i,s[1],u,null):Ct(s[1]),null)},i(s){t||(B(o,s),t=!0)},o(s){M(o,s),t=!1},d(s){s&&m(e),o&&o.d(s),l[4](null),n=!1,r()}}}function At(l,e,t){let{$$slots:n={},$$scope:r}=e,{dialog:i}=e;function o(u){Rt.call(this,l,u)}function s(u){fe[u?"unshift":"push"](()=>{i=u,t(0,i)})}return l.$$set=u=>{"dialog"in u&&t(0,i=u.dialog),"$$scope"in u&&t(1,r=u.$$scope)},[i,r,n,o,s]}class Ye extends se{constructor(e){super(),ue(this,e,At,Ut,re,{dialog:0})}}class Ot{constructor(){A(this,"store",He());A(this,"set",this.store.set);A(this,"update",this.store.update);A(this,"subscribe",this.store.subscribe);A(this,"_map",new Map)}getPath(e,t){const n=this._map.get(e);if(n)return n.get(t)}findShortestPath(e,t){return qe(e,t)}findShortestPaths(){const e=new Map,t=j.routers.filter(n=>n.type==="CE");for(const n of t){const r=new Map;for(const i of t){if(n===i)continue;const o=qe(n,i);r.set(i.id,o)}e.set(n.id,r)}this._map=e}notify(){this.store.set(this._map)}}function qe(l,e){const t=j.routers,n=t.length,r=new Array(n).fill(1/0),i=new Array(n).fill(!1),o=new Array(n).fill(null);r[t.indexOf(l)]=0;let s=!1;for(;!s;){let a=null,c=1/0;for(let f=0;f<n;f++)!i[f]&&r[f]<c&&(a=t[f],c=r[f]);if(a===null||a.id===e.id){s=!0;continue}i[t.indexOf(a)]=!0;for(const f of j.links){let _;if(f.source===a)_=f.target;else if(f.target===a)_=f.source;else continue;const h=t.indexOf(_),g=c+f.distance;g<r[h]&&(r[h]=g,o[h]=a)}}const u=[];let d=e;for(;d;){u.unshift(d);const a=t.indexOf(d);d=o[a]}return u}const jt=new Ot,Yt=jt,Ve=16,qt=2**20-1;function Vt(l,e){const t=l.length-2,n=l[t];if(!(n instanceof Re))throw new Error("Destination CE is not connected directly to a LER");let r=Xe(l[t]);n.LIB.receiveEntry(r,-1,e);for(let o=l.length-2;o>0;o--){const s=l[o],u=l[o-1],d=r;r=Xe(s),u instanceof Re?u.FIB.receiveEntry(e,d,s.id.toString()):u instanceof Ne&&u.LIB.receiveEntry(r,d,s.id.toString())}const i=l[0];if(!(i instanceof ke))throw new Error("The path does not start with a CE");i.firstHop.set(e,l[1].id)}function Xt(l,e){return l instanceof Ne||l instanceof Re?l.LIB.map.has(e):!1}function Xe(l){let e;do e=Math.floor(Math.random()*(qt-Ve+1)+Ve);while(Xt(l,e));return e}function Ge(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n}function We(l){let e,t,n,r,i,o,s,u,d,a,c="-",f,_,h;function g(...b){return l[4](l[7],...b)}function k(...b){return l[5](l[7],...b)}function p(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),i=N(),o=L("td"),s=L("input"),d=N(),a=L("button"),a.textContent=c,f=N(),this.h()},l(b){e=R(b,"TR",{});var C=S(e);t=R(C,"TD",{});var U=S(t);n=R(U,"INPUT",{type:!0,placeholder:!0}),U.forEach(m),i=D(C),o=R(C,"TD",{});var z=S(o);s=R(z,"INPUT",{type:!0,placeholder:!0}),z.forEach(m),d=D(C),a=R(C,"BUTTON",{"data-svelte-h":!0}),le(a)!=="svelte-696gh"&&(a.textContent=c),f=D(C),C.forEach(m),this.h()},h(){v(n,"type","text"),n.value=r=l[7],v(n,"placeholder","Address"),v(s,"type","text"),s.value=u=l[8],v(s,"placeholder","Link")},m(b,C){E(b,e,C),$(e,t),$(t,n),$(e,i),$(e,o),$(o,s),$(e,d),$(e,a),$(e,f),_||(h=[q(n,"change",g),q(s,"change",k),q(a,"click",p)],_=!0)},p(b,C){l=b,C&1&&r!==(r=l[7])&&n.value!==r&&(n.value=r),C&1&&u!==(u=l[8])&&s.value!==u&&(s.value=u)},d(b){b&&m(e),_=!1,$e(h)}}}function Gt(l){let e,t="Destinations:",n,r,i,o="<th>Destination</th> <th>First hop</th>",s,u,d,a="+",c,f,_=ee([...l[0].firstHop]),h=[];for(let g=0;g<_.length;g+=1)h[g]=We(Ge(l,_,g));return{c(){e=L("p"),e.textContent=t,n=N(),r=L("table"),i=L("tr"),i.innerHTML=o,s=N();for(let g=0;g<h.length;g+=1)h[g].c();u=N(),d=L("button"),d.textContent=a},l(g){e=R(g,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1ixmdgd"&&(e.textContent=t),n=D(g),r=R(g,"TABLE",{});var k=S(r);i=R(k,"TR",{"data-svelte-h":!0}),le(i)!=="svelte-cu9tpt"&&(i.innerHTML=o),s=D(k);for(let p=0;p<h.length;p+=1)h[p].l(k);k.forEach(m),u=D(g),d=R(g,"BUTTON",{"data-svelte-h":!0}),le(d)!=="svelte-1nn20mc"&&(d.textContent=a)},m(g,k){E(g,e,k),E(g,n,k),E(g,r,k),$(r,i),$(r,s);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(r,null);E(g,u,k),E(g,d,k),c||(f=q(d,"click",function(){De(l[1](l[0].addEmptyEntry))&&l[1](l[0].addEmptyEntry).apply(this,arguments)}),c=!0)},p(g,[k]){if(l=g,k&13){_=ee([...l[0].firstHop]);let p;for(p=0;p<_.length;p+=1){const b=Ge(l,_,p);h[p]?h[p].p(b,k):(h[p]=We(b),h[p].c(),h[p].m(r,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=_.length}},i:Z,o:Z,d(g){g&&(m(e),m(n),m(r),m(u),m(d)),Ee(h,g),c=!1,f()}}}function Wt(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function i(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=a.target.value.toUpperCase();n.updateAddress(c,f);const _=j.getCERouter(f);if(!_){alert("Destination router not found.");return}const h=Yt.findShortestPath(n,_);Vt(h,f),t(0,n)}function o(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=parseInt(a.target.value);n.firstHop.set(c,f)}const s=(a,c)=>{i(c,a)},u=(a,c)=>{o(c,a)},d=a=>{n.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,i,o,s,u,d]}class Kt extends se{constructor(e){super(),ue(this,e,Wt,Gt,re,{router:0})}}function Ke(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Je(l){let e,t,n,r,i,o,s,u,d,a,c,f,_="-",h,g;function k(...U){return l[3](l[7],...U)}function p(){l[4].call(s,l[9],l[10])}function b(){l[5].call(a,l[9],l[10])}function C(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),i=N(),o=L("td"),s=L("input"),u=N(),d=L("td"),a=L("input"),c=N(),f=L("button"),f.textContent=_,this.h()},l(U){e=R(U,"TR",{});var z=S(e);t=R(z,"TD",{});var H=S(t);n=R(H,"INPUT",{type:!0}),H.forEach(m),i=D(z),o=R(z,"TD",{});var I=S(o);s=R(I,"INPUT",{type:!0}),I.forEach(m),u=D(z),d=R(z,"TD",{});var F=S(d);a=R(F,"INPUT",{type:!0}),F.forEach(m),c=D(z),f=R(z,"BUTTON",{"data-svelte-h":!0}),le(f)!=="svelte-wfbfbi"&&(f.textContent=_),z.forEach(m),this.h()},h(){v(n,"type","number"),n.value=r=l[7],v(s,"type","number"),v(a,"type","text")},m(U,z){E(U,e,z),$(e,t),$(t,n),$(e,i),$(e,o),$(o,s),ae(s,l[8].outgoingLabel),$(e,u),$(e,d),$(d,a),ae(a,l[8].nextHop),$(e,c),$(e,f),h||(g=[q(n,"change",k),q(s,"input",p),q(a,"input",b),q(f,"click",C)],h=!0)},p(U,z){l=U,z&1&&r!==(r=l[7])&&n.value!==r&&(n.value=r),z&1&&me(s.value)!==l[8].outgoingLabel&&ae(s,l[8].outgoingLabel),z&1&&a.value!==l[8].nextHop&&ae(a,l[8].nextHop)},d(U){U&&m(e),h=!1,$e(g)}}}function Jt(l){let e,t,n="<th>Incoming</th> <th>Outgoing</th> <th>Next hop</th>",r,i,o,s="+",u,d,a=ee([...l[0].LIB.map]),c=[];for(let f=0;f<a.length;f+=1)c[f]=Je(Ke(l,a,f));return{c(){e=L("table"),t=L("tr"),t.innerHTML=n,r=N();for(let f=0;f<c.length;f+=1)c[f].c();i=N(),o=L("button"),o.textContent=s},l(f){e=R(f,"TABLE",{});var _=S(e);t=R(_,"TR",{"data-svelte-h":!0}),le(t)!=="svelte-4lulgl"&&(t.innerHTML=n),r=D(_);for(let h=0;h<c.length;h+=1)c[h].l(_);i=D(_),o=R(_,"BUTTON",{"data-svelte-h":!0}),le(o)!=="svelte-1qyq3ir"&&(o.textContent=s),_.forEach(m)},m(f,_){E(f,e,_),$(e,t),$(e,r);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);$(e,i),$(e,o),u||(d=q(o,"click",function(){De(l[1](l[0].LIB.addEmptyEntry))&&l[1](l[0].LIB.addEmptyEntry).apply(this,arguments)}),u=!0)},p(f,[_]){if(l=f,_&5){a=ee([...l[0].LIB.map]);let h;for(h=0;h<a.length;h+=1){const g=Ke(l,a,h);c[h]?c[h].p(g,_):(c[h]=Je(g),c[h].c(),c[h].m(e,i))}for(;h<c.length;h+=1)c[h].d(1);c.length=a.length}},i:Z,o:Z,d(f){f&&m(e),Ee(c,f),u=!1,d()}}}function Qt(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function i(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=parseInt(a.target.value);n.LIB.updateLabel(c,f)}const o=(a,c)=>{i(c,a)};function s(a,c){a[c][1].outgoingLabel=me(this.value),t(0,n)}function u(a,c){a[c][1].nextHop=this.value,t(0,n)}const d=a=>{n.LIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,i,o,s,u,d]}class Bt extends se{constructor(e){super(),ue(this,e,Qt,Jt,re,{router:0})}}function Qe(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Ze(l){let e,t,n,r,i,o,s,u,d,a,c,f,_="-",h,g;function k(...U){return l[3](l[7],...U)}function p(){l[4].call(s,l[9],l[10])}function b(){l[5].call(a,l[9],l[10])}function C(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),i=N(),o=L("td"),s=L("input"),u=N(),d=L("td"),a=L("input"),c=N(),f=L("button"),f.textContent=_,this.h()},l(U){e=R(U,"TR",{});var z=S(e);t=R(z,"TD",{});var H=S(t);n=R(H,"INPUT",{type:!0}),H.forEach(m),i=D(z),o=R(z,"TD",{});var I=S(o);s=R(I,"INPUT",{type:!0}),I.forEach(m),u=D(z),d=R(z,"TD",{});var F=S(d);a=R(F,"INPUT",{type:!0}),F.forEach(m),c=D(z),f=R(z,"BUTTON",{"data-svelte-h":!0}),le(f)!=="svelte-liojo2"&&(f.textContent=_),z.forEach(m),this.h()},h(){v(n,"type","text"),n.value=r=l[7],v(s,"type","number"),v(a,"type","text")},m(U,z){E(U,e,z),$(e,t),$(t,n),$(e,i),$(e,o),$(o,s),ae(s,l[8].label),$(e,u),$(e,d),$(d,a),ae(a,l[8].nextHop),$(e,c),$(e,f),h||(g=[q(n,"change",k),q(s,"input",p),q(a,"input",b),q(f,"click",C)],h=!0)},p(U,z){l=U,z&1&&r!==(r=l[7])&&n.value!==r&&(n.value=r),z&1&&me(s.value)!==l[8].label&&ae(s,l[8].label),z&1&&a.value!==l[8].nextHop&&ae(a,l[8].nextHop)},d(U){U&&m(e),h=!1,$e(g)}}}function Zt(l){let e,t,n="<th>Address</th> <th>Label</th> <th>Next hop</th>",r,i,o,s="+",u,d,a=ee([...l[0].FIB.map]),c=[];for(let f=0;f<a.length;f+=1)c[f]=Ze(Qe(l,a,f));return{c(){e=L("table"),t=L("tr"),t.innerHTML=n,r=N();for(let f=0;f<c.length;f+=1)c[f].c();i=N(),o=L("button"),o.textContent=s},l(f){e=R(f,"TABLE",{});var _=S(e);t=R(_,"TR",{"data-svelte-h":!0}),le(t)!=="svelte-1ntom3r"&&(t.innerHTML=n),r=D(_);for(let h=0;h<c.length;h+=1)c[h].l(_);i=D(_),o=R(_,"BUTTON",{"data-svelte-h":!0}),le(o)!=="svelte-hxdqrl"&&(o.textContent=s),_.forEach(m)},m(f,_){E(f,e,_),$(e,t),$(e,r);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);$(e,i),$(e,o),u||(d=q(o,"click",function(){De(l[1](l[0].FIB.addEmptyEntry))&&l[1](l[0].FIB.addEmptyEntry).apply(this,arguments)}),u=!0)},p(f,[_]){if(l=f,_&5){a=ee([...l[0].FIB.map]);let h;for(h=0;h<a.length;h+=1){const g=Qe(l,a,h);c[h]?c[h].p(g,_):(c[h]=Ze(g),c[h].c(),c[h].m(e,i))}for(;h<c.length;h+=1)c[h].d(1);c.length=a.length}},i:Z,o:Z,d(f){f&&m(e),Ee(c,f),u=!1,d()}}}function en(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function i(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=a.target.value;n.FIB.updateAddress(c,f)}const o=(a,c)=>{i(c,a)};function s(a,c){a[c][1].label=me(this.value),t(0,n)}function u(a,c){a[c][1].nextHop=this.value,t(0,n)}const d=a=>{n.FIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,i,o,s,u,d]}class tn extends se{constructor(e){super(),ue(this,e,en,Zt,re,{router:0})}}function nn(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=R(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,r){E(n,e,r)},p:Z,i:Z,o:Z,d(n){n&&m(e)}}}function ln(l){let e,t,n,r,i,o,s=l[0].id+"",u,d,a,c,f=l[0].type+"",_,h,g,k,p,b,C,U,z,H,I,F,P="Delete Router",w,x,ne,Y=l[0]instanceof ke&&et(l),J=l[0]instanceof Re&&tt(l),Q=l[0]instanceof Ne&&nt(l);return{c(){e=L("label"),t=oe(`Label:
      `),n=L("input"),r=N(),i=L("p"),o=oe("ID: "),u=oe(s),d=N(),a=L("p"),c=oe("Type: "),_=oe(f),h=N(),g=L("label"),k=oe(`Position:
      `),p=L("input"),b=N(),C=L("input"),U=N(),Y&&Y.c(),z=N(),J&&J.c(),H=N(),Q&&Q.c(),I=N(),F=L("button"),F.textContent=P,this.h()},l(T){e=R(T,"LABEL",{});var O=S(e);t=ie(O,`Label:
      `),n=R(O,"INPUT",{type:!0}),O.forEach(m),r=D(T),i=R(T,"P",{});var Ie=S(i);o=ie(Ie,"ID: "),u=ie(Ie,s),Ie.forEach(m),d=D(T),a=R(T,"P",{});var Te=S(a);c=ie(Te,"Type: "),_=ie(Te,f),Te.forEach(m),h=D(T),g=R(T,"LABEL",{});var y=S(g);k=ie(y,`Position:
      `),p=R(y,"INPUT",{type:!0}),b=D(y),C=R(y,"INPUT",{type:!0}),y.forEach(m),U=D(T),Y&&Y.l(T),z=D(T),J&&J.l(T),H=D(T),Q&&Q.l(T),I=D(T),F=R(T,"BUTTON",{"data-svelte-h":!0}),le(F)!=="svelte-1kc1129"&&(F.textContent=P),this.h()},h(){v(n,"type","text"),v(p,"type","number"),p.disabled=l[2],v(C,"type","number"),C.disabled=l[2]},m(T,O){E(T,e,O),$(e,t),$(e,n),ae(n,l[0].node.label),E(T,r,O),E(T,i,O),$(i,o),$(i,u),E(T,d,O),E(T,a,O),$(a,c),$(a,_),E(T,h,O),E(T,g,O),$(g,k),$(g,p),ae(p,l[0].node.x),$(g,b),$(g,C),ae(C,l[0].node.y),E(T,U,O),Y&&Y.m(T,O),E(T,z,O),J&&J.m(T,O),E(T,H,O),Q&&Q.m(T,O),E(T,I,O),E(T,F,O),w=!0,x||(ne=[q(n,"input",l[4]),q(p,"input",l[5]),q(C,"input",l[6]),q(F,"click",l[3])],x=!0)},p(T,O){O&1&&n.value!==T[0].node.label&&ae(n,T[0].node.label),(!w||O&1)&&s!==(s=T[0].id+"")&&be(u,s),(!w||O&1)&&f!==(f=T[0].type+"")&&be(_,f),(!w||O&4)&&(p.disabled=T[2]),O&1&&me(p.value)!==T[0].node.x&&ae(p,T[0].node.x),(!w||O&4)&&(C.disabled=T[2]),O&1&&me(C.value)!==T[0].node.y&&ae(C,T[0].node.y),T[0]instanceof ke?Y?(Y.p(T,O),O&1&&B(Y,1)):(Y=et(T),Y.c(),B(Y,1),Y.m(z.parentNode,z)):Y&&(he(),M(Y,1,1,()=>{Y=null}),pe()),T[0]instanceof Re?J?(J.p(T,O),O&1&&B(J,1)):(J=tt(T),J.c(),B(J,1),J.m(H.parentNode,H)):J&&(he(),M(J,1,1,()=>{J=null}),pe()),T[0]instanceof Ne?Q?(Q.p(T,O),O&1&&B(Q,1)):(Q=nt(T),Q.c(),B(Q,1),Q.m(I.parentNode,I)):Q&&(he(),M(Q,1,1,()=>{Q=null}),pe())},i(T){w||(B(Y),B(J),B(Q),w=!0)},o(T){M(Y),M(J),M(Q),w=!1},d(T){T&&(m(e),m(r),m(i),m(d),m(a),m(h),m(g),m(U),m(z),m(H),m(I),m(F)),Y&&Y.d(T),J&&J.d(T),Q&&Q.d(T),x=!1,$e(ne)}}}function et(l){let e,t,n=l[0].address+"",r,i,o,s,u;function d(c){l[7](c)}let a={};return l[0]!==void 0&&(a.router=l[0]),o=new Kt({props:a}),fe.push(()=>de(o,"router",d)),{c(){e=L("p"),t=oe("Address: "),r=oe(n),i=N(),X(o.$$.fragment)},l(c){e=R(c,"P",{});var f=S(e);t=ie(f,"Address: "),r=ie(f,n),f.forEach(m),i=D(c),G(o.$$.fragment,c)},m(c,f){E(c,e,f),$(e,t),$(e,r),E(c,i,f),W(o,c,f),u=!0},p(c,f){(!u||f&1)&&n!==(n=c[0].address+"")&&be(r,n);const _={};!s&&f&1&&(s=!0,_.router=c[0],ce(()=>s=!1)),o.$set(_)},i(c){u||(B(o.$$.fragment,c),u=!0)},o(c){M(o.$$.fragment,c),u=!1},d(c){c&&(m(e),m(i)),K(o,c)}}}function tt(l){let e,t,n,r,i,o;function s(c){l[8](c)}let u={};l[0]!==void 0&&(u.router=l[0]),e=new Bt({props:u}),fe.push(()=>de(e,"router",s));function d(c){l[9](c)}let a={};return l[0]!==void 0&&(a.router=l[0]),r=new tn({props:a}),fe.push(()=>de(r,"router",d)),{c(){X(e.$$.fragment),n=N(),X(r.$$.fragment)},l(c){G(e.$$.fragment,c),n=D(c),G(r.$$.fragment,c)},m(c,f){W(e,c,f),E(c,n,f),W(r,c,f),o=!0},p(c,f){const _={};!t&&f&1&&(t=!0,_.router=c[0],ce(()=>t=!1)),e.$set(_);const h={};!i&&f&1&&(i=!0,h.router=c[0],ce(()=>i=!1)),r.$set(h)},i(c){o||(B(e.$$.fragment,c),B(r.$$.fragment,c),o=!0)},o(c){M(e.$$.fragment,c),M(r.$$.fragment,c),o=!1},d(c){c&&m(n),K(e,c),K(r,c)}}}function nt(l){let e,t,n;function r(o){l[10](o)}let i={};return l[0]!==void 0&&(i.router=l[0]),e=new Bt({props:i}),fe.push(()=>de(e,"router",r)),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,s){W(e,o,s),n=!0},p(o,s){const u={};!t&&s&1&&(t=!0,u.router=o[0],ce(()=>t=!1)),e.$set(u)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){M(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function on(l){let e,t,n,r;const i=[ln,nn],o=[];function s(u,d){return u[0]?0:1}return e=s(l),t=o[e]=i[e](l),{c(){t.c(),n=te()},l(u){t.l(u),n=te()},m(u,d){o[e].m(u,d),E(u,n,d),r=!0},p(u,d){let a=e;e=s(u),e===a?o[e].p(u,d):(he(),M(o[a],1,1,()=>{o[a]=null}),pe(),t=o[e],t?t.p(u,d):(t=o[e]=i[e](u),t.c()),B(t,1),t.m(n.parentNode,n))},i(u){r||(B(t),r=!0)},o(u){M(t),r=!1},d(u){u&&m(n),o[e].d(u)}}}function rn(l){let e,t,n;function r(o){l[11](o)}let i={$$slots:{default:[on]},$$scope:{ctx:l}};return l[1]!==void 0&&(i.dialog=l[1]),e=new Ye({props:i}),fe.push(()=>de(e,"dialog",r)),e.$on("close",l[12]),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,s){W(e,o,s),n=!0},p(o,[s]){const u={};s&8197&&(u.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,u.dialog=o[1],ce(()=>t=!1)),e.$set(u)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){M(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function sn(l,e,t){let n;_e(l,Ce,k=>t(2,n=k));let{router:r}=e,{dialog:i}=e;function o(){!n&&r&&confirm("Are you sure you want to delete this router?")&&(j.deleteRouter(r.id),i.close())}function s(){r.node.label=this.value,t(0,r)}function u(){r.node.x=me(this.value),t(0,r)}function d(){r.node.y=me(this.value),t(0,r)}function a(k){r=k,t(0,r)}function c(k){r=k,t(0,r)}function f(k){r=k,t(0,r)}function _(k){r=k,t(0,r)}function h(k){i=k,t(1,i)}const g=()=>{j.notify()};return l.$$set=k=>{"router"in k&&t(0,r=k.router),"dialog"in k&&t(1,i=k.dialog)},[r,i,n,o,s,u,d,a,c,f,_,h,g]}class un extends se{constructor(e){super(),ue(this,e,sn,rn,re,{router:0,dialog:1})}}function an(l){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=R(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,r){E(n,e,r)},p:Z,d(n){n&&m(e)}}}function fn(l){let e,t=l[0].distance+"",n,r,i,o,s,u,d,a="Delete Link",c,f;return{c(){e=oe("Distance: "),n=oe(t),r=N(),i=L("label"),o=oe(`Bandwidth:
      `),s=L("input"),u=N(),d=L("button"),d.textContent=a,this.h()},l(_){e=ie(_,"Distance: "),n=ie(_,t),r=D(_),i=R(_,"LABEL",{class:!0});var h=S(i);o=ie(h,`Bandwidth:
      `),s=R(h,"INPUT",{type:!0,class:!0}),h.forEach(m),u=D(_),d=R(_,"BUTTON",{"data-svelte-h":!0}),le(d)!=="svelte-rk1ni8"&&(d.textContent=a),this.h()},h(){v(s,"type","number"),s.disabled=l[2],v(s,"class","svelte-mdz6ho"),v(i,"class","svelte-mdz6ho")},m(_,h){E(_,e,h),E(_,n,h),E(_,r,h),E(_,i,h),$(i,o),$(i,s),ae(s,l[0].bandwidth),E(_,u,h),E(_,d,h),c||(f=[q(s,"input",l[4]),q(d,"click",l[3])],c=!0)},p(_,h){h&1&&t!==(t=_[0].distance+"")&&be(n,t),h&4&&(s.disabled=_[2]),h&1&&me(s.value)!==_[0].bandwidth&&ae(s,_[0].bandwidth)},d(_){_&&(m(e),m(n),m(r),m(i),m(u),m(d)),c=!1,$e(f)}}}function cn(l){let e;function t(i,o){return i[0]?fn:an}let n=t(l),r=n(l);return{c(){r.c(),e=te()},l(i){r.l(i),e=te()},m(i,o){r.m(i,o),E(i,e,o)},p(i,o){n===(n=t(i))&&r?r.p(i,o):(r.d(1),r=n(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){i&&m(e),r.d(i)}}}function dn(l){let e,t,n;function r(o){l[5](o)}let i={$$slots:{default:[cn]},$$scope:{ctx:l}};return l[1]!==void 0&&(i.dialog=l[1]),e=new Ye({props:i}),fe.push(()=>de(e,"dialog",r)),e.$on("close",l[6]),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,s){W(e,o,s),n=!0},p(o,[s]){const u={};s&133&&(u.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,u.dialog=o[1],ce(()=>t=!1)),e.$set(u)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){M(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function hn(l,e,t){let n;_e(l,Ce,a=>t(2,n=a));let{link:r}=e,{dialog:i}=e;function o(){!n&&r&&confirm("Are you sure you want to delete this link?")&&(j.deleteLink(r.id),i.close())}function s(){r.bandwidth=me(this.value),t(0,r)}function u(a){i=a,t(1,i)}const d=()=>{j.notify()};return l.$$set=a=>{"link"in a&&t(0,r=a.link),"dialog"in a&&t(1,i=a.dialog)},[r,i,n,o,s,u,d]}class pn extends se{constructor(e){super(),ue(this,e,hn,dn,re,{link:0,dialog:1})}}function lt(l){let e,t="Loading...";return{c(){e=L("p"),e.textContent=t,this.h()},l(n){e=R(n,"P",{style:!0,"data-svelte-h":!0}),le(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Pe(e,"font-size","200px")},m(n,r){E(n,e,r)},d(n){n&&m(e)}}}function ot(l){let e,t,n,r,i;return{c(){e=ve("line"),this.h()},l(o){e=we(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),S(e).forEach(m),this.h()},h(){v(e,"x1",t=l[3].node.x),v(e,"y1",n=l[3].node.y),v(e,"x2",r=l[17](l[1].x)),v(e,"y2",i=l[18](l[1].y))},m(o,s){E(o,e,s)},p(o,s){s[0]&8&&t!==(t=o[3].node.x)&&v(e,"x1",t),s[0]&8&&n!==(n=o[3].node.y)&&v(e,"y1",n),s[0]&2&&r!==(r=o[17](o[1].x))&&v(e,"x2",r),s[0]&2&&i!==(i=o[18](o[1].y))&&v(e,"y2",i)},d(o){o&&m(e)}}}function _n(l){let e,t,n,r,i,o,s,u,d,a,c,f,_,h,g,k=!l[8]&&lt(),p=!l[9]&&l[5]===l[10].CONNECTING&&l[3]&&ot(l);const b=l[21].default,C=Et(b,l,l[20],null);function U(w){l[24](w)}function z(w){l[25](w)}let H={};l[3]!==void 0&&(H.router=l[3]),l[6]!==void 0&&(H.dialog=l[6]),o=new un({props:H}),fe.push(()=>de(o,"router",U)),fe.push(()=>de(o,"dialog",z));function I(w){l[26](w)}function F(w){l[27](w)}let P={};return l[4]!==void 0&&(P.link=l[4]),l[7]!==void 0&&(P.dialog=l[7]),a=new pn({props:P}),fe.push(()=>de(a,"link",I)),fe.push(()=>de(a,"dialog",F)),{c(){k&&k.c(),e=N(),t=ve("svg"),p&&p.c(),n=te(),C&&C.c(),i=N(),X(o.$$.fragment),d=N(),X(a.$$.fragment),this.h()},l(w){k&&k.l(w),e=D(w),t=we(w,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var x=S(t);p&&p.l(x),n=te(),C&&C.l(x),x.forEach(m),i=D(w),G(o.$$.fragment,w),d=D(w),G(a.$$.fragment,w),this.h()},h(){v(t,"viewBox",r=`${l[0].x} ${l[0].y} ${l[0].width} ${l[0].height}`),v(t,"role","button"),v(t,"tabindex","-1"),v(t,"class","svelte-1cmb9l6"),Pe(t,"cursor",l[11][l[5]])},m(w,x){k&&k.m(w,x),E(w,e,x),E(w,t,x),p&&p.m(t,null),$(t,n),C&&C.m(t,null),l[23](t),E(w,i,x),W(o,w,x),E(w,d,x),W(a,w,x),_=!0,h||(g=[q(t,"pointerdown",l[12]),q(t,"pointerup",l[13]),q(t,"wheel",l[14]),q(t,"dblclick",l[15]),q(t,"dragover",Dt(l[22])),q(t,"drop",l[16])],h=!0)},p(w,x){w[8]?k&&(k.d(1),k=null):k||(k=lt(),k.c(),k.m(e.parentNode,e)),!w[9]&&w[5]===w[10].CONNECTING&&w[3]?p?p.p(w,x):(p=ot(w),p.c(),p.m(t,n)):p&&(p.d(1),p=null),C&&C.p&&(!_||x[0]&1048576)&&$t(C,b,w,w[20],_?Lt(b,w[20],x,null):Ct(w[20]),null),(!_||x[0]&1&&r!==(r=`${w[0].x} ${w[0].y} ${w[0].width} ${w[0].height}`))&&v(t,"viewBox",r),x[0]&32&&Pe(t,"cursor",w[11][w[5]]);const ne={};!s&&x[0]&8&&(s=!0,ne.router=w[3],ce(()=>s=!1)),!u&&x[0]&64&&(u=!0,ne.dialog=w[6],ce(()=>u=!1)),o.$set(ne);const Y={};!c&&x[0]&16&&(c=!0,Y.link=w[4],ce(()=>c=!1)),!f&&x[0]&128&&(f=!0,Y.dialog=w[7],ce(()=>f=!1)),a.$set(Y)},i(w){_||(B(C,w),B(o.$$.fragment,w),B(a.$$.fragment,w),_=!0)},o(w){M(C,w),M(o.$$.fragment,w),M(a.$$.fragment,w),_=!1},d(w){w&&(m(e),m(t),m(i),m(d)),k&&k.d(w),p&&p.d(),C&&C.d(w),l[23](null),K(o,w),K(a,w),h=!1,$e(g)}}}function gn(l,e,t){let n;_e(l,Ce,y=>t(9,n=y));let{$$slots:r={},$$scope:i}=e;var o=(y=>(y[y.NONE=0]="NONE",y[y.DRAGGING=1]="DRAGGING",y[y.PANNING=2]="PANNING",y[y.CONNECTING=3]="CONNECTING",y))(o||{});const s={x:0,y:0,width:0,height:0,get scale(){return c?this.width/c.getBoundingClientRect().width:1}},u={x:0,y:0},d={x:0,y:0},a={0:"move",1:"grabbing",2:"grabbing",3:"crosshair"};let c=null,f=null,_=null,h=0,g,k,p=!1;It(()=>{if(!c)return;new ResizeObserver(b).observe(c),requestAnimationFrame(()=>{c&&(t(0,s.x=c.getBoundingClientRect().width/-2,s),t(0,s.y=c.getBoundingClientRect().height/-2,s))}),t(8,p=!0)});function b(){if(!c)return;const y=s.scale||1;t(0,s.width=c.getBoundingClientRect().width*y,s),t(0,s.height=c.getBoundingClientRect().height*y,s)}function C(y){if(!(y.target instanceof Element))return;y.preventDefault(),c==null||c.addEventListener("pointermove",z),c==null||c.setPointerCapture(y.pointerId);const V=y.target.id;if(V){if(t(3,f=j.getRouter(parseInt(V))||null),!f)return;y.shiftKey?t(5,h=3):(d.x=f.node.x,d.y=f.node.y,t(5,h=1))}else t(5,h=2);t(1,u.x=y.clientX,u),t(1,u.y=y.clientY,u)}function U(y){if(y.target instanceof Element){if(y.preventDefault(),!n&&h===3&&f){const V=document.elementFromPoint(y.clientX,y.clientY),ge=(V==null?void 0:V.tagName)==="circle"?V.id:null,Be=j.getRouter(parseInt(ge??""));Be&&j.addLink({source:f,target:Be})}t(5,h=0),t(3,f=null),c==null||c.releasePointerCapture(y.pointerId),c==null||c.removeEventListener("pointermove",z)}}function z(y){y.preventDefault();const V={x:(y.clientX-u.x)*s.scale,y:(y.clientY-u.y)*s.scale};!n&&h===1&&f?(t(3,f.node.x=d.x+V.x,f),t(3,f.node.y=d.y+V.y,f),j.notify()):h===2?(t(1,u.x=y.clientX,u),t(1,u.y=y.clientY,u),t(0,s.x-=V.x,s),t(0,s.y-=V.y,s)):!n&&h===3&&(t(1,u.x=y.clientX,u),t(1,u.y=y.clientY,u))}function H(y){y.preventDefault(),t(1,u.x=y.clientX,u),t(1,u.y=y.clientY,u);const V=y.deltaY>0?1.025:.975;I(V,u)}function I(y,V){if(!c||s.scale<.1&&y<1||s.scale>5&&y>1)return;const ge=c.getBoundingClientRect(),Be={x:(V.x-ge.left)/ge.width,y:(V.y-ge.top)/ge.height};t(0,s.x-=s.width*(y-1)*Be.x,s),t(0,s.y-=s.height*(y-1)*Be.y,s),t(0,s.width*=y,s),t(0,s.height*=y,s)}function F(y){if(!(y.target instanceof Element))return;y.preventDefault();const V=document.elementFromPoint(y.clientX,y.clientY);V&&(V.tagName==="circle"?P(V.id):V.tagName==="rect"&&w(V.id))}function P(y){const V=j.getRouter(parseInt(y));V&&(t(3,f=V),g.showModal())}function w(y){const V=j.links.find(ge=>y===ge.id);V&&(t(4,_=V),k.showModal())}function x(y){var ge;switch(y.preventDefault(),(ge=y.dataTransfer)==null?void 0:ge.getData("text/plain")){case"CE":j.createCE(ne(y.clientX),Y(y.clientY));break;case"LER":j.createLER(ne(y.clientX),Y(y.clientY));break;case"LSR":j.createLSR(ne(y.clientX),Y(y.clientY));break}}function ne(y){return c?(y-c.getBoundingClientRect().left)*s.scale+s.x:y}function Y(y){return c?(y-c.getBoundingClientRect().top)*s.scale+s.y:y}function J(y){Rt.call(this,l,y)}function Q(y){fe[y?"unshift":"push"](()=>{c=y,t(2,c)})}function T(y){f=y,t(3,f)}function O(y){g=y,t(6,g)}function Ie(y){_=y,t(4,_)}function Te(y){k=y,t(7,k)}return l.$$set=y=>{"$$scope"in y&&t(20,i=y.$$scope)},[s,u,c,f,_,h,g,k,p,n,o,a,C,U,H,F,x,ne,Y,I,i,r,J,Q,T,O,Ie,Te]}class mn extends se{constructor(e){super(),ue(this,e,gn,_n,re,{zoom:19},null,[-1,-1])}get zoom(){return this.$$.ctx[19]}}function bn(l){let e,t,n,r;return{c(){e=L("button"),t=oe(l[0]),this.h()},l(i){e=R(i,"BUTTON",{style:!0,class:!0});var o=S(e);t=ie(o,l[0]),o.forEach(m),this.h()},h(){v(e,"style",l[2]),v(e,"class","svelte-1aag39e")},m(i,o){E(i,e,o),$(e,t),n||(r=q(e,"click",function(){De(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(i,[o]){l=i,o&1&&be(t,l[0]),o&4&&v(e,"style",l[2])},i:Z,o:Z,d(i){i&&m(e),n=!1,r()}}}function kn(l,e,t){let{text:n}=e,{callback:r=()=>{}}=e,{style:i=void 0}=e;return l.$$set=o=>{"text"in o&&t(0,n=o.text),"callback"in o&&t(1,r=o.callback),"style"in o&&t(2,i=o.style)},[n,r,i]}class ye extends se{constructor(e){super(),ue(this,e,kn,bn,re,{text:0,callback:1,style:2})}}function vn(l){let e,t,n=l[0].address+"",r,i,o,s="→",u,d,a=l[1].address+"",c,f,_,h;return _=new ye({props:{text:"Play",callback:l[2]}}),{c(){e=L("div"),t=L("p"),r=oe(n),i=N(),o=L("p"),o.textContent=s,u=N(),d=L("p"),c=oe(a),f=N(),X(_.$$.fragment),this.h()},l(g){e=R(g,"DIV",{class:!0});var k=S(e);t=R(k,"P",{});var p=S(t);r=ie(p,n),p.forEach(m),i=D(k),o=R(k,"P",{"data-svelte-h":!0}),le(o)!=="svelte-1giyjq6"&&(o.textContent=s),u=D(k),d=R(k,"P",{});var b=S(d);c=ie(b,a),b.forEach(m),f=D(k),G(_.$$.fragment,k),k.forEach(m),this.h()},h(){v(e,"class","svelte-phufxh")},m(g,k){E(g,e,k),$(e,t),$(t,r),$(e,i),$(e,o),$(e,u),$(e,d),$(d,c),$(e,f),W(_,e,null),h=!0},p(g,[k]){(!h||k&1)&&n!==(n=g[0].address+"")&&be(r,n),(!h||k&2)&&a!==(a=g[1].address+"")&&be(c,a)},i(g){h||(B(_.$$.fragment,g),h=!0)},o(g){M(_.$$.fragment,g),h=!1},d(g){g&&m(e),K(_)}}}function wn(l,e,t){let{source:n}=e,{destination:r}=e;function i(){j.addPacket(n,r)}return l.$$set=o=>{"source"in o&&t(0,n=o.source),"destination"in o&&t(1,r=o.destination)},[n,r,i]}class yn extends se{constructor(e){super(),ue(this,e,wn,vn,re,{source:0,destination:1})}}function it(l,e,t){const n=l.slice();return n[2]=e[t],n}function rt(l,e,t){const n=l.slice();return n[5]=e[t][0],n}function st(l){let e,t;return e=new yn({props:{source:l[2],destination:j.getSureCERouter(l[5])}}),{c(){X(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){const i={};r&1&&(i.source=n[2]),r&1&&(i.destination=j.getSureCERouter(n[5])),e.$set(i)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ut(l){let e,t,n=ee([...l[2].firstHop]),r=[];for(let o=0;o<n.length;o+=1)r[o]=st(rt(l,n,o));const i=o=>M(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=te()},l(o){for(let s=0;s<r.length;s+=1)r[s].l(o);e=te()},m(o,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,s);E(o,e,s),t=!0},p(o,s){if(s&1){n=ee([...o[2].firstHop]);let u;for(u=0;u<n.length;u+=1){const d=rt(o,n,u);r[u]?(r[u].p(d,s),B(r[u],1)):(r[u]=st(d),r[u].c(),B(r[u],1),r[u].m(e.parentNode,e))}for(he(),u=n.length;u<r.length;u+=1)i(u);pe()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)B(r[s]);t=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)M(r[s]);t=!1},d(o){o&&m(e),Ee(r,o)}}}function En(l){let e,t,n=ee(l[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=ut(it(l,n,o));const i=o=>M(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=te()},l(o){for(let s=0;s<r.length;s+=1)r[s].l(o);e=te()},m(o,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,s);E(o,e,s),t=!0},p(o,[s]){if(s&1){n=ee(o[0]);let u;for(u=0;u<n.length;u+=1){const d=it(o,n,u);r[u]?(r[u].p(d,s),B(r[u],1)):(r[u]=ut(d),r[u].c(),B(r[u],1),r[u].m(e.parentNode,e))}for(he(),u=n.length;u<r.length;u+=1)i(u);pe()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)B(r[s]);t=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)M(r[s]);t=!1},d(o){o&&m(e),Ee(r,o)}}}function $n(l,e,t){let n,r;return _e(l,j,i=>t(1,r=i)),l.$$.update=()=>{l.$$.dirty&2&&t(0,n=r.routers.filter(i=>i instanceof ke))},[n,r]}class Cn extends se{constructor(e){super(),ue(this,e,$n,En,re,{})}}function at(l,e,t){const n=l.slice();return n[13]=e[t],n}function ft(l){let e,t;const n=[l[13],{style:"padding: 10px 20px"}];let r={};for(let i=0;i<n.length;i+=1)r=Ue(r,n[i]);return e=new ye({props:r}),{c(){X(e.$$.fragment)},l(i){G(e.$$.fragment,i)},m(i,o){W(e,i,o),t=!0},p(i,o){const s=o&32?Ae(n,[Oe(i[13]),n[1]]):{};e.$set(s)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){K(e,i)}}}function Ln(l){let e,t,n,r,i,o,s,u,d,a,c,f=l[1].speedMultiplier+"",_,h,g,k,p,b,C,U,z,H=ee(l[5]),I=[];for(let P=0;P<H.length;P+=1)I[P]=ft(at(l,H,P));const F=P=>M(I[P],1,1,()=>{I[P]=null});return p=new Cn({}),{c(){e=L("div"),t=L("div"),r=N(),i=L("div"),o=L("div"),s=L("div");for(let P=0;P<I.length;P+=1)I[P].c();u=N(),d=L("div"),a=L("p"),c=oe("Speed Multiplier: "),_=oe(f),h=N(),g=L("input"),k=N(),X(p.$$.fragment),this.h()},l(P){e=R(P,"DIV",{id:!0,style:!0,class:!0});var w=S(e);t=R(w,"DIV",{id:!0,class:!0}),S(t).forEach(m),w.forEach(m),r=D(P),i=R(P,"DIV",{id:!0,style:!0,class:!0});var x=S(i);o=R(x,"DIV",{id:!0,class:!0});var ne=S(o);s=R(ne,"DIV",{id:!0,class:!0});var Y=S(s);for(let T=0;T<I.length;T+=1)I[T].l(Y);Y.forEach(m),u=D(ne),d=R(ne,"DIV",{id:!0,class:!0});var J=S(d);a=R(J,"P",{});var Q=S(a);c=ie(Q,"Speed Multiplier: "),_=ie(Q,f),Q.forEach(m),h=D(J),g=R(J,"INPUT",{type:!0,min:!0,max:!0,step:!0}),J.forEach(m),k=D(ne),G(p.$$.fragment,ne),ne.forEach(m),x.forEach(m),this.h()},h(){v(t,"id","resize-bar"),v(t,"class","svelte-1jmh3n8"),v(e,"id","visual-resize-bar"),v(e,"style",n=`width: ${l[0]?1:0}px`),v(e,"class","svelte-1jmh3n8"),v(s,"id","control-panel-buttons"),v(s,"class","svelte-1jmh3n8"),v(g,"type","range"),v(g,"min","0.1"),v(g,"max","2"),v(g,"step","0.1"),v(d,"id","slider"),v(d,"class","svelte-1jmh3n8"),v(o,"id","control-panel-content"),v(o,"class","svelte-1jmh3n8"),v(i,"id","control-panel"),v(i,"style",b=`width: ${l[4]}px; transition: ${l[3]};`),v(i,"class","svelte-1jmh3n8")},m(P,w){E(P,e,w),$(e,t),l[9](t),E(P,r,w),E(P,i,w),$(i,o),$(o,s);for(let x=0;x<I.length;x+=1)I[x]&&I[x].m(s,null);$(o,u),$(o,d),$(d,a),$(a,c),$(a,_),$(d,h),$(d,g),ae(g,l[1].speedMultiplier),$(o,k),W(p,o,null),C=!0,U||(z=[q(t,"pointerdown",l[6]),q(g,"change",l[10]),q(g,"input",l[10])],U=!0)},p(P,[w]){if((!C||w&1&&n!==(n=`width: ${P[0]?1:0}px`))&&v(e,"style",n),w&32){H=ee(P[5]);let x;for(x=0;x<H.length;x+=1){const ne=at(P,H,x);I[x]?(I[x].p(ne,w),B(I[x],1)):(I[x]=ft(ne),I[x].c(),B(I[x],1),I[x].m(s,null))}for(he(),x=H.length;x<I.length;x+=1)F(x);pe()}(!C||w&2)&&f!==(f=P[1].speedMultiplier+"")&&be(_,f),w&2&&ae(g,P[1].speedMultiplier),(!C||w&24&&b!==(b=`width: ${P[4]}px; transition: ${P[3]};`))&&v(i,"style",b)},i(P){if(!C){for(let w=0;w<H.length;w+=1)B(I[w]);B(p.$$.fragment,P),C=!0}},o(P){I=I.filter(Boolean);for(let w=0;w<I.length;w+=1)M(I[w]);M(p.$$.fragment,P),C=!1},d(P){P&&(m(e),m(r),m(i)),l[9](null),Ee(I,P),K(p),U=!1,$e(z)}}}function Rn(l,e,t){let n,r,i,o,s,u;_e(l,Ce,k=>t(0,o=k)),_e(l,Le,k=>t(1,s=k)),_e(l,j,k=>t(8,u=k));let d,a="width 250ms";function c(k){o&&(t(3,a="none"),d.setPointerCapture(k.pointerId),d.addEventListener("pointermove",f),d.addEventListener("pointerup",_))}function f(k){t(4,i=window.innerWidth-k.clientX),i<=20&&t(4,i=0),i>=window.innerWidth-20&&t(4,i=window.innerWidth-20)}function _(k){d.removeEventListener("pointermove",f),d.removeEventListener("pointerup",_),d.releasePointerCapture(k.pointerId),t(3,a="width 250ms")}function h(k){fe[k?"unshift":"push"](()=>{d=k,t(2,d)})}function g(){s.speedMultiplier=me(this.value),Le.set(s)}return l.$$.update=()=>{l.$$.dirty&256&&t(7,n=u.routers.filter(k=>k instanceof ke)),l.$$.dirty&130&&t(5,r=[{text:s.running?"Pause":"Resume",callback:()=>{Fe(Le,s.running=!s.running,s)}},{text:"Reset",callback:()=>{j.clearPackets()}},{text:"Play All",callback:()=>{for(const k of n)for(const[p]of k.firstHop)j.addPacket(k,j.getSureCERouter(p))}}]),l.$$.dirty&1&&t(4,i=o?300:0)},[o,s,d,a,i,r,c,n,u,h,g]}class In extends se{constructor(e){super(),ue(this,e,Rn,Ln,re,{})}}function Tn(l){let e;return{c(){e=ve("circle"),this.h()},l(t){e=we(t,"circle",{r:!0,class:!0}),S(e).forEach(m),this.h()},h(){v(e,"r","5"),v(e,"class","svelte-cb3n47")},m(t,n){E(t,e,n),l[4](e)},p:Z,i:Z,o:Z,d(t){t&&m(e),l[4](null)}}}function Bn(l,e,t){let n;_e(l,Le,f=>t(3,n=f));let{packet:r}=e,i,o,s;function u(){if(!r.nextHop)throw r.drop(),new Error("Packet has no next hop.");const f=Math.sqrt((r.node.x-r.nextHop.node.x)**2+(r.node.y-r.nextHop.node.y)**2);i=Math.round(f/250*1e3)}function d(){if(!r.nextHop)throw r.drop(),new Error("Packet has no next hop.");u(),s&&(t(2,o=s.animate([{transform:`translate(${r.node.x}px, ${r.node.y}px)`},{transform:`translate(${r.nextHop.node.x}px, ${r.nextHop.node.y}px)`}],{duration:i,easing:"linear"})),t(2,o.onfinish=a,o))}function a(){if(!r.nextHop)throw r.drop(),new Error("Packet has no next hop.");t(1,r.node=r.nextHop.node,r),r.nextHop.receivePacket(r),d()}requestAnimationFrame(d);function c(f){fe[f?"unshift":"push"](()=>{s=f,t(0,s)})}return l.$$set=f=>{"packet"in f&&t(1,r=f.packet)},l.$$.update=()=>{l.$$.dirty&12&&o&&t(2,o.playbackRate=n.speedMultiplier,o),l.$$.dirty&12&&o&&(n.running?o.play():o.pause())},[s,r,o,n,c]}class Pn extends se{constructor(e){super(),ue(this,e,Bn,Tn,re,{packet:1})}}function Nn(l){let e,t,n,r,i,o,s,u,d=l[0].distance+"",a,c,f,_;return{c(){e=ve("line"),t=N(),n=ve("rect"),s=N(),u=ve("text"),a=oe(d),c=oe(" km"),this.h()},l(h){e=we(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),S(e).forEach(m),t=D(h),n=we(h,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),S(n).forEach(m),s=D(h),u=we(h,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var g=S(u);a=ie(g,d),c=ie(g," km"),g.forEach(m),this.h()},h(){v(e,"x1",l[4]),v(e,"y1",l[2]),v(e,"x2",l[3]),v(e,"y2",l[1]),v(n,"id",r=l[0].id),v(n,"x",i=l[5].x-ze/2),v(n,"y",o=l[5].y-Se/2),v(n,"width",ze),v(n,"height",Se),v(n,"class","svelte-zjn2k6"),v(u,"x",f=l[5].x),v(u,"y",_=l[5].y),v(u,"dominant-baseline","central"),v(u,"class","svelte-zjn2k6")},m(h,g){E(h,e,g),E(h,t,g),E(h,n,g),E(h,s,g),E(h,u,g),$(u,a),$(u,c)},p(h,[g]){g&16&&v(e,"x1",h[4]),g&4&&v(e,"y1",h[2]),g&8&&v(e,"x2",h[3]),g&2&&v(e,"y2",h[1]),g&1&&r!==(r=h[0].id)&&v(n,"id",r),g&32&&i!==(i=h[5].x-ze/2)&&v(n,"x",i),g&32&&o!==(o=h[5].y-Se/2)&&v(n,"y",o),g&1&&d!==(d=h[0].distance+"")&&be(a,d),g&32&&f!==(f=h[5].x)&&v(u,"x",f),g&32&&_!==(_=h[5].y)&&v(u,"y",_)},i:Z,o:Z,d(h){h&&(m(e),m(t),m(n),m(s),m(u))}}}const ze=50,Se=20;function ct(l,e){return(l+e)/2}function Dn(l,e,t){let n,r,i,o,s,{link:u}=e;return l.$$set=d=>{"link"in d&&t(0,u=d.link)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=u.source.node.x),l.$$.dirty&1&&t(3,r=u.target.node.x),l.$$.dirty&1&&t(2,i=u.source.node.y),l.$$.dirty&1&&t(1,o=u.target.node.y),l.$$.dirty&30&&t(5,s={x:ct(n,r),y:ct(i,o)})},[u,o,i,r,n,s]}class Hn extends se{constructor(e){super(),ue(this,e,Dn,Nn,re,{link:0})}}function Mn(l){let e,t,n,r,i,o,s,u=l[0].node.label+"",d,a,c;return{c(){e=ve("circle"),o=N(),s=ve("text"),d=oe(u),this.h()},l(f){e=we(f,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),S(e).forEach(m),o=D(f),s=we(f,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var _=S(s);d=ie(_,u),_.forEach(m),this.h()},h(){v(e,"id",t=l[0].id.toString()),v(e,"cx",n=l[0].node.x),v(e,"cy",r=l[0].node.y),v(e,"r","20"),v(e,"fill",i=l[1][l[0].type]),v(e,"class","svelte-17jcsko"),v(s,"x",a=l[0].node.x),v(s,"y",c=l[0].node.y),v(s,"dominant-baseline","central"),v(s,"class","svelte-17jcsko")},m(f,_){E(f,e,_),E(f,o,_),E(f,s,_),$(s,d)},p(f,[_]){_&1&&t!==(t=f[0].id.toString())&&v(e,"id",t),_&1&&n!==(n=f[0].node.x)&&v(e,"cx",n),_&1&&r!==(r=f[0].node.y)&&v(e,"cy",r),_&1&&i!==(i=f[1][f[0].type])&&v(e,"fill",i),_&1&&u!==(u=f[0].node.label+"")&&be(d,u),_&1&&a!==(a=f[0].node.x)&&v(s,"x",a),_&1&&c!==(c=f[0].node.y)&&v(s,"y",c)},i:Z,o:Z,d(f){f&&(m(e),m(o),m(s))}}}function xn(l,e,t){let{router:n}=e;const r={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return l.$$set=i=>{"router"in i&&t(0,n=i.router)},[n,r]}class zn extends se{constructor(e){super(),ue(this,e,xn,Mn,re,{router:0})}}function Sn(l){let e,t,n,r;return{c(){e=L("div"),t=oe(l[0]),this.h()},l(i){e=R(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var o=S(e);t=ie(o,l[0]),o.forEach(m),this.h()},h(){v(e,"draggable","true"),v(e,"role","button"),v(e,"tabindex","-1"),Pe(e,"background-color",l[1]),v(e,"class","svelte-blffat")},m(i,o){E(i,e,o),$(e,t),n||(r=q(e,"dragstart",l[2]),n=!0)},p(i,[o]){o&1&&be(t,i[0]),o&2&&Pe(e,"background-color",i[1])},i:Z,o:Z,d(i){i&&m(e),n=!1,r()}}}function Fn(l,e,t){let n;_e(l,Ce,u=>t(4,n=u));let{text:r}=e,{type:i}=e,{color:o}=e;function s(u){var d;if(n){alert("Network is locked.");return}(d=u.dataTransfer)==null||d.setData("text/plain",i)}return l.$$set=u=>{"text"in u&&t(0,r=u.text),"type"in u&&t(3,i=u.type),"color"in u&&t(1,o=u.color)},[r,o,s,i]}class Un extends se{constructor(e){super(),ue(this,e,Fn,Sn,re,{text:0,type:3,color:1})}}function dt(l,e,t){const n=l.slice();return n[4]=e[t],n}function ht(l,e,t){const n=l.slice();return n[7]=e[t],n}function pt(l){let e,t,n,r=ee(l[2]),i=[];for(let a=0;a<r.length;a+=1)i[a]=_t(ht(l,r,a));const o=a=>M(i[a],1,1,()=>{i[a]=null});let s=ee(l[1]),u=[];for(let a=0;a<s.length;a+=1)u[a]=gt(dt(l,s,a));const d=a=>M(u[a],1,1,()=>{u[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=N();for(let a=0;a<u.length;a+=1)u[a].c();t=te()},l(a){for(let c=0;c<i.length;c+=1)i[c].l(a);e=D(a);for(let c=0;c<u.length;c+=1)u[c].l(a);t=te()},m(a,c){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(a,c);E(a,e,c);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(a,c);E(a,t,c),n=!0},p(a,c){if(c&4){r=ee(a[2]);let f;for(f=0;f<r.length;f+=1){const _=ht(a,r,f);i[f]?(i[f].p(_,c),B(i[f],1)):(i[f]=_t(_),i[f].c(),B(i[f],1),i[f].m(e.parentNode,e))}for(he(),f=r.length;f<i.length;f+=1)o(f);pe()}if(c&2){s=ee(a[1]);let f;for(f=0;f<s.length;f+=1){const _=dt(a,s,f);u[f]?(u[f].p(_,c),B(u[f],1)):(u[f]=gt(_),u[f].c(),B(u[f],1),u[f].m(t.parentNode,t))}for(he(),f=s.length;f<u.length;f+=1)d(f);pe()}},i(a){if(!n){for(let c=0;c<r.length;c+=1)B(i[c]);for(let c=0;c<s.length;c+=1)B(u[c]);n=!0}},o(a){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)M(i[c]);u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)M(u[c]);n=!1},d(a){a&&(m(e),m(t)),Ee(i,a),Ee(u,a)}}}function _t(l){let e,t;const n=[l[7]];let r={};for(let i=0;i<n.length;i+=1)r=Ue(r,n[i]);return e=new Un({props:r}),{c(){X(e.$$.fragment)},l(i){G(e.$$.fragment,i)},m(i,o){W(e,i,o),t=!0},p(i,o){const s=o&4?Ae(n,[Oe(i[7])]):{};e.$set(s)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){K(e,i)}}}function gt(l){let e,t;const n=[l[4]];let r={};for(let i=0;i<n.length;i+=1)r=Ue(r,n[i]);return e=new ye({props:r}),{c(){X(e.$$.fragment)},l(i){G(e.$$.fragment,i)},m(i,o){W(e,i,o),t=!0},p(i,o){const s=o&2?Ae(n,[Oe(i[4])]):{};e.$set(s)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){K(e,i)}}}function An(l){let e,t,n,r;e=new ye({props:{text:l[0]?"Edit":"Simulation",callback:l[3],style:`width: 100px; background-color: ${l[0]?"#3CB371":"#6495ED"};`}});let i=!l[0]&&pt(l);return{c(){X(e.$$.fragment),t=N(),i&&i.c(),n=te()},l(o){G(e.$$.fragment,o),t=D(o),i&&i.l(o),n=te()},m(o,s){W(e,o,s),E(o,t,s),i&&i.m(o,s),E(o,n,s),r=!0},p(o,[s]){const u={};s&1&&(u.text=o[0]?"Edit":"Simulation"),s&1&&(u.callback=o[3]),s&1&&(u.style=`width: 100px; background-color: ${o[0]?"#3CB371":"#6495ED"};`),e.$set(u),o[0]?i&&(he(),M(i,1,1,()=>{i=null}),pe()):i?(i.p(o,s),s&1&&B(i,1)):(i=pt(o),i.c(),B(i,1),i.m(n.parentNode,n))},i(o){r||(B(e.$$.fragment,o),B(i),r=!0)},o(o){M(e.$$.fragment,o),M(i),r=!1},d(o){o&&(m(t),m(n)),K(e,o),i&&i.d(o)}}}function On(l,e,t){let n,r;_e(l,Ce,s=>t(0,r=s));const i=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],o=()=>{Fe(Ce,r=!r,r),j.clearPackets()};return l.$$.update=()=>{l.$$.dirty&1&&t(1,n=[{text:"Clear",callback:()=>{if(r){alert("Network is locked.");return}confirm("Are you sure you want to clear the network?")&&j.clear()}}])},[r,n,i,o]}class jn extends se{constructor(e){super(),ue(this,e,On,An,re,{})}}function Yn(l){let e,t="Drag and drop routers to add them to the network.",n,r,i="Hold the shift key and drag routers to make links.",o,s,u="Double click a router to configure it.",d,a,c="The clear button will delete the entire network.",f,_,h,g,k="Press Esc to close this popup.";return{c(){e=L("p"),e.textContent=t,n=N(),r=L("p"),r.textContent=i,o=N(),s=L("p"),s.textContent=u,d=N(),a=L("p"),a.textContent=c,f=N(),_=L("br"),h=N(),g=L("p"),g.textContent=k},l(p){e=R(p,"P",{"data-svelte-h":!0}),le(e)!=="svelte-bhocp0"&&(e.textContent=t),n=D(p),r=R(p,"P",{"data-svelte-h":!0}),le(r)!=="svelte-ddjc2m"&&(r.textContent=i),o=D(p),s=R(p,"P",{"data-svelte-h":!0}),le(s)!=="svelte-11scjjz"&&(s.textContent=u),d=D(p),a=R(p,"P",{"data-svelte-h":!0}),le(a)!=="svelte-vcl8s3"&&(a.textContent=c),f=D(p),_=R(p,"BR",{}),h=D(p),g=R(p,"P",{"data-svelte-h":!0}),le(g)!=="svelte-1dvt5v1"&&(g.textContent=k)},m(p,b){E(p,e,b),E(p,n,b),E(p,r,b),E(p,o,b),E(p,s,b),E(p,d,b),E(p,a,b),E(p,f,b),E(p,_,b),E(p,h,b),E(p,g,b)},p:Z,d(p){p&&(m(e),m(n),m(r),m(o),m(s),m(d),m(a),m(f),m(_),m(h),m(g))}}}function qn(l){let e,t,n,r,i,o;t=new ye({props:{text:"Help",callback:l[1]}});function s(d){l[2](d)}let u={$$slots:{default:[Yn]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.dialog=l[0]),r=new Ye({props:u}),fe.push(()=>de(r,"dialog",s)),{c(){e=L("div"),X(t.$$.fragment),n=N(),X(r.$$.fragment)},l(d){e=R(d,"DIV",{});var a=S(e);G(t.$$.fragment,a),a.forEach(m),n=D(d),G(r.$$.fragment,d)},m(d,a){E(d,e,a),W(t,e,null),E(d,n,a),W(r,d,a),o=!0},p(d,[a]){const c={};a&1&&(c.callback=d[1]),t.$set(c);const f={};a&8&&(f.$$scope={dirty:a,ctx:d}),!i&&a&1&&(i=!0,f.dialog=d[0],ce(()=>i=!1)),r.$set(f)},i(d){o||(B(t.$$.fragment,d),B(r.$$.fragment,d),o=!0)},o(d){M(t.$$.fragment,d),M(r.$$.fragment,d),o=!1},d(d){d&&(m(e),m(n)),K(t),K(r,d)}}}function Vn(l,e,t){let n;const r=()=>{n.showModal()};function i(o){n=o,t(0,n)}return[n,r,i]}class Xn extends se{constructor(e){super(),ue(this,e,Vn,qn,re,{})}}function Gn(l){let e,t,n,r,i,o;return e=new ye({props:{text:" - ",callback:l[1]}}),n=new ye({props:{text:"Fullscreen",callback:l[2]}}),i=new ye({props:{text:" + ",callback:l[3]}}),{c(){X(e.$$.fragment),t=N(),X(n.$$.fragment),r=N(),X(i.$$.fragment)},l(s){G(e.$$.fragment,s),t=D(s),G(n.$$.fragment,s),r=D(s),G(i.$$.fragment,s)},m(s,u){W(e,s,u),E(s,t,u),W(n,s,u),E(s,r,u),W(i,s,u),o=!0},p(s,[u]){const d={};u&1&&(d.callback=s[1]),e.$set(d);const a={};u&1&&(a.callback=s[3]),i.$set(a)},i(s){o||(B(e.$$.fragment,s),B(n.$$.fragment,s),B(i.$$.fragment,s),o=!0)},o(s){M(e.$$.fragment,s),M(n.$$.fragment,s),M(i.$$.fragment,s),o=!1},d(s){s&&(m(t),m(r)),K(e,s),K(n,s),K(i,s)}}}function Wn(l,e,t){let{zoom:n}=e;const r=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,s)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},o=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,s)};return l.$$set=s=>{"zoom"in s&&t(0,n=s.zoom)},[n,r,i,o]}class Kn extends se{constructor(e){super(),ue(this,e,Wn,Gn,re,{zoom:0})}}function mt(l,e,t){const n=l.slice();return n[5]=e[t],n}function bt(l,e,t){const n=l.slice();return n[8]=e[t],n}function kt(l,e,t){const n=l.slice();return n[11]=e[t],n}function vt(l,e){let t,n,r;return n=new Hn({props:{link:e[11]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(i){t=te(),G(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){E(i,t,o),W(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.link=e[11]),n.$set(s)},i(i){r||(B(n.$$.fragment,i),r=!0)},o(i){M(n.$$.fragment,i),r=!1},d(i){i&&m(t),K(n,i)}}}function wt(l,e){let t,n,r;return n=new zn({props:{router:e[8]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(i){t=te(),G(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){E(i,t,o),W(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.router=e[8]),n.$set(s)},i(i){r||(B(n.$$.fragment,i),r=!0)},o(i){M(n.$$.fragment,i),r=!1},d(i){i&&m(t),K(n,i)}}}function yt(l,e){let t,n,r;return n=new Pn({props:{packet:e[5]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(i){t=te(),G(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){E(i,t,o),W(n,i,o),r=!0},p(i,o){e=i;const s={};o&2&&(s.packet=e[5]),n.$set(s)},i(i){r||(B(n.$$.fragment,i),r=!0)},o(i){M(n.$$.fragment,i),r=!1},d(i){i&&m(t),K(n,i)}}}function Jn(l){let e=[],t=new Map,n,r=[],i=new Map,o,s=[],u=new Map,d,a,c=ee(l[1].links);const f=p=>p[11].id;for(let p=0;p<c.length;p+=1){let b=kt(l,c,p),C=f(b);t.set(C,e[p]=vt(C,b))}let _=ee(l[1].routers);const h=p=>p[8].id;for(let p=0;p<_.length;p+=1){let b=bt(l,_,p),C=h(b);i.set(C,r[p]=wt(C,b))}let g=ee(l[1].packets);const k=p=>p[5].id;for(let p=0;p<g.length;p+=1){let b=mt(l,g,p),C=k(b);u.set(C,s[p]=yt(C,b))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();n=N();for(let p=0;p<r.length;p+=1)r[p].c();o=N();for(let p=0;p<s.length;p+=1)s[p].c();d=te()},l(p){for(let b=0;b<e.length;b+=1)e[b].l(p);n=D(p);for(let b=0;b<r.length;b+=1)r[b].l(p);o=D(p);for(let b=0;b<s.length;b+=1)s[b].l(p);d=te()},m(p,b){for(let C=0;C<e.length;C+=1)e[C]&&e[C].m(p,b);E(p,n,b);for(let C=0;C<r.length;C+=1)r[C]&&r[C].m(p,b);E(p,o,b);for(let C=0;C<s.length;C+=1)s[C]&&s[C].m(p,b);E(p,d,b),a=!0},p(p,b){b&2&&(c=ee(p[1].links),he(),e=xe(e,b,f,1,p,c,t,n.parentNode,Me,vt,n,kt),pe()),b&2&&(_=ee(p[1].routers),he(),r=xe(r,b,h,1,p,_,i,o.parentNode,Me,wt,o,bt),pe()),b&2&&(g=ee(p[1].packets),he(),s=xe(s,b,k,1,p,g,u,d.parentNode,Me,yt,d,mt),pe())},i(p){if(!a){for(let b=0;b<c.length;b+=1)B(e[b]);for(let b=0;b<_.length;b+=1)B(r[b]);for(let b=0;b<g.length;b+=1)B(s[b]);a=!0}},o(p){for(let b=0;b<e.length;b+=1)M(e[b]);for(let b=0;b<r.length;b+=1)M(r[b]);for(let b=0;b<s.length;b+=1)M(s[b]);a=!1},d(p){p&&(m(n),m(o),m(d));for(let b=0;b<e.length;b+=1)e[b].d(p);for(let b=0;b<r.length;b+=1)r[b].d(p);for(let b=0;b<s.length;b+=1)s[b].d(p)}}}function Qn(l){let e,t,n,r,i,o,s,u,d,a,c,f,_,h,g,k,p;function b(H){l[2](H)}let C={$$slots:{default:[Jn]},$$scope:{ctx:l}};l[0]!==void 0&&(C.zoom=l[0]),n=new mn({props:C}),fe.push(()=>de(n,"zoom",b)),s=new jn({}),a=new Xn({});function U(H){l[3](H)}let z={};return l[0]!==void 0&&(z.zoom=l[0]),_=new Kn({props:z}),fe.push(()=>de(_,"zoom",U)),k=new In({}),{c(){e=L("div"),t=L("div"),X(n.$$.fragment),i=N(),o=L("div"),X(s.$$.fragment),u=N(),d=L("div"),X(a.$$.fragment),c=N(),f=L("div"),X(_.$$.fragment),g=N(),X(k.$$.fragment),this.h()},l(H){e=R(H,"DIV",{id:!0,class:!0});var I=S(e);t=R(I,"DIV",{id:!0,class:!0});var F=S(t);G(n.$$.fragment,F),i=D(F),o=R(F,"DIV",{id:!0,class:!0});var P=S(o);G(s.$$.fragment,P),P.forEach(m),u=D(F),d=R(F,"DIV",{id:!0,class:!0});var w=S(d);G(a.$$.fragment,w),w.forEach(m),c=D(F),f=R(F,"DIV",{id:!0,class:!0});var x=S(f);G(_.$$.fragment,x),x.forEach(m),F.forEach(m),g=D(I),G(k.$$.fragment,I),I.forEach(m),this.h()},h(){v(o,"id","top-left-bar"),v(o,"class","absolute-flex svelte-1kpnzxr"),v(d,"id","bottom-left-bar"),v(d,"class","absolute-flex svelte-1kpnzxr"),v(f,"id","bottom-right-bar"),v(f,"class","absolute-flex svelte-1kpnzxr"),v(t,"id","network"),v(t,"class","svelte-1kpnzxr"),v(e,"id","mpls"),v(e,"class","svelte-1kpnzxr")},m(H,I){E(H,e,I),$(e,t),W(n,t,null),$(t,i),$(t,o),W(s,o,null),$(t,u),$(t,d),W(a,d,null),$(t,c),$(t,f),W(_,f,null),$(e,g),W(k,e,null),p=!0},p(H,[I]){const F={};I&16386&&(F.$$scope={dirty:I,ctx:H}),!r&&I&1&&(r=!0,F.zoom=H[0],ce(()=>r=!1)),n.$set(F);const P={};!h&&I&1&&(h=!0,P.zoom=H[0],ce(()=>h=!1)),_.$set(P)},i(H){p||(B(n.$$.fragment,H),B(s.$$.fragment,H),B(a.$$.fragment,H),B(_.$$.fragment,H),B(k.$$.fragment,H),p=!0)},o(H){M(n.$$.fragment,H),M(s.$$.fragment,H),M(a.$$.fragment,H),M(_.$$.fragment,H),M(k.$$.fragment,H),p=!1},d(H){H&&m(e),K(n),K(s),K(a),K(_),K(k)}}}function Zn(l,e,t){let n,r;_e(l,Le,u=>t(4,n=u)),_e(l,j,u=>t(1,r=u));let i;It(()=>{window.addEventListener("visibilitychanged",()=>{Fe(Le,n.running=!document.hidden,n)})});function o(u){i=u,t(0,i)}function s(u){i=u,t(0,i)}return[i,r,o,s]}class el extends se{constructor(e){super(),ue(this,e,Zn,Qn,re,{})}}function tl(l){let e,t;return e=new el({}),{c(){X(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p:Z,i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}class cl extends se{constructor(e){super(),ue(this,e,null,tl,re,{})}}export{cl as component};
