var be=Object.defineProperty;var ye=(n,e,t)=>e in n?be(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var v=(n,e,t)=>(ye(n,typeof e!="symbol"?e+"":e,t),t);import{s as J,n as H,r as xe,c as we,o as Ne,x as Q,y as Ce,e as ke}from"../chunks/scheduler.DvP55YXn.js";import{S as Z,i as V,e as G,t as ue,c as L,a as B,b as ae,d as w,l as _,q as ee,g as P,h as q,z as R,j as fe,A as X,o as A,s as he,B as j,f as de,C as Ee,m as O,r as ve,p as De,n as T,D as S,E as U,F as z,v as ge,w as _e,x as me,y as pe,G as Be}from"../chunks/index.DhsPBY2g.js";import{w as Pe}from"../chunks/index.CmtDd-Ac.js";function I(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function $(n,e){const t={},u={},i={$$scope:1};let o=n.length;for(;o--;){const s=n[o],f=e[o];if(f){for(const m in s)m in f||(u[m]=1);for(const m in f)i[m]||(t[m]=f[m],i[m]=1);n[o]=f}else for(const m in s)i[m]=1}for(const s in u)s in t||(t[s]=void 0);return t}function qe(n){return typeof n=="object"&&n!==null?n:{}}class Ie{constructor(){v(this,"store",Pe({nodes:[],connections:[]}));v(this,"set",this.store.set);v(this,"update",this.store.update);v(this,"subscribe",this.store.subscribe);v(this,"_nodes",[]);v(this,"_connections",[]);v(this,"nodeMap",new Map);v(this,"counter",0)}get nodes(){return this._nodes}get connections(){return this._connections}get networkState(){return{nodes:this.nodes,connections:this.connections}}deleteConnection(e){this._connections=this._connections.filter(t=>t.source.id!==e.source.id||t.target.id!==e.target.id),this.fastUpdate()}deleteNode(e){this.getNode(e)&&(this._nodes=this._nodes.filter(u=>u.id!==e),this.nodeMap.delete(e)),this.fastUpdate()}addConnection(e){e.source!==e.target&&(this.doesConnectionExist(e.source,e.target)||this.doesConnectionExist(e.target,e.source)||(this._connections.push(e),this.fastUpdate()))}doesConnectionExist(e,t){return this._connections.some(u=>u.source===e&&u.target===t)}createNode(e){const t={id:this.counter++,...e};this.addNode(t)}addNode(e){this._nodes.push(e),this.nodeMap.set(e.id,e),this.fastUpdate()}getNode(e){return this.nodeMap.get(e)}getSureNode(e){const t=this.getNode(e);if(!t)throw new Error(`Node with id ${e} not found`);return t}fastUpdate(){this.store.set(this.networkState)}}const Me=new Ie,M=Me;var N=(n=>(n[n.Customer=0]="Customer",n[n.Edge=1]="Edge",n[n.Core=2]="Core",n))(N||{});function Re(n){return Object.values(N).includes(n)}function Ye(n){let e,t,u,i;return{c(){e=G("div"),t=ue(n[0]),this.h()},l(o){e=L(o,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var s=B(e);t=ae(s,n[0]),s.forEach(w),this.h()},h(){_(e,"draggable","true"),_(e,"role","button"),_(e,"tabindex","-1"),ee(e,"background-color",n[1]),_(e,"class","svelte-hr3g0j")},m(o,s){P(o,e,s),q(e,t),u||(i=R(e,"dragstart",n[2]),u=!0)},p(o,[s]){s&1&&fe(t,o[0]),s&2&&ee(e,"background-color",o[1])},i:H,o:H,d(o){o&&w(e),u=!1,i()}}}function Oe(n,e,t){let{text:u}=e,{type:i}=e,{color:o}=e;function s(f){var m;(m=f.dataTransfer)==null||m.setData("text/plain",i.toString())}return n.$$set=f=>{"text"in f&&t(0,u=f.text),"type"in f&&t(3,i=f.type),"color"in f&&t(1,o=f.color)},[u,o,s,i]}class Xe extends Z{constructor(e){super(),V(this,e,Oe,Ye,J,{text:0,type:3,color:1})}}function te(n,e,t){const u=n.slice();return u[19]=e[t],u}function ne(n,e,t){const u=n.slice();return u[22]=e[t],u}function oe(n,e,t){const u=n.slice();return u[25]=e[t],u}function se(n){let e,t=[ce(n[25]),{stroke:"black"}],u={};for(let i=0;i<t.length;i+=1)u=Q(u,t[i]);return{c(){e=X("line"),this.h()},l(i){e=j(i,"line",{stroke:!0}),B(e).forEach(w),this.h()},h(){U(e,u),z(e,"svelte-5bi1qi",!0)},m(i,o){P(i,e,o)},p(i,o){U(e,u=$(t,[o&32&&ce(i[25]),{stroke:"black"}])),z(e,"svelte-5bi1qi",!0)},d(i){i&&w(e)}}}function le(n){let e,t=[W(n[3]),K(n[13](n[1].x,n[1].y)),{stroke:"black"}],u={};for(let i=0;i<t.length;i+=1)u=Q(u,t[i]);return{c(){e=X("line"),this.h()},l(i){e=j(i,"line",{stroke:!0}),B(e).forEach(w),this.h()},h(){U(e,u),z(e,"svelte-5bi1qi",!0)},m(i,o){P(i,e,o)},p(i,o){U(e,u=$(t,[o&8&&W(i[3]),o&2&&K(i[13](i[1].x,i[1].y)),{stroke:"black"}])),z(e,"svelte-5bi1qi",!0)},d(i){i&&w(e)}}}function re(n){let e,t,u,i,o,s,f=n[22].label+"",m,C,d;return{c(){e=X("circle"),s=X("text"),m=ue(f),this.h()},l(h){e=j(h,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),B(e).forEach(w),s=j(h,"text",{x:!0,y:!0,"text-anchor":!0,"alignment-baseline":!0,class:!0});var a=B(s);m=ae(a,f),a.forEach(w),this.h()},h(){_(e,"id",t=n[22].id.toString()),_(e,"cx",u=n[22].x),_(e,"cy",i=n[22].y),_(e,"r","20"),_(e,"fill",o=n[7][n[22].type]),_(e,"class","svelte-5bi1qi"),_(s,"x",C=n[22].x),_(s,"y",d=n[22].y),_(s,"text-anchor","middle"),_(s,"alignment-baseline","middle"),_(s,"class","svelte-5bi1qi")},m(h,a){P(h,e,a),P(h,s,a),q(s,m)},p(h,a){a&32&&t!==(t=h[22].id.toString())&&_(e,"id",t),a&32&&u!==(u=h[22].x)&&_(e,"cx",u),a&32&&i!==(i=h[22].y)&&_(e,"cy",i),a&32&&o!==(o=h[7][h[22].type])&&_(e,"fill",o),a&32&&f!==(f=h[22].label+"")&&fe(m,f),a&32&&C!==(C=h[22].x)&&_(s,"x",C),a&32&&d!==(d=h[22].y)&&_(s,"y",d)},d(h){h&&(w(e),w(s))}}}function ie(n){let e,t;const u=[n[19]];let i={};for(let o=0;o<u.length;o+=1)i=Q(i,u[o]);return e=new Xe({props:i}),{c(){ge(e.$$.fragment)},l(o){_e(e.$$.fragment,o)},m(o,s){me(e,o,s),t=!0},p(o,s){const f=s&256?$(u,[qe(o[19])]):{};e.$set(f)},i(o){t||(O(e.$$.fragment,o),t=!0)},o(o){T(e.$$.fragment,o),t=!1},d(o){pe(e,o)}}}function je(n){let e,t,u,i,o,s,f,m,C,d,h=I(n[5].connections),a=[];for(let c=0;c<h.length;c+=1)a[c]=se(oe(n,h,c));let x=n[4]===n[6].CONNECTING&&n[3]&&le(n),D=I(n[5].nodes),y=[];for(let c=0;c<D.length;c+=1)y[c]=re(ne(n,D,c));let k=I(n[8]),p=[];for(let c=0;c<k.length;c+=1)p[c]=ie(te(n,k,c));const F=c=>T(p[c],1,1,()=>{p[c]=null});return{c(){e=G("div"),t=X("svg");for(let c=0;c<a.length;c+=1)a[c].c();u=A(),x&&x.c(),i=A();for(let c=0;c<y.length;c+=1)y[c].c();s=he(),f=G("div");for(let c=0;c<p.length;c+=1)p[c].c();this.h()},l(c){e=L(c,"DIV",{id:!0,class:!0});var b=B(e);t=j(b,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var r=B(t);for(let g=0;g<a.length;g+=1)a[g].l(r);u=A(),x&&x.l(r),i=A();for(let g=0;g<y.length;g+=1)y[g].l(r);r.forEach(w),s=de(b),f=L(b,"DIV",{id:!0,class:!0});var l=B(f);for(let g=0;g<p.length;g+=1)p[g].l(l);l.forEach(w),b.forEach(w),this.h()},h(){_(t,"viewBox",o=`${n[0].x} ${n[0].y} ${n[0].width} ${n[0].height}`),_(t,"role","button"),_(t,"tabindex","-1"),_(t,"class","svelte-5bi1qi"),_(f,"id","drag-and-drop-container"),_(f,"class","svelte-5bi1qi"),_(e,"id","svg-container"),_(e,"class","svelte-5bi1qi")},m(c,b){P(c,e,b),q(e,t);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(t,null);q(t,u),x&&x.m(t,null),q(t,i);for(let r=0;r<y.length;r+=1)y[r]&&y[r].m(t,null);n[15](t),q(e,s),q(e,f);for(let r=0;r<p.length;r+=1)p[r]&&p[r].m(f,null);m=!0,C||(d=[R(t,"wheel",n[11]),R(t,"pointerdown",n[9]),R(t,"pointerup",n[10]),R(t,"dragover",Ee(n[14])),R(t,"drop",n[12])],C=!0)},p(c,[b]){if(b&32){h=I(c[5].connections);let r;for(r=0;r<h.length;r+=1){const l=oe(c,h,r);a[r]?a[r].p(l,b):(a[r]=se(l),a[r].c(),a[r].m(t,u))}for(;r<a.length;r+=1)a[r].d(1);a.length=h.length}if(c[4]===c[6].CONNECTING&&c[3]?x?x.p(c,b):(x=le(c),x.c(),x.m(t,i)):x&&(x.d(1),x=null),b&160){D=I(c[5].nodes);let r;for(r=0;r<D.length;r+=1){const l=ne(c,D,r);y[r]?y[r].p(l,b):(y[r]=re(l),y[r].c(),y[r].m(t,null))}for(;r<y.length;r+=1)y[r].d(1);y.length=D.length}if((!m||b&1&&o!==(o=`${c[0].x} ${c[0].y} ${c[0].width} ${c[0].height}`))&&_(t,"viewBox",o),b&256){k=I(c[8]);let r;for(r=0;r<k.length;r+=1){const l=te(c,k,r);p[r]?(p[r].p(l,b),O(p[r],1)):(p[r]=ie(l),p[r].c(),O(p[r],1),p[r].m(f,null))}for(ve(),r=k.length;r<p.length;r+=1)F(r);De()}},i(c){if(!m){for(let b=0;b<k.length;b+=1)O(p[b]);m=!0}},o(c){p=p.filter(Boolean);for(let b=0;b<p.length;b+=1)T(p[b]);m=!1},d(c){c&&w(e),S(a,c),x&&x.d(),S(y,c),n[15](null),S(p,c),C=!1,xe(d)}}}function ce(n){return{...W(n.source),...K(n.target)}}function K(n){return{x2:n.x,y2:n.y}}function W(n){return{x1:n.x,y1:n.y}}function Ae(n,e,t){let u;we(n,M,l=>t(5,u=l));var i=(l=>(l[l.NONE=0]="NONE",l[l.DRAGGING=1]="DRAGGING",l[l.PANNING=2]="PANNING",l[l.CONNECTING=3]="CONNECTING",l))(i||{});const o={x:0,y:0,width:0,height:0,get scale(){return d?this.width/d.getBoundingClientRect().width:1}},s={x:0,y:0},f={x:0,y:0},m={[N.Customer]:"lightgreen",[N.Edge]:"cyan",[N.Core]:"hotpink"},C=[{text:"+ Customer",type:N.Customer,color:m[N.Customer]},{text:"+ Edge",type:N.Edge,color:m[N.Edge]},{text:"+ Core",type:N.Core,color:m[N.Core]}];let d=null,h=null,a=0;Ne(()=>{const l=new ResizeObserver(x);d&&l.observe(d)});function x(){d&&(t(0,o.width=d.getBoundingClientRect().width,o),t(0,o.height=d.getBoundingClientRect().height,o))}function D(l){if(!(l.target instanceof Element))return;l.preventDefault(),d==null||d.addEventListener("pointermove",k),d==null||d.setPointerCapture(l.pointerId);const g=l.target.id;if(g){if(t(3,h=M.getNode(parseInt(g))||null),!h)return;l.shiftKey?t(4,a=3):(f.x=h.x,f.y=h.y,t(4,a=1))}else t(4,a=2);t(1,s.x=l.clientX,s),t(1,s.y=l.clientY,s)}function y(l){if(l.target instanceof Element){if(l.preventDefault(),a===3&&h){const g=document.elementFromPoint(l.clientX,l.clientY),E=(g==null?void 0:g.tagName)==="circle"?g.id:null,Y=M.getNode(parseInt(E??""));Y!==void 0&&M.addConnection({source:h,target:Y})}t(4,a=0),t(3,h=null),d==null||d.releasePointerCapture(l.pointerId),d==null||d.removeEventListener("pointermove",k)}}function k(l){l.preventDefault();const g={x:(l.clientX-s.x)*o.scale,y:(l.clientY-s.y)*o.scale};a===1&&h?(t(3,h.x=f.x+g.x,h),t(3,h.y=f.y+g.y,h),M.set(u)):a===2?(t(1,s.x=l.clientX,s),t(1,s.y=l.clientY,s),t(0,o.x-=g.x,o),t(0,o.y-=g.y,o)):a===3&&(t(1,s.x=l.clientX,s),t(1,s.y=l.clientY,s))}function p(l){if(l.preventDefault(),!d||o.scale<.1&&l.deltaY<=0||o.scale>5&&l.deltaY>=0)return;t(1,s.x=l.clientX,s),t(1,s.y=l.clientY,s);const g=d.getBoundingClientRect(),E=l.deltaY>0?1+.025:1-.025,Y={x:(s.x-g.left)/g.width,y:(s.y-g.top)/g.height};t(0,o.x-=o.width*(E-1)*Y.x,o),t(0,o.y-=o.height*(E-1)*Y.y,o),t(0,o.width*=E,o),t(0,o.height*=E,o)}function F(l){var E;l.preventDefault();const g=parseInt(((E=l.dataTransfer)==null?void 0:E.getData("text/plain"))??"0");Re(g)&&d&&M.createNode({label:"Node",...c(l.clientX,l.clientY),type:g})}function c(l,g){return d?{x:(l-d.getBoundingClientRect().left)*o.scale+o.x,y:(g-d.getBoundingClientRect().top)*o.scale+o.y}:{x:l,y:g}}function b(l){Ce.call(this,n,l)}function r(l){ke[l?"unshift":"push"](()=>{d=l,t(2,d)})}return[o,s,d,h,a,u,i,m,C,D,y,p,F,c,b,r]}class Ge extends Z{constructor(e){super(),V(this,e,Ae,je,J,{})}}function Le(n){let e,t="MPLS Simulation but without any Simulation and any MPLS so far",u,i,o;return i=new Ge({}),{c(){e=G("h1"),e.textContent=t,u=he(),ge(i.$$.fragment)},l(s){e=L(s,"H1",{"data-svelte-h":!0}),Be(e)!=="svelte-gjfrzx"&&(e.textContent=t),u=de(s),_e(i.$$.fragment,s)},m(s,f){P(s,e,f),P(s,u,f),me(i,s,f),o=!0},p:H,i(s){o||(O(i.$$.fragment,s),o=!0)},o(s){T(i.$$.fragment,s),o=!1},d(s){s&&(w(e),w(u)),pe(i,s)}}}class Se extends Z{constructor(e){super(),V(this,e,null,Le,J,{})}}export{Se as component};
