var sn=Object.defineProperty;var an=(l,e,t)=>e in l?sn(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var Q=(l,e,t)=>(an(l,typeof e!="symbol"?e+"":e,t),t);import{r as Oe,x as Wt,s as ce,a as Kt,u as Jt,g as Qt,b as Zt,y as en,e as Ee,i as tn,n as _e,z as De,c as ye,o as nn,A as Ie,B as Qe}from"../chunks/scheduler.DYvwBUv9.js";import{n as x,m as D,S as he,i as de,e as L,c as R,a as M,d as m,l as b,g as w,z as Z,t as ne,b as le,h as $,j as $e,s as T,v as G,A as ae,f as N,w as q,x as W,r as me,p as be,B as Se,y as K,C as pe,D as Be,E as Pe,o as ue,q as Xe,F as He,G as Me,H as un,I as _t}from"../chunks/index.CEZ_BoqP.js";import{w as Ze}from"../chunks/index.DX-KyX9r.js";function ie(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ot(l,e){x(l,1,1,()=>{e.delete(l.key)})}function st(l,e,t,n,i,r,o,s,a,f,u,_){let d=l.length,k=r.length,h=d;const v={};for(;h--;)v[l[h].key]=h;const p=[],c=new Map,g=new Map,E=[];for(h=k;h--;){const B=_(i,r,h),H=t(B);let Y=o.get(H);Y?n&&E.push(()=>Y.p(B,e)):(Y=f(H,B),Y.c()),c.set(H,p[h]=Y),H in v&&g.set(H,Math.abs(h-v[H]))}const F=new Set,S=new Set;function P(B){D(B,1),B.m(s,u),o.set(B.key,B),u=B.first,k--}for(;d&&k;){const B=p[k-1],H=l[d-1],Y=B.key,A=H.key;B===H?(u=B.first,d--,k--):c.has(A)?!o.has(Y)||F.has(Y)?P(B):S.has(A)?d--:g.get(Y)>g.get(A)?(S.add(Y),P(B)):(F.add(A),d--):(a(H,o),d--)}for(;d--;){const B=l[d];c.has(B.key)||a(B,o)}for(;k;)P(p[k-1]);return Oe(E),p}function et(l,e){const t={},n={},i={$$scope:1};let r=l.length;for(;r--;){const o=l[r],s=e[r];if(s){for(const a in o)a in s||(n[a]=1);for(const a in s)i[a]||(t[a]=s[a],i[a]=1);l[r]=s}else for(const a in o)i[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function tt(l){return typeof l=="object"&&l!==null?l:{}}const Te=Ze({running:!0,enableFallback:!1,speedMultiplier:1,maxPackets:100});let fn=class{constructor(e,t,n){Q(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},ft=class{constructor(e,t){this.id=e,this.node=t}};class Ce extends ft{constructor(){super(...arguments);Q(this,"address",`CE-IP-${this.id}`);Q(this,"firstHop",new Map);Q(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});Q(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});Q(this,"updateAddress",(t,n)=>{const i=this.firstHop.get(t);if(i===void 0){alert(`Unable to update old first hop Address '${t}' to '${n}'.`);return}this.firstHop.set(n,i),this.firstHop.delete(t)});Q(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop("CE received packet. Dropping.")}clearTables(){this.firstHop.clear()}get type(){return"CE"}}let ln=class{constructor(){Q(this,"map",new Map);Q(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});Q(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});Q(this,"updateLabel",(e,t)=>{const n=this.map.get(e);if(!n){alert(`Unable to update old LFIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,n),this.map.delete(e)});Q(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}},cn=class{constructor(){Q(this,"map",new Map);Q(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});Q(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});Q(this,"updateAddress",(e,t)=>{const n=this.map.get(e);if(n===void 0){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,n),this.map.delete(e)});Q(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Ne extends ft{constructor(){super(...arguments);Q(this,"FIB",new cn);Q(this,"LFIB",new ln)}receivePacket(t){var n,i,r,o;if(t.fallbackRoute)return t.fallback(this);if(t.label===-1){const s=t.destination,a=(n=this.FIB.get(s.address))==null?void 0:n.nextHop;if(!a)return t.fallback(this);const f=(i=this.FIB.get(s.address))==null?void 0:i.label;if(!f)return t.fallback(this);t.label=f;const u=U.getRouter(parseInt(a));if(!u)return t.fallback(this);t.nextHop=u}else{const s=(r=this.LFIB.get(t.label))==null?void 0:r.nextHop;if(!s)return t.fallback(this);const a=(o=this.LFIB.get(t.label))==null?void 0:o.outgoingLabel;if(!a)return t.fallback(this);t.label=a;const f=U.getCERouter(s);if(!f)return t.fallback(this);t.nextHop=f}t.decrementTTL()}clearTables(){this.FIB.map.clear(),this.LFIB.map.clear()}get type(){return"LER"}}function ct(l,e){const t=U.routers,n=t.length,i=new Array(n).fill(1/0),r=new Array(n).fill(!1),o=new Array(n).fill(null);i[t.indexOf(l)]=0;let s=!1,a=!1;for(;!s;){let _=null,d=1/0;for(const[k,h]of t.entries())if(!r[k]&&i[k]<d){if(h instanceof Ne){if(!a)a=!0;else if(!U.links.some(p=>p.source===h&&p.target===e||p.target===h&&p.source===e))continue}_=h,d=i[k]}if(!_||_.id===e.id){s=!0;continue}r[t.indexOf(_)]=!0;for(const k of U.links){let h;if(k.source===_)h=k.target;else if(k.target===_)h=k.source;else continue;const v=t.indexOf(h),p=d+k.distance;p<i[v]&&(i[v]=p,o[v]=_)}}const f=[];let u=e;for(;u;){f.unshift(u);const _=t.indexOf(u);u=o[_]}return f}let hn=class{constructor(e,t,n,i){Q(this,"ttl",32);Q(this,"label",-1);Q(this,"fallbackRoute");Q(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=i;const r=t.firstHop.get(n.address);if(!r){this.drop("No next hop router id found.");return}const o=U.getRouter(r);if(!o){this.drop("No next hop router found.");return}this.nextHop=o}decrementTTL(){--this.ttl<=0&&this.drop()}fallback(e){if(!Wt(Te).enableFallback)return this.drop("Fallback is disabled.");if(this.label=-1,this.decrementTTL(),this.fallbackRoute)return this.setFallbackNextHop();if(this.fallbackRoute=ct(e,this.destination),!(this.fallbackRoute[this.fallbackRoute.length-1]instanceof Ce))return this.drop("The destination is not a CE.");this.fallbackRoute.shift(),this.setFallbackNextHop()}validateNextHop(e){return!!(U.doesLinkExist({source:e,target:this.nextHop})||U.doesLinkExist({source:this.nextHop,target:e}))}setFallbackNextHop(){var t;const e=(t=this.fallbackRoute)==null?void 0:t.shift();this.fallbackRoute&&e?this.nextHop=e:this.drop("Unable to set fallback IP routing next hop")}drop(e="Unknown"){console.warn("Packet dropped: ",e),U.deletePacket(this.id)}};class Ge extends ft{constructor(){super(...arguments);Q(this,"LFIB",new ln)}receivePacket(t){var o,s;if(t.fallbackRoute)return t.fallback(this);const n=(o=this.LFIB.get(t.label))==null?void 0:o.nextHop;if(!n)return t.fallback(this);const i=(s=this.LFIB.get(t.label))==null?void 0:s.outgoingLabel;if(!i)return t.fallback(this);t.label=i;const r=U.getRouter(parseInt(n));if(!r)return t.fallback(this);t.nextHop=r,t.decrementTTL()}clearTables(){this.LFIB.map.clear()}get type(){return"LSR"}}const dn={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class pn{constructor(){Q(this,"store",Ze({routers:[],links:[],packets:[]}));Q(this,"set",this.store.set);Q(this,"update",this.store.update);Q(this,"subscribe",this.store.subscribe);Q(this,"_routers",[]);Q(this,"_links",[]);Q(this,"_packets",[]);Q(this,"routerMap",new Map);Q(this,"CEMap",new Map);Q(this,"routerCounter",1);Q(this,"packetCounter",1);Q(this,"maxPackets",Wt(Te).maxPackets);Te.subscribe(e=>{this.maxPackets=e.maxPackets,this._packets=this._packets.slice(-this.maxPackets),this.notify()})}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!dn[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new fn(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,i=new Ce(n,{label:`CE ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(i)}createLER(e,t){const n=this.routerCounter++,i=new Ne(n,{label:`LER ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(i)}createLSR(e,t){const n=this.routerCounter++,i=new Ge(n,{label:`LSR ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(i)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof Ce&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),t instanceof Ce&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}getSureCERouter(e){const t=this.getCERouter(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){if(this._packets.length>=this.maxPackets)return;const n=new hn(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearTables(){for(const e of this._routers)e.clearTables();this.notify()}clearLinks(){this._links=[],this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=1,this.packetCounter=1,this.notify()}notify(){this.store.set(this.networkState)}}const _n=new pn,U=_n,gn={placing:null},Re=Ze(gn),Ae=Ze(!1);function mn(l){let e,t,n,i;const r=l[2].default,o=Kt(r,l,l[1],null);return{c(){e=L("dialog"),o&&o.c(),this.h()},l(s){e=R(s,"DIALOG",{class:!0});var a=M(e);o&&o.l(a),a.forEach(m),this.h()},h(){b(e,"class","svelte-p5wejv")},m(s,a){w(s,e,a),o&&o.m(e,null),l[4](e),t=!0,n||(i=Z(e,"close",l[3]),n=!0)},p(s,[a]){o&&o.p&&(!t||a&2)&&Jt(o,r,s,s[1],t?Zt(r,s[1],a,null):Qt(s[1]),null)},i(s){t||(D(o,s),t=!0)},o(s){x(o,s),t=!1},d(s){s&&m(e),o&&o.d(s),l[4](null),n=!1,i()}}}function bn(l,e,t){let{$$slots:n={},$$scope:i}=e,{dialog:r}=e;function o(a){en.call(this,l,a)}function s(a){Ee[a?"unshift":"push"](()=>{r=a,t(0,r)})}return l.$$set=a=>{"dialog"in a&&t(0,r=a.dialog),"$$scope"in a&&t(1,i=a.$$scope)},[r,i,n,o,s]}class ht extends he{constructor(e){super(),de(this,e,bn,mn,ce,{dialog:0})}}const gt=16,kn=2**20-1;function rn(l,e){const t=l[0];if(!(t instanceof Ce)){alert("The path does not start with a CE");return}const n=l[1];if(!(n instanceof Ne)){alert("The source CE is not directly connected to an LER");return}if(t.firstHop.set(e,n.id),n.FIB.get(e))return;const i=l.length-2,r=l[i];if(!(r instanceof Ne)){alert("Destination CE is not connected directly to a LER");return}let o=mt(l[i]);r.LFIB.receiveEntry(o,-1,e);for(let s=l.length-2;s>0;s--){const a=l[s],f=l[s-1],u=o;o=mt(a),f instanceof Ne?f.FIB.receiveEntry(e,u,a.id.toString()):f instanceof Ge&&f.LFIB.receiveEntry(o,u,a.id.toString())}}function vn(l,e){return l instanceof Ge||l instanceof Ne?l.LFIB.map.has(e):!1}function mt(l){let e;do e=Math.floor(Math.random()*(kn-gt+1)+gt);while(vn(l,e));return e}function En(l){let e,t,n,i;return{c(){e=L("button"),t=ne(l[0]),this.h()},l(r){e=R(r,"BUTTON",{class:!0});var o=M(e);t=le(o,l[0]),o.forEach(m),this.h()},h(){b(e,"class","svelte-17itt71")},m(r,o){w(r,e,o),$(e,t),n||(i=Z(e,"click",function(){tn(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(r,[o]){l=r,o&1&&$e(t,l[0])},i:_e,o:_e,d(r){r&&m(e),n=!1,i()}}}function yn(l,e,t){let{text:n}=e,{callback:i}=e;return l.$$set=r=>{"text"in r&&t(0,n=r.text),"callback"in r&&t(1,i=r.callback)},[n,i]}class je extends he{constructor(e){super(),de(this,e,yn,En,ce,{text:0,callback:1})}}function bt(l,e,t){const n=l.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function kt(l){let e,t,n,i,r,o,s,a,f,u,_,d,k,h,v,p,c,g;function E(...B){return l[5](l[9],...B)}function F(...B){return l[6](l[9],...B)}function S(){return l[7](l[9])}_=new je({props:{text:"LDP",callback:S}});function P(){return l[8](l[9])}return h=new je({props:{text:"-",callback:P}}),{c(){e=L("tr"),t=L("td"),n=L("input"),r=T(),o=L("td"),s=L("input"),f=T(),u=L("td"),G(_.$$.fragment),d=T(),k=L("td"),G(h.$$.fragment),v=T(),this.h()},l(B){e=R(B,"TR",{});var H=M(e);t=R(H,"TD",{});var Y=M(t);n=R(Y,"INPUT",{type:!0,placeholder:!0}),Y.forEach(m),r=N(H),o=R(H,"TD",{});var A=M(o);s=R(A,"INPUT",{type:!0,placeholder:!0}),A.forEach(m),f=N(H),u=R(H,"TD",{});var C=M(u);q(_.$$.fragment,C),C.forEach(m),d=N(H),k=R(H,"TD",{});var j=M(k);q(h.$$.fragment,j),j.forEach(m),v=N(H),H.forEach(m),this.h()},h(){b(n,"type","text"),n.value=i=l[9],b(n,"placeholder","Address"),b(s,"type","text"),s.value=a=l[10],b(s,"placeholder","Link")},m(B,H){w(B,e,H),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),$(e,f),$(e,u),W(_,u,null),$(e,d),$(e,k),W(h,k,null),$(e,v),p=!0,c||(g=[Z(n,"change",E),Z(s,"change",F)],c=!0)},p(B,H){l=B,(!p||H&1&&i!==(i=l[9])&&n.value!==i)&&(n.value=i),(!p||H&1&&a!==(a=l[10])&&s.value!==a)&&(s.value=a);const Y={};H&1&&(Y.callback=S),_.$set(Y);const A={};H&1&&(A.callback=P),h.$set(A)},i(B){p||(D(_.$$.fragment,B),D(h.$$.fragment,B),p=!0)},o(B){x(_.$$.fragment,B),x(h.$$.fragment,B),p=!1},d(B){B&&m(e),K(_),K(h),c=!1,Oe(g)}}}function wn(l){let e,t="Destinations:",n,i,r,o='<tr><th class="svelte-1d4gizi">Destination</th> <th class="svelte-1d4gizi">First hop</th> <th class="svelte-1d4gizi"></th> <th class="svelte-1d4gizi"></th></tr>',s,a,f,u,_,d,k=ie([...l[0].firstHop]),h=[];for(let p=0;p<k.length;p+=1)h[p]=kt(bt(l,k,p));const v=p=>x(h[p],1,1,()=>{h[p]=null});return _=new je({props:{text:"+",callback:l[1](l[0].addEmptyEntry)}}),{c(){e=L("p"),e.textContent=t,n=T(),i=L("table"),r=L("thead"),r.innerHTML=o,s=T(),a=L("tbody");for(let p=0;p<h.length;p+=1)h[p].c();f=T(),u=L("div"),G(_.$$.fragment),this.h()},l(p){e=R(p,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-1ixmdgd"&&(e.textContent=t),n=N(p),i=R(p,"TABLE",{});var c=M(i);r=R(c,"THEAD",{"data-svelte-h":!0}),ae(r)!=="svelte-1jq34m8"&&(r.innerHTML=o),s=N(c),a=R(c,"TBODY",{});var g=M(a);for(let F=0;F<h.length;F+=1)h[F].l(g);g.forEach(m),c.forEach(m),f=N(p),u=R(p,"DIV",{class:!0});var E=M(u);q(_.$$.fragment,E),E.forEach(m),this.h()},h(){b(u,"class","svelte-1d4gizi")},m(p,c){w(p,e,c),w(p,n,c),w(p,i,c),$(i,r),$(i,s),$(i,a);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(a,null);w(p,f,c),w(p,u,c),W(_,u,null),d=!0},p(p,[c]){if(c&29){k=ie([...p[0].firstHop]);let E;for(E=0;E<k.length;E+=1){const F=bt(p,k,E);h[E]?(h[E].p(F,c),D(h[E],1)):(h[E]=kt(F),h[E].c(),D(h[E],1),h[E].m(a,null))}for(me(),E=k.length;E<h.length;E+=1)v(E);be()}const g={};c&1&&(g.callback=p[1](p[0].addEmptyEntry)),_.$set(g)},i(p){if(!d){for(let c=0;c<k.length;c+=1)D(h[c]);D(_.$$.fragment,p),d=!0}},o(p){h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)x(h[c]);x(_.$$.fragment,p),d=!1},d(p){p&&(m(e),m(n),m(i),m(f),m(u)),Se(h,p),K(_)}}}function $n(l,e,t){let{router:n}=e;function i(d){return()=>{d(),t(0,n)}}function r(d,k){if(!(d.target instanceof HTMLInputElement))return;const h=d.target.value.toUpperCase(),v=U.getCERouter(h);if(n.address===h){alert("Destination router cannot be the same as the source router.");return}if(!v){alert("Destination router not found.");return}n.updateAddress(k,h),t(0,n)}function o(d){const k=U.getCERouter(d);if(!k){alert("Destination router not found.");return}const h=ct(n,k);if(h.length<=1){alert("No path found");return}rn(h,d),t(0,n)}function s(d,k){if(!(d.target instanceof HTMLInputElement))return;const h=parseInt(d.target.value);n.firstHop.set(k,h)}const a=(d,k)=>{r(k,d)},f=(d,k)=>{s(k,d)},u=d=>{o(d)},_=d=>{n.firstHop.delete(d),t(0,n)};return l.$$set=d=>{"router"in d&&t(0,n=d.router)},[n,i,r,o,s,a,f,u,_]}class Cn extends he{constructor(e){super(),de(this,e,$n,wn,ce,{router:0})}}function vt(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Et(l){let e,t,n,i,r,o,s,a,f,u,_,d,k,h,v,p;function c(...S){return l[3](l[7],...S)}function g(){l[4].call(s,l[9],l[10])}function E(){l[5].call(u,l[9],l[10])}function F(){return l[6](l[7])}return d=new je({props:{text:"-",callback:F}}),{c(){e=L("tr"),t=L("td"),n=L("input"),r=T(),o=L("td"),s=L("input"),a=T(),f=L("td"),u=L("input"),_=T(),G(d.$$.fragment),k=T(),this.h()},l(S){e=R(S,"TR",{});var P=M(e);t=R(P,"TD",{});var B=M(t);n=R(B,"INPUT",{type:!0}),B.forEach(m),r=N(P),o=R(P,"TD",{});var H=M(o);s=R(H,"INPUT",{type:!0}),H.forEach(m),a=N(P),f=R(P,"TD",{});var Y=M(f);u=R(Y,"INPUT",{type:!0}),Y.forEach(m),_=N(P),q(d.$$.fragment,P),k=N(P),P.forEach(m),this.h()},h(){b(n,"type","number"),n.value=i=l[7],b(s,"type","number"),b(u,"type","text")},m(S,P){w(S,e,P),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),pe(s,l[8].outgoingLabel),$(e,a),$(e,f),$(f,u),pe(u,l[8].nextHop),$(e,_),W(d,e,null),$(e,k),h=!0,v||(p=[Z(n,"change",c),Z(s,"input",g),Z(u,"input",E)],v=!0)},p(S,P){l=S,(!h||P&1&&i!==(i=l[7])&&n.value!==i)&&(n.value=i),P&1&&Be(s.value)!==l[8].outgoingLabel&&pe(s,l[8].outgoingLabel),P&1&&u.value!==l[8].nextHop&&pe(u,l[8].nextHop);const B={};P&1&&(B.callback=F),d.$set(B)},i(S){h||(D(d.$$.fragment,S),h=!0)},o(S){x(d.$$.fragment,S),h=!1},d(S){S&&m(e),K(d),v=!1,Oe(p)}}}function Ln(l){let e,t="LFIB:",n,i,r,o="<tr><th>Incoming</th> <th>Outgoing</th> <th>Next hop</th> <th></th></tr>",s,a,f,u,_,d,k=ie([...l[0].LFIB.map]),h=[];for(let p=0;p<k.length;p+=1)h[p]=Et(vt(l,k,p));const v=p=>x(h[p],1,1,()=>{h[p]=null});return _=new je({props:{text:"+",callback:l[1](l[0].LFIB.addEmptyEntry)}}),{c(){e=L("p"),e.textContent=t,n=T(),i=L("table"),r=L("thead"),r.innerHTML=o,s=T(),a=L("tbody");for(let p=0;p<h.length;p+=1)h[p].c();f=T(),u=L("div"),G(_.$$.fragment),this.h()},l(p){e=R(p,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-5opw2d"&&(e.textContent=t),n=N(p),i=R(p,"TABLE",{});var c=M(i);r=R(c,"THEAD",{"data-svelte-h":!0}),ae(r)!=="svelte-1fy2y89"&&(r.innerHTML=o),s=N(c),a=R(c,"TBODY",{});var g=M(a);for(let F=0;F<h.length;F+=1)h[F].l(g);g.forEach(m),c.forEach(m),f=N(p),u=R(p,"DIV",{class:!0});var E=M(u);q(_.$$.fragment,E),E.forEach(m),this.h()},h(){b(u,"class","svelte-f8qi58")},m(p,c){w(p,e,c),w(p,n,c),w(p,i,c),$(i,r),$(i,s),$(i,a);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(a,null);w(p,f,c),w(p,u,c),W(_,u,null),d=!0},p(p,[c]){if(c&5){k=ie([...p[0].LFIB.map]);let E;for(E=0;E<k.length;E+=1){const F=vt(p,k,E);h[E]?(h[E].p(F,c),D(h[E],1)):(h[E]=Et(F),h[E].c(),D(h[E],1),h[E].m(a,null))}for(me(),E=k.length;E<h.length;E+=1)v(E);be()}const g={};c&1&&(g.callback=p[1](p[0].LFIB.addEmptyEntry)),_.$set(g)},i(p){if(!d){for(let c=0;c<k.length;c+=1)D(h[c]);D(_.$$.fragment,p),d=!0}},o(p){h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)x(h[c]);x(_.$$.fragment,p),d=!1},d(p){p&&(m(e),m(n),m(i),m(f),m(u)),Se(h,p),K(_)}}}function Rn(l,e,t){let{router:n}=e;function i(u){return()=>{u(),t(0,n)}}function r(u,_){if(!(u.target instanceof HTMLInputElement))return;const d=parseInt(u.target.value);n.LFIB.updateLabel(_,d)}const o=(u,_)=>{r(_,u)};function s(u,_){u[_][1].outgoingLabel=Be(this.value),t(0,n)}function a(u,_){u[_][1].nextHop=this.value,t(0,n)}const f=u=>{n.LFIB.deleteEntry(u),t(0,n)};return l.$$set=u=>{"router"in u&&t(0,n=u.router)},[n,i,r,o,s,a,f]}class In extends he{constructor(e){super(),de(this,e,Rn,Ln,ce,{router:0})}}function yt(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function wt(l){let e,t,n,i,r,o,s,a,f,u,_,d,k,h,v,p;function c(...S){return l[3](l[7],...S)}function g(){l[4].call(s,l[9],l[10])}function E(){l[5].call(u,l[9],l[10])}function F(){return l[6](l[7])}return d=new je({props:{text:"-",callback:F}}),{c(){e=L("tr"),t=L("td"),n=L("input"),r=T(),o=L("td"),s=L("input"),a=T(),f=L("td"),u=L("input"),_=T(),G(d.$$.fragment),k=T(),this.h()},l(S){e=R(S,"TR",{});var P=M(e);t=R(P,"TD",{});var B=M(t);n=R(B,"INPUT",{type:!0}),B.forEach(m),r=N(P),o=R(P,"TD",{});var H=M(o);s=R(H,"INPUT",{type:!0}),H.forEach(m),a=N(P),f=R(P,"TD",{});var Y=M(f);u=R(Y,"INPUT",{type:!0}),Y.forEach(m),_=N(P),q(d.$$.fragment,P),k=N(P),P.forEach(m),this.h()},h(){b(n,"type","text"),n.value=i=l[7],b(s,"type","number"),b(u,"type","text")},m(S,P){w(S,e,P),$(e,t),$(t,n),$(e,r),$(e,o),$(o,s),pe(s,l[8].label),$(e,a),$(e,f),$(f,u),pe(u,l[8].nextHop),$(e,_),W(d,e,null),$(e,k),h=!0,v||(p=[Z(n,"change",c),Z(s,"input",g),Z(u,"input",E)],v=!0)},p(S,P){l=S,(!h||P&1&&i!==(i=l[7])&&n.value!==i)&&(n.value=i),P&1&&Be(s.value)!==l[8].label&&pe(s,l[8].label),P&1&&u.value!==l[8].nextHop&&pe(u,l[8].nextHop);const B={};P&1&&(B.callback=F),d.$set(B)},i(S){h||(D(d.$$.fragment,S),h=!0)},o(S){x(d.$$.fragment,S),h=!1},d(S){S&&m(e),K(d),v=!1,Oe(p)}}}function Dn(l){let e,t="FIB:",n,i,r,o="<tr><th>Address</th> <th>Label</th> <th>Next hop</th> <th></th></tr>",s,a,f,u,_,d,k=ie([...l[0].FIB.map]),h=[];for(let p=0;p<k.length;p+=1)h[p]=wt(yt(l,k,p));const v=p=>x(h[p],1,1,()=>{h[p]=null});return _=new je({props:{text:"+",callback:l[1](l[0].FIB.addEmptyEntry)}}),{c(){e=L("p"),e.textContent=t,n=T(),i=L("table"),r=L("thead"),r.innerHTML=o,s=T(),a=L("tbody");for(let p=0;p<h.length;p+=1)h[p].c();f=T(),u=L("div"),G(_.$$.fragment),this.h()},l(p){e=R(p,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-1j6bdhj"&&(e.textContent=t),n=N(p),i=R(p,"TABLE",{});var c=M(i);r=R(c,"THEAD",{"data-svelte-h":!0}),ae(r)!=="svelte-1qhs6t7"&&(r.innerHTML=o),s=N(c),a=R(c,"TBODY",{});var g=M(a);for(let F=0;F<h.length;F+=1)h[F].l(g);g.forEach(m),c.forEach(m),f=N(p),u=R(p,"DIV",{class:!0});var E=M(u);q(_.$$.fragment,E),E.forEach(m),this.h()},h(){b(u,"class","svelte-f8qi58")},m(p,c){w(p,e,c),w(p,n,c),w(p,i,c),$(i,r),$(i,s),$(i,a);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(a,null);w(p,f,c),w(p,u,c),W(_,u,null),d=!0},p(p,[c]){if(c&5){k=ie([...p[0].FIB.map]);let E;for(E=0;E<k.length;E+=1){const F=yt(p,k,E);h[E]?(h[E].p(F,c),D(h[E],1)):(h[E]=wt(F),h[E].c(),D(h[E],1),h[E].m(a,null))}for(me(),E=k.length;E<h.length;E+=1)v(E);be()}const g={};c&1&&(g.callback=p[1](p[0].FIB.addEmptyEntry)),_.$set(g)},i(p){if(!d){for(let c=0;c<k.length;c+=1)D(h[c]);D(_.$$.fragment,p),d=!0}},o(p){h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)x(h[c]);x(_.$$.fragment,p),d=!1},d(p){p&&(m(e),m(n),m(i),m(f),m(u)),Se(h,p),K(_)}}}function Pn(l,e,t){let{router:n}=e;function i(u){return()=>{u(),t(0,n)}}function r(u,_){if(!(u.target instanceof HTMLInputElement))return;const d=u.target.value;n.FIB.updateAddress(_,d)}const o=(u,_)=>{r(_,u)};function s(u,_){u[_][1].label=Be(this.value),t(0,n)}function a(u,_){u[_][1].nextHop=this.value,t(0,n)}const f=u=>{n.FIB.deleteEntry(u),t(0,n)};return l.$$set=u=>{"router"in u&&t(0,n=u.router)},[n,i,r,o,s,a,f]}class Bn extends he{constructor(e){super(),de(this,e,Pn,Dn,ce,{router:0})}}function Tn(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=R(n,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,i){w(n,e,i)},p:_e,i:_e,o:_e,d(n){n&&m(e)}}}function Nn(l){let e,t,n,i,r,o,s,a,f,u,_,d,k,h,v=l[0].id+"",p,c,g,E,F,S,P,B,H,Y,A=l[0]instanceof Ce&&$t(l),C=l[0]instanceof Ne&&Ct(l),j=(l[0]instanceof Ne||l[0]instanceof Ge)&&Lt(l);return P=new je({props:{text:"Delete Router",callback:l[3]}}),{c(){e=L("div"),t=L("div"),n=L("label"),i=ne(`Label:
          `),r=L("input"),o=T(),s=L("label"),a=ne(`Position:
        `),f=L("input"),u=T(),_=L("input"),d=T(),k=L("p"),h=ne("ID: "),p=ne(v),c=T(),A&&A.c(),g=T(),C&&C.c(),E=T(),j&&j.c(),F=T(),S=L("div"),G(P.$$.fragment),this.h()},l(z){e=R(z,"DIV",{});var V=M(e);t=R(V,"DIV",{});var ve=M(t);n=R(ve,"LABEL",{});var fe=M(n);i=le(fe,`Label:
          `),r=R(fe,"INPUT",{type:!0,class:!0}),fe.forEach(m),ve.forEach(m),o=N(V),s=R(V,"LABEL",{});var se=M(s);a=le(se,`Position:
        `),f=R(se,"INPUT",{type:!0,class:!0}),u=N(se),_=R(se,"INPUT",{type:!0,class:!0}),se.forEach(m),d=N(V),k=R(V,"P",{});var re=M(k);h=le(re,"ID: "),p=le(re,v),re.forEach(m),V.forEach(m),c=N(z),A&&A.l(z),g=N(z),C&&C.l(z),E=N(z),j&&j.l(z),F=N(z),S=R(z,"DIV",{class:!0});var ge=M(S);q(P.$$.fragment,ge),ge.forEach(m),this.h()},h(){b(r,"type","text"),b(r,"class","svelte-cihl2i"),b(f,"type","number"),f.disabled=l[2],b(f,"class","svelte-cihl2i"),b(_,"type","number"),_.disabled=l[2],b(_,"class","svelte-cihl2i"),b(S,"class","margin-top svelte-cihl2i")},m(z,V){w(z,e,V),$(e,t),$(t,n),$(n,i),$(n,r),pe(r,l[0].node.label),$(e,o),$(e,s),$(s,a),$(s,f),pe(f,l[0].node.x),$(s,u),$(s,_),pe(_,l[0].node.y),$(e,d),$(e,k),$(k,h),$(k,p),w(z,c,V),A&&A.m(z,V),w(z,g,V),C&&C.m(z,V),w(z,E,V),j&&j.m(z,V),w(z,F,V),w(z,S,V),W(P,S,null),B=!0,H||(Y=[Z(r,"input",l[4]),Z(f,"input",l[5]),Z(_,"input",l[6]),Z(e,"input",l[7])],H=!0)},p(z,V){V&1&&r.value!==z[0].node.label&&pe(r,z[0].node.label),(!B||V&4)&&(f.disabled=z[2]),V&1&&Be(f.value)!==z[0].node.x&&pe(f,z[0].node.x),(!B||V&4)&&(_.disabled=z[2]),V&1&&Be(_.value)!==z[0].node.y&&pe(_,z[0].node.y),(!B||V&1)&&v!==(v=z[0].id+"")&&$e(p,v),z[0]instanceof Ce?A?(A.p(z,V),V&1&&D(A,1)):(A=$t(z),A.c(),D(A,1),A.m(g.parentNode,g)):A&&(me(),x(A,1,1,()=>{A=null}),be()),z[0]instanceof Ne?C?(C.p(z,V),V&1&&D(C,1)):(C=Ct(z),C.c(),D(C,1),C.m(E.parentNode,E)):C&&(me(),x(C,1,1,()=>{C=null}),be()),z[0]instanceof Ne||z[0]instanceof Ge?j?(j.p(z,V),V&1&&D(j,1)):(j=Lt(z),j.c(),D(j,1),j.m(F.parentNode,F)):j&&(me(),x(j,1,1,()=>{j=null}),be())},i(z){B||(D(A),D(C),D(j),D(P.$$.fragment,z),B=!0)},o(z){x(A),x(C),x(j),x(P.$$.fragment,z),B=!1},d(z){z&&(m(e),m(c),m(g),m(E),m(F),m(S)),A&&A.d(z),C&&C.d(z),j&&j.d(z),K(P),H=!1,Oe(Y)}}}function $t(l){let e,t="Address:",n,i,r=l[0].address+"",o,s,a,f,u,_,d,k;function h(p){l[9](p)}let v={};return l[0]!==void 0&&(v.router=l[0]),f=new Cn({props:v}),Ee.push(()=>Pe(f,"router",h)),{c(){e=L("p"),e.textContent=t,n=T(),i=L("button"),o=ne(r),s=T(),a=L("div"),G(f.$$.fragment),this.h()},l(p){e=R(p,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-18hoeeh"&&(e.textContent=t),n=N(p),i=R(p,"BUTTON",{class:!0});var c=M(i);o=le(c,r),c.forEach(m),s=N(p),a=R(p,"DIV",{class:!0});var g=M(a);q(f.$$.fragment,g),g.forEach(m),this.h()},h(){Xe(e,"display","inline"),b(i,"class","svelte-cihl2i"),b(a,"class","margin-top svelte-cihl2i")},m(p,c){w(p,e,c),w(p,n,c),w(p,i,c),$(i,o),w(p,s,c),w(p,a,c),W(f,a,null),_=!0,d||(k=Z(i,"click",l[8]),d=!0)},p(p,c){(!_||c&1)&&r!==(r=p[0].address+"")&&$e(o,r);const g={};!u&&c&1&&(u=!0,g.router=p[0],De(()=>u=!1)),f.$set(g)},i(p){_||(D(f.$$.fragment,p),_=!0)},o(p){x(f.$$.fragment,p),_=!1},d(p){p&&(m(e),m(n),m(i),m(s),m(a)),K(f),d=!1,k()}}}function Ct(l){let e,t,n,i;function r(s){l[10](s)}let o={};return l[0]!==void 0&&(o.router=l[0]),t=new Bn({props:o}),Ee.push(()=>Pe(t,"router",r)),{c(){e=L("div"),G(t.$$.fragment),this.h()},l(s){e=R(s,"DIV",{class:!0});var a=M(e);q(t.$$.fragment,a),a.forEach(m),this.h()},h(){b(e,"class","margin-top svelte-cihl2i")},m(s,a){w(s,e,a),W(t,e,null),i=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.router=s[0],De(()=>n=!1)),t.$set(f)},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){x(t.$$.fragment,s),i=!1},d(s){s&&m(e),K(t)}}}function Lt(l){let e,t,n,i;function r(s){l[11](s)}let o={};return l[0]!==void 0&&(o.router=l[0]),t=new In({props:o}),Ee.push(()=>Pe(t,"router",r)),{c(){e=L("div"),G(t.$$.fragment),this.h()},l(s){e=R(s,"DIV",{class:!0});var a=M(e);q(t.$$.fragment,a),a.forEach(m),this.h()},h(){b(e,"class","margin-top svelte-cihl2i")},m(s,a){w(s,e,a),W(t,e,null),i=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.router=s[0],De(()=>n=!1)),t.$set(f)},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){x(t.$$.fragment,s),i=!1},d(s){s&&m(e),K(t)}}}function xn(l){let e,t,n,i;const r=[Nn,Tn],o=[];function s(a,f){return a[0]?0:1}return e=s(l),t=o[e]=r[e](l),{c(){t.c(),n=ue()},l(a){t.l(a),n=ue()},m(a,f){o[e].m(a,f),w(a,n,f),i=!0},p(a,f){let u=e;e=s(a),e===u?o[e].p(a,f):(me(),x(o[u],1,1,()=>{o[u]=null}),be(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),D(t,1),t.m(n.parentNode,n))},i(a){i||(D(t),i=!0)},o(a){x(t),i=!1},d(a){a&&m(n),o[e].d(a)}}}function Fn(l){let e,t,n;function i(o){l[12](o)}let r={$$slots:{default:[xn]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.dialog=l[1]),e=new ht({props:r}),Ee.push(()=>Pe(e,"dialog",i)),e.$on("close",l[13]),{c(){G(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),n=!0},p(o,[s]){const a={};s&16389&&(a.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,a.dialog=o[1],De(()=>t=!1)),e.$set(a)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){x(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function Hn(l,e,t){let n;ye(l,Ae,c=>t(2,n=c));let{router:i}=e,{dialog:r}=e;function o(){if(!n&&i){if(!confirm("Are you sure you want to delete this router?"))return;U.deleteRouter(i.id),r.close()}else alert("You can't delete a router while the network is locked.")}function s(){i.node.label=this.value,t(0,i)}function a(){i.node.x=Be(this.value),t(0,i)}function f(){i.node.y=Be(this.value),t(0,i)}const u=()=>{U.notify()},_=async()=>{i instanceof Ce&&await navigator.clipboard.writeText(i.address)};function d(c){i=c,t(0,i)}function k(c){i=c,t(0,i)}function h(c){i=c,t(0,i)}function v(c){r=c,t(1,r)}const p=()=>{if(i instanceof Ce)for(const c of i.firstHop.keys())c===""&&i.firstHop.delete(c);U.notify()};return l.$$set=c=>{"router"in c&&t(0,i=c.router),"dialog"in c&&t(1,r=c.dialog)},[i,r,n,o,s,a,f,u,_,d,k,h,v,p]}class Mn extends he{constructor(e){super(),de(this,e,Hn,Fn,ce,{router:0,dialog:1})}}function zn(l){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=R(n,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,i){w(n,e,i)},p:_e,i:_e,o:_e,d(n){n&&m(e)}}}function Sn(l){let e,t=l[0].distance+"",n,i,r,o,s,a,f,u,_,d,k;return u=new je({props:{text:"Delete Link",callback:l[3]}}),{c(){e=ne("Distance: "),n=ne(t),i=ne(` km
    `),r=L("label"),o=ne(`Bandwidth:
      `),s=L("input"),a=T(),f=L("div"),G(u.$$.fragment),this.h()},l(h){e=le(h,"Distance: "),n=le(h,t),i=le(h,` km
    `),r=R(h,"LABEL",{class:!0});var v=M(r);o=le(v,`Bandwidth:
      `),s=R(v,"INPUT",{type:!0,class:!0}),v.forEach(m),a=N(h),f=R(h,"DIV",{class:!0});var p=M(f);q(u.$$.fragment,p),p.forEach(m),this.h()},h(){b(s,"type","number"),s.disabled=l[2],b(s,"class","svelte-11gx5jd"),b(r,"class","svelte-11gx5jd"),b(f,"class","svelte-11gx5jd")},m(h,v){w(h,e,v),w(h,n,v),w(h,i,v),w(h,r,v),$(r,o),$(r,s),pe(s,l[0].bandwidth),w(h,a,v),w(h,f,v),W(u,f,null),_=!0,d||(k=Z(s,"input",l[4]),d=!0)},p(h,v){(!_||v&1)&&t!==(t=h[0].distance+"")&&$e(n,t),(!_||v&4)&&(s.disabled=h[2]),v&1&&Be(s.value)!==h[0].bandwidth&&pe(s,h[0].bandwidth)},i(h){_||(D(u.$$.fragment,h),_=!0)},o(h){x(u.$$.fragment,h),_=!1},d(h){h&&(m(e),m(n),m(i),m(r),m(a),m(f)),K(u),d=!1,k()}}}function jn(l){let e,t,n,i;const r=[Sn,zn],o=[];function s(a,f){return a[0]?0:1}return e=s(l),t=o[e]=r[e](l),{c(){t.c(),n=ue()},l(a){t.l(a),n=ue()},m(a,f){o[e].m(a,f),w(a,n,f),i=!0},p(a,f){let u=e;e=s(a),e===u?o[e].p(a,f):(me(),x(o[u],1,1,()=>{o[u]=null}),be(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),D(t,1),t.m(n.parentNode,n))},i(a){i||(D(t),i=!0)},o(a){x(t),i=!1},d(a){a&&m(n),o[e].d(a)}}}function An(l){let e,t,n;function i(o){l[5](o)}let r={$$slots:{default:[jn]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.dialog=l[1]),e=new ht({props:r}),Ee.push(()=>Pe(e,"dialog",i)),e.$on("close",l[6]),{c(){G(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),n=!0},p(o,[s]){const a={};s&133&&(a.$$scope={dirty:s,ctx:o}),!t&&s&2&&(t=!0,a.dialog=o[1],De(()=>t=!1)),e.$set(a)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){x(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function On(l,e,t){let n;ye(l,Ae,u=>t(2,n=u));let{link:i}=e,{dialog:r}=e;function o(){if(!n&&i){if(!confirm("Are you sure you want to delete this link?"))return;U.deleteLink(i.id),r.close()}else alert("You can't delete a link while the network is locked.")}function s(){i.bandwidth=Be(this.value),t(0,i)}function a(u){r=u,t(1,r)}const f=()=>{U.notify()};return l.$$set=u=>{"link"in u&&t(0,i=u.link),"dialog"in u&&t(1,r=u.dialog)},[i,r,n,o,s,a,f]}class Un extends he{constructor(e){super(),de(this,e,On,An,ce,{link:0,dialog:1})}}function Rt(l){let e,t="Loading...";return{c(){e=L("p"),e.textContent=t,this.h()},l(n){e=R(n,"P",{style:!0,"data-svelte-h":!0}),ae(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Xe(e,"font-size","200px")},m(n,i){w(n,e,i)},d(n){n&&m(e)}}}function It(l){let e,t,n,i,r,o;return{c(){e=He("line"),this.h()},l(s){e=Me(s,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),M(e).forEach(m),this.h()},h(){b(e,"class","preview"),b(e,"x1",t=l[5].node.x),b(e,"y1",n=l[5].node.y),b(e,"x2",i=l[22](l[2].x)),b(e,"y2",r=l[23](l[2].y)),b(e,"stroke",o=l[7]===l[13].CONNECTING?"green":"blue")},m(s,a){w(s,e,a)},p(s,a){a[0]&32&&t!==(t=s[5].node.x)&&b(e,"x1",t),a[0]&32&&n!==(n=s[5].node.y)&&b(e,"y1",n),a[0]&4&&i!==(i=s[22](s[2].x))&&b(e,"x2",i),a[0]&4&&r!==(r=s[23](s[2].y))&&b(e,"y2",r),a[0]&128&&o!==(o=s[7]===s[13].CONNECTING?"green":"blue")&&b(e,"stroke",o)},d(s){s&&m(e)}}}function Dt(l){let e,t,n,i,r,o=l[12].placing+"",s,a,f;return{c(){e=He("circle"),r=He("text"),s=ne(o),this.h()},l(u){e=Me(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),M(e).forEach(m),r=Me(u,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var _=M(r);s=le(_,o),_.forEach(m),this.h()},h(){b(e,"cx",t=l[22](l[3].x)),b(e,"cy",n=l[23](l[3].y)),b(e,"r","20"),b(e,"fill",i=l[14][l[12].placing]),b(r,"x",a=l[22](l[3].x)),b(r,"y",f=l[23](l[3].y)),b(r,"dominant-baseline","central"),b(r,"font-size","smaller"),b(r,"class","svelte-huetud")},m(u,_){w(u,e,_),w(u,r,_),$(r,s)},p(u,_){_[0]&8&&t!==(t=u[22](u[3].x))&&b(e,"cx",t),_[0]&8&&n!==(n=u[23](u[3].y))&&b(e,"cy",n),_[0]&4096&&i!==(i=u[14][u[12].placing])&&b(e,"fill",i),_[0]&4096&&o!==(o=u[12].placing+"")&&$e(s,o),_[0]&8&&a!==(a=u[22](u[3].x))&&b(r,"x",a),_[0]&8&&f!==(f=u[23](u[3].y))&&b(r,"y",f)},d(u){u&&(m(e),m(r))}}}function Vn(l){let e,t,n,i,r,o,s,a,f,u,_,d,k,h,v,p=!l[10]&&Rt(),c=(!l[0]&&l[7]===l[13].CONNECTING||l[7]===l[13].ADDING_DESTINATION)&&l[5]&&It(l);const g=l[26].default,E=Kt(g,l,l[25],null);let F=l[7]===l[13].ADDING_ROUTERS&&l[12].placing&&Dt(l);function S(C){l[29](C)}function P(C){l[30](C)}let B={};l[5]!==void 0&&(B.router=l[5]),l[8]!==void 0&&(B.dialog=l[8]),o=new Mn({props:B}),Ee.push(()=>Pe(o,"router",S)),Ee.push(()=>Pe(o,"dialog",P));function H(C){l[31](C)}function Y(C){l[32](C)}let A={};return l[6]!==void 0&&(A.link=l[6]),l[9]!==void 0&&(A.dialog=l[9]),u=new Un({props:A}),Ee.push(()=>Pe(u,"link",H)),Ee.push(()=>Pe(u,"dialog",Y)),{c(){p&&p.c(),e=T(),t=He("svg"),c&&c.c(),n=ue(),E&&E.c(),F&&F.c(),r=T(),G(o.$$.fragment),f=T(),G(u.$$.fragment),this.h()},l(C){p&&p.l(C),e=N(C),t=Me(C,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var j=M(t);c&&c.l(j),n=ue(),E&&E.l(j),F&&F.l(j),j.forEach(m),r=N(C),q(o.$$.fragment,C),f=N(C),q(u.$$.fragment,C),this.h()},h(){b(t,"viewBox",i=`${l[1].x} ${l[1].y} ${l[1].width} ${l[1].height}`),b(t,"role","button"),b(t,"tabindex","-1"),b(t,"class","svelte-huetud"),Xe(t,"cursor",l[11][l[7]])},m(C,j){p&&p.m(C,j),w(C,e,j),w(C,t,j),c&&c.m(t,null),$(t,n),E&&E.m(t,null),F&&F.m(t,null),l[28](t),w(C,r,j),W(o,C,j),w(C,f,j),W(u,C,j),k=!0,h||(v=[Z(window,"keydown",l[16]),Z(t,"pointerdown",l[17]),Z(t,"pointermove",l[15]),Z(t,"pointerup",l[18]),Z(t,"wheel",l[19]),Z(t,"dblclick",l[20]),Z(t,"dragover",un(l[27])),Z(t,"drop",l[21])],h=!0)},p(C,j){C[10]?p&&(p.d(1),p=null):p||(p=Rt(),p.c(),p.m(e.parentNode,e)),(!C[0]&&C[7]===C[13].CONNECTING||C[7]===C[13].ADDING_DESTINATION)&&C[5]?c?c.p(C,j):(c=It(C),c.c(),c.m(t,n)):c&&(c.d(1),c=null),E&&E.p&&(!k||j[0]&33554432)&&Jt(E,g,C,C[25],k?Zt(g,C[25],j,null):Qt(C[25]),null),C[7]===C[13].ADDING_ROUTERS&&C[12].placing?F?F.p(C,j):(F=Dt(C),F.c(),F.m(t,null)):F&&(F.d(1),F=null),(!k||j[0]&2&&i!==(i=`${C[1].x} ${C[1].y} ${C[1].width} ${C[1].height}`))&&b(t,"viewBox",i),j[0]&2176&&Xe(t,"cursor",C[11][C[7]]);const z={};!s&&j[0]&32&&(s=!0,z.router=C[5],De(()=>s=!1)),!a&&j[0]&256&&(a=!0,z.dialog=C[8],De(()=>a=!1)),o.$set(z);const V={};!_&&j[0]&64&&(_=!0,V.link=C[6],De(()=>_=!1)),!d&&j[0]&512&&(d=!0,V.dialog=C[9],De(()=>d=!1)),u.$set(V)},i(C){k||(D(E,C),D(o.$$.fragment,C),D(u.$$.fragment,C),k=!0)},o(C){x(E,C),x(o.$$.fragment,C),x(u.$$.fragment,C),k=!1},d(C){C&&(m(e),m(t),m(r),m(f)),p&&p.d(C),c&&c.d(),E&&E.d(C),F&&F.d(),l[28](null),K(o,C),K(u,C),h=!1,Oe(v)}}}function Yn(l,e,t){let n,i,r;ye(l,Ae,y=>t(0,i=y)),ye(l,Re,y=>t(12,r=y));let{$$slots:o={},$$scope:s}=e;var a=(y=>(y[y.NONE=0]="NONE",y[y.DRAGGING=1]="DRAGGING",y[y.PANNING=2]="PANNING",y[y.CONNECTING=3]="CONNECTING",y[y.ADDING_DESTINATION=4]="ADDING_DESTINATION",y[y.ADDING_ROUTERS=5]="ADDING_ROUTERS",y))(a||{});const f={x:0,y:0,width:0,height:0,get scale(){return h?this.width/h.getBoundingClientRect().width:1}},u={x:0,y:0},_={x:0,y:0},d={x:0,y:0},k={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};let h=null,v=null,p=null,c=0,g,E,F=!1;Re.subscribe(y=>{y.placing&&["CE","LER","LSR"].includes(y.placing)?t(7,c=5):t(7,c=0)}),nn(()=>{if(!h)return;new ResizeObserver(S).observe(h),requestAnimationFrame(()=>{h&&(t(1,f.x=h.getBoundingClientRect().width/-2,f),t(1,f.y=h.getBoundingClientRect().height/-2,f))}),t(10,F=!0)});function S(){if(!h)return;const y=f.scale||1;t(1,f.width=h.getBoundingClientRect().width*y,f),t(1,f.height=h.getBoundingClientRect().height*y,f)}function P(y){t(3,d.x=y.clientX,d),t(3,d.y=y.clientY,d)}function B(y){switch(y.code){case"Escape":Ie(Re,r.placing=null,r);break;case"Space":y.preventDefault(),Ie(Ae,i=!i,i),Ie(Re,r.placing=null,r),U.clearPackets();break;case"Digit1":Ie(Re,r.placing="CE",r);break;case"Digit2":Ie(Re,r.placing="LER",r);break;case"Digit3":Ie(Re,r.placing="LSR",r);break}}function H(y){if(!(y.target instanceof Element))return;if(y.preventDefault(),c===5){switch(r.placing){case"CE":U.createCE(se(y.clientX),re(y.clientY));break;case"LER":U.createLER(se(y.clientX),re(y.clientY));break;case"LSR":U.createLSR(se(y.clientX),re(y.clientY));break}y.shiftKey||Ie(Re,r.placing=null,r);return}h==null||h.addEventListener("pointermove",A),h==null||h.setPointerCapture(y.pointerId);const X=y.target.id;if(X){if(t(5,v=U.getRouter(parseInt(X))||null),!v)return;y.shiftKey?t(7,c=3):y.altKey&&v instanceof Ce?t(7,c=4):(_.x=v.node.x,_.y=v.node.y,t(7,c=1))}else t(7,c=2);t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u)}function Y(y){if(y.target instanceof Element&&c!==5){y.preventDefault();e:if(v&&c===4){const X=document.elementFromPoint(y.clientX,y.clientY),I=(X==null?void 0:X.tagName)==="circle"?X.id:null,O=U.getRouter(parseInt(I??""));if(!O||v===O)break e;if(!(O instanceof Ce)){alert("Destination must be a CE");break e}const qe=ct(v,O);if(qe.length<=1){alert("No path found");break e}rn(qe,O.address),U.notify()}t(7,c=0),t(5,v=null),h==null||h.releasePointerCapture(y.pointerId),h==null||h.removeEventListener("pointermove",A)}}function A(y){y.preventDefault();const X={x:(y.clientX-u.x)*f.scale,y:(y.clientY-u.y)*f.scale};if(!i&&c===1&&v)t(5,v.node.x=Math.round(_.x+X.x),v),t(5,v.node.y=Math.round(_.y+X.y),v),U.notify();else if(c===2)t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u),t(1,f.x-=X.x,f),t(1,f.y-=X.y,f);else if(c===4)t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u);else if(!i&&c===3){t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u);const I=document.elementFromPoint(y.clientX,y.clientY);if(!I)return;const O=U.getRouter(parseInt(I.id));I.tagName==="circle"&&O&&v&&(U.addLink({source:v,target:O}),t(5,v=O))}}function C(y){y.preventDefault(),t(2,u.x=y.clientX,u),t(2,u.y=y.clientY,u);const X=y.deltaY>0?1.025:.975;j(X,u)}function j(y,X){if(!h||f.scale<.1&&y<1||f.scale>5&&y>1)return;const I=h.getBoundingClientRect(),O={x:(X.x-I.left)/I.width,y:(X.y-I.top)/I.height};t(1,f.x-=f.width*(y-1)*O.x,f),t(1,f.y-=f.height*(y-1)*O.y,f),t(1,f.width*=y,f),t(1,f.height*=y,f)}function z(y){if(!(y.target instanceof Element))return;y.preventDefault();const X=document.elementFromPoint(y.clientX,y.clientY);X&&(X.tagName==="circle"?V(X.id):X.tagName==="rect"&&ve(X.id))}function V(y){const X=U.getRouter(parseInt(y));X&&(t(5,v=X),g.showModal())}function ve(y){const X=U.links.find(I=>y===I.id);X&&(t(6,p=X),E.showModal())}function fe(y){var I;y.preventDefault();const X=(I=y.dataTransfer)==null?void 0:I.getData("text/plain");if(X)switch(X){case"CE":U.createCE(se(y.clientX),re(y.clientY));break;case"LER":U.createLER(se(y.clientX),re(y.clientY));break;case"LSR":U.createLSR(se(y.clientX),re(y.clientY));break}}function se(y){return h?(y-h.getBoundingClientRect().left)*f.scale+f.x:y}function re(y){return h?(y-h.getBoundingClientRect().top)*f.scale+f.y:y}function ge(y){en.call(this,l,y)}function ke(y){Ee[y?"unshift":"push"](()=>{h=y,t(4,h)})}function Ue(y){v=y,t(5,v)}function xe(y){g=y,t(8,g)}function we(y){p=y,t(6,p)}function Fe(y){E=y,t(9,E)}return l.$$set=y=>{"$$scope"in y&&t(25,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(11,n={0:"move",1:i?"not-allowed":"grabbing",2:"grabbing",3:i?"not-allowed":"crosshair",4:"crosshair",5:"none"})},[i,f,u,d,h,v,p,c,g,E,F,n,r,a,k,P,B,H,Y,C,z,fe,se,re,j,s,o,ge,ke,Ue,xe,we,Fe]}class Xn extends he{constructor(e){super(),de(this,e,Yn,Vn,ce,{zoom:24},null,[-1,-1])}get zoom(){return this.$$.ctx[24]}}function Gn(l){let e,t,n,i;return{c(){e=L("button"),t=ne(l[0]),this.h()},l(r){e=R(r,"BUTTON",{style:!0,class:!0});var o=M(e);t=le(o,l[0]),o.forEach(m),this.h()},h(){b(e,"style",l[2]),b(e,"class","svelte-v6s8rg")},m(r,o){w(r,e,o),$(e,t),n||(i=Z(e,"click",function(){tn(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(r,[o]){l=r,o&1&&$e(t,l[0]),o&4&&b(e,"style",l[2])},i:_e,o:_e,d(r){r&&m(e),n=!1,i()}}}function qn(l,e,t){let{text:n}=e,{callback:i=()=>{}}=e,{style:r=void 0}=e;return l.$$set=o=>{"text"in o&&t(0,n=o.text),"callback"in o&&t(1,i=o.callback),"style"in o&&t(2,r=o.style)},[n,i,r]}class ze extends he{constructor(e){super(),de(this,e,qn,Gn,ce,{text:0,callback:1,style:2})}}function Wn(l){let e,t,n=l[0].address+"",i,r,o,s="â†’",a,f,u=l[1].address+"",_,d,k,h,v,p;return k=new ze({props:{text:"Play",callback:l[2]}}),v=new ze({props:{text:"Delete",callback:l[3]}}),{c(){e=L("div"),t=L("p"),i=ne(n),r=T(),o=L("p"),o.textContent=s,a=T(),f=L("p"),_=ne(u),d=T(),G(k.$$.fragment),h=T(),G(v.$$.fragment),this.h()},l(c){e=R(c,"DIV",{class:!0});var g=M(e);t=R(g,"P",{class:!0});var E=M(t);i=le(E,n),E.forEach(m),r=N(g),o=R(g,"P",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-1giyjq6"&&(o.textContent=s),a=N(g),f=R(g,"P",{class:!0});var F=M(f);_=le(F,u),F.forEach(m),d=N(g),q(k.$$.fragment,g),h=N(g),q(v.$$.fragment,g),g.forEach(m),this.h()},h(){b(t,"class","svelte-ikhsiz"),b(o,"class","svelte-ikhsiz"),b(f,"class","svelte-ikhsiz"),b(e,"class","svelte-ikhsiz")},m(c,g){w(c,e,g),$(e,t),$(t,i),$(e,r),$(e,o),$(e,a),$(e,f),$(f,_),$(e,d),W(k,e,null),$(e,h),W(v,e,null),p=!0},p(c,[g]){(!p||g&1)&&n!==(n=c[0].address+"")&&$e(i,n),(!p||g&2)&&u!==(u=c[1].address+"")&&$e(_,u)},i(c){p||(D(k.$$.fragment,c),D(v.$$.fragment,c),p=!0)},o(c){x(k.$$.fragment,c),x(v.$$.fragment,c),p=!1},d(c){c&&m(e),K(k),K(v)}}}function Kn(l,e,t){let{source:n}=e,{destination:i}=e;function r(){U.addPacket(n,i)}function o(){confirm("Are you sure you want to delete this LSP?")&&(n.deleteEntry(i.address),U.notify())}return l.$$set=s=>{"source"in s&&t(0,n=s.source),"destination"in s&&t(1,i=s.destination)},[n,i,r,o]}class Jn extends he{constructor(e){super(),de(this,e,Kn,Wn,ce,{source:0,destination:1})}}function Pt(l,e,t){const n=l.slice();return n[2]=e[t],n}function Bt(l,e,t){const n=l.slice();return n[5]=e[t][0],n}function Tt(l){let e,t;return e=new Jn({props:{source:l[2],destination:U.getSureCERouter(l[5])}}),{c(){G(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.source=n[2]),i&1&&(r.destination=U.getSureCERouter(n[5])),e.$set(r)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Nt(l){let e,t,n=ie([...l[2].firstHop]),i=[];for(let o=0;o<n.length;o+=1)i[o]=Tt(Bt(l,n,o));const r=o=>x(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=ue()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=ue()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);w(o,e,s),t=!0},p(o,s){if(s&1){n=ie([...o[2].firstHop]);let a;for(a=0;a<n.length;a+=1){const f=Bt(o,n,a);i[a]?(i[a].p(f,s),D(i[a],1)):(i[a]=Tt(f),i[a].c(),D(i[a],1),i[a].m(e.parentNode,e))}for(me(),a=n.length;a<i.length;a+=1)r(a);be()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)D(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)x(i[s]);t=!1},d(o){o&&m(e),Se(i,o)}}}function Qn(l){let e,t,n=ie(l[0]),i=[];for(let o=0;o<n.length;o+=1)i[o]=Nt(Pt(l,n,o));const r=o=>x(i[o],1,1,()=>{i[o]=null});return{c(){e=L("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=R(o,"DIV",{class:!0});var s=M(e);for(let a=0;a<i.length;a+=1)i[a].l(s);s.forEach(m),this.h()},h(){b(e,"class","svelte-kwkmok")},m(o,s){w(o,e,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);t=!0},p(o,[s]){if(s&1){n=ie(o[0]);let a;for(a=0;a<n.length;a+=1){const f=Pt(o,n,a);i[a]?(i[a].p(f,s),D(i[a],1)):(i[a]=Nt(f),i[a].c(),D(i[a],1),i[a].m(e,null))}for(me(),a=n.length;a<i.length;a+=1)r(a);be()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)D(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)x(i[s]);t=!1},d(o){o&&m(e),Se(i,o)}}}function Zn(l,e,t){let n,i;return ye(l,U,r=>t(1,i=r)),l.$$.update=()=>{l.$$.dirty&2&&t(0,n=i.routers.filter(r=>r instanceof Ce))},[n,i]}class el extends he{constructor(e){super(),de(this,e,Zn,Qn,ce,{})}}function xt(l,e,t){const n=l.slice();return n[15]=e[t],n}function Ft(l){let e,t;const n=[l[15],{style:"padding: 10px 20px"}];let i={};for(let r=0;r<n.length;r+=1)i=Qe(i,n[r]);return e=new ze({props:i}),{c(){G(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,o){W(e,r,o),t=!0},p(r,o){const s=o&64?et(n,[tt(r[15]),n[1]]):{};e.$set(s)},i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){x(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function tl(l){let e,t,n,i,r,o,s,a="Packet Controls",f,u,_,d=l[2].packets.length+"",k,h,v,p,c,g,E,F,S=l[1].speedMultiplier.toFixed(1)+"",P,B,H,Y,A,C,j,z=l[1].maxPackets+"",V,ve,fe,se,re,ge,ke,Ue="Fallback to normal IP routing?",xe,we,Fe,y,X,I,O,qe,Ve=ie(l[6]),te=[];for(let J=0;J<Ve.length;J+=1)te[J]=Ft(xt(l,Ve,J));const on=J=>x(te[J],1,1,()=>{te[J]=null});return y=new el({}),{c(){e=L("div"),t=L("div"),i=T(),r=L("div"),o=L("div"),s=L("p"),s.textContent=a,f=T(),u=L("p"),_=ne("Count: "),k=ne(d),h=T(),v=L("div");for(let J=0;J<te.length;J+=1)te[J].c();p=T(),c=L("div"),g=L("div"),E=L("p"),F=ne("Speed Multiplier: "),P=ne(S),B=T(),H=L("input"),Y=T(),A=L("div"),C=L("p"),j=ne("Max Packets: "),V=ne(z),ve=T(),fe=L("input"),se=T(),re=L("div"),ge=L("label"),ke=L("p"),ke.textContent=Ue,xe=T(),we=L("input"),Fe=T(),G(y.$$.fragment),this.h()},l(J){e=R(J,"DIV",{id:!0,style:!0,class:!0});var ee=M(e);t=R(ee,"DIV",{id:!0,class:!0}),M(t).forEach(m),ee.forEach(m),i=N(J),r=R(J,"DIV",{id:!0,style:!0,class:!0});var oe=M(r);o=R(oe,"DIV",{id:!0,class:!0});var Le=M(o);s=R(Le,"P",{id:!0,class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-1cfybk8"&&(s.textContent=a),f=N(Le),u=R(Le,"P",{id:!0,class:!0});var nt=M(u);_=le(nt,"Count: "),k=le(nt,d),nt.forEach(m),h=N(Le),v=R(Le,"DIV",{id:!0,class:!0});var dt=M(v);for(let rt=0;rt<te.length;rt+=1)te[rt].l(dt);dt.forEach(m),p=N(Le),c=R(Le,"DIV",{class:!0});var Ye=M(c);g=R(Ye,"DIV",{class:!0});var We=M(g);E=R(We,"P",{class:!0});var lt=M(E);F=le(lt,"Speed Multiplier: "),P=le(lt,S),lt.forEach(m),B=N(We),H=R(We,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),We.forEach(m),Y=N(Ye),A=R(Ye,"DIV",{class:!0});var Ke=M(A);C=R(Ke,"P",{class:!0});var it=M(C);j=le(it,"Max Packets: "),V=le(it,z),it.forEach(m),ve=N(Ke),fe=R(Ke,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ke.forEach(m),se=N(Ye),re=R(Ye,"DIV",{class:!0});var pt=M(re);ge=R(pt,"LABEL",{class:!0});var Je=M(ge);ke=R(Je,"P",{class:!0,"data-svelte-h":!0}),ae(ke)!=="svelte-1re47ui"&&(ke.textContent=Ue),xe=N(Je),we=R(Je,"INPUT",{type:!0,class:!0}),Je.forEach(m),pt.forEach(m),Ye.forEach(m),Fe=N(Le),q(y.$$.fragment,Le),Le.forEach(m),oe.forEach(m),this.h()},h(){b(t,"id","resize-bar"),b(t,"class","svelte-1jfhuaz"),b(e,"id","visual-resize-bar"),b(e,"style",n=`width: ${l[0]?1:0}px`),b(e,"class","svelte-1jfhuaz"),b(s,"id","packet-controls-title"),b(s,"class","svelte-1jfhuaz"),b(u,"id","packet-controls-count"),b(u,"class","svelte-1jfhuaz"),b(v,"id","control-panel-buttons"),b(v,"class","svelte-1jfhuaz"),b(E,"class","svelte-1jfhuaz"),b(H,"type","range"),b(H,"min","0.1"),b(H,"max","2"),b(H,"step","0.001"),b(H,"class","svelte-1jfhuaz"),b(g,"class","input-box svelte-1jfhuaz"),b(C,"class","svelte-1jfhuaz"),b(fe,"type","range"),b(fe,"min","1"),b(fe,"max","500"),b(fe,"step","1"),b(fe,"class","svelte-1jfhuaz"),b(A,"class","input-box svelte-1jfhuaz"),b(ke,"class","svelte-1jfhuaz"),b(we,"type","checkbox"),b(we,"class","svelte-1jfhuaz"),b(ge,"class","svelte-1jfhuaz"),b(re,"class","input-box svelte-1jfhuaz"),b(c,"class","inputs svelte-1jfhuaz"),b(o,"id","control-panel-content"),b(o,"class","svelte-1jfhuaz"),b(r,"id","control-panel"),b(r,"style",X=`width: ${l[5]}px; transition: ${l[4]};`),b(r,"class","svelte-1jfhuaz")},m(J,ee){w(J,e,ee),$(e,t),l[9](t),w(J,i,ee),w(J,r,ee),$(r,o),$(o,s),$(o,f),$(o,u),$(u,_),$(u,k),$(o,h),$(o,v);for(let oe=0;oe<te.length;oe+=1)te[oe]&&te[oe].m(v,null);$(o,p),$(o,c),$(c,g),$(g,E),$(E,F),$(E,P),$(g,B),$(g,H),pe(H,l[1].speedMultiplier),$(c,Y),$(c,A),$(A,C),$(C,j),$(C,V),$(A,ve),$(A,fe),pe(fe,l[1].maxPackets),$(c,se),$(c,re),$(re,ge),$(ge,ke),$(ge,xe),$(ge,we),we.checked=l[1].enableFallback,$(o,Fe),W(y,o,null),I=!0,O||(qe=[Z(t,"pointerdown",l[7]),Z(H,"change",l[10]),Z(H,"input",l[10]),Z(fe,"change",l[11]),Z(fe,"input",l[11]),Z(we,"change",l[12])],O=!0)},p(J,[ee]){if((!I||ee&1&&n!==(n=`width: ${J[0]?1:0}px`))&&b(e,"style",n),(!I||ee&4)&&d!==(d=J[2].packets.length+"")&&$e(k,d),ee&64){Ve=ie(J[6]);let oe;for(oe=0;oe<Ve.length;oe+=1){const Le=xt(J,Ve,oe);te[oe]?(te[oe].p(Le,ee),D(te[oe],1)):(te[oe]=Ft(Le),te[oe].c(),D(te[oe],1),te[oe].m(v,null))}for(me(),oe=Ve.length;oe<te.length;oe+=1)on(oe);be()}(!I||ee&2)&&S!==(S=J[1].speedMultiplier.toFixed(1)+"")&&$e(P,S),ee&2&&pe(H,J[1].speedMultiplier),(!I||ee&2)&&z!==(z=J[1].maxPackets+"")&&$e(V,z),ee&2&&pe(fe,J[1].maxPackets),ee&2&&(we.checked=J[1].enableFallback),(!I||ee&48&&X!==(X=`width: ${J[5]}px; transition: ${J[4]};`))&&b(r,"style",X)},i(J){if(!I){for(let ee=0;ee<Ve.length;ee+=1)D(te[ee]);D(y.$$.fragment,J),I=!0}},o(J){te=te.filter(Boolean);for(let ee=0;ee<te.length;ee+=1)x(te[ee]);x(y.$$.fragment,J),I=!1},d(J){J&&(m(e),m(i),m(r)),l[9](null),Se(te,J),K(y),O=!1,Oe(qe)}}}function nl(l,e,t){let n,i,r,o,s,a;ye(l,Ae,g=>t(0,o=g)),ye(l,Te,g=>t(1,s=g)),ye(l,U,g=>t(2,a=g));let f,u="width 250ms";function _(g){o&&(t(4,u="none"),f.setPointerCapture(g.pointerId),f.addEventListener("pointermove",d),f.addEventListener("pointerup",k))}function d(g){t(5,r=window.innerWidth-g.clientX),r<=20&&t(5,r=0),r>=window.innerWidth-350&&t(5,r=window.innerWidth-350)}function k(g){f.removeEventListener("pointermove",d),f.removeEventListener("pointerup",k),f.releasePointerCapture(g.pointerId),t(4,u="width 250ms")}function h(g){Ee[g?"unshift":"push"](()=>{f=g,t(3,f)})}function v(){s.speedMultiplier=Be(this.value),Te.set(s)}function p(){s.maxPackets=Be(this.value),Te.set(s)}function c(){s.enableFallback=this.checked,Te.set(s)}return l.$$.update=()=>{l.$$.dirty&4&&t(8,n=a.routers.filter(g=>g instanceof Ce)),l.$$.dirty&258&&t(6,i=[{text:s.running?"Pause":"Resume",callback:()=>{Ie(Te,s.running=!s.running,s)}},{text:"Reset",callback:()=>{U.clearPackets()}},{text:"Play All",callback:()=>{for(const g of n)for(const[E]of g.firstHop)U.addPacket(g,U.getSureCERouter(E))}}]),l.$$.dirty&1&&t(5,r=o?350:0)},[o,s,a,f,u,r,i,_,n,h,v,p,c]}class ll extends he{constructor(e){super(),de(this,e,nl,tl,ce,{})}}function il(l){let e;return{c(){e=He("circle"),this.h()},l(t){e=Me(t,"circle",{r:!0,class:!0}),M(e).forEach(m),this.h()},h(){b(e,"r","5"),b(e,"class","svelte-rvo2j9"),_t(e,"labeled",l[0].label!==-1)},m(t,n){w(t,e,n),l[4](e)},p(t,[n]){n&1&&_t(e,"labeled",t[0].label!==-1)},i:_e,o:_e,d(t){t&&m(e),l[4](null)}}}function rl(l,e,t){let n;ye(l,Te,d=>t(3,n=d));let{packet:i}=e,r,o,s;function a(){const d=Math.sqrt((i.node.x-i.nextHop.node.x)**2+(i.node.y-i.nextHop.node.y)**2);r=Math.round(d/250*1e3)}function f(){a(),s&&(t(2,o=s.animate([{transform:`translate(${i.node.x}px, ${i.node.y}px)`},{transform:`translate(${i.nextHop.node.x}px, ${i.nextHop.node.y}px)`}],{duration:r,easing:"linear"})),t(2,o.onfinish=u,o))}function u(){t(0,i.node=i.nextHop.node,i);const d=i.nextHop;if(d===i.destination)return d.receivePacket(i);if(i.nextHop.receivePacket(i),i.validateNextHop(d))return f();i.fallbackRoute||(i.fallback(d),i.validateNextHop(d)&&f())}requestAnimationFrame(f);function _(d){Ee[d?"unshift":"push"](()=>{s=d,t(1,s)})}return l.$$set=d=>{"packet"in d&&t(0,i=d.packet)},l.$$.update=()=>{l.$$.dirty&12&&o&&t(2,o.playbackRate=n.speedMultiplier,o),l.$$.dirty&12&&o&&(n.running?o.play():o.pause())},[i,s,o,n,_]}class ol extends he{constructor(e){super(),de(this,e,rl,il,ce,{packet:0})}}function sl(l){let e,t,n,i,r,o,s,a,f=l[0].distance+"",u,_,d,k;return{c(){e=He("line"),t=T(),n=He("rect"),s=T(),a=He("text"),u=ne(f),_=ne(" km"),this.h()},l(h){e=Me(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),M(e).forEach(m),t=N(h),n=Me(h,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),M(n).forEach(m),s=N(h),a=Me(h,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var v=M(a);u=le(v,f),_=le(v," km"),v.forEach(m),this.h()},h(){b(e,"x1",l[4]),b(e,"y1",l[2]),b(e,"x2",l[3]),b(e,"y2",l[1]),b(n,"id",i=l[0].id),b(n,"x",r=l[5].x-at/2),b(n,"y",o=l[5].y-ut/2),b(n,"width",at),b(n,"height",ut),b(n,"class","svelte-zjn2k6"),b(a,"x",d=l[5].x),b(a,"y",k=l[5].y),b(a,"dominant-baseline","central"),b(a,"class","svelte-zjn2k6")},m(h,v){w(h,e,v),w(h,t,v),w(h,n,v),w(h,s,v),w(h,a,v),$(a,u),$(a,_)},p(h,[v]){v&16&&b(e,"x1",h[4]),v&4&&b(e,"y1",h[2]),v&8&&b(e,"x2",h[3]),v&2&&b(e,"y2",h[1]),v&1&&i!==(i=h[0].id)&&b(n,"id",i),v&32&&r!==(r=h[5].x-at/2)&&b(n,"x",r),v&32&&o!==(o=h[5].y-ut/2)&&b(n,"y",o),v&1&&f!==(f=h[0].distance+"")&&$e(u,f),v&32&&d!==(d=h[5].x)&&b(a,"x",d),v&32&&k!==(k=h[5].y)&&b(a,"y",k)},i:_e,o:_e,d(h){h&&(m(e),m(t),m(n),m(s),m(a))}}}const at=50,ut=20;function Ht(l,e){return(l+e)/2}function al(l,e,t){let n,i,r,o,s,{link:a}=e;return l.$$set=f=>{"link"in f&&t(0,a=f.link)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=a.source.node.x),l.$$.dirty&1&&t(3,i=a.target.node.x),l.$$.dirty&1&&t(2,r=a.source.node.y),l.$$.dirty&1&&t(1,o=a.target.node.y),l.$$.dirty&30&&t(5,s={x:Ht(n,i),y:Ht(r,o)})},[a,o,r,i,n,s]}class ul extends he{constructor(e){super(),de(this,e,al,sl,ce,{link:0})}}function fl(l){let e,t,n,i,r,o,s,a=l[0].node.label+"",f,u,_;return{c(){e=He("circle"),o=T(),s=He("text"),f=ne(a),this.h()},l(d){e=Me(d,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),M(e).forEach(m),o=N(d),s=Me(d,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var k=M(s);f=le(k,a),k.forEach(m),this.h()},h(){b(e,"id",t=l[0].id.toString()),b(e,"cx",n=l[0].node.x),b(e,"cy",i=l[0].node.y),b(e,"r","20"),b(e,"fill",r=l[1][l[0].type]),b(e,"class","svelte-17jcsko"),b(s,"x",u=l[0].node.x),b(s,"y",_=l[0].node.y),b(s,"dominant-baseline","central"),b(s,"font-size","smaller"),b(s,"class","svelte-17jcsko")},m(d,k){w(d,e,k),w(d,o,k),w(d,s,k),$(s,f)},p(d,[k]){k&1&&t!==(t=d[0].id.toString())&&b(e,"id",t),k&1&&n!==(n=d[0].node.x)&&b(e,"cx",n),k&1&&i!==(i=d[0].node.y)&&b(e,"cy",i),k&1&&r!==(r=d[1][d[0].type])&&b(e,"fill",r),k&1&&a!==(a=d[0].node.label+"")&&$e(f,a),k&1&&u!==(u=d[0].node.x)&&b(s,"x",u),k&1&&_!==(_=d[0].node.y)&&b(s,"y",_)},i:_e,o:_e,d(d){d&&(m(e),m(o),m(s))}}}function cl(l,e,t){let{router:n}=e;const i={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return l.$$set=r=>{"router"in r&&t(0,n=r.router)},[n,i]}class hl extends he{constructor(e){super(),de(this,e,cl,fl,ce,{router:0})}}function dl(l){let e,t,n,i;return{c(){e=L("div"),t=ne(l[0]),this.h()},l(r){e=R(r,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var o=M(e);t=le(o,l[0]),o.forEach(m),this.h()},h(){b(e,"draggable","true"),b(e,"role","button"),b(e,"tabindex","-1"),Xe(e,"background-color",l[1]),b(e,"class","svelte-dfkep2")},m(r,o){w(r,e,o),$(e,t),n||(i=[Z(e,"dragstart",l[2]),Z(e,"click",l[3])],n=!0)},p(r,[o]){o&1&&$e(t,r[0]),o&2&&Xe(e,"background-color",r[1])},i:_e,o:_e,d(r){r&&m(e),n=!1,Oe(i)}}}function pl(l,e,t){let n,i;ye(l,Re,u=>t(5,n=u)),ye(l,Ae,u=>t(6,i=u));let{text:r}=e,{type:o}=e,{color:s}=e;function a(u){var _;if(i){alert("Network is locked.");return}(_=u.dataTransfer)==null||_.setData("text/plain",o)}function f(){Ie(Re,n.placing=o,n)}return l.$$set=u=>{"text"in u&&t(0,r=u.text),"type"in u&&t(4,o=u.type),"color"in u&&t(1,s=u.color)},[r,s,a,f,o]}class _l extends he{constructor(e){super(),de(this,e,pl,dl,ce,{text:0,type:4,color:1})}}function Mt(l,e,t){const n=l.slice();return n[7]=e[t],n}function zt(l,e,t){const n=l.slice();return n[7]=e[t],n}function St(l,e,t){const n=l.slice();return n[10]=e[t],n}function gl(l){let e,t,n=ie(l[0]),i=[];for(let o=0;o<n.length;o+=1)i[o]=jt(Mt(l,n,o));const r=o=>x(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=ue()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=ue()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);w(o,e,s),t=!0},p(o,s){if(s&1){n=ie(o[0]);let a;for(a=0;a<n.length;a+=1){const f=Mt(o,n,a);i[a]?(i[a].p(f,s),D(i[a],1)):(i[a]=jt(f),i[a].c(),D(i[a],1),i[a].m(e.parentNode,e))}for(me(),a=n.length;a<i.length;a+=1)r(a);be()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)D(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)x(i[s]);t=!1},d(o){o&&m(e),Se(i,o)}}}function ml(l){let e,t,n,i=ie(l[4]),r=[];for(let u=0;u<i.length;u+=1)r[u]=At(St(l,i,u));const o=u=>x(r[u],1,1,()=>{r[u]=null});let s=ie(l[1]),a=[];for(let u=0;u<s.length;u+=1)a[u]=Ot(zt(l,s,u));const f=u=>x(a[u],1,1,()=>{a[u]=null});return{c(){for(let u=0;u<r.length;u+=1)r[u].c();e=T();for(let u=0;u<a.length;u+=1)a[u].c();t=ue()},l(u){for(let _=0;_<r.length;_+=1)r[_].l(u);e=N(u);for(let _=0;_<a.length;_+=1)a[_].l(u);t=ue()},m(u,_){for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(u,_);w(u,e,_);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(u,_);w(u,t,_),n=!0},p(u,_){if(_&16){i=ie(u[4]);let d;for(d=0;d<i.length;d+=1){const k=St(u,i,d);r[d]?(r[d].p(k,_),D(r[d],1)):(r[d]=At(k),r[d].c(),D(r[d],1),r[d].m(e.parentNode,e))}for(me(),d=i.length;d<r.length;d+=1)o(d);be()}if(_&2){s=ie(u[1]);let d;for(d=0;d<s.length;d+=1){const k=zt(u,s,d);a[d]?(a[d].p(k,_),D(a[d],1)):(a[d]=Ot(k),a[d].c(),D(a[d],1),a[d].m(t.parentNode,t))}for(me(),d=s.length;d<a.length;d+=1)f(d);be()}},i(u){if(!n){for(let _=0;_<i.length;_+=1)D(r[_]);for(let _=0;_<s.length;_+=1)D(a[_]);n=!0}},o(u){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)x(r[_]);a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)x(a[_]);n=!1},d(u){u&&(m(e),m(t)),Se(r,u),Se(a,u)}}}function jt(l){let e,t;const n=[l[7]];let i={};for(let r=0;r<n.length;r+=1)i=Qe(i,n[r]);return e=new ze({props:i}),{c(){G(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,o){W(e,r,o),t=!0},p(r,o){const s=o&1?et(n,[tt(r[7])]):{};e.$set(s)},i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){x(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function At(l){let e,t;const n=[l[10]];let i={};for(let r=0;r<n.length;r+=1)i=Qe(i,n[r]);return e=new _l({props:i}),{c(){G(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,o){W(e,r,o),t=!0},p(r,o){const s=o&16?et(n,[tt(r[10])]):{};e.$set(s)},i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){x(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Ot(l){let e,t;const n=[l[7]];let i={};for(let r=0;r<n.length;r+=1)i=Qe(i,n[r]);return e=new ze({props:i}),{c(){G(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,o){W(e,r,o),t=!0},p(r,o){const s=o&2?et(n,[tt(r[7])]):{};e.$set(s)},i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){x(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function bl(l){let e,t,n,i,r,o;e=new ze({props:{text:l[2]?"Edit":"Simulation",callback:l[6],style:`width: 100px; background-color: ${l[2]?"#3CB371":"#6495ED"};`}});const s=[ml,gl],a=[];function f(u,_){return u[2]?1:0}return n=f(l),i=a[n]=s[n](l),{c(){G(e.$$.fragment),t=T(),i.c(),r=ue()},l(u){q(e.$$.fragment,u),t=N(u),i.l(u),r=ue()},m(u,_){W(e,u,_),w(u,t,_),a[n].m(u,_),w(u,r,_),o=!0},p(u,[_]){const d={};_&4&&(d.text=u[2]?"Edit":"Simulation"),_&12&&(d.callback=u[6]),_&4&&(d.style=`width: 100px; background-color: ${u[2]?"#3CB371":"#6495ED"};`),e.$set(d);let k=n;n=f(u),n===k?a[n].p(u,_):(me(),x(a[k],1,1,()=>{a[k]=null}),be(),i=a[n],i?i.p(u,_):(i=a[n]=s[n](u),i.c()),D(i,1),i.m(r.parentNode,r))},i(u){o||(D(e.$$.fragment,u),D(i),o=!0)},o(u){x(e.$$.fragment,u),x(i),o=!1},d(u){u&&(m(t),m(r)),K(e,u),a[n].d(u)}}}function kl(l,e,t){let n,i,r,o,s;ye(l,U,u=>t(5,r=u)),ye(l,Ae,u=>t(2,o=u)),ye(l,Re,u=>t(3,s=u));const a=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],f=()=>{Ie(Ae,o=!o,o),Ie(Re,s.placing=null,s),U.clearPackets()};return l.$$.update=()=>{l.$$.dirty&32&&t(0,i=[{text:"Clear Tables",callback:()=>{confirm("Are you sure you want to clear the routing tables?")&&U.clearTables()}},{text:"Export",callback:()=>{const u={routers:r.routers.map(v=>{if(v instanceof Ce)return{...v,type:v.type,firstHop:Object.fromEntries(v.firstHop)};if(v instanceof Ne)return{...v,type:v.type,FIB:Object.fromEntries(v.FIB.map),LFIB:Object.fromEntries(v.LFIB.map)};if(v instanceof Ge)return{...v,type:v.type,LFIB:Object.fromEntries(v.LFIB.map)}}),links:r.links.map(v=>({...v,source:v.source.id,target:v.target.id}))},_=JSON.stringify(u,null,2),d=new Blob([_],{type:"application/json"}),k=window.URL.createObjectURL(d),h=document.createElement("a");h.href=k,h.download="network.json",h.click(),window.URL.revokeObjectURL(k)}}]),l.$$.dirty&1&&t(1,n=[{text:"Clear Network",callback:()=>{confirm("Are you sure you want to clear the network?")&&U.clear()}},{text:"Clear Links",callback:()=>{confirm("Are you sure you want to clear the links?")&&U.clearLinks()}},...i])},[i,n,o,s,a,r,f]}class vl extends he{constructor(e){super(),de(this,e,kl,bl,ce,{})}}function El(l){let e,t="Drag and drop routers to add them to the network.",n,i,r,o,s=`Instead of drag and drop, you can also click and hold shift while continuously clicking to add
    many routers.`,a,f,u,_,d=`Pressing 1, 2 or 3 will respectively select CE, LER or LSR, this works with the holding of shift
    to insert routers.`,k,h,v,p,c="Hold the shift key and drag routers to make links.",g,E,F,S,P="Hold the ctrl key and drag CE's to add destinations.",B,H,Y,A,C="Double click a router or link to configure it.",j,z,V,ve,fe="The clear button will delete the entire network.",se,re,ge,ke,Ue="The export button will download your network as a .json file",xe,we,Fe,y,X="Press Esc to close this popup.";return{c(){e=L("p"),e.textContent=t,n=T(),i=L("br"),r=T(),o=L("p"),o.textContent=s,a=T(),f=L("br"),u=T(),_=L("p"),_.textContent=d,k=T(),h=L("br"),v=T(),p=L("p"),p.textContent=c,g=T(),E=L("br"),F=T(),S=L("p"),S.textContent=P,B=T(),H=L("br"),Y=T(),A=L("p"),A.textContent=C,j=T(),z=L("br"),V=T(),ve=L("p"),ve.textContent=fe,se=T(),re=L("br"),ge=T(),ke=L("p"),ke.textContent=Ue,xe=T(),we=L("br"),Fe=T(),y=L("p"),y.textContent=X},l(I){e=R(I,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-bhocp0"&&(e.textContent=t),n=N(I),i=R(I,"BR",{}),r=N(I),o=R(I,"P",{"data-svelte-h":!0}),ae(o)!=="svelte-12tzi3f"&&(o.textContent=s),a=N(I),f=R(I,"BR",{}),u=N(I),_=R(I,"P",{"data-svelte-h":!0}),ae(_)!=="svelte-1gxe9lx"&&(_.textContent=d),k=N(I),h=R(I,"BR",{}),v=N(I),p=R(I,"P",{"data-svelte-h":!0}),ae(p)!=="svelte-ddjc2m"&&(p.textContent=c),g=N(I),E=R(I,"BR",{}),F=N(I),S=R(I,"P",{"data-svelte-h":!0}),ae(S)!=="svelte-33j76o"&&(S.textContent=P),B=N(I),H=R(I,"BR",{}),Y=N(I),A=R(I,"P",{"data-svelte-h":!0}),ae(A)!=="svelte-qvtprs"&&(A.textContent=C),j=N(I),z=R(I,"BR",{}),V=N(I),ve=R(I,"P",{"data-svelte-h":!0}),ae(ve)!=="svelte-vcl8s3"&&(ve.textContent=fe),se=N(I),re=R(I,"BR",{}),ge=N(I),ke=R(I,"P",{"data-svelte-h":!0}),ae(ke)!=="svelte-1ww5ij7"&&(ke.textContent=Ue),xe=N(I),we=R(I,"BR",{}),Fe=N(I),y=R(I,"P",{"data-svelte-h":!0}),ae(y)!=="svelte-1dvt5v1"&&(y.textContent=X)},m(I,O){w(I,e,O),w(I,n,O),w(I,i,O),w(I,r,O),w(I,o,O),w(I,a,O),w(I,f,O),w(I,u,O),w(I,_,O),w(I,k,O),w(I,h,O),w(I,v,O),w(I,p,O),w(I,g,O),w(I,E,O),w(I,F,O),w(I,S,O),w(I,B,O),w(I,H,O),w(I,Y,O),w(I,A,O),w(I,j,O),w(I,z,O),w(I,V,O),w(I,ve,O),w(I,se,O),w(I,re,O),w(I,ge,O),w(I,ke,O),w(I,xe,O),w(I,we,O),w(I,Fe,O),w(I,y,O)},p:_e,d(I){I&&(m(e),m(n),m(i),m(r),m(o),m(a),m(f),m(u),m(_),m(k),m(h),m(v),m(p),m(g),m(E),m(F),m(S),m(B),m(H),m(Y),m(A),m(j),m(z),m(V),m(ve),m(se),m(re),m(ge),m(ke),m(xe),m(we),m(Fe),m(y))}}}function yl(l){let e,t,n,i,r,o;t=new ze({props:{text:"Help",callback:l[1]}});function s(f){l[2](f)}let a={$$slots:{default:[El]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.dialog=l[0]),i=new ht({props:a}),Ee.push(()=>Pe(i,"dialog",s)),{c(){e=L("div"),G(t.$$.fragment),n=T(),G(i.$$.fragment)},l(f){e=R(f,"DIV",{});var u=M(e);q(t.$$.fragment,u),u.forEach(m),n=N(f),q(i.$$.fragment,f)},m(f,u){w(f,e,u),W(t,e,null),w(f,n,u),W(i,f,u),o=!0},p(f,[u]){const _={};u&1&&(_.callback=f[1]),t.$set(_);const d={};u&8&&(d.$$scope={dirty:u,ctx:f}),!r&&u&1&&(r=!0,d.dialog=f[0],De(()=>r=!1)),i.$set(d)},i(f){o||(D(t.$$.fragment,f),D(i.$$.fragment,f),o=!0)},o(f){x(t.$$.fragment,f),x(i.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),K(t),K(i,f)}}}function wl(l,e,t){let n;const i=()=>{n.showModal()};function r(o){n=o,t(0,n)}return[n,i,r]}class $l extends he{constructor(e){super(),de(this,e,wl,yl,ce,{})}}function Cl(l){let e,t,n,i,r,o;return e=new ze({props:{text:" - ",callback:l[1]}}),n=new ze({props:{text:"Fullscreen",callback:l[2]}}),r=new ze({props:{text:" + ",callback:l[3]}}),{c(){G(e.$$.fragment),t=T(),G(n.$$.fragment),i=T(),G(r.$$.fragment)},l(s){q(e.$$.fragment,s),t=N(s),q(n.$$.fragment,s),i=N(s),q(r.$$.fragment,s)},m(s,a){W(e,s,a),w(s,t,a),W(n,s,a),w(s,i,a),W(r,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.callback=s[1]),e.$set(f);const u={};a&1&&(u.callback=s[3]),r.$set(u)},i(s){o||(D(e.$$.fragment,s),D(n.$$.fragment,s),D(r.$$.fragment,s),o=!0)},o(s){x(e.$$.fragment,s),x(n.$$.fragment,s),x(r.$$.fragment,s),o=!1},d(s){s&&(m(t),m(i)),K(e,s),K(n,s),K(r,s)}}}function Ll(l,e,t){let{zoom:n}=e;const i=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,s)},r=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},o=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,s)};return l.$$set=s=>{"zoom"in s&&t(0,n=s.zoom)},[n,i,r,o]}class Rl extends he{constructor(e){super(),de(this,e,Ll,Cl,ce,{zoom:0})}}function Ut(l,e,t){const n=l.slice();return n[5]=e[t],n}function Vt(l,e,t){const n=l.slice();return n[8]=e[t],n}function Yt(l,e,t){const n=l.slice();return n[11]=e[t],n}function Xt(l,e){let t,n,i;return n=new ul({props:{link:e[11]}}),{key:l,first:null,c(){t=ue(),G(n.$$.fragment),this.h()},l(r){t=ue(),q(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){w(r,t,o),W(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.link=e[11]),n.$set(s)},i(r){i||(D(n.$$.fragment,r),i=!0)},o(r){x(n.$$.fragment,r),i=!1},d(r){r&&m(t),K(n,r)}}}function Gt(l,e){let t,n,i;return n=new hl({props:{router:e[8]}}),{key:l,first:null,c(){t=ue(),G(n.$$.fragment),this.h()},l(r){t=ue(),q(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){w(r,t,o),W(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.router=e[8]),n.$set(s)},i(r){i||(D(n.$$.fragment,r),i=!0)},o(r){x(n.$$.fragment,r),i=!1},d(r){r&&m(t),K(n,r)}}}function qt(l,e){let t,n,i;return n=new ol({props:{packet:e[5]}}),{key:l,first:null,c(){t=ue(),G(n.$$.fragment),this.h()},l(r){t=ue(),q(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){w(r,t,o),W(n,r,o),i=!0},p(r,o){e=r;const s={};o&2&&(s.packet=e[5]),n.$set(s)},i(r){i||(D(n.$$.fragment,r),i=!0)},o(r){x(n.$$.fragment,r),i=!1},d(r){r&&m(t),K(n,r)}}}function Il(l){let e=[],t=new Map,n,i=[],r=new Map,o,s=[],a=new Map,f,u,_=ie(l[1].links);const d=c=>c[11].id;for(let c=0;c<_.length;c+=1){let g=Yt(l,_,c),E=d(g);t.set(E,e[c]=Xt(E,g))}let k=ie(l[1].routers);const h=c=>c[8].id;for(let c=0;c<k.length;c+=1){let g=Vt(l,k,c),E=h(g);r.set(E,i[c]=Gt(E,g))}let v=ie(l[1].packets);const p=c=>c[5].id;for(let c=0;c<v.length;c+=1){let g=Ut(l,v,c),E=p(g);a.set(E,s[c]=qt(E,g))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=T();for(let c=0;c<i.length;c+=1)i[c].c();o=T();for(let c=0;c<s.length;c+=1)s[c].c();f=ue()},l(c){for(let g=0;g<e.length;g+=1)e[g].l(c);n=N(c);for(let g=0;g<i.length;g+=1)i[g].l(c);o=N(c);for(let g=0;g<s.length;g+=1)s[g].l(c);f=ue()},m(c,g){for(let E=0;E<e.length;E+=1)e[E]&&e[E].m(c,g);w(c,n,g);for(let E=0;E<i.length;E+=1)i[E]&&i[E].m(c,g);w(c,o,g);for(let E=0;E<s.length;E+=1)s[E]&&s[E].m(c,g);w(c,f,g),u=!0},p(c,g){g&2&&(_=ie(c[1].links),me(),e=st(e,g,d,1,c,_,t,n.parentNode,ot,Xt,n,Yt),be()),g&2&&(k=ie(c[1].routers),me(),i=st(i,g,h,1,c,k,r,o.parentNode,ot,Gt,o,Vt),be()),g&2&&(v=ie(c[1].packets),me(),s=st(s,g,p,1,c,v,a,f.parentNode,ot,qt,f,Ut),be())},i(c){if(!u){for(let g=0;g<_.length;g+=1)D(e[g]);for(let g=0;g<k.length;g+=1)D(i[g]);for(let g=0;g<v.length;g+=1)D(s[g]);u=!0}},o(c){for(let g=0;g<e.length;g+=1)x(e[g]);for(let g=0;g<i.length;g+=1)x(i[g]);for(let g=0;g<s.length;g+=1)x(s[g]);u=!1},d(c){c&&(m(n),m(o),m(f));for(let g=0;g<e.length;g+=1)e[g].d(c);for(let g=0;g<i.length;g+=1)i[g].d(c);for(let g=0;g<s.length;g+=1)s[g].d(c)}}}function Dl(l){let e,t,n,i,r,o,s,a,f,u,_,d,k,h,v,p,c;function g(P){l[2](P)}let E={$$slots:{default:[Il]},$$scope:{ctx:l}};l[0]!==void 0&&(E.zoom=l[0]),n=new Xn({props:E}),Ee.push(()=>Pe(n,"zoom",g)),s=new vl({}),u=new $l({});function F(P){l[3](P)}let S={};return l[0]!==void 0&&(S.zoom=l[0]),k=new Rl({props:S}),Ee.push(()=>Pe(k,"zoom",F)),p=new ll({}),{c(){e=L("div"),t=L("div"),G(n.$$.fragment),r=T(),o=L("div"),G(s.$$.fragment),a=T(),f=L("div"),G(u.$$.fragment),_=T(),d=L("div"),G(k.$$.fragment),v=T(),G(p.$$.fragment),this.h()},l(P){e=R(P,"DIV",{id:!0,class:!0});var B=M(e);t=R(B,"DIV",{id:!0,class:!0});var H=M(t);q(n.$$.fragment,H),r=N(H),o=R(H,"DIV",{id:!0,class:!0});var Y=M(o);q(s.$$.fragment,Y),Y.forEach(m),a=N(H),f=R(H,"DIV",{id:!0,class:!0});var A=M(f);q(u.$$.fragment,A),A.forEach(m),_=N(H),d=R(H,"DIV",{id:!0,class:!0});var C=M(d);q(k.$$.fragment,C),C.forEach(m),H.forEach(m),v=N(B),q(p.$$.fragment,B),B.forEach(m),this.h()},h(){b(o,"id","top-left-bar"),b(o,"class","absolute-flex svelte-1kpnzxr"),b(f,"id","bottom-left-bar"),b(f,"class","absolute-flex svelte-1kpnzxr"),b(d,"id","bottom-right-bar"),b(d,"class","absolute-flex svelte-1kpnzxr"),b(t,"id","network"),b(t,"class","svelte-1kpnzxr"),b(e,"id","mpls"),b(e,"class","svelte-1kpnzxr")},m(P,B){w(P,e,B),$(e,t),W(n,t,null),$(t,r),$(t,o),W(s,o,null),$(t,a),$(t,f),W(u,f,null),$(t,_),$(t,d),W(k,d,null),$(e,v),W(p,e,null),c=!0},p(P,[B]){const H={};B&16386&&(H.$$scope={dirty:B,ctx:P}),!i&&B&1&&(i=!0,H.zoom=P[0],De(()=>i=!1)),n.$set(H);const Y={};!h&&B&1&&(h=!0,Y.zoom=P[0],De(()=>h=!1)),k.$set(Y)},i(P){c||(D(n.$$.fragment,P),D(s.$$.fragment,P),D(u.$$.fragment,P),D(k.$$.fragment,P),D(p.$$.fragment,P),c=!0)},o(P){x(n.$$.fragment,P),x(s.$$.fragment,P),x(u.$$.fragment,P),x(k.$$.fragment,P),x(p.$$.fragment,P),c=!1},d(P){P&&m(e),K(n),K(s),K(u),K(k),K(p)}}}function Pl(l,e,t){let n,i;ye(l,Te,a=>t(4,n=a)),ye(l,U,a=>t(1,i=a));let r;nn(()=>{window.addEventListener("visibilitychanged",()=>{Ie(Te,n.running=!document.hidden,n)})});function o(a){r=a,t(0,r)}function s(a){r=a,t(0,r)}return[r,i,o,s]}class Bl extends he{constructor(e){super(),de(this,e,Pl,Dl,ce,{})}}function Tl(l){let e,t;return e=new Bl({}),{c(){G(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p:_e,i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}class Ol extends he{constructor(e){super(),de(this,e,null,Tl,ce,{})}}export{Ol as component};
