var $r=Object.defineProperty;var Lr=(n,e,t)=>e in n?$r(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ae=(n,e,t)=>(Lr(n,typeof e!="symbol"?e+"":e,t),t);import{r as ht,x as ur,s as we,a as cr,u as dr,g as fr,b as hr,y as pr,e as Se,i as mr,n as Te,z as He,c as Pe,o as _r,A as ze,B as nn}from"../chunks/scheduler.DYvwBUv9.js";import{n as O,m as L,S as xe,i as Ee,e as T,c as R,a as Z,d as g,l as y,g as x,z as le,t as fe,b as he,h as E,j as Ze,s as P,v as te,A as ye,f as D,w as ne,x as re,r as Ie,p as $e,B as it,y as se,C as Ce,D as Ue,E as Fe,o as be,q as Et,F as Qe,G as et,H as Nr,I as Tn}from"../chunks/index.CEZ_BoqP.js";import{w as rn}from"../chunks/index.DX-KyX9r.js";function pe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function fn(n,e){O(n,1,1,()=>{e.delete(n.key)})}function hn(n,e,t,r,s,i,a,o,l,c,u,h){let p=n.length,v=i.length,f=p;const b={};for(;f--;)b[n[f].key]=f;const m=[],d=new Map,_=new Map,k=[];for(f=v;f--;){const S=h(s,i,f),B=t(S);let X=a.get(B);X?r&&k.push(()=>X.p(S,e)):(X=c(B,S),X.c()),d.set(B,m[f]=X),B in b&&_.set(B,Math.abs(f-b[B]))}const j=new Set,H=new Set;function N(S){L(S,1),S.m(o,u),a.set(S.key,S),u=S.first,v--}for(;p&&v;){const S=m[v-1],B=n[p-1],X=S.key,V=B.key;S===B?(u=S.first,p--,v--):d.has(V)?!a.has(X)||j.has(X)?N(S):H.has(V)?p--:_.get(X)>_.get(V)?(H.add(X),N(S)):(j.add(V),p--):(l(B,a),p--)}for(;p--;){const S=n[p];d.has(S.key)||l(S,a)}for(;v;)N(m[v-1]);return ht(k),m}function sn(n,e){const t={},r={},s={$$scope:1};let i=n.length;for(;i--;){const a=n[i],o=e[i];if(o){for(const l in a)l in o||(r[l]=1);for(const l in o)s[l]||(t[l]=o[l],s[l]=1);n[i]=o}else for(const l in a)s[l]=1}for(const a in r)a in t||(t[a]=void 0);return t}function an(n){return typeof n=="object"&&n!==null?n:{}}const qe=rn({running:!0,enableFallback:!1,speedMultiplier:1,maxPackets:100});let Sr=class{constructor(e,t,r){ae(this,"bandwidth",0);this.id=e,this.source=t,this.target=r}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},kn=class{constructor(e,t){this.id=e,this.node=t}};class je extends kn{constructor(t,r,s){super(t,r);ae(this,"address",`CE-IP-${this.id}`);ae(this,"firstHop",new Map);ae(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});ae(this,"receiveEntry",(t,r)=>{this.firstHop.set(t,r)});ae(this,"updateAddress",(t,r)=>{const s=this.firstHop.get(t);if(s===void 0){alert(`Unable to update old first hop Address '${t}' to '${r}'.`);return}this.firstHop.set(r,s),this.firstHop.delete(t)});ae(this,"deleteEntry",t=>{this.firstHop.delete(t)});this.address=`CE-IP-${this.id}`,this.firstHop=s||new Map}receivePacket(t){t.drop("CE received packet. Dropping.")}clearTables(){this.firstHop.clear()}get type(){return"CE"}}let gr=class{constructor(e=void 0){ae(this,"map");ae(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});ae(this,"receiveEntry",(e,t,r)=>{this.map.set(e,{label:t,nextHop:r})});ae(this,"updateAddress",(e,t)=>{const r=this.map.get(e);if(r===void 0){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,r),this.map.delete(e)});ae(this,"deleteEntry",e=>{this.map.delete(e)});this.map=e||new Map}get(e){return this.map.get(e)}},qt=class{constructor(e=void 0){ae(this,"map");ae(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});ae(this,"receiveEntry",(e,t,r)=>{this.map.set(e,{outgoingLabel:t,nextHop:r})});ae(this,"updateLabel",(e,t)=>{const r=this.map.get(e);if(!r){alert(`Unable to update old LFIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,r),this.map.delete(e)});ae(this,"deleteEntry",e=>{this.map.delete(e)});this.map=e||new Map}get(e){return this.map.get(e)}};class Ve extends kn{constructor(t,r,s=void 0,i=void 0){super(t,r);ae(this,"FIB");ae(this,"LFIB");this.FIB=s||new gr,this.LFIB=i||new qt}receivePacket(t){var r,s,i,a;if(t.fallbackRoute)return t.fallback(this);if(t.label===-1){const o=t.destination,l=(r=this.FIB.get(o.address))==null?void 0:r.nextHop;if(!l)return t.fallback(this);const c=(s=this.FIB.get(o.address))==null?void 0:s.label;if(!c)return t.fallback(this);t.label=c;const u=U.getRouter(parseInt(l));if(!u)return t.fallback(this);t.nextHop=u}else{const o=(i=this.LFIB.get(t.label))==null?void 0:i.nextHop;if(!o)return t.fallback(this);const l=(a=this.LFIB.get(t.label))==null?void 0:a.outgoingLabel;if(!l)return t.fallback(this);t.label=l;const c=U.getCERouter(o);if(!c)return t.fallback(this);t.nextHop=c}t.decrementTTL()}clearTables(){this.FIB.map.clear(),this.LFIB.map.clear()}get type(){return"LER"}}function wn(n,e){const t=U.routers,r=t.length,s=new Array(r).fill(1/0),i=new Array(r).fill(!1),a=new Array(r).fill(null);s[t.indexOf(n)]=0;let o=!1,l=!1;for(;!o;){let h=null,p=1/0;for(const[v,f]of t.entries())if(!i[v]&&s[v]<p){if(f instanceof Ve){if(!l)l=!0;else if(!U.links.some(m=>m.source===f&&m.target===e||m.target===f&&m.source===e))continue}h=f,p=s[v]}if(!h||h.id===e.id){o=!0;continue}i[t.indexOf(h)]=!0;for(const v of U.links){let f;if(v.source===h)f=v.target;else if(v.target===h)f=v.source;else continue;const b=t.indexOf(f),m=p+v.distance;m<s[b]&&(s[b]=m,a[b]=h)}}const c=[];let u=e;for(;u;){c.unshift(u);const h=t.indexOf(u);u=a[h]}return c}let Pr=class{constructor(e,t,r,s){ae(this,"ttl",32);ae(this,"label",-1);ae(this,"fallbackRoute");ae(this,"nextHop");this.id=e,this.source=t,this.destination=r,this.node=s;const i=t.firstHop.get(r.address);if(!i){this.drop("No next hop router id found.");return}const a=U.getRouter(i);if(!a){this.drop("No next hop router found.");return}this.nextHop=a}decrementTTL(){--this.ttl<=0&&this.drop()}fallback(e){if(!ur(qe).enableFallback)return this.drop("Fallback is disabled.");if(this.label=-1,this.decrementTTL(),this.fallbackRoute)return this.setFallbackNextHop();if(this.fallbackRoute=wn(e,this.destination),!(this.fallbackRoute[this.fallbackRoute.length-1]instanceof je))return this.drop("The destination is not a CE.");this.fallbackRoute.shift(),this.setFallbackNextHop()}validateNextHop(e){return U.doesLinkExist({source:e,target:this.nextHop})||U.doesLinkExist({source:this.nextHop,target:e})}setFallbackNextHop(){var t;const e=(t=this.fallbackRoute)==null?void 0:t.shift();this.fallbackRoute&&e?this.nextHop=e:this.drop("Unable to set fallback IP routing next hop")}drop(e="Unknown"){console.warn("Packet dropped: ",e),U.deletePacket(this.id)}};class gt extends kn{constructor(t,r,s=void 0){super(t,r);ae(this,"LFIB",new qt);this.LFIB=s||new qt}receivePacket(t){var a,o;if(t.fallbackRoute)return t.fallback(this);const r=(a=this.LFIB.get(t.label))==null?void 0:a.nextHop;if(!r)return t.fallback(this);const s=(o=this.LFIB.get(t.label))==null?void 0:o.outgoingLabel;if(!s)return t.fallback(this);t.label=s;const i=U.getRouter(parseInt(r));if(!i)return t.fallback(this);t.nextHop=i,t.decrementTTL()}clearTables(){this.LFIB.map.clear()}get type(){return"LSR"}}const Dr={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class Or{constructor(){ae(this,"store",rn({routers:[],links:[],packets:[]}));ae(this,"set",this.store.set);ae(this,"update",this.store.update);ae(this,"subscribe",this.store.subscribe);ae(this,"_routers",[]);ae(this,"_links",[]);ae(this,"_packets",[]);ae(this,"routerMap",new Map);ae(this,"CEMap",new Map);ae(this,"routerCounter",1);ae(this,"packetCounter",1);ae(this,"maxPackets",ur(qe).maxPackets);ae(this,"incrementRouterCount",()=>this.routerCounter++);qe.subscribe(e=>{this.maxPackets=e.maxPackets,this._packets=this._packets.slice(-this.maxPackets),this.notify()})}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!Dr[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new Sr(`${e.source.id}-${e.target.id}`,e.source,e.target);e.bandwidth!==void 0&&(t.bandwidth=e.bandwidth),this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const r=this.routerCounter++,s=new je(r,{label:`CE ${r}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}createLER(e,t){const r=this.routerCounter++,s=new Ve(r,{label:`LER ${r}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}createLSR(e,t){const r=this.routerCounter++,s=new gt(r,{label:`LSR ${r}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof je&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(r=>r.id!==e),this._links=this._links.filter(r=>r.source.id!==e&&r.target.id!==e),this.routerMap.delete(e),t instanceof je&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}getSureCERouter(e){const t=this.getCERouter(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){if(this._packets.length>=this.maxPackets)return;const r=new Pr(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(r),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearTables(){for(const e of this._routers)e.clearTables();this.notify()}clearLinks(){this._links=[],this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=1,this.packetCounter=1,this.notify()}notify(){this.store.set(this.networkState)}}const jr=new Or,U=jr;var ue;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return n.objectValues(a)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},n.find=(s,i)=>{for(const a of s)if(i(a))return a},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ue||(ue={}));var gn;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(gn||(gn={}));const M=ue.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lt=n=>{switch(typeof n){case"undefined":return M.undefined;case"string":return M.string;case"number":return isNaN(n)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(n)?M.array:n===null?M.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?M.promise:typeof Map<"u"&&n instanceof Map?M.map:typeof Set<"u"&&n instanceof Set?M.set:typeof Date<"u"&&n instanceof Date?M.date:M.object;default:return M.unknown}},$=ue.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Br=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class We extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(t(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ue.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}We.create=n=>new We(n);const It=(n,e)=>{let t;switch(n.code){case $.invalid_type:n.received===M.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case $.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,ue.jsonStringifyReplacer)}`;break;case $.unrecognized_keys:t=`Unrecognized key(s) in object: ${ue.joinValues(n.keys,", ")}`;break;case $.invalid_union:t="Invalid input";break;case $.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ue.joinValues(n.options)}`;break;case $.invalid_enum_value:t=`Invalid enum value. Expected ${ue.joinValues(n.options)}, received '${n.received}'`;break;case $.invalid_arguments:t="Invalid function arguments";break;case $.invalid_return_type:t="Invalid function return type";break;case $.invalid_date:t="Invalid date";break;case $.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:ue.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case $.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case $.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case $.custom:t="Invalid input";break;case $.invalid_intersection_types:t="Intersection results could not be merged";break;case $.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case $.not_finite:t="Number must be finite";break;default:t=e.defaultError,ue.assertNever(n)}return{message:t}};let vr=It;function Zr(n){vr=n}function Yt(){return vr}const Wt=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],a={...s,path:i};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:e,defaultError:o}).message;return{...s,path:i,message:s.message||o}},Mr=[];function A(n,e){const t=Wt({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Yt(),It].filter(r=>!!r)});n.common.issues.push(t)}class De{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return J;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t)r.push({key:await s.key,value:await s.value});return De.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return J;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const J=Object.freeze({status:"aborted"}),yr=n=>({status:"dirty",value:n}),Be=n=>({status:"valid",value:n}),vn=n=>n.status==="aborted",yn=n=>n.status==="dirty",$t=n=>n.status==="valid",Gt=n=>typeof Promise<"u"&&n instanceof Promise;var q;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(q||(q={}));class nt{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Rn=(n,e)=>{if($t(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new We(n.common.issues);return this._error=t,this._error}}};function K(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:r??o.defaultError}:{message:t??o.defaultError},description:s}}class ee{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return lt(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:lt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new De,ctx:{common:e.parent.common,data:e.data,parsedType:lt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Gt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lt(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Rn(s,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lt(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Gt(s)?s:Promise.resolve(s));return Rn(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:$.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Xe({schema:this,typeName:W.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return st.create(this,this._def)}nullable(){return bt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ge.create(this,this._def)}promise(){return Tt.create(this,this._def)}or(e){return Pt.create([this,e],this._def)}and(e){return Dt.create(this,e,this._def)}transform(e){return new Xe({...K(this._def),schema:this,typeName:W.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Mt({...K(this._def),innerType:this,defaultValue:t,typeName:W.ZodDefault})}brand(){return new kr({typeName:W.ZodBranded,type:this,...K(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Qt({...K(this._def),innerType:this,catchValue:t,typeName:W.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return At.create(this,e)}readonly(){return tn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ar=/^c[^\s-]{8,}$/i,zr=/^[a-z][a-z0-9]*$/,Hr=/^[0-9A-HJKMNP-TV-Z]{26}$/,Fr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vr=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ur="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let pn;const qr=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Yr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Wr=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Gr(n,e){return!!((e==="v4"||!e)&&qr.test(n)||(e==="v6"||!e)&&Yr.test(n))}class Ye extends ee{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){const i=this._getOrReturnCtx(e);return A(i,{code:$.invalid_type,expected:M.string,received:i.parsedType}),J}const r=new De;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),A(s,{code:$.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),A(s,{code:$.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?A(s,{code:$.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&A(s,{code:$.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Vr.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"email",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")pn||(pn=new RegExp(Ur,"u")),pn.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"emoji",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Fr.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"uuid",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Ar.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"cuid",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")zr.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"cuid2",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Hr.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"ulid",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),A(s,{validation:"url",code:$.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"regex",code:$.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),A(s,{code:$.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),A(s,{code:$.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),A(s,{code:$.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Wr(i).test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{code:$.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Gr(e.data,i.version)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"ip",code:$.invalid_string,message:i.message}),r.dirty()):ue.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:$.invalid_string,...q.errToObj(r)})}_addCheck(e){return new Ye({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...q.errToObj(e)})}url(e){return this._addCheck({kind:"url",...q.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...q.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...q.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...q.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...q.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...q.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...q.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...q.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...q.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...q.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...q.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...q.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...q.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...q.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...q.errToObj(t)})}nonempty(e){return this.min(1,q.errToObj(e))}trim(){return new Ye({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ye({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ye({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ye.create=n=>{var e;return new Ye({checks:[],typeName:W.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...K(n)})};function Xr(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=parseInt(n.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class ut extends ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){const i=this._getOrReturnCtx(e);return A(i,{code:$.invalid_type,expected:M.number,received:i.parsedType}),J}let r;const s=new De;for(const i of this._def.checks)i.kind==="int"?ue.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),A(r,{code:$.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),A(r,{code:$.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),A(r,{code:$.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Xr(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),A(r,{code:$.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),A(r,{code:$.not_finite,message:i.message}),s.dirty()):ue.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,q.toString(t))}gt(e,t){return this.setLimit("min",e,!1,q.toString(t))}lte(e,t){return this.setLimit("max",e,!0,q.toString(t))}lt(e,t){return this.setLimit("max",e,!1,q.toString(t))}setLimit(e,t,r,s){return new ut({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:q.toString(s)}]})}_addCheck(e){return new ut({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:q.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:q.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:q.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:q.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:q.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ue.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ut.create=n=>new ut({checks:[],typeName:W.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...K(n)});class ct extends ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==M.bigint){const i=this._getOrReturnCtx(e);return A(i,{code:$.invalid_type,expected:M.bigint,received:i.parsedType}),J}let r;const s=new De;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),A(r,{code:$.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),A(r,{code:$.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),A(r,{code:$.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ue.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,q.toString(t))}gt(e,t){return this.setLimit("min",e,!1,q.toString(t))}lte(e,t){return this.setLimit("max",e,!0,q.toString(t))}lt(e,t){return this.setLimit("max",e,!1,q.toString(t))}setLimit(e,t,r,s){return new ct({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:q.toString(s)}]})}_addCheck(e){return new ct({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:q.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ct.create=n=>{var e;return new ct({checks:[],typeName:W.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...K(n)})};class Lt extends ee{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==M.boolean){const r=this._getOrReturnCtx(e);return A(r,{code:$.invalid_type,expected:M.boolean,received:r.parsedType}),J}return Be(e.data)}}Lt.create=n=>new Lt({typeName:W.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...K(n)});class vt extends ee{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){const i=this._getOrReturnCtx(e);return A(i,{code:$.invalid_type,expected:M.date,received:i.parsedType}),J}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return A(i,{code:$.invalid_date}),J}const r=new De;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),A(s,{code:$.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),A(s,{code:$.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ue.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:q.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:q.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}vt.create=n=>new vt({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:W.ZodDate,...K(n)});class Xt extends ee{_parse(e){if(this._getType(e)!==M.symbol){const r=this._getOrReturnCtx(e);return A(r,{code:$.invalid_type,expected:M.symbol,received:r.parsedType}),J}return Be(e.data)}}Xt.create=n=>new Xt({typeName:W.ZodSymbol,...K(n)});class Nt extends ee{_parse(e){if(this._getType(e)!==M.undefined){const r=this._getOrReturnCtx(e);return A(r,{code:$.invalid_type,expected:M.undefined,received:r.parsedType}),J}return Be(e.data)}}Nt.create=n=>new Nt({typeName:W.ZodUndefined,...K(n)});class St extends ee{_parse(e){if(this._getType(e)!==M.null){const r=this._getOrReturnCtx(e);return A(r,{code:$.invalid_type,expected:M.null,received:r.parsedType}),J}return Be(e.data)}}St.create=n=>new St({typeName:W.ZodNull,...K(n)});class Ct extends ee{constructor(){super(...arguments),this._any=!0}_parse(e){return Be(e.data)}}Ct.create=n=>new Ct({typeName:W.ZodAny,...K(n)});class _t extends ee{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Be(e.data)}}_t.create=n=>new _t({typeName:W.ZodUnknown,...K(n)});class at extends ee{_parse(e){const t=this._getOrReturnCtx(e);return A(t,{code:$.invalid_type,expected:M.never,received:t.parsedType}),J}}at.create=n=>new at({typeName:W.ZodNever,...K(n)});class Jt extends ee{_parse(e){if(this._getType(e)!==M.undefined){const r=this._getOrReturnCtx(e);return A(r,{code:$.invalid_type,expected:M.void,received:r.parsedType}),J}return Be(e.data)}}Jt.create=n=>new Jt({typeName:W.ZodVoid,...K(n)});class Ge extends ee{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==M.array)return A(t,{code:$.invalid_type,expected:M.array,received:t.parsedType}),J;if(s.exactLength!==null){const a=t.data.length>s.exactLength.value,o=t.data.length<s.exactLength.value;(a||o)&&(A(t,{code:a?$.too_big:$.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(A(t,{code:$.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(A(t,{code:$.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>s.type._parseAsync(new nt(t,a,t.path,o)))).then(a=>De.mergeArray(r,a));const i=[...t.data].map((a,o)=>s.type._parseSync(new nt(t,a,t.path,o)));return De.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Ge({...this._def,minLength:{value:e,message:q.toString(t)}})}max(e,t){return new Ge({...this._def,maxLength:{value:e,message:q.toString(t)}})}length(e,t){return new Ge({...this._def,exactLength:{value:e,message:q.toString(t)}})}nonempty(e){return this.min(1,e)}}Ge.create=(n,e)=>new Ge({type:n,minLength:null,maxLength:null,exactLength:null,typeName:W.ZodArray,...K(e)});function wt(n){if(n instanceof ge){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=st.create(wt(r))}return new ge({...n._def,shape:()=>e})}else return n instanceof Ge?new Ge({...n._def,type:wt(n.element)}):n instanceof st?st.create(wt(n.unwrap())):n instanceof bt?bt.create(wt(n.unwrap())):n instanceof rt?rt.create(n.items.map(e=>wt(e))):n}class ge extends ee{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ue.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==M.object){const c=this._getOrReturnCtx(e);return A(c,{code:$.invalid_type,expected:M.object,received:c.parsedType}),J}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof at&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const u=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new nt(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof at){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")o.length>0&&(A(s,{code:$.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const h=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new nt(s,h,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const h=await u.key;c.push({key:h,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>De.mergeObjectSync(r,c)):De.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return q.errToObj,new ge({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,i,a,o;const l=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,r).message)!==null&&a!==void 0?a:r.defaultError;return t.code==="unrecognized_keys"?{message:(o=q.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new ge({...this._def,unknownKeys:"strip"})}passthrough(){return new ge({...this._def,unknownKeys:"passthrough"})}extend(e){return new ge({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ge({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:W.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ge({...this._def,catchall:e})}pick(e){const t={};return ue.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ge({...this._def,shape:()=>t})}omit(e){const t={};return ue.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ge({...this._def,shape:()=>t})}deepPartial(){return wt(this)}partial(e){const t={};return ue.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new ge({...this._def,shape:()=>t})}required(e){const t={};return ue.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof st;)i=i._def.innerType;t[r]=i}}),new ge({...this._def,shape:()=>t})}keyof(){return br(ue.objectKeys(this.shape))}}ge.create=(n,e)=>new ge({shape:()=>n,unknownKeys:"strip",catchall:at.create(),typeName:W.ZodObject,...K(e)});ge.strictCreate=(n,e)=>new ge({shape:()=>n,unknownKeys:"strict",catchall:at.create(),typeName:W.ZodObject,...K(e)});ge.lazycreate=(n,e)=>new ge({shape:n,unknownKeys:"strip",catchall:at.create(),typeName:W.ZodObject,...K(e)});class Pt extends ee{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new We(o.ctx.common.issues));return A(t,{code:$.invalid_union,unionErrors:a}),J}if(t.common.async)return Promise.all(r.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const l of r){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new We(l));return A(t,{code:$.invalid_union,unionErrors:o}),J}}get options(){return this._def.options}}Pt.create=(n,e)=>new Pt({options:n,typeName:W.ZodUnion,...K(e)});const Ut=n=>n instanceof jt?Ut(n.schema):n instanceof Xe?Ut(n.innerType()):n instanceof Bt?[n.value]:n instanceof dt?n.options:n instanceof Zt?Object.keys(n.enum):n instanceof Mt?Ut(n._def.innerType):n instanceof Nt?[void 0]:n instanceof St?[null]:null;class on extends ee{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.object)return A(t,{code:$.invalid_type,expected:M.object,received:t.parsedType}),J;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(A(t,{code:$.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),J)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const a=Ut(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new on({typeName:W.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...K(r)})}}function bn(n,e){const t=lt(n),r=lt(e);if(n===e)return{valid:!0,data:n};if(t===M.object&&r===M.object){const s=ue.objectKeys(e),i=ue.objectKeys(n).filter(o=>s.indexOf(o)!==-1),a={...n,...e};for(const o of i){const l=bn(n[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(t===M.array&&r===M.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const a=n[i],o=e[i],l=bn(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===M.date&&r===M.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Dt extends ee{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(vn(i)||vn(a))return J;const o=bn(i.value,a.value);return o.valid?((yn(i)||yn(a))&&t.dirty(),{status:t.value,value:o.data}):(A(r,{code:$.invalid_intersection_types}),J)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Dt.create=(n,e,t)=>new Dt({left:n,right:e,typeName:W.ZodIntersection,...K(t)});class rt extends ee{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.array)return A(r,{code:$.invalid_type,expected:M.array,received:r.parsedType}),J;if(r.data.length<this._def.items.length)return A(r,{code:$.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),J;!this._def.rest&&r.data.length>this._def.items.length&&(A(r,{code:$.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new nt(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>De.mergeArray(t,a)):De.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new rt({...this._def,rest:e})}}rt.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new rt({items:n,typeName:W.ZodTuple,rest:null,...K(e)})};class Ot extends ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.object)return A(r,{code:$.invalid_type,expected:M.object,received:r.parsedType}),J;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in r.data)s.push({key:i._parse(new nt(r,o,r.path,o)),value:a._parse(new nt(r,r.data[o],r.path,o))});return r.common.async?De.mergeObjectAsync(t,s):De.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof ee?new Ot({keyType:e,valueType:t,typeName:W.ZodRecord,...K(r)}):new Ot({keyType:Ye.create(),valueType:e,typeName:W.ZodRecord,...K(t)})}}class Kt extends ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.map)return A(r,{code:$.invalid_type,expected:M.map,received:r.parsedType}),J;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:s._parse(new nt(r,o,r.path,[c,"key"])),value:i._parse(new nt(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return J;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return J;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}}}}Kt.create=(n,e,t)=>new Kt({valueType:e,keyType:n,typeName:W.ZodMap,...K(t)});class yt extends ee{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.set)return A(r,{code:$.invalid_type,expected:M.set,received:r.parsedType}),J;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(A(r,{code:$.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(A(r,{code:$.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function a(l){const c=new Set;for(const u of l){if(u.status==="aborted")return J;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const o=[...r.data.values()].map((l,c)=>i._parse(new nt(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,t){return new yt({...this._def,minSize:{value:e,message:q.toString(t)}})}max(e,t){return new yt({...this._def,maxSize:{value:e,message:q.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}yt.create=(n,e)=>new yt({valueType:n,minSize:null,maxSize:null,typeName:W.ZodSet,...K(e)});class xt extends ee{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.function)return A(t,{code:$.invalid_type,expected:M.function,received:t.parsedType}),J;function r(o,l){return Wt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Yt(),It].filter(c=>!!c),issueData:{code:$.invalid_arguments,argumentsError:l}})}function s(o,l){return Wt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Yt(),It].filter(c=>!!c),issueData:{code:$.invalid_return_type,returnTypeError:l}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Tt){const o=this;return Be(async function(...l){const c=new We([]),u=await o._def.args.parseAsync(l,i).catch(v=>{throw c.addIssue(r(l,v)),c}),h=await Reflect.apply(a,this,u);return await o._def.returns._def.type.parseAsync(h,i).catch(v=>{throw c.addIssue(s(h,v)),c})})}else{const o=this;return Be(function(...l){const c=o._def.args.safeParse(l,i);if(!c.success)throw new We([r(l,c.error)]);const u=Reflect.apply(a,this,c.data),h=o._def.returns.safeParse(u,i);if(!h.success)throw new We([s(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new xt({...this._def,args:rt.create(e).rest(_t.create())})}returns(e){return new xt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new xt({args:e||rt.create([]).rest(_t.create()),returns:t||_t.create(),typeName:W.ZodFunction,...K(r)})}}class jt extends ee{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}jt.create=(n,e)=>new jt({getter:n,typeName:W.ZodLazy,...K(e)});class Bt extends ee{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return A(t,{received:t.data,code:$.invalid_literal,expected:this._def.value}),J}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bt.create=(n,e)=>new Bt({value:n,typeName:W.ZodLiteral,...K(e)});function br(n,e){return new dt({values:n,typeName:W.ZodEnum,...K(e)})}class dt extends ee{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return A(t,{expected:ue.joinValues(r),received:t.parsedType,code:$.invalid_type}),J}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return A(t,{received:t.data,code:$.invalid_enum_value,options:r}),J}return Be(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return dt.create(e)}exclude(e){return dt.create(this.options.filter(t=>!e.includes(t)))}}dt.create=br;class Zt extends ee{_parse(e){const t=ue.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==M.string&&r.parsedType!==M.number){const s=ue.objectValues(t);return A(r,{expected:ue.joinValues(s),received:r.parsedType,code:$.invalid_type}),J}if(t.indexOf(e.data)===-1){const s=ue.objectValues(t);return A(r,{received:r.data,code:$.invalid_enum_value,options:s}),J}return Be(e.data)}get enum(){return this._def.values}}Zt.create=(n,e)=>new Zt({values:n,typeName:W.ZodNativeEnum,...K(e)});class Tt extends ee{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.promise&&t.common.async===!1)return A(t,{code:$.invalid_type,expected:M.promise,received:t.parsedType}),J;const r=t.parsedType===M.promise?t.data:Promise.resolve(t.data);return Be(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Tt.create=(n,e)=>new Tt({type:n,typeName:W.ZodPromise,...K(e)});class Xe extends ee{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===W.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{A(r,a),a.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:r.path,parent:r})):this._def.schema._parseSync({data:a,path:r.path,parent:r})}if(s.type==="refinement"){const a=o=>{const l=s.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?J:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?J:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$t(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>$t(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);ue.assertNever(s)}}Xe.create=(n,e,t)=>new Xe({schema:n,typeName:W.ZodEffects,effect:e,...K(t)});Xe.createWithPreprocess=(n,e,t)=>new Xe({schema:e,effect:{type:"preprocess",transform:n},typeName:W.ZodEffects,...K(t)});class st extends ee{_parse(e){return this._getType(e)===M.undefined?Be(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}st.create=(n,e)=>new st({innerType:n,typeName:W.ZodOptional,...K(e)});class bt extends ee{_parse(e){return this._getType(e)===M.null?Be(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bt.create=(n,e)=>new bt({innerType:n,typeName:W.ZodNullable,...K(e)});class Mt extends ee{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===M.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Mt.create=(n,e)=>new Mt({innerType:n,typeName:W.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...K(e)});class Qt extends ee{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gt(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new We(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new We(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Qt.create=(n,e)=>new Qt({innerType:n,typeName:W.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...K(e)});class en extends ee{_parse(e){if(this._getType(e)!==M.nan){const r=this._getOrReturnCtx(e);return A(r,{code:$.invalid_type,expected:M.nan,received:r.parsedType}),J}return{status:"valid",value:e.data}}}en.create=n=>new en({typeName:W.ZodNaN,...K(n)});const Jr=Symbol("zod_brand");class kr extends ee{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class At extends ee{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?J:i.status==="dirty"?(t.dirty(),yr(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?J:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new At({in:e,out:t,typeName:W.ZodPipeline})}}class tn extends ee{_parse(e){const t=this._def.innerType._parse(e);return $t(t)&&(t.value=Object.freeze(t.value)),t}}tn.create=(n,e)=>new tn({innerType:n,typeName:W.ZodReadonly,...K(e)});const wr=(n,e={},t)=>n?Ct.create().superRefine((r,s)=>{var i,a;if(!n(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(a=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...c,fatal:l})}}):Ct.create(),Kr={object:ge.lazycreate};var W;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(W||(W={}));const Qr=(n,e={message:`Input not instance of ${n.name}`})=>wr(t=>t instanceof n,e),xr=Ye.create,Er=ut.create,es=en.create,ts=ct.create,Cr=Lt.create,ns=vt.create,rs=Xt.create,ss=Nt.create,is=St.create,as=Ct.create,os=_t.create,ls=at.create,us=Jt.create,cs=Ge.create,ds=ge.create,fs=ge.strictCreate,hs=Pt.create,ps=on.create,ms=Dt.create,_s=rt.create,gs=Ot.create,vs=Kt.create,ys=yt.create,bs=xt.create,ks=jt.create,ws=Bt.create,xs=dt.create,Es=Zt.create,Cs=Tt.create,In=Xe.create,Ts=st.create,Rs=bt.create,Is=Xe.createWithPreprocess,$s=At.create,Ls=()=>xr().optional(),Ns=()=>Er().optional(),Ss=()=>Cr().optional(),Ps={string:n=>Ye.create({...n,coerce:!0}),number:n=>ut.create({...n,coerce:!0}),boolean:n=>Lt.create({...n,coerce:!0}),bigint:n=>ct.create({...n,coerce:!0}),date:n=>vt.create({...n,coerce:!0})},Ds=J;var oe=Object.freeze({__proto__:null,defaultErrorMap:It,setErrorMap:Zr,getErrorMap:Yt,makeIssue:Wt,EMPTY_PATH:Mr,addIssueToContext:A,ParseStatus:De,INVALID:J,DIRTY:yr,OK:Be,isAborted:vn,isDirty:yn,isValid:$t,isAsync:Gt,get util(){return ue},get objectUtil(){return gn},ZodParsedType:M,getParsedType:lt,ZodType:ee,ZodString:Ye,ZodNumber:ut,ZodBigInt:ct,ZodBoolean:Lt,ZodDate:vt,ZodSymbol:Xt,ZodUndefined:Nt,ZodNull:St,ZodAny:Ct,ZodUnknown:_t,ZodNever:at,ZodVoid:Jt,ZodArray:Ge,ZodObject:ge,ZodUnion:Pt,ZodDiscriminatedUnion:on,ZodIntersection:Dt,ZodTuple:rt,ZodRecord:Ot,ZodMap:Kt,ZodSet:yt,ZodFunction:xt,ZodLazy:jt,ZodLiteral:Bt,ZodEnum:dt,ZodNativeEnum:Zt,ZodPromise:Tt,ZodEffects:Xe,ZodTransformer:Xe,ZodOptional:st,ZodNullable:bt,ZodDefault:Mt,ZodCatch:Qt,ZodNaN:en,BRAND:Jr,ZodBranded:kr,ZodPipeline:At,ZodReadonly:tn,custom:wr,Schema:ee,ZodSchema:ee,late:Kr,get ZodFirstPartyTypeKind(){return W},coerce:Ps,any:as,array:cs,bigint:ts,boolean:Cr,date:ns,discriminatedUnion:ps,effect:In,enum:xs,function:bs,instanceof:Qr,intersection:ms,lazy:ks,literal:ws,map:vs,nan:es,nativeEnum:Es,never:ls,null:is,nullable:Rs,number:Er,object:ds,oboolean:Ss,onumber:Ns,optional:Ts,ostring:Ls,pipeline:$s,preprocess:Is,promise:Cs,record:gs,set:ys,strictObject:fs,string:xr,symbol:rs,transformer:In,tuple:_s,undefined:ss,union:hs,unknown:os,void:us,NEVER:Ds,ZodIssueCode:$,quotelessJson:Br,ZodError:We});const Os=[{id:1,node:{label:"CE 1",x:-351,y:-27},address:"CE-IP-1",firstHop:{"CE-IP-5":2,"CE-IP-6":2},type:"CE"},{id:2,node:{label:"LER 2",x:-198,y:-32},FIB:{"CE-IP-5":{label:306030,nextHop:"3"},"CE-IP-6":{label:61379,nextHop:"3"}},LFIB:{},type:"LER"},{id:3,node:{label:"LSR 3",x:-91,y:-33},LFIB:{61379:{outgoingLabel:974214,nextHop:"4"},306030:{outgoingLabel:349733,nextHop:"4"}},type:"LSR"},{id:4,node:{label:"LER 4",x:10,y:-35},FIB:{},LFIB:{349733:{outgoingLabel:-1,nextHop:"CE-IP-5"},974214:{outgoingLabel:-1,nextHop:"CE-IP-6"}},type:"LER"},{id:5,node:{label:"CE 5",x:128,y:-97},address:"CE-IP-5",firstHop:{},type:"CE"},{id:6,node:{label:"CE 6",x:119,y:23},address:"CE-IP-6",firstHop:{},type:"CE"}],js=[{bandwidth:0,id:"1-2",source:1,target:2},{bandwidth:0,id:"2-3",source:2,target:3},{bandwidth:0,id:"3-4",source:3,target:4},{bandwidth:0,id:"4-5",source:4,target:5},{bandwidth:0,id:"4-6",source:4,target:6}],Bs={routers:Os,links:js},Zs=oe.object({label:oe.string(),x:oe.number(),y:oe.number()}),Tr=oe.record(oe.coerce.number(),oe.object({outgoingLabel:oe.number(),nextHop:oe.string()})),Ms=oe.record(oe.string(),oe.object({label:oe.number(),nextHop:oe.string()})),As=oe.record(oe.number()),zs=oe.object({address:oe.string(),firstHop:As.or(oe.object({})),type:oe.literal("CE")}),Hs=oe.object({LFIB:Tr.or(oe.object({})),FIB:Ms.or(oe.object({})),type:oe.literal("LER")}),Fs=oe.object({LFIB:Tr.or(oe.object({})),type:oe.literal("LSR")}),Vs=oe.object({id:oe.number(),node:Zs}).and(oe.union([zs,Hs,Fs])),Us=oe.object({id:oe.string(),source:oe.number(),target:oe.number(),bandwidth:oe.number()}),qs=oe.object({routers:oe.array(Vs),links:oe.array(Us)}),Vt=qs.safeParse(Bs);function Ys(){if(!Vt.success)throw Vt.error;for(const n of Vt.data.routers)switch(U.incrementRouterCount(),n.type){case"LER":{n.LFIB;const e=$n(n.LFIB),t=Ws(n.FIB),r=new Ve(n.id,n.node,t,e);U.addRouter(r);break}case"LSR":{const e=$n(n.LFIB),t=new gt(n.id,n.node,e);U.addRouter(t);break}case"CE":{const e=Gs(n.firstHop),t=new je(n.id,n.node,e);U.addRouter(t);break}}for(const n of Vt.data.links){const e=U.getRouter(n.source),t=U.getRouter(n.target);e&&t&&U.addLink({source:e,target:t,bandwidth:n.bandwidth})}}function $n(n){const e=new Map;for(const[t,r]of Object.entries(n)){const s=parseInt(t,10),{outgoingLabel:i,nextHop:a}=r;e.set(s,{outgoingLabel:i,nextHop:a})}return new qt(e)}function Ws(n){const e=new Map;for(const[t,r]of Object.entries(n)){const{label:s,nextHop:i}=r;e.set(t,{label:s,nextHop:i})}return new gr(e)}function Gs(n){const e=new Map;for(const[t,r]of Object.entries(n))e.set(t,r);return e}const Xs={placing:null},Ae=rn(Xs),ft=rn(!1);function Js(n){let e,t,r,s;const i=n[2].default,a=cr(i,n,n[1],null);return{c(){e=T("dialog"),a&&a.c(),this.h()},l(o){e=R(o,"DIALOG",{class:!0});var l=Z(e);a&&a.l(l),l.forEach(g),this.h()},h(){y(e,"class","svelte-p5wejv")},m(o,l){x(o,e,l),a&&a.m(e,null),n[4](e),t=!0,r||(s=le(e,"close",n[3]),r=!0)},p(o,[l]){a&&a.p&&(!t||l&2)&&dr(a,i,o,o[1],t?hr(i,o[1],l,null):fr(o[1]),null)},i(o){t||(L(a,o),t=!0)},o(o){O(a,o),t=!1},d(o){o&&g(e),a&&a.d(o),n[4](null),r=!1,s()}}}function Ks(n,e,t){let{$$slots:r={},$$scope:s}=e,{dialog:i}=e;function a(l){pr.call(this,n,l)}function o(l){Se[l?"unshift":"push"](()=>{i=l,t(0,i)})}return n.$$set=l=>{"dialog"in l&&t(0,i=l.dialog),"$$scope"in l&&t(1,s=l.$$scope)},[i,s,r,a,o]}class xn extends xe{constructor(e){super(),Ee(this,e,Ks,Js,we,{dialog:0})}}const Ln=16,Qs=2**20-1;function Rr(n,e){const t=n[0];if(!(t instanceof je)){alert("The path does not start with a CE");return}const r=n[1];if(!(r instanceof Ve)){alert("The source CE is not directly connected to an LER");return}if(t.firstHop.set(e,r.id),r.FIB.get(e))return;const s=n.length-2,i=n[s];if(!(i instanceof Ve)){alert("Destination CE is not connected directly to a LER");return}let a=Nn(n[s]);i.LFIB.receiveEntry(a,-1,e);for(let o=n.length-2;o>0;o--){const l=n[o],c=n[o-1],u=a;a=Nn(l),c instanceof Ve?c.FIB.receiveEntry(e,u,l.id.toString()):c instanceof gt&&c.LFIB.receiveEntry(a,u,l.id.toString())}}function ei(n,e){return n instanceof gt||n instanceof Ve?n.LFIB.map.has(e):!1}function Nn(n){let e;do e=Math.floor(Math.random()*(Qs-Ln+1)+Ln);while(ei(n,e));return e}function ti(n){let e,t,r,s;return{c(){e=T("button"),t=fe(n[0]),this.h()},l(i){e=R(i,"BUTTON",{class:!0});var a=Z(e);t=he(a,n[0]),a.forEach(g),this.h()},h(){y(e,"class","svelte-17itt71")},m(i,a){x(i,e,a),E(e,t),r||(s=le(e,"click",function(){mr(n[1])&&n[1].apply(this,arguments)}),r=!0)},p(i,[a]){n=i,a&1&&Ze(t,n[0])},i:Te,o:Te,d(i){i&&g(e),r=!1,s()}}}function ni(n,e,t){let{text:r}=e,{callback:s}=e;return n.$$set=i=>{"text"in i&&t(0,r=i.text),"callback"in i&&t(1,s=i.callback)},[r,s]}class ot extends xe{constructor(e){super(),Ee(this,e,ni,ti,we,{text:0,callback:1})}}function Sn(n,e,t){const r=n.slice();return r[9]=e[t][0],r[10]=e[t][1],r}function Pn(n){let e,t,r,s,i,a,o,l,c,u,h,p,v,f,b,m,d,_;function k(...S){return n[5](n[9],...S)}function j(...S){return n[6](n[9],...S)}function H(){return n[7](n[9])}h=new ot({props:{text:"LDP",callback:H}});function N(){return n[8](n[9])}return f=new ot({props:{text:"-",callback:N}}),{c(){e=T("tr"),t=T("td"),r=T("input"),i=P(),a=T("td"),o=T("input"),c=P(),u=T("td"),te(h.$$.fragment),p=P(),v=T("td"),te(f.$$.fragment),b=P(),this.h()},l(S){e=R(S,"TR",{});var B=Z(e);t=R(B,"TD",{});var X=Z(t);r=R(X,"INPUT",{type:!0,placeholder:!0}),X.forEach(g),i=D(B),a=R(B,"TD",{});var V=Z(a);o=R(V,"INPUT",{type:!0,placeholder:!0}),V.forEach(g),c=D(B),u=R(B,"TD",{});var C=Z(u);ne(h.$$.fragment,C),C.forEach(g),p=D(B),v=R(B,"TD",{});var F=Z(v);ne(f.$$.fragment,F),F.forEach(g),b=D(B),B.forEach(g),this.h()},h(){y(r,"type","text"),r.value=s=n[9],y(r,"placeholder","Address"),y(o,"type","text"),o.value=l=n[10],y(o,"placeholder","Link")},m(S,B){x(S,e,B),E(e,t),E(t,r),E(e,i),E(e,a),E(a,o),E(e,c),E(e,u),re(h,u,null),E(e,p),E(e,v),re(f,v,null),E(e,b),m=!0,d||(_=[le(r,"change",k),le(o,"change",j)],d=!0)},p(S,B){n=S,(!m||B&1&&s!==(s=n[9])&&r.value!==s)&&(r.value=s),(!m||B&1&&l!==(l=n[10])&&o.value!==l)&&(o.value=l);const X={};B&1&&(X.callback=H),h.$set(X);const V={};B&1&&(V.callback=N),f.$set(V)},i(S){m||(L(h.$$.fragment,S),L(f.$$.fragment,S),m=!0)},o(S){O(h.$$.fragment,S),O(f.$$.fragment,S),m=!1},d(S){S&&g(e),se(h),se(f),d=!1,ht(_)}}}function ri(n){let e,t="Destinations:",r,s,i,a='<tr><th class="svelte-1d4gizi">Destination</th> <th class="svelte-1d4gizi">First hop</th> <th class="svelte-1d4gizi"></th> <th class="svelte-1d4gizi"></th></tr>',o,l,c,u,h,p,v=pe([...n[0].firstHop]),f=[];for(let m=0;m<v.length;m+=1)f[m]=Pn(Sn(n,v,m));const b=m=>O(f[m],1,1,()=>{f[m]=null});return h=new ot({props:{text:"+",callback:n[1](n[0].addEmptyEntry)}}),{c(){e=T("p"),e.textContent=t,r=P(),s=T("table"),i=T("thead"),i.innerHTML=a,o=P(),l=T("tbody");for(let m=0;m<f.length;m+=1)f[m].c();c=P(),u=T("div"),te(h.$$.fragment),this.h()},l(m){e=R(m,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-1ixmdgd"&&(e.textContent=t),r=D(m),s=R(m,"TABLE",{});var d=Z(s);i=R(d,"THEAD",{"data-svelte-h":!0}),ye(i)!=="svelte-1jq34m8"&&(i.innerHTML=a),o=D(d),l=R(d,"TBODY",{});var _=Z(l);for(let j=0;j<f.length;j+=1)f[j].l(_);_.forEach(g),d.forEach(g),c=D(m),u=R(m,"DIV",{class:!0});var k=Z(u);ne(h.$$.fragment,k),k.forEach(g),this.h()},h(){y(u,"class","svelte-1d4gizi")},m(m,d){x(m,e,d),x(m,r,d),x(m,s,d),E(s,i),E(s,o),E(s,l);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(l,null);x(m,c,d),x(m,u,d),re(h,u,null),p=!0},p(m,[d]){if(d&29){v=pe([...m[0].firstHop]);let k;for(k=0;k<v.length;k+=1){const j=Sn(m,v,k);f[k]?(f[k].p(j,d),L(f[k],1)):(f[k]=Pn(j),f[k].c(),L(f[k],1),f[k].m(l,null))}for(Ie(),k=v.length;k<f.length;k+=1)b(k);$e()}const _={};d&1&&(_.callback=m[1](m[0].addEmptyEntry)),h.$set(_)},i(m){if(!p){for(let d=0;d<v.length;d+=1)L(f[d]);L(h.$$.fragment,m),p=!0}},o(m){f=f.filter(Boolean);for(let d=0;d<f.length;d+=1)O(f[d]);O(h.$$.fragment,m),p=!1},d(m){m&&(g(e),g(r),g(s),g(c),g(u)),it(f,m),se(h)}}}function si(n,e,t){let{router:r}=e;function s(p){return()=>{p(),t(0,r)}}function i(p,v){if(!(p.target instanceof HTMLInputElement))return;const f=p.target.value.toUpperCase(),b=U.getCERouter(f);if(r.address===f){alert("Destination router cannot be the same as the source router.");return}if(!b){alert("Destination router not found.");return}r.updateAddress(v,f),t(0,r)}function a(p){const v=U.getCERouter(p);if(!v){alert("Destination router not found.");return}const f=wn(r,v);if(f.length<=1){alert("No path found");return}Rr(f,p),t(0,r)}function o(p,v){if(!(p.target instanceof HTMLInputElement))return;const f=parseInt(p.target.value);r.firstHop.set(v,f)}const l=(p,v)=>{i(v,p)},c=(p,v)=>{o(v,p)},u=p=>{a(p)},h=p=>{r.firstHop.delete(p),t(0,r)};return n.$$set=p=>{"router"in p&&t(0,r=p.router)},[r,s,i,a,o,l,c,u,h]}class ii extends xe{constructor(e){super(),Ee(this,e,si,ri,we,{router:0})}}function Dn(n,e,t){const r=n.slice();return r[7]=e[t][0],r[8]=e[t][1],r[9]=e,r[10]=t,r}function On(n){let e,t,r,s,i,a,o,l,c,u,h,p,v,f,b,m;function d(...H){return n[3](n[7],...H)}function _(){n[4].call(o,n[9],n[10])}function k(){n[5].call(u,n[9],n[10])}function j(){return n[6](n[7])}return p=new ot({props:{text:"-",callback:j}}),{c(){e=T("tr"),t=T("td"),r=T("input"),i=P(),a=T("td"),o=T("input"),l=P(),c=T("td"),u=T("input"),h=P(),te(p.$$.fragment),v=P(),this.h()},l(H){e=R(H,"TR",{});var N=Z(e);t=R(N,"TD",{});var S=Z(t);r=R(S,"INPUT",{type:!0}),S.forEach(g),i=D(N),a=R(N,"TD",{});var B=Z(a);o=R(B,"INPUT",{type:!0}),B.forEach(g),l=D(N),c=R(N,"TD",{});var X=Z(c);u=R(X,"INPUT",{type:!0}),X.forEach(g),h=D(N),ne(p.$$.fragment,N),v=D(N),N.forEach(g),this.h()},h(){y(r,"type","number"),r.value=s=n[7],y(o,"type","number"),y(u,"type","text")},m(H,N){x(H,e,N),E(e,t),E(t,r),E(e,i),E(e,a),E(a,o),Ce(o,n[8].outgoingLabel),E(e,l),E(e,c),E(c,u),Ce(u,n[8].nextHop),E(e,h),re(p,e,null),E(e,v),f=!0,b||(m=[le(r,"change",d),le(o,"input",_),le(u,"input",k)],b=!0)},p(H,N){n=H,(!f||N&1&&s!==(s=n[7])&&r.value!==s)&&(r.value=s),N&1&&Ue(o.value)!==n[8].outgoingLabel&&Ce(o,n[8].outgoingLabel),N&1&&u.value!==n[8].nextHop&&Ce(u,n[8].nextHop);const S={};N&1&&(S.callback=j),p.$set(S)},i(H){f||(L(p.$$.fragment,H),f=!0)},o(H){O(p.$$.fragment,H),f=!1},d(H){H&&g(e),se(p),b=!1,ht(m)}}}function ai(n){let e,t="LFIB:",r,s,i,a="<tr><th>Incoming</th> <th>Outgoing</th> <th>Next hop</th> <th></th></tr>",o,l,c,u,h,p,v=pe([...n[0].LFIB.map]),f=[];for(let m=0;m<v.length;m+=1)f[m]=On(Dn(n,v,m));const b=m=>O(f[m],1,1,()=>{f[m]=null});return h=new ot({props:{text:"+",callback:n[1](n[0].LFIB.addEmptyEntry)}}),{c(){e=T("p"),e.textContent=t,r=P(),s=T("table"),i=T("thead"),i.innerHTML=a,o=P(),l=T("tbody");for(let m=0;m<f.length;m+=1)f[m].c();c=P(),u=T("div"),te(h.$$.fragment),this.h()},l(m){e=R(m,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-5opw2d"&&(e.textContent=t),r=D(m),s=R(m,"TABLE",{});var d=Z(s);i=R(d,"THEAD",{"data-svelte-h":!0}),ye(i)!=="svelte-1fy2y89"&&(i.innerHTML=a),o=D(d),l=R(d,"TBODY",{});var _=Z(l);for(let j=0;j<f.length;j+=1)f[j].l(_);_.forEach(g),d.forEach(g),c=D(m),u=R(m,"DIV",{class:!0});var k=Z(u);ne(h.$$.fragment,k),k.forEach(g),this.h()},h(){y(u,"class","svelte-f8qi58")},m(m,d){x(m,e,d),x(m,r,d),x(m,s,d),E(s,i),E(s,o),E(s,l);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(l,null);x(m,c,d),x(m,u,d),re(h,u,null),p=!0},p(m,[d]){if(d&5){v=pe([...m[0].LFIB.map]);let k;for(k=0;k<v.length;k+=1){const j=Dn(m,v,k);f[k]?(f[k].p(j,d),L(f[k],1)):(f[k]=On(j),f[k].c(),L(f[k],1),f[k].m(l,null))}for(Ie(),k=v.length;k<f.length;k+=1)b(k);$e()}const _={};d&1&&(_.callback=m[1](m[0].LFIB.addEmptyEntry)),h.$set(_)},i(m){if(!p){for(let d=0;d<v.length;d+=1)L(f[d]);L(h.$$.fragment,m),p=!0}},o(m){f=f.filter(Boolean);for(let d=0;d<f.length;d+=1)O(f[d]);O(h.$$.fragment,m),p=!1},d(m){m&&(g(e),g(r),g(s),g(c),g(u)),it(f,m),se(h)}}}function oi(n,e,t){let{router:r}=e;function s(u){return()=>{u(),t(0,r)}}function i(u,h){if(!(u.target instanceof HTMLInputElement))return;const p=parseInt(u.target.value);r.LFIB.updateLabel(h,p)}const a=(u,h)=>{i(h,u)};function o(u,h){u[h][1].outgoingLabel=Ue(this.value),t(0,r)}function l(u,h){u[h][1].nextHop=this.value,t(0,r)}const c=u=>{r.LFIB.deleteEntry(u),t(0,r)};return n.$$set=u=>{"router"in u&&t(0,r=u.router)},[r,s,i,a,o,l,c]}class li extends xe{constructor(e){super(),Ee(this,e,oi,ai,we,{router:0})}}function jn(n,e,t){const r=n.slice();return r[7]=e[t][0],r[8]=e[t][1],r[9]=e,r[10]=t,r}function Bn(n){let e,t,r,s,i,a,o,l,c,u,h,p,v,f,b,m;function d(...H){return n[3](n[7],...H)}function _(){n[4].call(o,n[9],n[10])}function k(){n[5].call(u,n[9],n[10])}function j(){return n[6](n[7])}return p=new ot({props:{text:"-",callback:j}}),{c(){e=T("tr"),t=T("td"),r=T("input"),i=P(),a=T("td"),o=T("input"),l=P(),c=T("td"),u=T("input"),h=P(),te(p.$$.fragment),v=P(),this.h()},l(H){e=R(H,"TR",{});var N=Z(e);t=R(N,"TD",{});var S=Z(t);r=R(S,"INPUT",{type:!0}),S.forEach(g),i=D(N),a=R(N,"TD",{});var B=Z(a);o=R(B,"INPUT",{type:!0}),B.forEach(g),l=D(N),c=R(N,"TD",{});var X=Z(c);u=R(X,"INPUT",{type:!0}),X.forEach(g),h=D(N),ne(p.$$.fragment,N),v=D(N),N.forEach(g),this.h()},h(){y(r,"type","text"),r.value=s=n[7],y(o,"type","number"),y(u,"type","text")},m(H,N){x(H,e,N),E(e,t),E(t,r),E(e,i),E(e,a),E(a,o),Ce(o,n[8].label),E(e,l),E(e,c),E(c,u),Ce(u,n[8].nextHop),E(e,h),re(p,e,null),E(e,v),f=!0,b||(m=[le(r,"change",d),le(o,"input",_),le(u,"input",k)],b=!0)},p(H,N){n=H,(!f||N&1&&s!==(s=n[7])&&r.value!==s)&&(r.value=s),N&1&&Ue(o.value)!==n[8].label&&Ce(o,n[8].label),N&1&&u.value!==n[8].nextHop&&Ce(u,n[8].nextHop);const S={};N&1&&(S.callback=j),p.$set(S)},i(H){f||(L(p.$$.fragment,H),f=!0)},o(H){O(p.$$.fragment,H),f=!1},d(H){H&&g(e),se(p),b=!1,ht(m)}}}function ui(n){let e,t="FIB:",r,s,i,a="<tr><th>Address</th> <th>Label</th> <th>Next hop</th> <th></th></tr>",o,l,c,u,h,p,v=pe([...n[0].FIB.map]),f=[];for(let m=0;m<v.length;m+=1)f[m]=Bn(jn(n,v,m));const b=m=>O(f[m],1,1,()=>{f[m]=null});return h=new ot({props:{text:"+",callback:n[1](n[0].FIB.addEmptyEntry)}}),{c(){e=T("p"),e.textContent=t,r=P(),s=T("table"),i=T("thead"),i.innerHTML=a,o=P(),l=T("tbody");for(let m=0;m<f.length;m+=1)f[m].c();c=P(),u=T("div"),te(h.$$.fragment),this.h()},l(m){e=R(m,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-1j6bdhj"&&(e.textContent=t),r=D(m),s=R(m,"TABLE",{});var d=Z(s);i=R(d,"THEAD",{"data-svelte-h":!0}),ye(i)!=="svelte-1qhs6t7"&&(i.innerHTML=a),o=D(d),l=R(d,"TBODY",{});var _=Z(l);for(let j=0;j<f.length;j+=1)f[j].l(_);_.forEach(g),d.forEach(g),c=D(m),u=R(m,"DIV",{class:!0});var k=Z(u);ne(h.$$.fragment,k),k.forEach(g),this.h()},h(){y(u,"class","svelte-f8qi58")},m(m,d){x(m,e,d),x(m,r,d),x(m,s,d),E(s,i),E(s,o),E(s,l);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(l,null);x(m,c,d),x(m,u,d),re(h,u,null),p=!0},p(m,[d]){if(d&5){v=pe([...m[0].FIB.map]);let k;for(k=0;k<v.length;k+=1){const j=jn(m,v,k);f[k]?(f[k].p(j,d),L(f[k],1)):(f[k]=Bn(j),f[k].c(),L(f[k],1),f[k].m(l,null))}for(Ie(),k=v.length;k<f.length;k+=1)b(k);$e()}const _={};d&1&&(_.callback=m[1](m[0].FIB.addEmptyEntry)),h.$set(_)},i(m){if(!p){for(let d=0;d<v.length;d+=1)L(f[d]);L(h.$$.fragment,m),p=!0}},o(m){f=f.filter(Boolean);for(let d=0;d<f.length;d+=1)O(f[d]);O(h.$$.fragment,m),p=!1},d(m){m&&(g(e),g(r),g(s),g(c),g(u)),it(f,m),se(h)}}}function ci(n,e,t){let{router:r}=e;function s(u){return()=>{u(),t(0,r)}}function i(u,h){if(!(u.target instanceof HTMLInputElement))return;const p=u.target.value;r.FIB.updateAddress(h,p)}const a=(u,h)=>{i(h,u)};function o(u,h){u[h][1].label=Ue(this.value),t(0,r)}function l(u,h){u[h][1].nextHop=this.value,t(0,r)}const c=u=>{r.FIB.deleteEntry(u),t(0,r)};return n.$$set=u=>{"router"in u&&t(0,r=u.router)},[r,s,i,a,o,l,c]}class di extends xe{constructor(e){super(),Ee(this,e,ci,ui,we,{router:0})}}function fi(n){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=T("p"),e.textContent=t},l(r){e=R(r,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-1214eal"&&(e.textContent=t)},m(r,s){x(r,e,s)},p:Te,i:Te,o:Te,d(r){r&&g(e)}}}function hi(n){let e,t,r,s,i,a,o,l,c,u,h,p,v,f,b=n[0].id+"",m,d,_,k,j,H,N,S,B,X,V=n[0]instanceof je&&Zn(n),C=n[0]instanceof Ve&&Mn(n),F=(n[0]instanceof Ve||n[0]instanceof gt)&&An(n);return N=new ot({props:{text:"Delete Router",callback:n[3]}}),{c(){e=T("div"),t=T("div"),r=T("label"),s=fe(`Label:
          `),i=T("input"),a=P(),o=T("label"),l=fe(`Position:
        `),c=T("input"),u=P(),h=T("input"),p=P(),v=T("p"),f=fe("ID: "),m=fe(b),d=P(),V&&V.c(),_=P(),C&&C.c(),k=P(),F&&F.c(),j=P(),H=T("div"),te(N.$$.fragment),this.h()},l(z){e=R(z,"DIV",{});var G=Z(e);t=R(G,"DIV",{});var Ne=Z(t);r=R(Ne,"LABEL",{});var ke=Z(r);s=he(ke,`Label:
          `),i=R(ke,"INPUT",{type:!0,class:!0}),ke.forEach(g),Ne.forEach(g),a=D(G),o=R(G,"LABEL",{});var ve=Z(o);l=he(ve,`Position:
        `),c=R(ve,"INPUT",{type:!0,class:!0}),u=D(ve),h=R(ve,"INPUT",{type:!0,class:!0}),ve.forEach(g),p=D(G),v=R(G,"P",{});var me=Z(v);f=he(me,"ID: "),m=he(me,b),me.forEach(g),G.forEach(g),d=D(z),V&&V.l(z),_=D(z),C&&C.l(z),k=D(z),F&&F.l(z),j=D(z),H=R(z,"DIV",{class:!0});var Re=Z(H);ne(N.$$.fragment,Re),Re.forEach(g),this.h()},h(){y(i,"type","text"),y(i,"class","svelte-cihl2i"),y(c,"type","number"),c.disabled=n[2],y(c,"class","svelte-cihl2i"),y(h,"type","number"),h.disabled=n[2],y(h,"class","svelte-cihl2i"),y(H,"class","margin-top svelte-cihl2i")},m(z,G){x(z,e,G),E(e,t),E(t,r),E(r,s),E(r,i),Ce(i,n[0].node.label),E(e,a),E(e,o),E(o,l),E(o,c),Ce(c,n[0].node.x),E(o,u),E(o,h),Ce(h,n[0].node.y),E(e,p),E(e,v),E(v,f),E(v,m),x(z,d,G),V&&V.m(z,G),x(z,_,G),C&&C.m(z,G),x(z,k,G),F&&F.m(z,G),x(z,j,G),x(z,H,G),re(N,H,null),S=!0,B||(X=[le(i,"input",n[4]),le(c,"input",n[5]),le(h,"input",n[6]),le(e,"input",n[7])],B=!0)},p(z,G){G&1&&i.value!==z[0].node.label&&Ce(i,z[0].node.label),(!S||G&4)&&(c.disabled=z[2]),G&1&&Ue(c.value)!==z[0].node.x&&Ce(c,z[0].node.x),(!S||G&4)&&(h.disabled=z[2]),G&1&&Ue(h.value)!==z[0].node.y&&Ce(h,z[0].node.y),(!S||G&1)&&b!==(b=z[0].id+"")&&Ze(m,b),z[0]instanceof je?V?(V.p(z,G),G&1&&L(V,1)):(V=Zn(z),V.c(),L(V,1),V.m(_.parentNode,_)):V&&(Ie(),O(V,1,1,()=>{V=null}),$e()),z[0]instanceof Ve?C?(C.p(z,G),G&1&&L(C,1)):(C=Mn(z),C.c(),L(C,1),C.m(k.parentNode,k)):C&&(Ie(),O(C,1,1,()=>{C=null}),$e()),z[0]instanceof Ve||z[0]instanceof gt?F?(F.p(z,G),G&1&&L(F,1)):(F=An(z),F.c(),L(F,1),F.m(j.parentNode,j)):F&&(Ie(),O(F,1,1,()=>{F=null}),$e())},i(z){S||(L(V),L(C),L(F),L(N.$$.fragment,z),S=!0)},o(z){O(V),O(C),O(F),O(N.$$.fragment,z),S=!1},d(z){z&&(g(e),g(d),g(_),g(k),g(j),g(H)),V&&V.d(z),C&&C.d(z),F&&F.d(z),se(N),B=!1,ht(X)}}}function Zn(n){let e,t="Address:",r,s,i=n[0].address+"",a,o,l,c,u,h,p,v;function f(m){n[9](m)}let b={};return n[0]!==void 0&&(b.router=n[0]),c=new ii({props:b}),Se.push(()=>Fe(c,"router",f)),{c(){e=T("p"),e.textContent=t,r=P(),s=T("button"),a=fe(i),o=P(),l=T("div"),te(c.$$.fragment),this.h()},l(m){e=R(m,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-18hoeeh"&&(e.textContent=t),r=D(m),s=R(m,"BUTTON",{class:!0});var d=Z(s);a=he(d,i),d.forEach(g),o=D(m),l=R(m,"DIV",{class:!0});var _=Z(l);ne(c.$$.fragment,_),_.forEach(g),this.h()},h(){Et(e,"display","inline"),y(s,"class","svelte-cihl2i"),y(l,"class","margin-top svelte-cihl2i")},m(m,d){x(m,e,d),x(m,r,d),x(m,s,d),E(s,a),x(m,o,d),x(m,l,d),re(c,l,null),h=!0,p||(v=le(s,"click",n[8]),p=!0)},p(m,d){(!h||d&1)&&i!==(i=m[0].address+"")&&Ze(a,i);const _={};!u&&d&1&&(u=!0,_.router=m[0],He(()=>u=!1)),c.$set(_)},i(m){h||(L(c.$$.fragment,m),h=!0)},o(m){O(c.$$.fragment,m),h=!1},d(m){m&&(g(e),g(r),g(s),g(o),g(l)),se(c),p=!1,v()}}}function Mn(n){let e,t,r,s;function i(o){n[10](o)}let a={};return n[0]!==void 0&&(a.router=n[0]),t=new di({props:a}),Se.push(()=>Fe(t,"router",i)),{c(){e=T("div"),te(t.$$.fragment),this.h()},l(o){e=R(o,"DIV",{class:!0});var l=Z(e);ne(t.$$.fragment,l),l.forEach(g),this.h()},h(){y(e,"class","margin-top svelte-cihl2i")},m(o,l){x(o,e,l),re(t,e,null),s=!0},p(o,l){const c={};!r&&l&1&&(r=!0,c.router=o[0],He(()=>r=!1)),t.$set(c)},i(o){s||(L(t.$$.fragment,o),s=!0)},o(o){O(t.$$.fragment,o),s=!1},d(o){o&&g(e),se(t)}}}function An(n){let e,t,r,s;function i(o){n[11](o)}let a={};return n[0]!==void 0&&(a.router=n[0]),t=new li({props:a}),Se.push(()=>Fe(t,"router",i)),{c(){e=T("div"),te(t.$$.fragment),this.h()},l(o){e=R(o,"DIV",{class:!0});var l=Z(e);ne(t.$$.fragment,l),l.forEach(g),this.h()},h(){y(e,"class","margin-top svelte-cihl2i")},m(o,l){x(o,e,l),re(t,e,null),s=!0},p(o,l){const c={};!r&&l&1&&(r=!0,c.router=o[0],He(()=>r=!1)),t.$set(c)},i(o){s||(L(t.$$.fragment,o),s=!0)},o(o){O(t.$$.fragment,o),s=!1},d(o){o&&g(e),se(t)}}}function pi(n){let e,t,r,s;const i=[hi,fi],a=[];function o(l,c){return l[0]?0:1}return e=o(n),t=a[e]=i[e](n),{c(){t.c(),r=be()},l(l){t.l(l),r=be()},m(l,c){a[e].m(l,c),x(l,r,c),s=!0},p(l,c){let u=e;e=o(l),e===u?a[e].p(l,c):(Ie(),O(a[u],1,1,()=>{a[u]=null}),$e(),t=a[e],t?t.p(l,c):(t=a[e]=i[e](l),t.c()),L(t,1),t.m(r.parentNode,r))},i(l){s||(L(t),s=!0)},o(l){O(t),s=!1},d(l){l&&g(r),a[e].d(l)}}}function mi(n){let e,t,r;function s(a){n[12](a)}let i={$$slots:{default:[pi]},$$scope:{ctx:n}};return n[1]!==void 0&&(i.dialog=n[1]),e=new xn({props:i}),Se.push(()=>Fe(e,"dialog",s)),e.$on("close",n[13]),{c(){te(e.$$.fragment)},l(a){ne(e.$$.fragment,a)},m(a,o){re(e,a,o),r=!0},p(a,[o]){const l={};o&16389&&(l.$$scope={dirty:o,ctx:a}),!t&&o&2&&(t=!0,l.dialog=a[1],He(()=>t=!1)),e.$set(l)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){O(e.$$.fragment,a),r=!1},d(a){se(e,a)}}}function _i(n,e,t){let r;Pe(n,ft,d=>t(2,r=d));let{router:s}=e,{dialog:i}=e;function a(){if(!r&&s){if(!confirm("Are you sure you want to delete this router?"))return;U.deleteRouter(s.id),i.close()}else alert("You can't delete a router while the network is locked.")}function o(){s.node.label=this.value,t(0,s)}function l(){s.node.x=Ue(this.value),t(0,s)}function c(){s.node.y=Ue(this.value),t(0,s)}const u=()=>{U.notify()},h=async()=>{s instanceof je&&await navigator.clipboard.writeText(s.address)};function p(d){s=d,t(0,s)}function v(d){s=d,t(0,s)}function f(d){s=d,t(0,s)}function b(d){i=d,t(1,i)}const m=()=>{if(s instanceof je)for(const d of s.firstHop.keys())d===""&&s.firstHop.delete(d);U.notify()};return n.$$set=d=>{"router"in d&&t(0,s=d.router),"dialog"in d&&t(1,i=d.dialog)},[s,i,r,a,o,l,c,u,h,p,v,f,b,m]}class gi extends xe{constructor(e){super(),Ee(this,e,_i,mi,we,{router:0,dialog:1})}}function vi(n){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=T("p"),e.textContent=t},l(r){e=R(r,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(r,s){x(r,e,s)},p:Te,i:Te,o:Te,d(r){r&&g(e)}}}function yi(n){let e,t=n[0].distance+"",r,s,i,a,o,l,c,u,h,p,v;return u=new ot({props:{text:"Delete Link",callback:n[3]}}),{c(){e=fe("Distance: "),r=fe(t),s=fe(` km
    `),i=T("label"),a=fe(`Bandwidth:
      `),o=T("input"),l=P(),c=T("div"),te(u.$$.fragment),this.h()},l(f){e=he(f,"Distance: "),r=he(f,t),s=he(f,` km
    `),i=R(f,"LABEL",{class:!0});var b=Z(i);a=he(b,`Bandwidth:
      `),o=R(b,"INPUT",{type:!0,class:!0}),b.forEach(g),l=D(f),c=R(f,"DIV",{class:!0});var m=Z(c);ne(u.$$.fragment,m),m.forEach(g),this.h()},h(){y(o,"type","number"),o.disabled=n[2],y(o,"class","svelte-11gx5jd"),y(i,"class","svelte-11gx5jd"),y(c,"class","svelte-11gx5jd")},m(f,b){x(f,e,b),x(f,r,b),x(f,s,b),x(f,i,b),E(i,a),E(i,o),Ce(o,n[0].bandwidth),x(f,l,b),x(f,c,b),re(u,c,null),h=!0,p||(v=le(o,"input",n[4]),p=!0)},p(f,b){(!h||b&1)&&t!==(t=f[0].distance+"")&&Ze(r,t),(!h||b&4)&&(o.disabled=f[2]),b&1&&Ue(o.value)!==f[0].bandwidth&&Ce(o,f[0].bandwidth)},i(f){h||(L(u.$$.fragment,f),h=!0)},o(f){O(u.$$.fragment,f),h=!1},d(f){f&&(g(e),g(r),g(s),g(i),g(l),g(c)),se(u),p=!1,v()}}}function bi(n){let e,t,r,s;const i=[yi,vi],a=[];function o(l,c){return l[0]?0:1}return e=o(n),t=a[e]=i[e](n),{c(){t.c(),r=be()},l(l){t.l(l),r=be()},m(l,c){a[e].m(l,c),x(l,r,c),s=!0},p(l,c){let u=e;e=o(l),e===u?a[e].p(l,c):(Ie(),O(a[u],1,1,()=>{a[u]=null}),$e(),t=a[e],t?t.p(l,c):(t=a[e]=i[e](l),t.c()),L(t,1),t.m(r.parentNode,r))},i(l){s||(L(t),s=!0)},o(l){O(t),s=!1},d(l){l&&g(r),a[e].d(l)}}}function ki(n){let e,t,r;function s(a){n[5](a)}let i={$$slots:{default:[bi]},$$scope:{ctx:n}};return n[1]!==void 0&&(i.dialog=n[1]),e=new xn({props:i}),Se.push(()=>Fe(e,"dialog",s)),e.$on("close",n[6]),{c(){te(e.$$.fragment)},l(a){ne(e.$$.fragment,a)},m(a,o){re(e,a,o),r=!0},p(a,[o]){const l={};o&133&&(l.$$scope={dirty:o,ctx:a}),!t&&o&2&&(t=!0,l.dialog=a[1],He(()=>t=!1)),e.$set(l)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){O(e.$$.fragment,a),r=!1},d(a){se(e,a)}}}function wi(n,e,t){let r;Pe(n,ft,u=>t(2,r=u));let{link:s}=e,{dialog:i}=e;function a(){if(!r&&s){if(!confirm("Are you sure you want to delete this link?"))return;U.deleteLink(s.id),i.close()}else alert("You can't delete a link while the network is locked.")}function o(){s.bandwidth=Ue(this.value),t(0,s)}function l(u){i=u,t(1,i)}const c=()=>{U.notify()};return n.$$set=u=>{"link"in u&&t(0,s=u.link),"dialog"in u&&t(1,i=u.dialog)},[s,i,r,a,o,l,c]}class xi extends xe{constructor(e){super(),Ee(this,e,wi,ki,we,{link:0,dialog:1})}}function zn(n){let e,t="Loading...";return{c(){e=T("p"),e.textContent=t,this.h()},l(r){e=R(r,"P",{style:!0,"data-svelte-h":!0}),ye(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Et(e,"font-size","200px")},m(r,s){x(r,e,s)},d(r){r&&g(e)}}}function Hn(n){let e,t,r,s,i,a;return{c(){e=Qe("line"),this.h()},l(o){e=et(o,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),Z(e).forEach(g),this.h()},h(){y(e,"class","preview"),y(e,"x1",t=n[5].node.x),y(e,"y1",r=n[5].node.y),y(e,"x2",s=n[22](n[2].x)),y(e,"y2",i=n[23](n[2].y)),y(e,"stroke",a=n[7]===n[13].CONNECTING?"green":"blue")},m(o,l){x(o,e,l)},p(o,l){l[0]&32&&t!==(t=o[5].node.x)&&y(e,"x1",t),l[0]&32&&r!==(r=o[5].node.y)&&y(e,"y1",r),l[0]&4&&s!==(s=o[22](o[2].x))&&y(e,"x2",s),l[0]&4&&i!==(i=o[23](o[2].y))&&y(e,"y2",i),l[0]&128&&a!==(a=o[7]===o[13].CONNECTING?"green":"blue")&&y(e,"stroke",a)},d(o){o&&g(e)}}}function Fn(n){let e,t,r,s,i,a=n[12].placing+"",o,l,c;return{c(){e=Qe("circle"),i=Qe("text"),o=fe(a),this.h()},l(u){e=et(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),Z(e).forEach(g),i=et(u,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var h=Z(i);o=he(h,a),h.forEach(g),this.h()},h(){y(e,"cx",t=n[22](n[3].x)),y(e,"cy",r=n[23](n[3].y)),y(e,"r","20"),y(e,"fill",s=n[14][n[12].placing]),y(i,"x",l=n[22](n[3].x)),y(i,"y",c=n[23](n[3].y)),y(i,"dominant-baseline","central"),y(i,"font-size","smaller"),y(i,"class","svelte-huetud")},m(u,h){x(u,e,h),x(u,i,h),E(i,o)},p(u,h){h[0]&8&&t!==(t=u[22](u[3].x))&&y(e,"cx",t),h[0]&8&&r!==(r=u[23](u[3].y))&&y(e,"cy",r),h[0]&4096&&s!==(s=u[14][u[12].placing])&&y(e,"fill",s),h[0]&4096&&a!==(a=u[12].placing+"")&&Ze(o,a),h[0]&8&&l!==(l=u[22](u[3].x))&&y(i,"x",l),h[0]&8&&c!==(c=u[23](u[3].y))&&y(i,"y",c)},d(u){u&&(g(e),g(i))}}}function Ei(n){let e,t,r,s,i,a,o,l,c,u,h,p,v,f,b,m=!n[10]&&zn(),d=(!n[0]&&n[7]===n[13].CONNECTING||n[7]===n[13].ADDING_DESTINATION)&&n[5]&&Hn(n);const _=n[26].default,k=cr(_,n,n[25],null);let j=n[7]===n[13].ADDING_ROUTERS&&n[12].placing&&Fn(n);function H(C){n[29](C)}function N(C){n[30](C)}let S={};n[5]!==void 0&&(S.router=n[5]),n[8]!==void 0&&(S.dialog=n[8]),a=new gi({props:S}),Se.push(()=>Fe(a,"router",H)),Se.push(()=>Fe(a,"dialog",N));function B(C){n[31](C)}function X(C){n[32](C)}let V={};return n[6]!==void 0&&(V.link=n[6]),n[9]!==void 0&&(V.dialog=n[9]),u=new xi({props:V}),Se.push(()=>Fe(u,"link",B)),Se.push(()=>Fe(u,"dialog",X)),{c(){m&&m.c(),e=P(),t=Qe("svg"),d&&d.c(),r=be(),k&&k.c(),j&&j.c(),i=P(),te(a.$$.fragment),c=P(),te(u.$$.fragment),this.h()},l(C){m&&m.l(C),e=D(C),t=et(C,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var F=Z(t);d&&d.l(F),r=be(),k&&k.l(F),j&&j.l(F),F.forEach(g),i=D(C),ne(a.$$.fragment,C),c=D(C),ne(u.$$.fragment,C),this.h()},h(){y(t,"viewBox",s=`${n[1].x} ${n[1].y} ${n[1].width} ${n[1].height}`),y(t,"role","button"),y(t,"tabindex","-1"),y(t,"class","svelte-huetud"),Et(t,"cursor",n[11][n[7]])},m(C,F){m&&m.m(C,F),x(C,e,F),x(C,t,F),d&&d.m(t,null),E(t,r),k&&k.m(t,null),j&&j.m(t,null),n[28](t),x(C,i,F),re(a,C,F),x(C,c,F),re(u,C,F),v=!0,f||(b=[le(window,"keydown",n[16]),le(t,"pointerdown",n[17]),le(t,"pointermove",n[15]),le(t,"pointerup",n[18]),le(t,"wheel",n[19]),le(t,"dblclick",n[20]),le(t,"dragover",Nr(n[27])),le(t,"drop",n[21])],f=!0)},p(C,F){C[10]?m&&(m.d(1),m=null):m||(m=zn(),m.c(),m.m(e.parentNode,e)),(!C[0]&&C[7]===C[13].CONNECTING||C[7]===C[13].ADDING_DESTINATION)&&C[5]?d?d.p(C,F):(d=Hn(C),d.c(),d.m(t,r)):d&&(d.d(1),d=null),k&&k.p&&(!v||F[0]&33554432)&&dr(k,_,C,C[25],v?hr(_,C[25],F,null):fr(C[25]),null),C[7]===C[13].ADDING_ROUTERS&&C[12].placing?j?j.p(C,F):(j=Fn(C),j.c(),j.m(t,null)):j&&(j.d(1),j=null),(!v||F[0]&2&&s!==(s=`${C[1].x} ${C[1].y} ${C[1].width} ${C[1].height}`))&&y(t,"viewBox",s),F[0]&2176&&Et(t,"cursor",C[11][C[7]]);const z={};!o&&F[0]&32&&(o=!0,z.router=C[5],He(()=>o=!1)),!l&&F[0]&256&&(l=!0,z.dialog=C[8],He(()=>l=!1)),a.$set(z);const G={};!h&&F[0]&64&&(h=!0,G.link=C[6],He(()=>h=!1)),!p&&F[0]&512&&(p=!0,G.dialog=C[9],He(()=>p=!1)),u.$set(G)},i(C){v||(L(k,C),L(a.$$.fragment,C),L(u.$$.fragment,C),v=!0)},o(C){O(k,C),O(a.$$.fragment,C),O(u.$$.fragment,C),v=!1},d(C){C&&(g(e),g(t),g(i),g(c)),m&&m.d(C),d&&d.d(),k&&k.d(C),j&&j.d(),n[28](null),se(a,C),se(u,C),f=!1,ht(b)}}}function Ci(n,e,t){let r,s,i;Pe(n,ft,w=>t(0,s=w)),Pe(n,Ae,w=>t(12,i=w));let{$$slots:a={},$$scope:o}=e;var l=(w=>(w[w.NONE=0]="NONE",w[w.DRAGGING=1]="DRAGGING",w[w.PANNING=2]="PANNING",w[w.CONNECTING=3]="CONNECTING",w[w.ADDING_DESTINATION=4]="ADDING_DESTINATION",w[w.ADDING_ROUTERS=5]="ADDING_ROUTERS",w))(l||{});const c={x:0,y:0,width:0,height:0,get scale(){return f?this.width/f.getBoundingClientRect().width:1}},u={x:0,y:0},h={x:0,y:0},p={x:0,y:0},v={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};let f=null,b=null,m=null,d=0,_,k,j=!1;Ae.subscribe(w=>{w.placing&&["CE","LER","LSR"].includes(w.placing)?t(7,d=5):t(7,d=0)}),_r(()=>{if(!f)return;new ResizeObserver(H).observe(f),requestAnimationFrame(()=>{f&&(t(1,c.x=f.getBoundingClientRect().width/-2,c),t(1,c.y=f.getBoundingClientRect().height/-2,c))}),t(10,j=!0)});function H(){if(!f)return;const w=c.scale||1;t(1,c.width=f.getBoundingClientRect().width*w,c),t(1,c.height=f.getBoundingClientRect().height*w,c)}function N(w){t(3,p.x=w.clientX,p),t(3,p.y=w.clientY,p)}function S(w){switch(w.code){case"Escape":ze(Ae,i.placing=null,i);break;case"Space":w.preventDefault(),ze(ft,s=!s,s),ze(Ae,i.placing=null,i),U.clearPackets();break;case"Digit1":ze(Ae,i.placing="CE",i);break;case"Digit2":ze(Ae,i.placing="LER",i);break;case"Digit3":ze(Ae,i.placing="LSR",i);break}}function B(w){if(!(w.target instanceof Element))return;if(w.preventDefault(),d===5){switch(i.placing){case"CE":U.createCE(ve(w.clientX),me(w.clientY));break;case"LER":U.createLER(ve(w.clientX),me(w.clientY));break;case"LSR":U.createLSR(ve(w.clientX),me(w.clientY));break}w.shiftKey||ze(Ae,i.placing=null,i);return}f==null||f.addEventListener("pointermove",V),f==null||f.setPointerCapture(w.pointerId);const Q=w.target.id;if(Q){if(t(5,b=U.getRouter(parseInt(Q))||null),!b)return;w.shiftKey?t(7,d=3):w.altKey&&b instanceof je?t(7,d=4):(h.x=b.node.x,h.y=b.node.y,t(7,d=1))}else t(7,d=2);t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u)}function X(w){if(w.target instanceof Element&&d!==5){w.preventDefault();e:if(b&&d===4){const Q=document.elementFromPoint(w.clientX,w.clientY),I=(Q==null?void 0:Q.tagName)==="circle"?Q.id:null,Y=U.getRouter(parseInt(I??""));if(!Y||b===Y)break e;if(!(Y instanceof je)){alert("Destination must be a CE");break e}const Rt=wn(b,Y);if(Rt.length<=1){alert("No path found");break e}Rr(Rt,Y.address),U.notify()}t(7,d=0),t(5,b=null),f==null||f.releasePointerCapture(w.pointerId),f==null||f.removeEventListener("pointermove",V)}}function V(w){w.preventDefault();const Q={x:(w.clientX-u.x)*c.scale,y:(w.clientY-u.y)*c.scale};if(!s&&d===1&&b)t(5,b.node.x=Math.round(h.x+Q.x),b),t(5,b.node.y=Math.round(h.y+Q.y),b),U.notify();else if(d===2)t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u),t(1,c.x-=Q.x,c),t(1,c.y-=Q.y,c);else if(d===4)t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u);else if(!s&&d===3){t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u);const I=document.elementFromPoint(w.clientX,w.clientY);if(!I)return;const Y=U.getRouter(parseInt(I.id));I.tagName==="circle"&&Y&&b&&(U.addLink({source:b,target:Y}),t(5,b=Y))}}function C(w){w.preventDefault(),t(2,u.x=w.clientX,u),t(2,u.y=w.clientY,u);const Q=w.deltaY>0?1.025:.975;F(Q,u)}function F(w,Q){if(!f||c.scale<.1&&w<1||c.scale>5&&w>1)return;const I=f.getBoundingClientRect(),Y={x:(Q.x-I.left)/I.width,y:(Q.y-I.top)/I.height};t(1,c.x-=c.width*(w-1)*Y.x,c),t(1,c.y-=c.height*(w-1)*Y.y,c),t(1,c.width*=w,c),t(1,c.height*=w,c)}function z(w){if(!(w.target instanceof Element))return;w.preventDefault();const Q=document.elementFromPoint(w.clientX,w.clientY);Q&&(Q.tagName==="circle"?G(Q.id):Q.tagName==="rect"&&Ne(Q.id))}function G(w){const Q=U.getRouter(parseInt(w));Q&&(t(5,b=Q),_.showModal())}function Ne(w){const Q=U.links.find(I=>w===I.id);Q&&(t(6,m=Q),k.showModal())}function ke(w){var I;w.preventDefault();const Q=(I=w.dataTransfer)==null?void 0:I.getData("text/plain");if(Q)switch(Q){case"CE":U.createCE(ve(w.clientX),me(w.clientY));break;case"LER":U.createLER(ve(w.clientX),me(w.clientY));break;case"LSR":U.createLSR(ve(w.clientX),me(w.clientY));break}}function ve(w){return f?(w-f.getBoundingClientRect().left)*c.scale+c.x:w}function me(w){return f?(w-f.getBoundingClientRect().top)*c.scale+c.y:w}function Re(w){pr.call(this,n,w)}function Le(w){Se[w?"unshift":"push"](()=>{f=w,t(4,f)})}function pt(w){b=w,t(5,b)}function Je(w){_=w,t(8,_)}function Oe(w){m=w,t(6,m)}function Ke(w){k=w,t(9,k)}return n.$$set=w=>{"$$scope"in w&&t(25,o=w.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(11,r={0:"move",1:s?"not-allowed":"grabbing",2:"grabbing",3:s?"not-allowed":"crosshair",4:"crosshair",5:"none"})},[s,c,u,p,f,b,m,d,_,k,j,r,i,l,v,N,S,B,X,C,z,ke,ve,me,F,o,a,Re,Le,pt,Je,Oe,Ke]}class Ti extends xe{constructor(e){super(),Ee(this,e,Ci,Ei,we,{zoom:24},null,[-1,-1])}get zoom(){return this.$$.ctx[24]}}function Ri(n){let e,t,r,s;return{c(){e=T("button"),t=fe(n[0]),this.h()},l(i){e=R(i,"BUTTON",{style:!0,class:!0});var a=Z(e);t=he(a,n[0]),a.forEach(g),this.h()},h(){y(e,"style",n[2]),y(e,"class","svelte-v6s8rg")},m(i,a){x(i,e,a),E(e,t),r||(s=le(e,"click",function(){mr(n[1])&&n[1].apply(this,arguments)}),r=!0)},p(i,[a]){n=i,a&1&&Ze(t,n[0]),a&4&&y(e,"style",n[2])},i:Te,o:Te,d(i){i&&g(e),r=!1,s()}}}function Ii(n,e,t){let{text:r}=e,{callback:s=()=>{}}=e,{style:i=void 0}=e;return n.$$set=a=>{"text"in a&&t(0,r=a.text),"callback"in a&&t(1,s=a.callback),"style"in a&&t(2,i=a.style)},[r,s,i]}class tt extends xe{constructor(e){super(),Ee(this,e,Ii,Ri,we,{text:0,callback:1,style:2})}}function $i(n){let e,t,r=n[0].address+"",s,i,a,o="→",l,c,u=n[1].address+"",h,p,v,f,b,m;return v=new tt({props:{text:"Play",callback:n[2]}}),b=new tt({props:{text:"Delete",callback:n[3]}}),{c(){e=T("div"),t=T("p"),s=fe(r),i=P(),a=T("p"),a.textContent=o,l=P(),c=T("p"),h=fe(u),p=P(),te(v.$$.fragment),f=P(),te(b.$$.fragment),this.h()},l(d){e=R(d,"DIV",{class:!0});var _=Z(e);t=R(_,"P",{class:!0});var k=Z(t);s=he(k,r),k.forEach(g),i=D(_),a=R(_,"P",{class:!0,"data-svelte-h":!0}),ye(a)!=="svelte-1giyjq6"&&(a.textContent=o),l=D(_),c=R(_,"P",{class:!0});var j=Z(c);h=he(j,u),j.forEach(g),p=D(_),ne(v.$$.fragment,_),f=D(_),ne(b.$$.fragment,_),_.forEach(g),this.h()},h(){y(t,"class","svelte-ikhsiz"),y(a,"class","svelte-ikhsiz"),y(c,"class","svelte-ikhsiz"),y(e,"class","svelte-ikhsiz")},m(d,_){x(d,e,_),E(e,t),E(t,s),E(e,i),E(e,a),E(e,l),E(e,c),E(c,h),E(e,p),re(v,e,null),E(e,f),re(b,e,null),m=!0},p(d,[_]){(!m||_&1)&&r!==(r=d[0].address+"")&&Ze(s,r),(!m||_&2)&&u!==(u=d[1].address+"")&&Ze(h,u)},i(d){m||(L(v.$$.fragment,d),L(b.$$.fragment,d),m=!0)},o(d){O(v.$$.fragment,d),O(b.$$.fragment,d),m=!1},d(d){d&&g(e),se(v),se(b)}}}function Li(n,e,t){let{source:r}=e,{destination:s}=e;function i(){U.addPacket(r,s)}function a(){confirm("Are you sure you want to delete this LSP?")&&(r.deleteEntry(s.address),U.notify())}return n.$$set=o=>{"source"in o&&t(0,r=o.source),"destination"in o&&t(1,s=o.destination)},[r,s,i,a]}class Ni extends xe{constructor(e){super(),Ee(this,e,Li,$i,we,{source:0,destination:1})}}function Vn(n,e,t){const r=n.slice();return r[2]=e[t],r}function Un(n,e,t){const r=n.slice();return r[5]=e[t][0],r}function qn(n){let e,t;return e=new Ni({props:{source:n[2],destination:U.getSureCERouter(n[5])}}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),t=!0},p(r,s){const i={};s&1&&(i.source=r[2]),s&1&&(i.destination=U.getSureCERouter(r[5])),e.$set(i)},i(r){t||(L(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){se(e,r)}}}function Yn(n){let e,t,r=pe([...n[2].firstHop]),s=[];for(let a=0;a<r.length;a+=1)s[a]=qn(Un(n,r,a));const i=a=>O(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=be()},l(a){for(let o=0;o<s.length;o+=1)s[o].l(a);e=be()},m(a,o){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(a,o);x(a,e,o),t=!0},p(a,o){if(o&1){r=pe([...a[2].firstHop]);let l;for(l=0;l<r.length;l+=1){const c=Un(a,r,l);s[l]?(s[l].p(c,o),L(s[l],1)):(s[l]=qn(c),s[l].c(),L(s[l],1),s[l].m(e.parentNode,e))}for(Ie(),l=r.length;l<s.length;l+=1)i(l);$e()}},i(a){if(!t){for(let o=0;o<r.length;o+=1)L(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)O(s[o]);t=!1},d(a){a&&g(e),it(s,a)}}}function Si(n){let e,t,r=pe(n[0]),s=[];for(let a=0;a<r.length;a+=1)s[a]=Yn(Vn(n,r,a));const i=a=>O(s[a],1,1,()=>{s[a]=null});return{c(){e=T("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=R(a,"DIV",{class:!0});var o=Z(e);for(let l=0;l<s.length;l+=1)s[l].l(o);o.forEach(g),this.h()},h(){y(e,"class","svelte-kwkmok")},m(a,o){x(a,e,o);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null);t=!0},p(a,[o]){if(o&1){r=pe(a[0]);let l;for(l=0;l<r.length;l+=1){const c=Vn(a,r,l);s[l]?(s[l].p(c,o),L(s[l],1)):(s[l]=Yn(c),s[l].c(),L(s[l],1),s[l].m(e,null))}for(Ie(),l=r.length;l<s.length;l+=1)i(l);$e()}},i(a){if(!t){for(let o=0;o<r.length;o+=1)L(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)O(s[o]);t=!1},d(a){a&&g(e),it(s,a)}}}function Pi(n,e,t){let r,s;return Pe(n,U,i=>t(1,s=i)),n.$$.update=()=>{n.$$.dirty&2&&t(0,r=s.routers.filter(i=>i instanceof je))},[r,s]}class Di extends xe{constructor(e){super(),Ee(this,e,Pi,Si,we,{})}}function Wn(n,e,t){const r=n.slice();return r[15]=e[t],r}function Gn(n){let e,t;const r=[n[15],{style:"padding: 10px 20px"}];let s={};for(let i=0;i<r.length;i+=1)s=nn(s,r[i]);return e=new tt({props:s}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,a){re(e,i,a),t=!0},p(i,a){const o=a&64?sn(r,[an(i[15]),r[1]]):{};e.$set(o)},i(i){t||(L(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){se(e,i)}}}function Oi(n){let e,t,r,s,i,a,o,l="Packet Controls",c,u,h,p=n[2].packets.length+"",v,f,b,m,d,_,k,j,H=n[1].speedMultiplier.toFixed(1)+"",N,S,B,X,V,C,F,z=n[1].maxPackets+"",G,Ne,ke,ve,me,Re,Le,pt="Fallback to normal IP routing?",Je,Oe,Ke,w,Q,I,Y,Rt,mt=pe(n[6]),de=[];for(let ie=0;ie<mt.length;ie+=1)de[ie]=Gn(Wn(n,mt,ie));const Ir=ie=>O(de[ie],1,1,()=>{de[ie]=null});return w=new Di({}),{c(){e=T("div"),t=T("div"),s=P(),i=T("div"),a=T("div"),o=T("p"),o.textContent=l,c=P(),u=T("p"),h=fe("Count: "),v=fe(p),f=P(),b=T("div");for(let ie=0;ie<de.length;ie+=1)de[ie].c();m=P(),d=T("div"),_=T("div"),k=T("p"),j=fe("Speed Multiplier: "),N=fe(H),S=P(),B=T("input"),X=P(),V=T("div"),C=T("p"),F=fe("Max Packets: "),G=fe(z),Ne=P(),ke=T("input"),ve=P(),me=T("div"),Re=T("label"),Le=T("p"),Le.textContent=pt,Je=P(),Oe=T("input"),Ke=P(),te(w.$$.fragment),this.h()},l(ie){e=R(ie,"DIV",{id:!0,style:!0,class:!0});var ce=Z(e);t=R(ce,"DIV",{id:!0,class:!0}),Z(t).forEach(g),ce.forEach(g),s=D(ie),i=R(ie,"DIV",{id:!0,style:!0,class:!0});var _e=Z(i);a=R(_e,"DIV",{id:!0,class:!0});var Me=Z(a);o=R(Me,"P",{id:!0,class:!0,"data-svelte-h":!0}),ye(o)!=="svelte-1cfybk8"&&(o.textContent=l),c=D(Me),u=R(Me,"P",{id:!0,class:!0});var ln=Z(u);h=he(ln,"Count: "),v=he(ln,p),ln.forEach(g),f=D(Me),b=R(Me,"DIV",{id:!0,class:!0});var En=Z(b);for(let dn=0;dn<de.length;dn+=1)de[dn].l(En);En.forEach(g),m=D(Me),d=R(Me,"DIV",{class:!0});var kt=Z(d);_=R(kt,"DIV",{class:!0});var zt=Z(_);k=R(zt,"P",{class:!0});var un=Z(k);j=he(un,"Speed Multiplier: "),N=he(un,H),un.forEach(g),S=D(zt),B=R(zt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),zt.forEach(g),X=D(kt),V=R(kt,"DIV",{class:!0});var Ht=Z(V);C=R(Ht,"P",{class:!0});var cn=Z(C);F=he(cn,"Max Packets: "),G=he(cn,z),cn.forEach(g),Ne=D(Ht),ke=R(Ht,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ht.forEach(g),ve=D(kt),me=R(kt,"DIV",{class:!0});var Cn=Z(me);Re=R(Cn,"LABEL",{class:!0});var Ft=Z(Re);Le=R(Ft,"P",{class:!0,"data-svelte-h":!0}),ye(Le)!=="svelte-1re47ui"&&(Le.textContent=pt),Je=D(Ft),Oe=R(Ft,"INPUT",{type:!0,class:!0}),Ft.forEach(g),Cn.forEach(g),kt.forEach(g),Ke=D(Me),ne(w.$$.fragment,Me),Me.forEach(g),_e.forEach(g),this.h()},h(){y(t,"id","resize-bar"),y(t,"class","svelte-1jfhuaz"),y(e,"id","visual-resize-bar"),y(e,"style",r=`width: ${n[0]?1:0}px`),y(e,"class","svelte-1jfhuaz"),y(o,"id","packet-controls-title"),y(o,"class","svelte-1jfhuaz"),y(u,"id","packet-controls-count"),y(u,"class","svelte-1jfhuaz"),y(b,"id","control-panel-buttons"),y(b,"class","svelte-1jfhuaz"),y(k,"class","svelte-1jfhuaz"),y(B,"type","range"),y(B,"min","0.1"),y(B,"max","2"),y(B,"step","0.001"),y(B,"class","svelte-1jfhuaz"),y(_,"class","input-box svelte-1jfhuaz"),y(C,"class","svelte-1jfhuaz"),y(ke,"type","range"),y(ke,"min","1"),y(ke,"max","500"),y(ke,"step","1"),y(ke,"class","svelte-1jfhuaz"),y(V,"class","input-box svelte-1jfhuaz"),y(Le,"class","svelte-1jfhuaz"),y(Oe,"type","checkbox"),y(Oe,"class","svelte-1jfhuaz"),y(Re,"class","svelte-1jfhuaz"),y(me,"class","input-box svelte-1jfhuaz"),y(d,"class","inputs svelte-1jfhuaz"),y(a,"id","control-panel-content"),y(a,"class","svelte-1jfhuaz"),y(i,"id","control-panel"),y(i,"style",Q=`width: ${n[5]}px; transition: ${n[4]};`),y(i,"class","svelte-1jfhuaz")},m(ie,ce){x(ie,e,ce),E(e,t),n[9](t),x(ie,s,ce),x(ie,i,ce),E(i,a),E(a,o),E(a,c),E(a,u),E(u,h),E(u,v),E(a,f),E(a,b);for(let _e=0;_e<de.length;_e+=1)de[_e]&&de[_e].m(b,null);E(a,m),E(a,d),E(d,_),E(_,k),E(k,j),E(k,N),E(_,S),E(_,B),Ce(B,n[1].speedMultiplier),E(d,X),E(d,V),E(V,C),E(C,F),E(C,G),E(V,Ne),E(V,ke),Ce(ke,n[1].maxPackets),E(d,ve),E(d,me),E(me,Re),E(Re,Le),E(Re,Je),E(Re,Oe),Oe.checked=n[1].enableFallback,E(a,Ke),re(w,a,null),I=!0,Y||(Rt=[le(t,"pointerdown",n[7]),le(B,"change",n[10]),le(B,"input",n[10]),le(ke,"change",n[11]),le(ke,"input",n[11]),le(Oe,"change",n[12])],Y=!0)},p(ie,[ce]){if((!I||ce&1&&r!==(r=`width: ${ie[0]?1:0}px`))&&y(e,"style",r),(!I||ce&4)&&p!==(p=ie[2].packets.length+"")&&Ze(v,p),ce&64){mt=pe(ie[6]);let _e;for(_e=0;_e<mt.length;_e+=1){const Me=Wn(ie,mt,_e);de[_e]?(de[_e].p(Me,ce),L(de[_e],1)):(de[_e]=Gn(Me),de[_e].c(),L(de[_e],1),de[_e].m(b,null))}for(Ie(),_e=mt.length;_e<de.length;_e+=1)Ir(_e);$e()}(!I||ce&2)&&H!==(H=ie[1].speedMultiplier.toFixed(1)+"")&&Ze(N,H),ce&2&&Ce(B,ie[1].speedMultiplier),(!I||ce&2)&&z!==(z=ie[1].maxPackets+"")&&Ze(G,z),ce&2&&Ce(ke,ie[1].maxPackets),ce&2&&(Oe.checked=ie[1].enableFallback),(!I||ce&48&&Q!==(Q=`width: ${ie[5]}px; transition: ${ie[4]};`))&&y(i,"style",Q)},i(ie){if(!I){for(let ce=0;ce<mt.length;ce+=1)L(de[ce]);L(w.$$.fragment,ie),I=!0}},o(ie){de=de.filter(Boolean);for(let ce=0;ce<de.length;ce+=1)O(de[ce]);O(w.$$.fragment,ie),I=!1},d(ie){ie&&(g(e),g(s),g(i)),n[9](null),it(de,ie),se(w),Y=!1,ht(Rt)}}}function ji(n,e,t){let r,s,i,a,o,l;Pe(n,ft,_=>t(0,a=_)),Pe(n,qe,_=>t(1,o=_)),Pe(n,U,_=>t(2,l=_));let c,u="width 250ms";function h(_){a&&(t(4,u="none"),c.setPointerCapture(_.pointerId),c.addEventListener("pointermove",p),c.addEventListener("pointerup",v))}function p(_){t(5,i=window.innerWidth-_.clientX),i<=20&&t(5,i=0),i>=window.innerWidth-350&&t(5,i=window.innerWidth-350)}function v(_){c.removeEventListener("pointermove",p),c.removeEventListener("pointerup",v),c.releasePointerCapture(_.pointerId),t(4,u="width 250ms")}function f(_){Se[_?"unshift":"push"](()=>{c=_,t(3,c)})}function b(){o.speedMultiplier=Ue(this.value),qe.set(o)}function m(){o.maxPackets=Ue(this.value),qe.set(o)}function d(){o.enableFallback=this.checked,qe.set(o)}return n.$$.update=()=>{n.$$.dirty&4&&t(8,r=l.routers.filter(_=>_ instanceof je)),n.$$.dirty&258&&t(6,s=[{text:o.running?"Pause":"Resume",callback:()=>{ze(qe,o.running=!o.running,o)}},{text:"Reset",callback:()=>{U.clearPackets()}},{text:"Play All",callback:()=>{for(const _ of r)for(const[k]of _.firstHop)U.addPacket(_,U.getSureCERouter(k))}}]),n.$$.dirty&1&&t(5,i=a?350:0)},[a,o,l,c,u,i,s,h,r,f,b,m,d]}class Bi extends xe{constructor(e){super(),Ee(this,e,ji,Oi,we,{})}}function Zi(n){let e;return{c(){e=Qe("circle"),this.h()},l(t){e=et(t,"circle",{r:!0,class:!0}),Z(e).forEach(g),this.h()},h(){y(e,"r","5"),y(e,"class","svelte-rvo2j9"),Tn(e,"labeled",n[0].label!==-1)},m(t,r){x(t,e,r),n[4](e)},p(t,[r]){r&1&&Tn(e,"labeled",t[0].label!==-1)},i:Te,o:Te,d(t){t&&g(e),n[4](null)}}}function Mi(n,e,t){let r;Pe(n,qe,p=>t(3,r=p));let{packet:s}=e,i,a,o;function l(){const p=Math.sqrt((s.node.x-s.nextHop.node.x)**2+(s.node.y-s.nextHop.node.y)**2);i=Math.round(p/250*1e3)}function c(){if(l(),!o)return;const p=s.node,v=s.nextHop.node;t(2,a=o.animate({transform:[`translate(${p.x}px, ${p.y}px)`,`translate(${v.x}px, ${v.y}px)`]},{duration:i,easing:"linear"})),t(2,a.onfinish=u,a)}function u(){t(0,s.node=s.nextHop.node,s);const p=s.nextHop;if(p.receivePacket(s),p!==s.nextHop){if(!s.validateNextHop(p))return s.drop("Invalid next hop");c()}}requestAnimationFrame(c);function h(p){Se[p?"unshift":"push"](()=>{o=p,t(1,o)})}return n.$$set=p=>{"packet"in p&&t(0,s=p.packet)},n.$$.update=()=>{n.$$.dirty&12&&a&&t(2,a.playbackRate=r.speedMultiplier,a),n.$$.dirty&12&&a&&(r.running?a.play():a.pause())},[s,o,a,r,h]}class Ai extends xe{constructor(e){super(),Ee(this,e,Mi,Zi,we,{packet:0})}}function zi(n){let e,t,r,s,i,a,o,l,c=n[0].distance+"",u,h,p,v;return{c(){e=Qe("line"),t=P(),r=Qe("rect"),o=P(),l=Qe("text"),u=fe(c),h=fe(" km"),this.h()},l(f){e=et(f,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),Z(e).forEach(g),t=D(f),r=et(f,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),Z(r).forEach(g),o=D(f),l=et(f,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var b=Z(l);u=he(b,c),h=he(b," km"),b.forEach(g),this.h()},h(){y(e,"x1",n[4]),y(e,"y1",n[2]),y(e,"x2",n[3]),y(e,"y2",n[1]),y(r,"id",s=n[0].id),y(r,"x",i=n[5].x-mn/2),y(r,"y",a=n[5].y-_n/2),y(r,"width",mn),y(r,"height",_n),y(r,"class","svelte-zjn2k6"),y(l,"x",p=n[5].x),y(l,"y",v=n[5].y),y(l,"dominant-baseline","central"),y(l,"class","svelte-zjn2k6")},m(f,b){x(f,e,b),x(f,t,b),x(f,r,b),x(f,o,b),x(f,l,b),E(l,u),E(l,h)},p(f,[b]){b&16&&y(e,"x1",f[4]),b&4&&y(e,"y1",f[2]),b&8&&y(e,"x2",f[3]),b&2&&y(e,"y2",f[1]),b&1&&s!==(s=f[0].id)&&y(r,"id",s),b&32&&i!==(i=f[5].x-mn/2)&&y(r,"x",i),b&32&&a!==(a=f[5].y-_n/2)&&y(r,"y",a),b&1&&c!==(c=f[0].distance+"")&&Ze(u,c),b&32&&p!==(p=f[5].x)&&y(l,"x",p),b&32&&v!==(v=f[5].y)&&y(l,"y",v)},i:Te,o:Te,d(f){f&&(g(e),g(t),g(r),g(o),g(l))}}}const mn=50,_n=20;function Xn(n,e){return(n+e)/2}function Hi(n,e,t){let r,s,i,a,o,{link:l}=e;return n.$$set=c=>{"link"in c&&t(0,l=c.link)},n.$$.update=()=>{n.$$.dirty&1&&t(4,r=l.source.node.x),n.$$.dirty&1&&t(3,s=l.target.node.x),n.$$.dirty&1&&t(2,i=l.source.node.y),n.$$.dirty&1&&t(1,a=l.target.node.y),n.$$.dirty&30&&t(5,o={x:Xn(r,s),y:Xn(i,a)})},[l,a,i,s,r,o]}class Fi extends xe{constructor(e){super(),Ee(this,e,Hi,zi,we,{link:0})}}function Vi(n){let e,t,r,s,i,a,o,l=n[0].node.label+"",c,u,h;return{c(){e=Qe("circle"),a=P(),o=Qe("text"),c=fe(l),this.h()},l(p){e=et(p,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),Z(e).forEach(g),a=D(p),o=et(p,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var v=Z(o);c=he(v,l),v.forEach(g),this.h()},h(){y(e,"id",t=n[0].id.toString()),y(e,"cx",r=n[0].node.x),y(e,"cy",s=n[0].node.y),y(e,"r","20"),y(e,"fill",i=n[1][n[0].type]),y(e,"class","svelte-17jcsko"),y(o,"x",u=n[0].node.x),y(o,"y",h=n[0].node.y),y(o,"dominant-baseline","central"),y(o,"font-size","smaller"),y(o,"class","svelte-17jcsko")},m(p,v){x(p,e,v),x(p,a,v),x(p,o,v),E(o,c)},p(p,[v]){v&1&&t!==(t=p[0].id.toString())&&y(e,"id",t),v&1&&r!==(r=p[0].node.x)&&y(e,"cx",r),v&1&&s!==(s=p[0].node.y)&&y(e,"cy",s),v&1&&i!==(i=p[1][p[0].type])&&y(e,"fill",i),v&1&&l!==(l=p[0].node.label+"")&&Ze(c,l),v&1&&u!==(u=p[0].node.x)&&y(o,"x",u),v&1&&h!==(h=p[0].node.y)&&y(o,"y",h)},i:Te,o:Te,d(p){p&&(g(e),g(a),g(o))}}}function Ui(n,e,t){let{router:r}=e;const s={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return n.$$set=i=>{"router"in i&&t(0,r=i.router)},[r,s]}class qi extends xe{constructor(e){super(),Ee(this,e,Ui,Vi,we,{router:0})}}function Yi(n){let e,t,r,s;return{c(){e=T("div"),t=fe(n[0]),this.h()},l(i){e=R(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var a=Z(e);t=he(a,n[0]),a.forEach(g),this.h()},h(){y(e,"draggable","true"),y(e,"role","button"),y(e,"tabindex","-1"),Et(e,"background-color",n[1]),y(e,"class","svelte-dfkep2")},m(i,a){x(i,e,a),E(e,t),r||(s=[le(e,"dragstart",n[2]),le(e,"click",n[3])],r=!0)},p(i,[a]){a&1&&Ze(t,i[0]),a&2&&Et(e,"background-color",i[1])},i:Te,o:Te,d(i){i&&g(e),r=!1,ht(s)}}}function Wi(n,e,t){let r,s;Pe(n,Ae,u=>t(5,r=u)),Pe(n,ft,u=>t(6,s=u));let{text:i}=e,{type:a}=e,{color:o}=e;function l(u){var h;if(s){alert("Network is locked.");return}(h=u.dataTransfer)==null||h.setData("text/plain",a)}function c(){ze(Ae,r.placing=a,r)}return n.$$set=u=>{"text"in u&&t(0,i=u.text),"type"in u&&t(4,a=u.type),"color"in u&&t(1,o=u.color)},[i,o,l,c,a]}class Gi extends xe{constructor(e){super(),Ee(this,e,Wi,Yi,we,{text:0,type:4,color:1})}}function Jn(n,e,t){const r=n.slice();return r[7]=e[t],r}function Kn(n,e,t){const r=n.slice();return r[7]=e[t],r}function Qn(n,e,t){const r=n.slice();return r[10]=e[t],r}function Xi(n){let e,t,r=pe(n[0]),s=[];for(let a=0;a<r.length;a+=1)s[a]=er(Jn(n,r,a));const i=a=>O(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=be()},l(a){for(let o=0;o<s.length;o+=1)s[o].l(a);e=be()},m(a,o){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(a,o);x(a,e,o),t=!0},p(a,o){if(o&1){r=pe(a[0]);let l;for(l=0;l<r.length;l+=1){const c=Jn(a,r,l);s[l]?(s[l].p(c,o),L(s[l],1)):(s[l]=er(c),s[l].c(),L(s[l],1),s[l].m(e.parentNode,e))}for(Ie(),l=r.length;l<s.length;l+=1)i(l);$e()}},i(a){if(!t){for(let o=0;o<r.length;o+=1)L(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)O(s[o]);t=!1},d(a){a&&g(e),it(s,a)}}}function Ji(n){let e,t,r,s=pe(n[4]),i=[];for(let u=0;u<s.length;u+=1)i[u]=tr(Qn(n,s,u));const a=u=>O(i[u],1,1,()=>{i[u]=null});let o=pe(n[1]),l=[];for(let u=0;u<o.length;u+=1)l[u]=nr(Kn(n,o,u));const c=u=>O(l[u],1,1,()=>{l[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=P();for(let u=0;u<l.length;u+=1)l[u].c();t=be()},l(u){for(let h=0;h<i.length;h+=1)i[h].l(u);e=D(u);for(let h=0;h<l.length;h+=1)l[h].l(u);t=be()},m(u,h){for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(u,h);x(u,e,h);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(u,h);x(u,t,h),r=!0},p(u,h){if(h&16){s=pe(u[4]);let p;for(p=0;p<s.length;p+=1){const v=Qn(u,s,p);i[p]?(i[p].p(v,h),L(i[p],1)):(i[p]=tr(v),i[p].c(),L(i[p],1),i[p].m(e.parentNode,e))}for(Ie(),p=s.length;p<i.length;p+=1)a(p);$e()}if(h&2){o=pe(u[1]);let p;for(p=0;p<o.length;p+=1){const v=Kn(u,o,p);l[p]?(l[p].p(v,h),L(l[p],1)):(l[p]=nr(v),l[p].c(),L(l[p],1),l[p].m(t.parentNode,t))}for(Ie(),p=o.length;p<l.length;p+=1)c(p);$e()}},i(u){if(!r){for(let h=0;h<s.length;h+=1)L(i[h]);for(let h=0;h<o.length;h+=1)L(l[h]);r=!0}},o(u){i=i.filter(Boolean);for(let h=0;h<i.length;h+=1)O(i[h]);l=l.filter(Boolean);for(let h=0;h<l.length;h+=1)O(l[h]);r=!1},d(u){u&&(g(e),g(t)),it(i,u),it(l,u)}}}function er(n){let e,t;const r=[n[7]];let s={};for(let i=0;i<r.length;i+=1)s=nn(s,r[i]);return e=new tt({props:s}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,a){re(e,i,a),t=!0},p(i,a){const o=a&1?sn(r,[an(i[7])]):{};e.$set(o)},i(i){t||(L(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){se(e,i)}}}function tr(n){let e,t;const r=[n[10]];let s={};for(let i=0;i<r.length;i+=1)s=nn(s,r[i]);return e=new Gi({props:s}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,a){re(e,i,a),t=!0},p(i,a){const o=a&16?sn(r,[an(i[10])]):{};e.$set(o)},i(i){t||(L(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){se(e,i)}}}function nr(n){let e,t;const r=[n[7]];let s={};for(let i=0;i<r.length;i+=1)s=nn(s,r[i]);return e=new tt({props:s}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,a){re(e,i,a),t=!0},p(i,a){const o=a&2?sn(r,[an(i[7])]):{};e.$set(o)},i(i){t||(L(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){se(e,i)}}}function Ki(n){let e,t,r,s,i,a;e=new tt({props:{text:n[2]?"Edit":"Simulation",callback:n[6],style:`width: 100px; background-color: ${n[2]?"#3CB371":"#6495ED"};`}});const o=[Ji,Xi],l=[];function c(u,h){return u[2]?1:0}return r=c(n),s=l[r]=o[r](n),{c(){te(e.$$.fragment),t=P(),s.c(),i=be()},l(u){ne(e.$$.fragment,u),t=D(u),s.l(u),i=be()},m(u,h){re(e,u,h),x(u,t,h),l[r].m(u,h),x(u,i,h),a=!0},p(u,[h]){const p={};h&4&&(p.text=u[2]?"Edit":"Simulation"),h&12&&(p.callback=u[6]),h&4&&(p.style=`width: 100px; background-color: ${u[2]?"#3CB371":"#6495ED"};`),e.$set(p);let v=r;r=c(u),r===v?l[r].p(u,h):(Ie(),O(l[v],1,1,()=>{l[v]=null}),$e(),s=l[r],s?s.p(u,h):(s=l[r]=o[r](u),s.c()),L(s,1),s.m(i.parentNode,i))},i(u){a||(L(e.$$.fragment,u),L(s),a=!0)},o(u){O(e.$$.fragment,u),O(s),a=!1},d(u){u&&(g(t),g(i)),se(e,u),l[r].d(u)}}}function Qi(n,e,t){let r,s,i,a,o;Pe(n,U,u=>t(5,i=u)),Pe(n,ft,u=>t(2,a=u)),Pe(n,Ae,u=>t(3,o=u));const l=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],c=()=>{ze(ft,a=!a,a),ze(Ae,o.placing=null,o),U.clearPackets()};return n.$$.update=()=>{n.$$.dirty&32&&t(0,s=[{text:"Clear Tables",callback:()=>{confirm("Are you sure you want to clear the routing tables?")&&U.clearTables()}},{text:"Export",callback:()=>{const u={routers:i.routers.map(b=>{if(b instanceof je)return{...b,type:b.type,firstHop:Object.fromEntries(b.firstHop)};if(b instanceof Ve)return{...b,type:b.type,FIB:Object.fromEntries(b.FIB.map),LFIB:Object.fromEntries(b.LFIB.map)};if(b instanceof gt)return{...b,type:b.type,LFIB:Object.fromEntries(b.LFIB.map)}}),links:i.links.map(b=>({...b,source:b.source.id,target:b.target.id}))},h=JSON.stringify(u,null,2),p=new Blob([h],{type:"application/json"}),v=window.URL.createObjectURL(p),f=document.createElement("a");f.href=v,f.download="network.json",f.click(),window.URL.revokeObjectURL(v)}}]),n.$$.dirty&1&&t(1,r=[{text:"Clear Network",callback:()=>{confirm("Are you sure you want to clear the network?")&&U.clear()}},{text:"Clear Links",callback:()=>{confirm("Are you sure you want to clear the links?")&&U.clearLinks()}},...s])},[s,r,a,o,l,i,c]}class ea extends xe{constructor(e){super(),Ee(this,e,Qi,Ki,we,{})}}function ta(n){let e,t="Drag and drop routers to add them to the network.",r,s,i,a,o=`Instead of drag and drop, you can also click and hold shift while continuously clicking to add
    many routers.`,l,c,u,h,p=`Pressing 1, 2 or 3 will respectively select CE, LER or LSR, this works with the holding of shift
    to insert routers.`,v,f,b,m,d="Hold the shift key and drag routers to make links.",_,k,j,H,N="Hold the ctrl key and drag CE's to add destinations.",S,B,X,V,C="Double click a router or link to configure it.",F,z,G,Ne,ke="The clear button will delete the entire network.",ve,me,Re,Le,pt="The export button will download your network as a .json file",Je,Oe,Ke,w,Q="Press Esc to close this popup.";return{c(){e=T("p"),e.textContent=t,r=P(),s=T("br"),i=P(),a=T("p"),a.textContent=o,l=P(),c=T("br"),u=P(),h=T("p"),h.textContent=p,v=P(),f=T("br"),b=P(),m=T("p"),m.textContent=d,_=P(),k=T("br"),j=P(),H=T("p"),H.textContent=N,S=P(),B=T("br"),X=P(),V=T("p"),V.textContent=C,F=P(),z=T("br"),G=P(),Ne=T("p"),Ne.textContent=ke,ve=P(),me=T("br"),Re=P(),Le=T("p"),Le.textContent=pt,Je=P(),Oe=T("br"),Ke=P(),w=T("p"),w.textContent=Q},l(I){e=R(I,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-bhocp0"&&(e.textContent=t),r=D(I),s=R(I,"BR",{}),i=D(I),a=R(I,"P",{"data-svelte-h":!0}),ye(a)!=="svelte-12tzi3f"&&(a.textContent=o),l=D(I),c=R(I,"BR",{}),u=D(I),h=R(I,"P",{"data-svelte-h":!0}),ye(h)!=="svelte-1gxe9lx"&&(h.textContent=p),v=D(I),f=R(I,"BR",{}),b=D(I),m=R(I,"P",{"data-svelte-h":!0}),ye(m)!=="svelte-ddjc2m"&&(m.textContent=d),_=D(I),k=R(I,"BR",{}),j=D(I),H=R(I,"P",{"data-svelte-h":!0}),ye(H)!=="svelte-33j76o"&&(H.textContent=N),S=D(I),B=R(I,"BR",{}),X=D(I),V=R(I,"P",{"data-svelte-h":!0}),ye(V)!=="svelte-qvtprs"&&(V.textContent=C),F=D(I),z=R(I,"BR",{}),G=D(I),Ne=R(I,"P",{"data-svelte-h":!0}),ye(Ne)!=="svelte-vcl8s3"&&(Ne.textContent=ke),ve=D(I),me=R(I,"BR",{}),Re=D(I),Le=R(I,"P",{"data-svelte-h":!0}),ye(Le)!=="svelte-1ww5ij7"&&(Le.textContent=pt),Je=D(I),Oe=R(I,"BR",{}),Ke=D(I),w=R(I,"P",{"data-svelte-h":!0}),ye(w)!=="svelte-1dvt5v1"&&(w.textContent=Q)},m(I,Y){x(I,e,Y),x(I,r,Y),x(I,s,Y),x(I,i,Y),x(I,a,Y),x(I,l,Y),x(I,c,Y),x(I,u,Y),x(I,h,Y),x(I,v,Y),x(I,f,Y),x(I,b,Y),x(I,m,Y),x(I,_,Y),x(I,k,Y),x(I,j,Y),x(I,H,Y),x(I,S,Y),x(I,B,Y),x(I,X,Y),x(I,V,Y),x(I,F,Y),x(I,z,Y),x(I,G,Y),x(I,Ne,Y),x(I,ve,Y),x(I,me,Y),x(I,Re,Y),x(I,Le,Y),x(I,Je,Y),x(I,Oe,Y),x(I,Ke,Y),x(I,w,Y)},p:Te,d(I){I&&(g(e),g(r),g(s),g(i),g(a),g(l),g(c),g(u),g(h),g(v),g(f),g(b),g(m),g(_),g(k),g(j),g(H),g(S),g(B),g(X),g(V),g(F),g(z),g(G),g(Ne),g(ve),g(me),g(Re),g(Le),g(Je),g(Oe),g(Ke),g(w))}}}function na(n){let e,t,r,s,i,a;t=new tt({props:{text:"Help",callback:n[1]}});function o(c){n[2](c)}let l={$$slots:{default:[ta]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.dialog=n[0]),s=new xn({props:l}),Se.push(()=>Fe(s,"dialog",o)),{c(){e=T("div"),te(t.$$.fragment),r=P(),te(s.$$.fragment)},l(c){e=R(c,"DIV",{});var u=Z(e);ne(t.$$.fragment,u),u.forEach(g),r=D(c),ne(s.$$.fragment,c)},m(c,u){x(c,e,u),re(t,e,null),x(c,r,u),re(s,c,u),a=!0},p(c,[u]){const h={};u&1&&(h.callback=c[1]),t.$set(h);const p={};u&8&&(p.$$scope={dirty:u,ctx:c}),!i&&u&1&&(i=!0,p.dialog=c[0],He(()=>i=!1)),s.$set(p)},i(c){a||(L(t.$$.fragment,c),L(s.$$.fragment,c),a=!0)},o(c){O(t.$$.fragment,c),O(s.$$.fragment,c),a=!1},d(c){c&&(g(e),g(r)),se(t),se(s,c)}}}function ra(n,e,t){let r;const s=()=>{r.showModal()};function i(a){r=a,t(0,r)}return[r,s,i]}class sa extends xe{constructor(e){super(),Ee(this,e,ra,na,we,{})}}function ia(n){let e,t,r,s,i,a;return e=new tt({props:{text:" - ",callback:n[1]}}),r=new tt({props:{text:"Fullscreen",callback:n[2]}}),i=new tt({props:{text:" + ",callback:n[3]}}),{c(){te(e.$$.fragment),t=P(),te(r.$$.fragment),s=P(),te(i.$$.fragment)},l(o){ne(e.$$.fragment,o),t=D(o),ne(r.$$.fragment,o),s=D(o),ne(i.$$.fragment,o)},m(o,l){re(e,o,l),x(o,t,l),re(r,o,l),x(o,s,l),re(i,o,l),a=!0},p(o,[l]){const c={};l&1&&(c.callback=o[1]),e.$set(c);const u={};l&1&&(u.callback=o[3]),i.$set(u)},i(o){a||(L(e.$$.fragment,o),L(r.$$.fragment,o),L(i.$$.fragment,o),a=!0)},o(o){O(e.$$.fragment,o),O(r.$$.fragment,o),O(i.$$.fragment,o),a=!1},d(o){o&&(g(t),g(s)),se(e,o),se(r,o),se(i,o)}}}function aa(n,e,t){let{zoom:r}=e;const s=()=>{const o={x:window.innerWidth/2,y:window.innerHeight/2};r(1.1,o)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},a=()=>{const o={x:window.innerWidth/2,y:window.innerHeight/2};r(.9,o)};return n.$$set=o=>{"zoom"in o&&t(0,r=o.zoom)},[r,s,i,a]}class oa extends xe{constructor(e){super(),Ee(this,e,aa,ia,we,{zoom:0})}}function rr(n,e,t){const r=n.slice();return r[5]=e[t],r}function sr(n,e,t){const r=n.slice();return r[8]=e[t],r}function ir(n,e,t){const r=n.slice();return r[11]=e[t],r}function ar(n,e){let t,r,s;return r=new Fi({props:{link:e[11]}}),{key:n,first:null,c(){t=be(),te(r.$$.fragment),this.h()},l(i){t=be(),ne(r.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){x(i,t,a),re(r,i,a),s=!0},p(i,a){e=i;const o={};a&2&&(o.link=e[11]),r.$set(o)},i(i){s||(L(r.$$.fragment,i),s=!0)},o(i){O(r.$$.fragment,i),s=!1},d(i){i&&g(t),se(r,i)}}}function or(n,e){let t,r,s;return r=new qi({props:{router:e[8]}}),{key:n,first:null,c(){t=be(),te(r.$$.fragment),this.h()},l(i){t=be(),ne(r.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){x(i,t,a),re(r,i,a),s=!0},p(i,a){e=i;const o={};a&2&&(o.router=e[8]),r.$set(o)},i(i){s||(L(r.$$.fragment,i),s=!0)},o(i){O(r.$$.fragment,i),s=!1},d(i){i&&g(t),se(r,i)}}}function lr(n,e){let t,r,s;return r=new Ai({props:{packet:e[5]}}),{key:n,first:null,c(){t=be(),te(r.$$.fragment),this.h()},l(i){t=be(),ne(r.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){x(i,t,a),re(r,i,a),s=!0},p(i,a){e=i;const o={};a&2&&(o.packet=e[5]),r.$set(o)},i(i){s||(L(r.$$.fragment,i),s=!0)},o(i){O(r.$$.fragment,i),s=!1},d(i){i&&g(t),se(r,i)}}}function la(n){let e=[],t=new Map,r,s=[],i=new Map,a,o=[],l=new Map,c,u,h=pe(n[1].links);const p=d=>d[11].id;for(let d=0;d<h.length;d+=1){let _=ir(n,h,d),k=p(_);t.set(k,e[d]=ar(k,_))}let v=pe(n[1].routers);const f=d=>d[8].id;for(let d=0;d<v.length;d+=1){let _=sr(n,v,d),k=f(_);i.set(k,s[d]=or(k,_))}let b=pe(n[1].packets);const m=d=>d[5].id;for(let d=0;d<b.length;d+=1){let _=rr(n,b,d),k=m(_);l.set(k,o[d]=lr(k,_))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();r=P();for(let d=0;d<s.length;d+=1)s[d].c();a=P();for(let d=0;d<o.length;d+=1)o[d].c();c=be()},l(d){for(let _=0;_<e.length;_+=1)e[_].l(d);r=D(d);for(let _=0;_<s.length;_+=1)s[_].l(d);a=D(d);for(let _=0;_<o.length;_+=1)o[_].l(d);c=be()},m(d,_){for(let k=0;k<e.length;k+=1)e[k]&&e[k].m(d,_);x(d,r,_);for(let k=0;k<s.length;k+=1)s[k]&&s[k].m(d,_);x(d,a,_);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(d,_);x(d,c,_),u=!0},p(d,_){_&2&&(h=pe(d[1].links),Ie(),e=hn(e,_,p,1,d,h,t,r.parentNode,fn,ar,r,ir),$e()),_&2&&(v=pe(d[1].routers),Ie(),s=hn(s,_,f,1,d,v,i,a.parentNode,fn,or,a,sr),$e()),_&2&&(b=pe(d[1].packets),Ie(),o=hn(o,_,m,1,d,b,l,c.parentNode,fn,lr,c,rr),$e())},i(d){if(!u){for(let _=0;_<h.length;_+=1)L(e[_]);for(let _=0;_<v.length;_+=1)L(s[_]);for(let _=0;_<b.length;_+=1)L(o[_]);u=!0}},o(d){for(let _=0;_<e.length;_+=1)O(e[_]);for(let _=0;_<s.length;_+=1)O(s[_]);for(let _=0;_<o.length;_+=1)O(o[_]);u=!1},d(d){d&&(g(r),g(a),g(c));for(let _=0;_<e.length;_+=1)e[_].d(d);for(let _=0;_<s.length;_+=1)s[_].d(d);for(let _=0;_<o.length;_+=1)o[_].d(d)}}}function ua(n){let e,t,r,s,i,a,o,l,c,u,h,p,v,f,b,m,d;function _(N){n[2](N)}let k={$$slots:{default:[la]},$$scope:{ctx:n}};n[0]!==void 0&&(k.zoom=n[0]),r=new Ti({props:k}),Se.push(()=>Fe(r,"zoom",_)),o=new ea({}),u=new sa({});function j(N){n[3](N)}let H={};return n[0]!==void 0&&(H.zoom=n[0]),v=new oa({props:H}),Se.push(()=>Fe(v,"zoom",j)),m=new Bi({}),{c(){e=T("div"),t=T("div"),te(r.$$.fragment),i=P(),a=T("div"),te(o.$$.fragment),l=P(),c=T("div"),te(u.$$.fragment),h=P(),p=T("div"),te(v.$$.fragment),b=P(),te(m.$$.fragment),this.h()},l(N){e=R(N,"DIV",{id:!0,class:!0});var S=Z(e);t=R(S,"DIV",{id:!0,class:!0});var B=Z(t);ne(r.$$.fragment,B),i=D(B),a=R(B,"DIV",{id:!0,class:!0});var X=Z(a);ne(o.$$.fragment,X),X.forEach(g),l=D(B),c=R(B,"DIV",{id:!0,class:!0});var V=Z(c);ne(u.$$.fragment,V),V.forEach(g),h=D(B),p=R(B,"DIV",{id:!0,class:!0});var C=Z(p);ne(v.$$.fragment,C),C.forEach(g),B.forEach(g),b=D(S),ne(m.$$.fragment,S),S.forEach(g),this.h()},h(){y(a,"id","top-left-bar"),y(a,"class","absolute-flex svelte-1kpnzxr"),y(c,"id","bottom-left-bar"),y(c,"class","absolute-flex svelte-1kpnzxr"),y(p,"id","bottom-right-bar"),y(p,"class","absolute-flex svelte-1kpnzxr"),y(t,"id","network"),y(t,"class","svelte-1kpnzxr"),y(e,"id","mpls"),y(e,"class","svelte-1kpnzxr")},m(N,S){x(N,e,S),E(e,t),re(r,t,null),E(t,i),E(t,a),re(o,a,null),E(t,l),E(t,c),re(u,c,null),E(t,h),E(t,p),re(v,p,null),E(e,b),re(m,e,null),d=!0},p(N,[S]){const B={};S&16386&&(B.$$scope={dirty:S,ctx:N}),!s&&S&1&&(s=!0,B.zoom=N[0],He(()=>s=!1)),r.$set(B);const X={};!f&&S&1&&(f=!0,X.zoom=N[0],He(()=>f=!1)),v.$set(X)},i(N){d||(L(r.$$.fragment,N),L(o.$$.fragment,N),L(u.$$.fragment,N),L(v.$$.fragment,N),L(m.$$.fragment,N),d=!0)},o(N){O(r.$$.fragment,N),O(o.$$.fragment,N),O(u.$$.fragment,N),O(v.$$.fragment,N),O(m.$$.fragment,N),d=!1},d(N){N&&g(e),se(r),se(o),se(u),se(v),se(m)}}}function ca(n,e,t){let r,s;Pe(n,qe,l=>t(4,r=l)),Pe(n,U,l=>t(1,s=l));let i;_r(()=>{window.addEventListener("visibilitychanged",()=>{ze(qe,r.running=!document.hidden,r)})}),Ys();function a(l){i=l,t(0,i)}function o(l){i=l,t(0,i)}return[i,s,a,o]}class da extends xe{constructor(e){super(),Ee(this,e,ca,ua,we,{})}}function fa(n){let e,t;return e=new da({}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,s){re(e,r,s),t=!0},p:Te,i(r){t||(L(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){se(e,r)}}}class wa extends xe{constructor(e){super(),Ee(this,e,null,fa,we,{})}}export{wa as component};
