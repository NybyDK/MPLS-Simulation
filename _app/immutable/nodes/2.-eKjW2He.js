var Lt=Object.defineProperty;var Ct=(n,e,t)=>e in n?Lt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var S=(n,e,t)=>(Ct(n,typeof e!="symbol"?e+"":e,t),t);import{r as ge,s as re,a as bt,u as mt,g as kt,b as vt,x as yt,e as fe,n as ie,c as de,i as Pe,y as _e,o as wt,z as Ue,A as Oe}from"../chunks/scheduler.C5v8YK5g.js";import{n as j,m as O,S as ue,i as ae,e as R,c as N,a as U,d as m,l as b,g as L,z as V,o as le,A as ce,s as H,B as K,f as F,h as $,C as Be,D as J,E as pe,v as Q,w as Z,x as ee,y as te,r as ve,p as ye,t as se,b as oe,j as me,F as we,G as Ee,H as It,q as ze}from"../chunks/index.quBbCW_3.js";import{w as De}from"../chunks/index.CD1dNpfE.js";function ne(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Me(n,e){j(n,1,1,()=>{e.delete(n.key)})}function xe(n,e,t,l,s,i,r,o,u,d,f,_){let a=n.length,g=i.length,p=a;const h={};for(;p--;)h[n[p].key]=p;const T=[],c=new Map,k=new Map,M=[];for(p=g;p--;){const I=_(s,i,p),v=t(I);let y=r.get(v);y?l&&M.push(()=>y.p(I,e)):(y=d(v,I),y.c()),c.set(v,T[p]=y),v in h&&k.set(v,Math.abs(p-h[v]))}const z=new Set,P=new Set;function w(I){O(I,1),I.m(o,f),r.set(I.key,I),f=I.first,g--}for(;a&&g;){const I=T[g-1],v=n[a-1],y=I.key,Y=v.key;I===v?(f=I.first,a--,g--):c.has(Y)?!r.has(y)||z.has(y)?w(I):P.has(Y)?a--:k.get(y)>k.get(Y)?(P.add(y),w(I)):(z.add(Y),a--):(u(v,r),a--)}for(;a--;){const I=n[a];c.has(I.key)||u(I,r)}for(;g;)w(T[g-1]);return ge(M),T}function Ae(n,e){const t={},l={},s={$$scope:1};let i=n.length;for(;i--;){const r=n[i],o=e[i];if(o){for(const u in r)u in o||(l[u]=1);for(const u in o)s[u]||(t[u]=o[u],s[u]=1);n[i]=o}else for(const u in r)s[u]=1}for(const r in l)r in t||(t[r]=void 0);return t}function Se(n){return typeof n=="object"&&n!==null?n:{}}let Bt=class{constructor(e,t,l){S(this,"bandwidth",0);this.id=e,this.source=t,this.target=l}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}};class $t{constructor(){S(this,"store",De());S(this,"set",this.store.set);S(this,"update",this.store.update);S(this,"subscribe",this.store.subscribe);S(this,"_map",new Map)}getPath(e,t){const l=this._map.get(e);if(l)return l.get(t)}findShortestPath(e,t){return Ve(e,t)}findShortestPaths(){const e=new Map,t=W.routers.filter(l=>l.type==="CE");for(const l of t){const s=new Map;for(const i of t){if(l===i)continue;const r=Ve(l,i);s.set(i.id,r)}e.set(l.id,s)}this._map=e}notify(){this.store.set(this._map)}}function Ve(n,e){const t=W.routers,l=t.length,s=new Array(l).fill(1/0),i=new Array(l).fill(!1),r=new Array(l).fill(null);s[t.indexOf(n)]=0;let o=!1;for(;!o;){let f=null,_=1/0;for(let a=0;a<l;a++)!i[a]&&s[a]<_&&(f=t[a],_=s[a]);if(f===null||f.id===e.id){o=!0;continue}i[t.indexOf(f)]=!0;for(const a of W.links){let g;if(a.source===f)g=a.target;else if(a.target===f)g=a.source;else continue;const p=t.indexOf(g),h=_+a.distance;h<s[p]&&(s[p]=h,r[p]=f)}}const u=[];let d=e;for(;d;){u.unshift(d);const f=t.indexOf(d);d=r[f]}return u}const Tt=new $t,Et=Tt;let Rt=class{constructor(e,t,l,s){S(this,"ttl",32);S(this,"label",-1);S(this,"nextHop");this.id=e,this.source=t,this.destination=l,this.node=s,this.nextHop=Et.findShortestPath(t,l)[1]}decrementTTL(){--this.ttl<=0&&this.drop()}drop(){W.deletePacket(this.id)}},je=class{constructor(e,t){this.id=e,this.node=t}};class be extends je{constructor(){super(...arguments);S(this,"address",`${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}`);S(this,"destinations",[]);S(this,"addEmptyDestination",()=>{this.destinations.push("")});S(this,"deleteDestination",t=>{this.destinations.splice(t,1)})}receivePacket(t){t.drop()}get type(){return"CE"}}class Ce extends je{constructor(){super(...arguments);S(this,"FIB",new Map);S(this,"LIB",new Map);S(this,"addEmptyFIBEntry",()=>{this.FIB.set("0",{label:0,nextHop:"0"})});S(this,"addEmptyLIBEntry",()=>{this.LIB.set(0,{outgoingLabel:0,nextHop:"0"})});S(this,"updateFIBAddress",(t,l)=>{const s=this.FIB.get(t);if(!s)throw new Error(`Unable to update old FIB address '${t}' to '${l}'.`);this.FIB.set(l,s),this.FIB.delete(t)});S(this,"updateLIBLabel",(t,l)=>{const s=this.LIB.get(t);if(!s)throw new Error(`Unable to update old LIB label '${t}' to '${l}'.`);this.LIB.set(l,s),this.LIB.delete(t)});S(this,"deleteFIBEntry",t=>{this.FIB.delete(t)});S(this,"deleteLIBEntry",t=>{this.LIB.delete(t)});S(this,"receiveFIBEntry",(t,l,s)=>{this.FIB.set(t,{label:l,nextHop:s})});S(this,"receiveLIBEntry",(t,l,s)=>{this.LIB.set(t,{outgoingLabel:l,nextHop:s})})}receivePacket(t){var s,i,r,o;const l=t.destination;if(t.label===-1){const u=(s=this.FIB.get(l.address))==null?void 0:s.nextHop;if(!u)return;const d=(i=this.FIB.get(l.address))==null?void 0:i.label;if(!d)return;t.label=d;const f=W.getRouter(parseInt(u));if(!f)return;t.nextHop=f}else{const u=(r=this.LIB.get(t.label))==null?void 0:r.nextHop;if(!u)return;const d=(o=this.LIB.get(t.label))==null?void 0:o.outgoingLabel;if(!d)return;t.label=d;const f=W.routers.find(_=>_ instanceof be&&_.address===u);if(!f)return;t.nextHop=f}t.decrementTTL()}get type(){return"LER"}}class Ne extends je{constructor(){super(...arguments);S(this,"LIB",new Map);S(this,"addEmptyLIBEntry",()=>{this.LIB.set(0,{outgoingLabel:0,nextHop:"0"})});S(this,"updateLIBLabel",(t,l)=>{const s=this.LIB.get(t);if(!s)throw new Error(`Unable to update old LIB label '${t}' to '${l}'.`);this.LIB.set(l,s),this.LIB.delete(t)});S(this,"deleteLIBEntry",t=>{this.LIB.delete(t)});S(this,"receiveLIBEntry",(t,l,s)=>{this.LIB.set(t,{outgoingLabel:l,nextHop:s})})}receivePacket(t){var r,o;const l=(r=this.LIB.get(t.label))==null?void 0:r.nextHop;if(!l)return;const s=(o=this.LIB.get(t.label))==null?void 0:o.outgoingLabel;if(!s)return;t.label=s;const i=W.getRouter(parseInt(l));i&&(t.nextHop=i,t.decrementTTL())}get type(){return"LSR"}}const Nt={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class Pt{constructor(){S(this,"store",De({routers:[],links:[],packets:[]}));S(this,"set",this.store.set);S(this,"update",this.store.update);S(this,"subscribe",this.store.subscribe);S(this,"_routers",[]);S(this,"_links",[]);S(this,"_packets",[]);S(this,"routerMap",new Map);S(this,"routerCounter",0);S(this,"packetCounter",0)}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!Nt[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new Bt(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e){const t=new be(this.routerCounter++,e);this.addRouter(t)}createLER(e){const t=new Ce(this.routerCounter++,e);this.addRouter(t)}createLSR(e){const t=new Ne(this.routerCounter++,e);this.addRouter(t)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),this.notify()}deleteRouter(e){this.getRouter(e)&&(this._routers=this._routers.filter(l=>l.id!==e),this._links=this._links.filter(l=>l.source.id!==e&&l.target.id!==e),this.routerMap.delete(e),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}addPacket(e,t){const l=new Rt(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(l),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.routerCounter=0,this.packetCounter=0,this.notify()}notify(){this.store.set(this.networkState)}}const Dt=new Pt,W=Dt,Te=De({running:!0,speedMultiplier:1}),$e=De(!1);function Mt(n){let e,t,l,s;const i=n[2].default,r=bt(i,n,n[1],null);return{c(){e=R("dialog"),r&&r.c(),this.h()},l(o){e=N(o,"DIALOG",{class:!0});var u=U(e);r&&r.l(u),u.forEach(m),this.h()},h(){b(e,"class","svelte-414ocx")},m(o,u){L(o,e,u),r&&r.m(e,null),n[4](e),t=!0,l||(s=V(e,"close",n[3]),l=!0)},p(o,[u]){r&&r.p&&(!t||u&2)&&mt(r,i,o,o[1],t?vt(i,o[1],u,null):kt(o[1]),null)},i(o){t||(O(r,o),t=!0)},o(o){j(r,o),t=!1},d(o){o&&m(e),r&&r.d(o),n[4](null),l=!1,s()}}}function xt(n,e,t){let{$$slots:l={},$$scope:s}=e,{dialog:i}=e;function r(u){yt.call(this,n,u)}function o(u){fe[u?"unshift":"push"](()=>{i=u,t(0,i)})}return n.$$set=u=>{"dialog"in u&&t(0,i=u.dialog),"$$scope"in u&&t(1,s=u.$$scope)},[i,s,l,r,o]}class Ye extends ue{constructor(e){super(),ae(this,e,xt,Mt,re,{dialog:0})}}function Xe(n,e,t){const l=n.slice();return l[24]=e[t][0],l[25]=e[t][1],l[31]=e,l[32]=t,l}function qe(n,e,t){const l=n.slice();return l[24]=e[t][0],l[25]=e[t][1],l[26]=e,l[27]=t,l}function Ge(n,e,t){const l=n.slice();return l[28]=e[t][0],l[25]=e[t][1],l[29]=e,l[30]=t,l}function We(n,e,t){const l=n.slice();return l[21]=e[t],l[22]=e,l[23]=t,l}function Ht(n){let e,t="LIB:",l,s,i,r='<th class="svelte-71n8bk">Incoming</th> <th class="svelte-71n8bk">Outgoing</th> <th class="svelte-71n8bk">Next hop</th>',o,u,d,f="+",_,a,g=ne([...n[0].LIB]),p=[];for(let h=0;h<g.length;h+=1)p[h]=Ke(Xe(n,g,h));return{c(){e=R("p"),e.textContent=t,l=H(),s=R("table"),i=R("tr"),i.innerHTML=r,o=H();for(let h=0;h<p.length;h+=1)p[h].c();u=H(),d=R("button"),d.textContent=f,this.h()},l(h){e=N(h,"P",{"data-svelte-h":!0}),K(e)!=="svelte-1j64kst"&&(e.textContent=t),l=F(h),s=N(h,"TABLE",{class:!0});var T=U(s);i=N(T,"TR",{"data-svelte-h":!0}),K(i)!=="svelte-1nxelgl"&&(i.innerHTML=r),o=F(T);for(let c=0;c<p.length;c+=1)p[c].l(T);T.forEach(m),u=F(h),d=N(h,"BUTTON",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-tb5kpv"&&(d.textContent=f),this.h()},h(){b(s,"class","svelte-71n8bk"),b(d,"class","svelte-71n8bk")},m(h,T){L(h,e,T),L(h,l,T),L(h,s,T),$(s,i),$(s,o);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(s,null);L(h,u,T),L(h,d,T),_||(a=V(d,"click",function(){Pe(n[1](n[0].addEmptyLIBEntry))&&n[1](n[0].addEmptyLIBEntry).apply(this,arguments)}),_=!0)},p(h,T){if(n=h,T[0]&9){g=ne([...n[0].LIB]);let c;for(c=0;c<g.length;c+=1){const k=Xe(n,g,c);p[c]?p[c].p(k,T):(p[c]=Ke(k),p[c].c(),p[c].m(s,null))}for(;c<p.length;c+=1)p[c].d(1);p.length=g.length}},d(h){h&&(m(e),m(l),m(s),m(u),m(d)),Be(p,h),_=!1,a()}}}function Ft(n){let e,t="FIB:",l,s,i,r='<th class="svelte-71n8bk">Address</th> <th class="svelte-71n8bk">Label</th> <th class="svelte-71n8bk">Next hop</th>',o,u,d,f="+",_,a,g="LIB:",p,h,T,c='<th class="svelte-71n8bk">Incoming</th> <th class="svelte-71n8bk">Outgoing</th> <th class="svelte-71n8bk">Next hop</th>',k,M,z,P="+",w,I,v=ne([...n[0].FIB]),y=[];for(let B=0;B<v.length;B+=1)y[B]=Je(Ge(n,v,B));let Y=ne([...n[0].LIB]),E=[];for(let B=0;B<Y.length;B+=1)E[B]=Qe(qe(n,Y,B));return{c(){e=R("p"),e.textContent=t,l=H(),s=R("table"),i=R("tr"),i.innerHTML=r,o=H();for(let B=0;B<y.length;B+=1)y[B].c();u=H(),d=R("button"),d.textContent=f,_=H(),a=R("p"),a.textContent=g,p=H(),h=R("table"),T=R("tr"),T.innerHTML=c,k=H();for(let B=0;B<E.length;B+=1)E[B].c();M=H(),z=R("button"),z.textContent=P,this.h()},l(B){e=N(B,"P",{"data-svelte-h":!0}),K(e)!=="svelte-1j6bdhj"&&(e.textContent=t),l=F(B),s=N(B,"TABLE",{class:!0});var A=U(s);i=N(A,"TR",{"data-svelte-h":!0}),K(i)!=="svelte-9j9p47"&&(i.innerHTML=r),o=F(A);for(let G=0;G<y.length;G+=1)y[G].l(A);A.forEach(m),u=F(B),d=N(B,"BUTTON",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-j46m6p"&&(d.textContent=f),_=F(B),a=N(B,"P",{"data-svelte-h":!0}),K(a)!=="svelte-1j64kst"&&(a.textContent=g),p=F(B),h=N(B,"TABLE",{class:!0});var D=U(h);T=N(D,"TR",{"data-svelte-h":!0}),K(T)!=="svelte-1nxelgl"&&(T.innerHTML=c),k=F(D);for(let G=0;G<E.length;G+=1)E[G].l(D);D.forEach(m),M=F(B),z=N(B,"BUTTON",{class:!0,"data-svelte-h":!0}),K(z)!=="svelte-tb5kpv"&&(z.textContent=P),this.h()},h(){b(s,"class","svelte-71n8bk"),b(d,"class","svelte-71n8bk"),b(h,"class","svelte-71n8bk"),b(z,"class","svelte-71n8bk")},m(B,A){L(B,e,A),L(B,l,A),L(B,s,A),$(s,i),$(s,o);for(let D=0;D<y.length;D+=1)y[D]&&y[D].m(s,null);L(B,u,A),L(B,d,A),L(B,_,A),L(B,a,A),L(B,p,A),L(B,h,A),$(h,T),$(h,k);for(let D=0;D<E.length;D+=1)E[D]&&E[D].m(h,null);L(B,M,A),L(B,z,A),w||(I=[V(d,"click",function(){Pe(n[1](n[0].addEmptyFIBEntry))&&n[1](n[0].addEmptyFIBEntry).apply(this,arguments)}),V(z,"click",function(){Pe(n[1](n[0].addEmptyLIBEntry))&&n[1](n[0].addEmptyLIBEntry).apply(this,arguments)})],w=!0)},p(B,A){if(n=B,A[0]&5){v=ne([...n[0].FIB]);let D;for(D=0;D<v.length;D+=1){const G=Ge(n,v,D);y[D]?y[D].p(G,A):(y[D]=Je(G),y[D].c(),y[D].m(s,null))}for(;D<y.length;D+=1)y[D].d(1);y.length=v.length}if(A[0]&9){Y=ne([...n[0].LIB]);let D;for(D=0;D<Y.length;D+=1){const G=qe(n,Y,D);E[D]?E[D].p(G,A):(E[D]=Qe(G),E[D].c(),E[D].m(h,null))}for(;D<E.length;D+=1)E[D].d(1);E.length=Y.length}},d(B){B&&(m(e),m(l),m(s),m(u),m(d),m(_),m(a),m(p),m(h),m(M),m(z)),Be(y,B),Be(E,B),w=!1,ge(I)}}}function zt(n){let e,t="Destinations:",l,s,i,r='<th class="svelte-71n8bk">Destination</th>',o,u,d,f="+",_,a,g=ne(n[0].destinations),p=[];for(let h=0;h<g.length;h+=1)p[h]=Ze(We(n,g,h));return{c(){e=R("p"),e.textContent=t,l=H(),s=R("table"),i=R("tr"),i.innerHTML=r,o=H();for(let h=0;h<p.length;h+=1)p[h].c();u=H(),d=R("button"),d.textContent=f,this.h()},l(h){e=N(h,"P",{"data-svelte-h":!0}),K(e)!=="svelte-1ixmdgd"&&(e.textContent=t),l=F(h),s=N(h,"TABLE",{class:!0});var T=U(s);i=N(T,"TR",{"data-svelte-h":!0}),K(i)!=="svelte-1f4xvyf"&&(i.innerHTML=r),o=F(T);for(let c=0;c<p.length;c+=1)p[c].l(T);T.forEach(m),u=F(h),d=N(h,"BUTTON",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-zn59e0"&&(d.textContent=f),this.h()},h(){b(s,"class","svelte-71n8bk"),b(d,"class","svelte-71n8bk")},m(h,T){L(h,e,T),L(h,l,T),L(h,s,T),$(s,i),$(s,o);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(s,null);L(h,u,T),L(h,d,T),_||(a=V(d,"click",function(){Pe(n[1](n[0].addEmptyDestination))&&n[1](n[0].addEmptyDestination).apply(this,arguments)}),_=!0)},p(h,T){if(n=h,T[0]&17){g=ne(n[0].destinations);let c;for(c=0;c<g.length;c+=1){const k=We(n,g,c);p[c]?p[c].p(k,T):(p[c]=Ze(k),p[c].c(),p[c].m(s,null))}for(;c<p.length;c+=1)p[c].d(1);p.length=g.length}},d(h){h&&(m(e),m(l),m(s),m(u),m(d)),Be(p,h),_=!1,a()}}}function Ke(n){let e,t,l,s,i,r,o,u,d,f,_,a,g="-",p,h,T;function c(...P){return n[16](n[24],...P)}function k(){n[17].call(o,n[31],n[32])}function M(){n[18].call(f,n[31],n[32])}function z(){return n[19](n[24])}return{c(){e=R("tr"),t=R("td"),l=R("input"),i=H(),r=R("td"),o=R("input"),u=H(),d=R("td"),f=R("input"),_=H(),a=R("button"),a.textContent=g,p=H(),this.h()},l(P){e=N(P,"TR",{});var w=U(e);t=N(w,"TD",{class:!0});var I=U(t);l=N(I,"INPUT",{type:!0,class:!0}),I.forEach(m),i=F(w),r=N(w,"TD",{class:!0});var v=U(r);o=N(v,"INPUT",{type:!0,class:!0}),v.forEach(m),u=F(w),d=N(w,"TD",{class:!0});var y=U(d);f=N(y,"INPUT",{type:!0,class:!0}),y.forEach(m),_=F(w),a=N(w,"BUTTON",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-1jia542"&&(a.textContent=g),p=F(w),w.forEach(m),this.h()},h(){b(l,"type","number"),l.value=s=n[24],b(l,"class","svelte-71n8bk"),b(t,"class","svelte-71n8bk"),b(o,"type","number"),b(o,"class","svelte-71n8bk"),b(r,"class","svelte-71n8bk"),b(f,"type","text"),b(f,"class","svelte-71n8bk"),b(d,"class","svelte-71n8bk"),b(a,"class","svelte-71n8bk")},m(P,w){L(P,e,w),$(e,t),$(t,l),$(e,i),$(e,r),$(r,o),J(o,n[25].outgoingLabel),$(e,u),$(e,d),$(d,f),J(f,n[25].nextHop),$(e,_),$(e,a),$(e,p),h||(T=[V(l,"change",c),V(o,"input",k),V(f,"input",M),V(a,"click",z)],h=!0)},p(P,w){n=P,w[0]&1&&s!==(s=n[24])&&l.value!==s&&(l.value=s),w[0]&1&&ce(o.value)!==n[25].outgoingLabel&&J(o,n[25].outgoingLabel),w[0]&1&&f.value!==n[25].nextHop&&J(f,n[25].nextHop)},d(P){P&&m(e),h=!1,ge(T)}}}function Je(n){let e,t,l,s,i,r,o,u,d,f,_,a,g="-",p,h,T;function c(...P){return n[8](n[28],...P)}function k(){n[9].call(o,n[29],n[30])}function M(){n[10].call(f,n[29],n[30])}function z(){return n[11](n[28])}return{c(){e=R("tr"),t=R("td"),l=R("input"),i=H(),r=R("td"),o=R("input"),u=H(),d=R("td"),f=R("input"),_=H(),a=R("button"),a.textContent=g,p=H(),this.h()},l(P){e=N(P,"TR",{});var w=U(e);t=N(w,"TD",{class:!0});var I=U(t);l=N(I,"INPUT",{type:!0,class:!0}),I.forEach(m),i=F(w),r=N(w,"TD",{class:!0});var v=U(r);o=N(v,"INPUT",{type:!0,class:!0}),v.forEach(m),u=F(w),d=N(w,"TD",{class:!0});var y=U(d);f=N(y,"INPUT",{type:!0,class:!0}),y.forEach(m),_=F(w),a=N(w,"BUTTON",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-t02fbo"&&(a.textContent=g),p=F(w),w.forEach(m),this.h()},h(){b(l,"type","text"),l.value=s=n[28],b(l,"class","svelte-71n8bk"),b(t,"class","svelte-71n8bk"),b(o,"type","number"),b(o,"class","svelte-71n8bk"),b(r,"class","svelte-71n8bk"),b(f,"type","text"),b(f,"class","svelte-71n8bk"),b(d,"class","svelte-71n8bk"),b(a,"class","svelte-71n8bk")},m(P,w){L(P,e,w),$(e,t),$(t,l),$(e,i),$(e,r),$(r,o),J(o,n[25].label),$(e,u),$(e,d),$(d,f),J(f,n[25].nextHop),$(e,_),$(e,a),$(e,p),h||(T=[V(l,"change",c),V(o,"input",k),V(f,"input",M),V(a,"click",z)],h=!0)},p(P,w){n=P,w[0]&1&&s!==(s=n[28])&&l.value!==s&&(l.value=s),w[0]&1&&ce(o.value)!==n[25].label&&J(o,n[25].label),w[0]&1&&f.value!==n[25].nextHop&&J(f,n[25].nextHop)},d(P){P&&m(e),h=!1,ge(T)}}}function Qe(n){let e,t,l,s,i,r,o,u,d,f,_,a,g="-",p,h,T;function c(...P){return n[12](n[24],...P)}function k(){n[13].call(o,n[26],n[27])}function M(){n[14].call(f,n[26],n[27])}function z(){return n[15](n[24])}return{c(){e=R("tr"),t=R("td"),l=R("input"),i=H(),r=R("td"),o=R("input"),u=H(),d=R("td"),f=R("input"),_=H(),a=R("button"),a.textContent=g,p=H(),this.h()},l(P){e=N(P,"TR",{});var w=U(e);t=N(w,"TD",{class:!0});var I=U(t);l=N(I,"INPUT",{type:!0,class:!0}),I.forEach(m),i=F(w),r=N(w,"TD",{class:!0});var v=U(r);o=N(v,"INPUT",{type:!0,class:!0}),v.forEach(m),u=F(w),d=N(w,"TD",{class:!0});var y=U(d);f=N(y,"INPUT",{type:!0,class:!0}),y.forEach(m),_=F(w),a=N(w,"BUTTON",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-19m5ayk"&&(a.textContent=g),p=F(w),w.forEach(m),this.h()},h(){b(l,"type","number"),l.value=s=n[24],b(l,"class","svelte-71n8bk"),b(t,"class","svelte-71n8bk"),b(o,"type","number"),b(o,"class","svelte-71n8bk"),b(r,"class","svelte-71n8bk"),b(f,"type","text"),b(f,"class","svelte-71n8bk"),b(d,"class","svelte-71n8bk"),b(a,"class","svelte-71n8bk")},m(P,w){L(P,e,w),$(e,t),$(t,l),$(e,i),$(e,r),$(r,o),J(o,n[25].outgoingLabel),$(e,u),$(e,d),$(d,f),J(f,n[25].nextHop),$(e,_),$(e,a),$(e,p),h||(T=[V(l,"change",c),V(o,"input",k),V(f,"input",M),V(a,"click",z)],h=!0)},p(P,w){n=P,w[0]&1&&s!==(s=n[24])&&l.value!==s&&(l.value=s),w[0]&1&&ce(o.value)!==n[25].outgoingLabel&&J(o,n[25].outgoingLabel),w[0]&1&&f.value!==n[25].nextHop&&J(f,n[25].nextHop)},d(P){P&&m(e),h=!1,ge(T)}}}function Ze(n){let e,t,l,s,i,r="-",o,u,d;function f(){n[5].call(l,n[22],n[23])}function _(){return n[7](n[23])}return{c(){e=R("tr"),t=R("td"),l=R("input"),s=H(),i=R("button"),i.textContent=r,o=H(),this.h()},l(a){e=N(a,"TR",{});var g=U(e);t=N(g,"TD",{class:!0});var p=U(t);l=N(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(m),s=F(g),i=N(g,"BUTTON",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-z317ay"&&(i.textContent=r),o=F(g),g.forEach(m),this.h()},h(){b(l,"type","text"),b(l,"placeholder","Address"),b(l,"class","svelte-71n8bk"),b(t,"class","svelte-71n8bk"),b(i,"class","svelte-71n8bk")},m(a,g){L(a,e,g),$(e,t),$(t,l),J(l,n[21]),$(e,s),$(e,i),$(e,o),u||(d=[V(l,"input",f),V(l,"change",n[6]),V(i,"click",_)],u=!0)},p(a,g){n=a,g[0]&1&&l.value!==n[21]&&J(l,n[21])},d(a){a&&m(e),u=!1,ge(d)}}}function Ut(n){let e;function t(i,r){if(i[0]instanceof be)return zt;if(i[0]instanceof Ce)return Ft;if(i[0]instanceof Ne)return Ht}let l=t(n),s=l&&l(n);return{c(){s&&s.c(),e=le()},l(i){s&&s.l(i),e=le()},m(i,r){s&&s.m(i,r),L(i,e,r)},p(i,r){l===(l=t(i))&&s?s.p(i,r):(s&&s.d(1),s=l&&l(i),s&&(s.c(),s.m(e.parentNode,e)))},i:ie,o:ie,d(i){i&&m(e),s&&s.d(i)}}}function Ot(n,e,t){let l;de(n,W,v=>t(20,l=v));let{router:s}=e;function i(v){return()=>{v(),t(0,s)}}function r(v,y){if(!(v.target instanceof HTMLInputElement)||!(s instanceof Ce))return;const Y=v.target.value;if(s.FIB.get(Y)){alert("Address already exists in FIB.");return}s.updateFIBAddress(y,Y)}function o(v,y){if(!(v.target instanceof HTMLInputElement)||!(s instanceof Ne))return;const Y=parseInt(v.target.value);if(s.LIB.get(Y)){alert("Label already exists in LIB.");return}s.updateLIBLabel(y,Y)}function u(v){if(!(v.target instanceof HTMLInputElement)||!(s instanceof be))return;const y=v.target.value,E=l.routers.filter(G=>G instanceof be).find(G=>G.address===y);if(!E){alert("Destination router not found.");return}const B=Et.findShortestPath(s,E);let A=Math.floor(Math.random()*(2**20-1-16+1)+16),D=!0;for(let G=B.length-1;G>0;G--){const Le=B[G],x=B[G-1],q=A;A=Math.floor(Math.random()*(2**20-1-16+1)+16),x instanceof Ce&&D?(x.receiveLIBEntry(A,-1,y),D=!1):x instanceof Ce&&!D?x.receiveFIBEntry(y,q,Le.id.toString()):x instanceof Ne&&x.receiveLIBEntry(A,q,Le.id.toString())}}function d(v,y){v[y]=this.value,t(0,s)}const f=v=>{u(v)},_=v=>{s instanceof be&&(s.deleteDestination(v),t(0,s))},a=(v,y)=>{r(y,v)};function g(v,y){v[y][1].label=ce(this.value),t(0,s)}function p(v,y){v[y][1].nextHop=this.value,t(0,s)}const h=v=>{s instanceof Ce&&(s.deleteFIBEntry(v),t(0,s))},T=(v,y)=>{o(y,v)};function c(v,y){v[y][1].outgoingLabel=ce(this.value),t(0,s)}function k(v,y){v[y][1].nextHop=this.value,t(0,s)}const M=v=>{s instanceof Ce&&(s.deleteLIBEntry(v),t(0,s))},z=(v,y)=>{o(y,v)};function P(v,y){v[y][1].outgoingLabel=ce(this.value),t(0,s)}function w(v,y){v[y][1].nextHop=this.value,t(0,s)}const I=v=>{s instanceof Ne&&(s.deleteLIBEntry(v),t(0,s))};return n.$$set=v=>{"router"in v&&t(0,s=v.router)},[s,i,r,o,u,d,f,_,a,g,p,h,T,c,k,M,z,P,w,I]}class At extends ue{constructor(e){super(),ae(this,e,Ot,Ut,re,{router:0},null,[-1,-1])}}function St(n){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=R("p"),e.textContent=t},l(l){e=N(l,"P",{"data-svelte-h":!0}),K(e)!=="svelte-1214eal"&&(e.textContent=t)},m(l,s){L(l,e,s)},p:ie,i:ie,o:ie,d(l){l&&m(e)}}}function jt(n){let e,t,l,s,i,r,o=n[0].id+"",u,d,f,_,a=n[0].type+"",g,p,h,T,c,k,M,z,P,w,I,v,y,Y="Delete Router",E,B,A,D=n[0]instanceof be&&et(n);function G(x){n[7](x)}let Le={};return n[0]!==void 0&&(Le.router=n[0]),w=new At({props:Le}),fe.push(()=>pe(w,"router",G)),{c(){e=R("label"),t=se(`Label:
      `),l=R("input"),s=H(),i=R("p"),r=se("ID: "),u=se(o),d=H(),f=R("p"),_=se("Type: "),g=se(a),p=H(),h=R("label"),T=se(`Position:
      `),c=R("input"),k=H(),M=R("input"),z=H(),D&&D.c(),P=H(),Q(w.$$.fragment),v=H(),y=R("button"),y.textContent=Y,this.h()},l(x){e=N(x,"LABEL",{});var q=U(e);t=oe(q,`Label:
      `),l=N(q,"INPUT",{type:!0}),q.forEach(m),s=F(x),i=N(x,"P",{});var ke=U(i);r=oe(ke,"ID: "),u=oe(ke,o),ke.forEach(m),d=F(x),f=N(x,"P",{});var C=U(f);_=oe(C,"Type: "),g=oe(C,a),C.forEach(m),p=F(x),h=N(x,"LABEL",{});var X=U(h);T=oe(X,`Position:
      `),c=N(X,"INPUT",{type:!0}),k=F(X),M=N(X,"INPUT",{type:!0}),X.forEach(m),z=F(x),D&&D.l(x),P=F(x),Z(w.$$.fragment,x),v=F(x),y=N(x,"BUTTON",{"data-svelte-h":!0}),K(y)!=="svelte-ufhzdt"&&(y.textContent=Y),this.h()},h(){b(l,"type","text"),b(c,"type","number"),c.disabled=n[2],b(M,"type","number"),M.disabled=n[2]},m(x,q){L(x,e,q),$(e,t),$(e,l),J(l,n[0].node.label),L(x,s,q),L(x,i,q),$(i,r),$(i,u),L(x,d,q),L(x,f,q),$(f,_),$(f,g),L(x,p,q),L(x,h,q),$(h,T),$(h,c),J(c,n[0].node.x),$(h,k),$(h,M),J(M,n[0].node.y),L(x,z,q),D&&D.m(x,q),L(x,P,q),ee(w,x,q),L(x,v,q),L(x,y,q),E=!0,B||(A=[V(l,"input",n[4]),V(c,"input",n[5]),V(M,"input",n[6]),V(y,"click",n[3])],B=!0)},p(x,q){q&1&&l.value!==x[0].node.label&&J(l,x[0].node.label),(!E||q&1)&&o!==(o=x[0].id+"")&&me(u,o),(!E||q&1)&&a!==(a=x[0].type+"")&&me(g,a),(!E||q&4)&&(c.disabled=x[2]),q&1&&ce(c.value)!==x[0].node.x&&J(c,x[0].node.x),(!E||q&4)&&(M.disabled=x[2]),q&1&&ce(M.value)!==x[0].node.y&&J(M,x[0].node.y),x[0]instanceof be?D?D.p(x,q):(D=et(x),D.c(),D.m(P.parentNode,P)):D&&(D.d(1),D=null);const ke={};!I&&q&1&&(I=!0,ke.router=x[0],_e(()=>I=!1)),w.$set(ke)},i(x){E||(O(w.$$.fragment,x),E=!0)},o(x){j(w.$$.fragment,x),E=!1},d(x){x&&(m(e),m(s),m(i),m(d),m(f),m(p),m(h),m(z),m(P),m(v),m(y)),D&&D.d(x),te(w,x),B=!1,ge(A)}}}function et(n){let e,t,l=n[0].address+"",s;return{c(){e=R("p"),t=se("Address: "),s=se(l)},l(i){e=N(i,"P",{});var r=U(e);t=oe(r,"Address: "),s=oe(r,l),r.forEach(m)},m(i,r){L(i,e,r),$(e,t),$(e,s)},p(i,r){r&1&&l!==(l=i[0].address+"")&&me(s,l)},d(i){i&&m(e)}}}function Yt(n){let e,t,l,s;const i=[jt,St],r=[];function o(u,d){return u[0]?0:1}return e=o(n),t=r[e]=i[e](n),{c(){t.c(),l=le()},l(u){t.l(u),l=le()},m(u,d){r[e].m(u,d),L(u,l,d),s=!0},p(u,d){let f=e;e=o(u),e===f?r[e].p(u,d):(ve(),j(r[f],1,1,()=>{r[f]=null}),ye(),t=r[e],t?t.p(u,d):(t=r[e]=i[e](u),t.c()),O(t,1),t.m(l.parentNode,l))},i(u){s||(O(t),s=!0)},o(u){j(t),s=!1},d(u){u&&m(l),r[e].d(u)}}}function Vt(n){let e,t,l;function s(r){n[8](r)}let i={$$slots:{default:[Yt]},$$scope:{ctx:n}};return n[1]!==void 0&&(i.dialog=n[1]),e=new Ye({props:i}),fe.push(()=>pe(e,"dialog",s)),e.$on("close",n[9]),{c(){Q(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,o){ee(e,r,o),l=!0},p(r,[o]){const u={};o&1029&&(u.$$scope={dirty:o,ctx:r}),!t&&o&2&&(t=!0,u.dialog=r[1],_e(()=>t=!1)),e.$set(u)},i(r){l||(O(e.$$.fragment,r),l=!0)},o(r){j(e.$$.fragment,r),l=!1},d(r){te(e,r)}}}function Xt(n,e,t){let l;de(n,$e,g=>t(2,l=g));let{router:s}=e,{dialog:i}=e;function r(){!l&&s&&confirm("Are you sure you want to delete this router?")&&(W.deleteRouter(s.id),i.close())}function o(){s.node.label=this.value,t(0,s)}function u(){s.node.x=ce(this.value),t(0,s)}function d(){s.node.y=ce(this.value),t(0,s)}function f(g){s=g,t(0,s)}function _(g){i=g,t(1,i)}const a=()=>{W.notify()};return n.$$set=g=>{"router"in g&&t(0,s=g.router),"dialog"in g&&t(1,i=g.dialog)},[s,i,l,r,o,u,d,f,_,a]}class qt extends ue{constructor(e){super(),ae(this,e,Xt,Vt,re,{router:0,dialog:1})}}function Gt(n){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=R("p"),e.textContent=t},l(l){e=N(l,"P",{"data-svelte-h":!0}),K(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(l,s){L(l,e,s)},p:ie,d(l){l&&m(e)}}}function Wt(n){let e,t=n[0].distance+"",l,s,i,r,o,u,d,f="Delete Link",_,a;return{c(){e=se("Distance: "),l=se(t),s=H(),i=R("label"),r=se(`Bandwidth:
      `),o=R("input"),u=H(),d=R("button"),d.textContent=f,this.h()},l(g){e=oe(g,"Distance: "),l=oe(g,t),s=F(g),i=N(g,"LABEL",{class:!0});var p=U(i);r=oe(p,`Bandwidth:
      `),o=N(p,"INPUT",{type:!0,class:!0}),p.forEach(m),u=F(g),d=N(g,"BUTTON",{"data-svelte-h":!0}),K(d)!=="svelte-rk1ni8"&&(d.textContent=f),this.h()},h(){b(o,"type","number"),o.disabled=n[2],b(o,"class","svelte-mdz6ho"),b(i,"class","svelte-mdz6ho")},m(g,p){L(g,e,p),L(g,l,p),L(g,s,p),L(g,i,p),$(i,r),$(i,o),J(o,n[0].bandwidth),L(g,u,p),L(g,d,p),_||(a=[V(o,"input",n[4]),V(d,"click",n[3])],_=!0)},p(g,p){p&1&&t!==(t=g[0].distance+"")&&me(l,t),p&4&&(o.disabled=g[2]),p&1&&ce(o.value)!==g[0].bandwidth&&J(o,g[0].bandwidth)},d(g){g&&(m(e),m(l),m(s),m(i),m(u),m(d)),_=!1,ge(a)}}}function Kt(n){let e;function t(i,r){return i[0]?Wt:Gt}let l=t(n),s=l(n);return{c(){s.c(),e=le()},l(i){s.l(i),e=le()},m(i,r){s.m(i,r),L(i,e,r)},p(i,r){l===(l=t(i))&&s?s.p(i,r):(s.d(1),s=l(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&m(e),s.d(i)}}}function Jt(n){let e,t,l;function s(r){n[5](r)}let i={$$slots:{default:[Kt]},$$scope:{ctx:n}};return n[1]!==void 0&&(i.dialog=n[1]),e=new Ye({props:i}),fe.push(()=>pe(e,"dialog",s)),e.$on("close",n[6]),{c(){Q(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,o){ee(e,r,o),l=!0},p(r,[o]){const u={};o&133&&(u.$$scope={dirty:o,ctx:r}),!t&&o&2&&(t=!0,u.dialog=r[1],_e(()=>t=!1)),e.$set(u)},i(r){l||(O(e.$$.fragment,r),l=!0)},o(r){j(e.$$.fragment,r),l=!1},d(r){te(e,r)}}}function Qt(n,e,t){let l;de(n,$e,f=>t(2,l=f));let{link:s}=e,{dialog:i}=e;function r(){!l&&s&&confirm("Are you sure you want to delete this link?")&&(W.deleteLink(s.id),i.close())}function o(){s.bandwidth=ce(this.value),t(0,s)}function u(f){i=f,t(1,i)}const d=()=>{W.notify()};return n.$$set=f=>{"link"in f&&t(0,s=f.link),"dialog"in f&&t(1,i=f.dialog)},[s,i,l,r,o,u,d]}class Zt extends ue{constructor(e){super(),ae(this,e,Qt,Jt,re,{link:0,dialog:1})}}function tt(n){let e,t="Loading...";return{c(){e=R("p"),e.textContent=t,this.h()},l(l){e=N(l,"P",{style:!0,"data-svelte-h":!0}),K(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){ze(e,"font-size","200px")},m(l,s){L(l,e,s)},d(l){l&&m(e)}}}function nt(n){let e,t,l,s,i;return{c(){e=we("line"),this.h()},l(r){e=Ee(r,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),U(e).forEach(m),this.h()},h(){b(e,"x1",t=n[3].node.x),b(e,"y1",l=n[3].node.y),b(e,"x2",s=n[17](n[1].x)),b(e,"y2",i=n[18](n[1].y))},m(r,o){L(r,e,o)},p(r,o){o[0]&8&&t!==(t=r[3].node.x)&&b(e,"x1",t),o[0]&8&&l!==(l=r[3].node.y)&&b(e,"y1",l),o[0]&2&&s!==(s=r[17](r[1].x))&&b(e,"x2",s),o[0]&2&&i!==(i=r[18](r[1].y))&&b(e,"y2",i)},d(r){r&&m(e)}}}function en(n){let e,t,l,s,i,r,o,u,d,f,_,a,g,p,h,T,c=!n[8]&&tt(),k=!n[9]&&n[5]===n[10].CONNECTING&&n[3]&&nt(n);const M=n[21].default,z=bt(M,n,n[20],null);function P(E){n[24](E)}function w(E){n[25](E)}let I={};n[3]!==void 0&&(I.router=n[3]),n[6]!==void 0&&(I.dialog=n[6]),o=new qt({props:I}),fe.push(()=>pe(o,"router",P)),fe.push(()=>pe(o,"dialog",w));function v(E){n[26](E)}function y(E){n[27](E)}let Y={};return n[4]!==void 0&&(Y.link=n[4]),n[7]!==void 0&&(Y.dialog=n[7]),_=new Zt({props:Y}),fe.push(()=>pe(_,"link",v)),fe.push(()=>pe(_,"dialog",y)),{c(){c&&c.c(),e=H(),t=we("svg"),k&&k.c(),l=le(),z&&z.c(),r=H(),Q(o.$$.fragment),f=H(),Q(_.$$.fragment),this.h()},l(E){c&&c.l(E),e=F(E),t=Ee(E,"svg",{viewBox:!0,role:!0,tabindex:!0,style:!0,class:!0});var B=U(t);k&&k.l(B),l=le(),z&&z.l(B),B.forEach(m),r=F(E),Z(o.$$.fragment,E),f=F(E),Z(_.$$.fragment,E),this.h()},h(){b(t,"viewBox",s=`${n[0].x} ${n[0].y} ${n[0].width} ${n[0].height}`),b(t,"role","button"),b(t,"tabindex","-1"),b(t,"style",i=`cursor: ${n[9]?"default":n[11][n[5]]};`),b(t,"class","svelte-1cmb9l6")},m(E,B){c&&c.m(E,B),L(E,e,B),L(E,t,B),k&&k.m(t,null),$(t,l),z&&z.m(t,null),n[23](t),L(E,r,B),ee(o,E,B),L(E,f,B),ee(_,E,B),p=!0,h||(T=[V(t,"pointerdown",n[12]),V(t,"pointerup",n[13]),V(t,"wheel",n[14]),V(t,"dblclick",n[15]),V(t,"dragover",It(n[22])),V(t,"drop",n[16])],h=!0)},p(E,B){E[8]?c&&(c.d(1),c=null):c||(c=tt(),c.c(),c.m(e.parentNode,e)),!E[9]&&E[5]===E[10].CONNECTING&&E[3]?k?k.p(E,B):(k=nt(E),k.c(),k.m(t,l)):k&&(k.d(1),k=null),z&&z.p&&(!p||B[0]&1048576)&&mt(z,M,E,E[20],p?vt(M,E[20],B,null):kt(E[20]),null),(!p||B[0]&1&&s!==(s=`${E[0].x} ${E[0].y} ${E[0].width} ${E[0].height}`))&&b(t,"viewBox",s),(!p||B[0]&544&&i!==(i=`cursor: ${E[9]?"default":E[11][E[5]]};`))&&b(t,"style",i);const A={};!u&&B[0]&8&&(u=!0,A.router=E[3],_e(()=>u=!1)),!d&&B[0]&64&&(d=!0,A.dialog=E[6],_e(()=>d=!1)),o.$set(A);const D={};!a&&B[0]&16&&(a=!0,D.link=E[4],_e(()=>a=!1)),!g&&B[0]&128&&(g=!0,D.dialog=E[7],_e(()=>g=!1)),_.$set(D)},i(E){p||(O(z,E),O(o.$$.fragment,E),O(_.$$.fragment,E),p=!0)},o(E){j(z,E),j(o.$$.fragment,E),j(_.$$.fragment,E),p=!1},d(E){E&&(m(e),m(t),m(r),m(f)),c&&c.d(E),k&&k.d(),z&&z.d(E),n[23](null),te(o,E),te(_,E),h=!1,ge(T)}}}function tn(n,e,t){let l;de(n,$e,C=>t(9,l=C));let{$$slots:s={},$$scope:i}=e;var r=(C=>(C[C.NONE=0]="NONE",C[C.DRAGGING=1]="DRAGGING",C[C.PANNING=2]="PANNING",C[C.CONNECTING=3]="CONNECTING",C))(r||{});const o={x:0,y:0,width:0,height:0,get scale(){return _?this.width/_.getBoundingClientRect().width:1}},u={x:0,y:0},d={x:0,y:0},f={0:"move",1:"grabbing",2:"grabbing",3:"crosshair"};let _=null,a=null,g=null,p=0,h,T,c=!1;wt(()=>{if(!_)return;new ResizeObserver(k).observe(_),requestAnimationFrame(()=>{_&&(t(0,o.x=_.getBoundingClientRect().width/-2,o),t(0,o.y=_.getBoundingClientRect().height/-2,o))}),t(8,c=!0)});function k(){if(!_)return;const C=o.scale||1;t(0,o.width=_.getBoundingClientRect().width*C,o),t(0,o.height=_.getBoundingClientRect().height*C,o)}function M(C){if(!(C.target instanceof Element))return;C.preventDefault(),_==null||_.addEventListener("pointermove",P),_==null||_.setPointerCapture(C.pointerId);const X=C.target.id;if(X){if(t(3,a=W.getRouter(parseInt(X))||null),!a)return;C.shiftKey?t(5,p=3):(d.x=a.node.x,d.y=a.node.y,t(5,p=1))}else t(5,p=2);t(1,u.x=C.clientX,u),t(1,u.y=C.clientY,u)}function z(C){if(C.target instanceof Element){if(C.preventDefault(),!l&&p===3&&a){const X=document.elementFromPoint(C.clientX,C.clientY),he=(X==null?void 0:X.tagName)==="circle"?X.id:null,Re=W.getRouter(parseInt(he??""));Re&&W.addLink({source:a,target:Re})}t(5,p=0),t(3,a=null),_==null||_.releasePointerCapture(C.pointerId),_==null||_.removeEventListener("pointermove",P)}}function P(C){C.preventDefault();const X={x:(C.clientX-u.x)*o.scale,y:(C.clientY-u.y)*o.scale};!l&&p===1&&a?(t(3,a.node.x=d.x+X.x,a),t(3,a.node.y=d.y+X.y,a),W.notify()):p===2?(t(1,u.x=C.clientX,u),t(1,u.y=C.clientY,u),t(0,o.x-=X.x,o),t(0,o.y-=X.y,o)):!l&&p===3&&(t(1,u.x=C.clientX,u),t(1,u.y=C.clientY,u))}function w(C){C.preventDefault(),t(1,u.x=C.clientX,u),t(1,u.y=C.clientY,u);const X=C.deltaY>0?1.025:.975;I(X,u)}function I(C,X){if(!_||o.scale<.1&&C<1||o.scale>5&&C>1)return;const he=_.getBoundingClientRect(),Re={x:(X.x-he.left)/he.width,y:(X.y-he.top)/he.height};t(0,o.x-=o.width*(C-1)*Re.x,o),t(0,o.y-=o.height*(C-1)*Re.y,o),t(0,o.width*=C,o),t(0,o.height*=C,o)}function v(C){if(!(C.target instanceof Element))return;C.preventDefault();const X=document.elementFromPoint(C.clientX,C.clientY);X&&(X.tagName==="circle"?y(X.id):X.tagName==="rect"&&Y(X.id))}function y(C){const X=W.getRouter(parseInt(C));X&&(t(3,a=X),h.showModal())}function Y(C){const X=W.links.find(he=>C===he.id);X&&(t(4,g=X),T.showModal())}function E(C){var he;switch(C.preventDefault(),(he=C.dataTransfer)==null?void 0:he.getData("text/plain")){case"CE":W.createCE({label:"CE",x:B(C.clientX),y:A(C.clientY)});break;case"LER":W.createLER({label:"LER",x:B(C.clientX),y:A(C.clientY)});break;case"LSR":W.createLSR({label:"LSR",x:B(C.clientX),y:A(C.clientY)});break}}function B(C){return _?(C-_.getBoundingClientRect().left)*o.scale+o.x:C}function A(C){return _?(C-_.getBoundingClientRect().top)*o.scale+o.y:C}function D(C){yt.call(this,n,C)}function G(C){fe[C?"unshift":"push"](()=>{_=C,t(2,_)})}function Le(C){a=C,t(3,a)}function x(C){h=C,t(6,h)}function q(C){g=C,t(4,g)}function ke(C){T=C,t(7,T)}return n.$$set=C=>{"$$scope"in C&&t(20,i=C.$$scope)},[o,u,_,a,g,p,h,T,c,l,r,f,M,z,w,v,E,B,A,I,i,s,D,G,Le,x,q,ke]}class nn extends ue{constructor(e){super(),ae(this,e,tn,en,re,{zoom:19},null,[-1,-1])}get zoom(){return this.$$.ctx[19]}}function ln(n){let e,t,l,s;return{c(){e=R("button"),t=se(n[0]),this.h()},l(i){e=N(i,"BUTTON",{style:!0,class:!0});var r=U(e);t=oe(r,n[0]),r.forEach(m),this.h()},h(){b(e,"style",n[2]),b(e,"class","svelte-1aag39e")},m(i,r){L(i,e,r),$(e,t),l||(s=V(e,"click",function(){Pe(n[1])&&n[1].apply(this,arguments)}),l=!0)},p(i,[r]){n=i,r&1&&me(t,n[0]),r&4&&b(e,"style",n[2])},i:ie,o:ie,d(i){i&&m(e),l=!1,s()}}}function sn(n,e,t){let{text:l}=e,{callback:s=()=>{}}=e,{style:i=void 0}=e;return n.$$set=r=>{"text"in r&&t(0,l=r.text),"callback"in r&&t(1,s=r.callback),"style"in r&&t(2,i=r.style)},[l,s,i]}class Ie extends ue{constructor(e){super(),ae(this,e,sn,ln,re,{text:0,callback:1,style:2})}}function lt(n,e,t){const l=n.slice();return l[12]=e[t],l}function it(n){let e,t;const l=[n[12],{style:"padding: 10px 20px"}];let s={};for(let i=0;i<l.length;i+=1)s=Oe(s,l[i]);return e=new Ie({props:s}),{c(){Q(e.$$.fragment)},l(i){Z(e.$$.fragment,i)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o=r&32?Ae(l,[Se(i[12]),l[1]]):{};e.$set(o)},i(i){t||(O(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function on(n){let e,t,l,s,i,r,o,u,d,f,_,a=n[1].speedMultiplier+"",g,p,h,T,c,k,M,z=ne(n[5]),P=[];for(let I=0;I<z.length;I+=1)P[I]=it(lt(n,z,I));const w=I=>j(P[I],1,1,()=>{P[I]=null});return{c(){e=R("div"),t=R("div"),s=H(),i=R("div"),r=R("div"),o=R("div");for(let I=0;I<P.length;I+=1)P[I].c();u=H(),d=R("div"),f=R("p"),_=se("Speed Multiplier: "),g=se(a),p=H(),h=R("input"),this.h()},l(I){e=N(I,"DIV",{id:!0,style:!0,class:!0});var v=U(e);t=N(v,"DIV",{id:!0,class:!0}),U(t).forEach(m),v.forEach(m),s=F(I),i=N(I,"DIV",{id:!0,style:!0,class:!0});var y=U(i);r=N(y,"DIV",{id:!0,class:!0});var Y=U(r);o=N(Y,"DIV",{id:!0,class:!0});var E=U(o);for(let D=0;D<P.length;D+=1)P[D].l(E);E.forEach(m),u=F(Y),d=N(Y,"DIV",{id:!0,class:!0});var B=U(d);f=N(B,"P",{});var A=U(f);_=oe(A,"Speed Multiplier: "),g=oe(A,a),A.forEach(m),p=F(B),h=N(B,"INPUT",{type:!0,min:!0,max:!0,step:!0}),B.forEach(m),Y.forEach(m),y.forEach(m),this.h()},h(){b(t,"id","resize-bar"),b(t,"class","svelte-1nn6egr"),b(e,"id","visual-resize-bar"),b(e,"style",l=`width: ${n[0]?1:0}px`),b(e,"class","svelte-1nn6egr"),b(o,"id","control-panel-buttons"),b(o,"class","svelte-1nn6egr"),b(h,"type","range"),b(h,"min","0.1"),b(h,"max","2"),b(h,"step","0.1"),b(d,"id","slider"),b(d,"class","svelte-1nn6egr"),b(r,"id","inside-test"),b(r,"class","svelte-1nn6egr"),b(i,"id","control-panel"),b(i,"style",T=`width: ${n[4]}px; transition: ${n[3]};`),b(i,"class","svelte-1nn6egr")},m(I,v){L(I,e,v),$(e,t),n[8](t),L(I,s,v),L(I,i,v),$(i,r),$(r,o);for(let y=0;y<P.length;y+=1)P[y]&&P[y].m(o,null);$(r,u),$(r,d),$(d,f),$(f,_),$(f,g),$(d,p),$(d,h),J(h,n[1].speedMultiplier),c=!0,k||(M=[V(t,"pointerdown",n[6]),V(h,"change",n[9]),V(h,"input",n[9])],k=!0)},p(I,[v]){if((!c||v&1&&l!==(l=`width: ${I[0]?1:0}px`))&&b(e,"style",l),v&32){z=ne(I[5]);let y;for(y=0;y<z.length;y+=1){const Y=lt(I,z,y);P[y]?(P[y].p(Y,v),O(P[y],1)):(P[y]=it(Y),P[y].c(),O(P[y],1),P[y].m(o,null))}for(ve(),y=z.length;y<P.length;y+=1)w(y);ye()}(!c||v&2)&&a!==(a=I[1].speedMultiplier+"")&&me(g,a),v&2&&J(h,I[1].speedMultiplier),(!c||v&24&&T!==(T=`width: ${I[4]}px; transition: ${I[3]};`))&&b(i,"style",T)},i(I){if(!c){for(let v=0;v<z.length;v+=1)O(P[v]);c=!0}},o(I){P=P.filter(Boolean);for(let v=0;v<P.length;v+=1)j(P[v]);c=!1},d(I){I&&(m(e),m(s),m(i)),n[8](null),Be(P,I),k=!1,ge(M)}}}function rn(n,e,t){let l,s,i,r,o;de(n,$e,h=>t(0,i=h)),de(n,W,h=>t(7,r=h)),de(n,Te,h=>t(1,o=h));let u,d="width 250ms";function f(h){i&&(t(3,d="none"),u.setPointerCapture(h.pointerId),u.addEventListener("pointermove",_),u.addEventListener("pointerup",a))}function _(h){t(4,s=window.innerWidth-h.clientX),s<=20&&t(4,s=0),s>=window.innerWidth-20&&t(4,s=window.innerWidth-20)}function a(h){u.removeEventListener("pointermove",_),u.removeEventListener("pointerup",a),u.releasePointerCapture(h.pointerId),t(3,d="width 250ms")}function g(h){fe[h?"unshift":"push"](()=>{u=h,t(2,u)})}function p(){o.speedMultiplier=ce(this.value),Te.set(o)}return n.$$.update=()=>{n.$$.dirty&130&&t(5,l=[{text:o.running?"Pause":"Resume",callback:()=>{Ue(Te,o.running=!o.running,o)}},{text:"Reset",callback:()=>{W.clearPackets()}},{text:"Test",callback:()=>{const h=r.routers.filter(T=>T instanceof be);W.addPacket(h[0],h[1])}}]),n.$$.dirty&1&&t(4,s=i?300:0)},[i,o,u,d,s,l,f,r,g,p]}class un extends ue{constructor(e){super(),ae(this,e,rn,on,re,{})}}function an(n){let e;return{c(){e=we("circle"),this.h()},l(t){e=Ee(t,"circle",{r:!0,class:!0}),U(e).forEach(m),this.h()},h(){b(e,"r","5"),b(e,"class","svelte-1wnohjk")},m(t,l){L(t,e,l),n[4](e)},p:ie,i:ie,o:ie,d(t){t&&m(e),n[4](null)}}}function fn(n,e,t){let l;de(n,Te,a=>t(3,l=a));let{packet:s}=e,i,r,o;function u(){const a=Math.sqrt((s.node.x-s.nextHop.node.x)**2+(s.node.y-s.nextHop.node.y)**2);i=Math.round(a/250*1e3)}function d(){u(),o&&(t(2,r=o.animate([{transform:`translate(${s.node.x}px, ${s.node.y}px)`},{transform:`translate(${s.nextHop.node.x}px, ${s.nextHop.node.y}px)`}],{duration:i,easing:"linear"})),t(2,r.onfinish=f,r))}function f(){t(1,s.node=s.nextHop.node,s),s.nextHop.receivePacket(s),d()}requestAnimationFrame(d);function _(a){fe[a?"unshift":"push"](()=>{o=a,t(0,o)})}return n.$$set=a=>{"packet"in a&&t(1,s=a.packet)},n.$$.update=()=>{n.$$.dirty&12&&r&&t(2,r.playbackRate=l.speedMultiplier,r),n.$$.dirty&12&&r&&(l.running?r.play():r.pause())},[o,s,r,l,_]}class cn extends ue{constructor(e){super(),ae(this,e,fn,an,re,{packet:1})}}function dn(n){let e,t,l,s,i,r,o,u,d=n[0].distance+"",f,_,a,g;return{c(){e=we("line"),t=H(),l=we("rect"),o=H(),u=we("text"),f=se(d),_=se(" km"),this.h()},l(p){e=Ee(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),U(e).forEach(m),t=F(p),l=Ee(p,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),U(l).forEach(m),o=F(p),u=Ee(p,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var h=U(u);f=oe(h,d),_=oe(h," km"),h.forEach(m),this.h()},h(){b(e,"x1",n[4]),b(e,"y1",n[2]),b(e,"x2",n[3]),b(e,"y2",n[1]),b(l,"id",s=n[0].id),b(l,"x",i=n[5].x-He/2),b(l,"y",r=n[5].y-Fe/2),b(l,"width",He),b(l,"height",Fe),b(l,"class","svelte-zjn2k6"),b(u,"x",a=n[5].x),b(u,"y",g=n[5].y),b(u,"dominant-baseline","central"),b(u,"class","svelte-zjn2k6")},m(p,h){L(p,e,h),L(p,t,h),L(p,l,h),L(p,o,h),L(p,u,h),$(u,f),$(u,_)},p(p,[h]){h&16&&b(e,"x1",p[4]),h&4&&b(e,"y1",p[2]),h&8&&b(e,"x2",p[3]),h&2&&b(e,"y2",p[1]),h&1&&s!==(s=p[0].id)&&b(l,"id",s),h&32&&i!==(i=p[5].x-He/2)&&b(l,"x",i),h&32&&r!==(r=p[5].y-Fe/2)&&b(l,"y",r),h&1&&d!==(d=p[0].distance+"")&&me(f,d),h&32&&a!==(a=p[5].x)&&b(u,"x",a),h&32&&g!==(g=p[5].y)&&b(u,"y",g)},i:ie,o:ie,d(p){p&&(m(e),m(t),m(l),m(o),m(u))}}}const He=50,Fe=20;function st(n,e){return(n+e)/2}function hn(n,e,t){let l,s,i,r,o,{link:u}=e;return n.$$set=d=>{"link"in d&&t(0,u=d.link)},n.$$.update=()=>{n.$$.dirty&1&&t(4,l=u.source.node.x),n.$$.dirty&1&&t(3,s=u.target.node.x),n.$$.dirty&1&&t(2,i=u.source.node.y),n.$$.dirty&1&&t(1,r=u.target.node.y),n.$$.dirty&30&&t(5,o={x:st(l,s),y:st(i,r)})},[u,r,i,s,l,o]}class _n extends ue{constructor(e){super(),ae(this,e,hn,dn,re,{link:0})}}function pn(n){let e,t,l,s,i,r,o,u=n[0].node.label+"",d,f,_;return{c(){e=we("circle"),r=H(),o=we("text"),d=se(u),this.h()},l(a){e=Ee(a,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),U(e).forEach(m),r=F(a),o=Ee(a,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var g=U(o);d=oe(g,u),g.forEach(m),this.h()},h(){b(e,"id",t=n[0].id.toString()),b(e,"cx",l=n[0].node.x),b(e,"cy",s=n[0].node.y),b(e,"r","20"),b(e,"fill",i=n[1][n[0].type]),b(e,"class","svelte-17jcsko"),b(o,"x",f=n[0].node.x),b(o,"y",_=n[0].node.y),b(o,"dominant-baseline","central"),b(o,"class","svelte-17jcsko")},m(a,g){L(a,e,g),L(a,r,g),L(a,o,g),$(o,d)},p(a,[g]){g&1&&t!==(t=a[0].id.toString())&&b(e,"id",t),g&1&&l!==(l=a[0].node.x)&&b(e,"cx",l),g&1&&s!==(s=a[0].node.y)&&b(e,"cy",s),g&1&&i!==(i=a[1][a[0].type])&&b(e,"fill",i),g&1&&u!==(u=a[0].node.label+"")&&me(d,u),g&1&&f!==(f=a[0].node.x)&&b(o,"x",f),g&1&&_!==(_=a[0].node.y)&&b(o,"y",_)},i:ie,o:ie,d(a){a&&(m(e),m(r),m(o))}}}function gn(n,e,t){let{router:l}=e;const s={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return n.$$set=i=>{"router"in i&&t(0,l=i.router)},[l,s]}class bn extends ue{constructor(e){super(),ae(this,e,gn,pn,re,{router:0})}}function mn(n){let e,t,l,s;return{c(){e=R("div"),t=se(n[0]),this.h()},l(i){e=N(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var r=U(e);t=oe(r,n[0]),r.forEach(m),this.h()},h(){b(e,"draggable","true"),b(e,"role","button"),b(e,"tabindex","-1"),ze(e,"background-color",n[1]),b(e,"class","svelte-blffat")},m(i,r){L(i,e,r),$(e,t),l||(s=V(e,"dragstart",n[2]),l=!0)},p(i,[r]){r&1&&me(t,i[0]),r&2&&ze(e,"background-color",i[1])},i:ie,o:ie,d(i){i&&m(e),l=!1,s()}}}function kn(n,e,t){let l;de(n,$e,u=>t(4,l=u));let{text:s}=e,{type:i}=e,{color:r}=e;function o(u){var d;if(l){alert("Network is locked.");return}(d=u.dataTransfer)==null||d.setData("text/plain",i)}return n.$$set=u=>{"text"in u&&t(0,s=u.text),"type"in u&&t(3,i=u.type),"color"in u&&t(1,r=u.color)},[s,r,o,i]}class vn extends ue{constructor(e){super(),ae(this,e,kn,mn,re,{text:0,type:3,color:1})}}function ot(n,e,t){const l=n.slice();return l[4]=e[t],l}function rt(n,e,t){const l=n.slice();return l[7]=e[t],l}function ut(n){let e,t,l,s=ne(n[2]),i=[];for(let f=0;f<s.length;f+=1)i[f]=at(rt(n,s,f));const r=f=>j(i[f],1,1,()=>{i[f]=null});let o=ne(n[1]),u=[];for(let f=0;f<o.length;f+=1)u[f]=ft(ot(n,o,f));const d=f=>j(u[f],1,1,()=>{u[f]=null});return{c(){for(let f=0;f<i.length;f+=1)i[f].c();e=H();for(let f=0;f<u.length;f+=1)u[f].c();t=le()},l(f){for(let _=0;_<i.length;_+=1)i[_].l(f);e=F(f);for(let _=0;_<u.length;_+=1)u[_].l(f);t=le()},m(f,_){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(f,_);L(f,e,_);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(f,_);L(f,t,_),l=!0},p(f,_){if(_&4){s=ne(f[2]);let a;for(a=0;a<s.length;a+=1){const g=rt(f,s,a);i[a]?(i[a].p(g,_),O(i[a],1)):(i[a]=at(g),i[a].c(),O(i[a],1),i[a].m(e.parentNode,e))}for(ve(),a=s.length;a<i.length;a+=1)r(a);ye()}if(_&2){o=ne(f[1]);let a;for(a=0;a<o.length;a+=1){const g=ot(f,o,a);u[a]?(u[a].p(g,_),O(u[a],1)):(u[a]=ft(g),u[a].c(),O(u[a],1),u[a].m(t.parentNode,t))}for(ve(),a=o.length;a<u.length;a+=1)d(a);ye()}},i(f){if(!l){for(let _=0;_<s.length;_+=1)O(i[_]);for(let _=0;_<o.length;_+=1)O(u[_]);l=!0}},o(f){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)j(i[_]);u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)j(u[_]);l=!1},d(f){f&&(m(e),m(t)),Be(i,f),Be(u,f)}}}function at(n){let e,t;const l=[n[7]];let s={};for(let i=0;i<l.length;i+=1)s=Oe(s,l[i]);return e=new vn({props:s}),{c(){Q(e.$$.fragment)},l(i){Z(e.$$.fragment,i)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o=r&4?Ae(l,[Se(i[7])]):{};e.$set(o)},i(i){t||(O(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function ft(n){let e,t;const l=[n[4]];let s={};for(let i=0;i<l.length;i+=1)s=Oe(s,l[i]);return e=new Ie({props:s}),{c(){Q(e.$$.fragment)},l(i){Z(e.$$.fragment,i)},m(i,r){ee(e,i,r),t=!0},p(i,r){const o=r&2?Ae(l,[Se(i[4])]):{};e.$set(o)},i(i){t||(O(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function yn(n){let e,t,l,s;e=new Ie({props:{text:n[0]?"Edit":"Simulation",callback:n[3],style:`width: 100px; background-color: ${n[0]?"#3CB371 ":"#6495ED "};`}});let i=!n[0]&&ut(n);return{c(){Q(e.$$.fragment),t=H(),i&&i.c(),l=le()},l(r){Z(e.$$.fragment,r),t=F(r),i&&i.l(r),l=le()},m(r,o){ee(e,r,o),L(r,t,o),i&&i.m(r,o),L(r,l,o),s=!0},p(r,[o]){const u={};o&1&&(u.text=r[0]?"Edit":"Simulation"),o&1&&(u.callback=r[3]),o&1&&(u.style=`width: 100px; background-color: ${r[0]?"#3CB371 ":"#6495ED "};`),e.$set(u),r[0]?i&&(ve(),j(i,1,1,()=>{i=null}),ye()):i?(i.p(r,o),o&1&&O(i,1)):(i=ut(r),i.c(),O(i,1),i.m(l.parentNode,l))},i(r){s||(O(e.$$.fragment,r),O(i),s=!0)},o(r){j(e.$$.fragment,r),j(i),s=!1},d(r){r&&(m(t),m(l)),te(e,r),i&&i.d(r)}}}function wn(n,e,t){let l,s;de(n,$e,o=>t(0,s=o));const i=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],r=()=>{Ue($e,s=!s,s)};return n.$$.update=()=>{n.$$.dirty&1&&t(1,l=[{text:"Clear",callback:()=>{if(s){alert("Network is locked.");return}confirm("Are you sure you want to clear the network?")&&W.clear()}}])},[s,l,i,r]}class En extends ue{constructor(e){super(),ae(this,e,wn,yn,re,{})}}function Ln(n){let e,t="Drag and drop routers that to add them to the network.",l,s,i="Hold the shift key and drag routers to make links.",r,o,u="Double click a router to configure it.",d,f,_="The clear button will delete the entire network.",a,g,p,h,T="Press Esc to close this popup.";return{c(){e=R("p"),e.textContent=t,l=H(),s=R("p"),s.textContent=i,r=H(),o=R("p"),o.textContent=u,d=H(),f=R("p"),f.textContent=_,a=H(),g=R("br"),p=H(),h=R("p"),h.textContent=T},l(c){e=N(c,"P",{"data-svelte-h":!0}),K(e)!=="svelte-2wnqpf"&&(e.textContent=t),l=F(c),s=N(c,"P",{"data-svelte-h":!0}),K(s)!=="svelte-ddjc2m"&&(s.textContent=i),r=F(c),o=N(c,"P",{"data-svelte-h":!0}),K(o)!=="svelte-11scjjz"&&(o.textContent=u),d=F(c),f=N(c,"P",{"data-svelte-h":!0}),K(f)!=="svelte-vcl8s3"&&(f.textContent=_),a=F(c),g=N(c,"BR",{}),p=F(c),h=N(c,"P",{"data-svelte-h":!0}),K(h)!=="svelte-1dvt5v1"&&(h.textContent=T)},m(c,k){L(c,e,k),L(c,l,k),L(c,s,k),L(c,r,k),L(c,o,k),L(c,d,k),L(c,f,k),L(c,a,k),L(c,g,k),L(c,p,k),L(c,h,k)},p:ie,d(c){c&&(m(e),m(l),m(s),m(r),m(o),m(d),m(f),m(a),m(g),m(p),m(h))}}}function Cn(n){let e,t,l,s,i,r;t=new Ie({props:{text:"Help",callback:n[1]}});function o(d){n[2](d)}let u={$$slots:{default:[Ln]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dialog=n[0]),s=new Ye({props:u}),fe.push(()=>pe(s,"dialog",o)),{c(){e=R("div"),Q(t.$$.fragment),l=H(),Q(s.$$.fragment)},l(d){e=N(d,"DIV",{});var f=U(e);Z(t.$$.fragment,f),f.forEach(m),l=F(d),Z(s.$$.fragment,d)},m(d,f){L(d,e,f),ee(t,e,null),L(d,l,f),ee(s,d,f),r=!0},p(d,[f]){const _={};f&1&&(_.callback=d[1]),t.$set(_);const a={};f&8&&(a.$$scope={dirty:f,ctx:d}),!i&&f&1&&(i=!0,a.dialog=d[0],_e(()=>i=!1)),s.$set(a)},i(d){r||(O(t.$$.fragment,d),O(s.$$.fragment,d),r=!0)},o(d){j(t.$$.fragment,d),j(s.$$.fragment,d),r=!1},d(d){d&&(m(e),m(l)),te(t),te(s,d)}}}function In(n,e,t){let l;const s=()=>{l.showModal()};function i(r){l=r,t(0,l)}return[l,s,i]}class Bn extends ue{constructor(e){super(),ae(this,e,In,Cn,re,{})}}function $n(n){let e,t,l,s,i,r;return e=new Ie({props:{text:" - ",callback:n[1]}}),l=new Ie({props:{text:"Fullscreen",callback:n[2]}}),i=new Ie({props:{text:" + ",callback:n[3]}}),{c(){Q(e.$$.fragment),t=H(),Q(l.$$.fragment),s=H(),Q(i.$$.fragment)},l(o){Z(e.$$.fragment,o),t=F(o),Z(l.$$.fragment,o),s=F(o),Z(i.$$.fragment,o)},m(o,u){ee(e,o,u),L(o,t,u),ee(l,o,u),L(o,s,u),ee(i,o,u),r=!0},p(o,[u]){const d={};u&1&&(d.callback=o[1]),e.$set(d);const f={};u&1&&(f.callback=o[3]),i.$set(f)},i(o){r||(O(e.$$.fragment,o),O(l.$$.fragment,o),O(i.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),j(l.$$.fragment,o),j(i.$$.fragment,o),r=!1},d(o){o&&(m(t),m(s)),te(e,o),te(l,o),te(i,o)}}}function Tn(n,e,t){let{zoom:l}=e;const s=()=>{const o={x:window.innerWidth/2,y:window.innerHeight/2};l(1.1,o)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},r=()=>{const o={x:window.innerWidth/2,y:window.innerHeight/2};l(.9,o)};return n.$$set=o=>{"zoom"in o&&t(0,l=o.zoom)},[l,s,i,r]}class Rn extends ue{constructor(e){super(),ae(this,e,Tn,$n,re,{zoom:0})}}function ct(n,e,t){const l=n.slice();return l[5]=e[t],l}function dt(n,e,t){const l=n.slice();return l[8]=e[t],l}function ht(n,e,t){const l=n.slice();return l[11]=e[t],l}function _t(n,e){let t,l,s;return l=new _n({props:{link:e[11]}}),{key:n,first:null,c(){t=le(),Q(l.$$.fragment),this.h()},l(i){t=le(),Z(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){L(i,t,r),ee(l,i,r),s=!0},p(i,r){e=i;const o={};r&2&&(o.link=e[11]),l.$set(o)},i(i){s||(O(l.$$.fragment,i),s=!0)},o(i){j(l.$$.fragment,i),s=!1},d(i){i&&m(t),te(l,i)}}}function pt(n,e){let t,l,s;return l=new bn({props:{router:e[8]}}),{key:n,first:null,c(){t=le(),Q(l.$$.fragment),this.h()},l(i){t=le(),Z(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){L(i,t,r),ee(l,i,r),s=!0},p(i,r){e=i;const o={};r&2&&(o.router=e[8]),l.$set(o)},i(i){s||(O(l.$$.fragment,i),s=!0)},o(i){j(l.$$.fragment,i),s=!1},d(i){i&&m(t),te(l,i)}}}function gt(n,e){let t,l,s;return l=new cn({props:{packet:e[5]}}),{key:n,first:null,c(){t=le(),Q(l.$$.fragment),this.h()},l(i){t=le(),Z(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){L(i,t,r),ee(l,i,r),s=!0},p(i,r){e=i;const o={};r&2&&(o.packet=e[5]),l.$set(o)},i(i){s||(O(l.$$.fragment,i),s=!0)},o(i){j(l.$$.fragment,i),s=!1},d(i){i&&m(t),te(l,i)}}}function Nn(n){let e=[],t=new Map,l,s=[],i=new Map,r,o=[],u=new Map,d,f,_=ne(n[1].links);const a=c=>c[11].id;for(let c=0;c<_.length;c+=1){let k=ht(n,_,c),M=a(k);t.set(M,e[c]=_t(M,k))}let g=ne(n[1].routers);const p=c=>c[8].id;for(let c=0;c<g.length;c+=1){let k=dt(n,g,c),M=p(k);i.set(M,s[c]=pt(M,k))}let h=ne(n[1].packets);const T=c=>c[5].id;for(let c=0;c<h.length;c+=1){let k=ct(n,h,c),M=T(k);u.set(M,o[c]=gt(M,k))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();l=H();for(let c=0;c<s.length;c+=1)s[c].c();r=H();for(let c=0;c<o.length;c+=1)o[c].c();d=le()},l(c){for(let k=0;k<e.length;k+=1)e[k].l(c);l=F(c);for(let k=0;k<s.length;k+=1)s[k].l(c);r=F(c);for(let k=0;k<o.length;k+=1)o[k].l(c);d=le()},m(c,k){for(let M=0;M<e.length;M+=1)e[M]&&e[M].m(c,k);L(c,l,k);for(let M=0;M<s.length;M+=1)s[M]&&s[M].m(c,k);L(c,r,k);for(let M=0;M<o.length;M+=1)o[M]&&o[M].m(c,k);L(c,d,k),f=!0},p(c,k){k&2&&(_=ne(c[1].links),ve(),e=xe(e,k,a,1,c,_,t,l.parentNode,Me,_t,l,ht),ye()),k&2&&(g=ne(c[1].routers),ve(),s=xe(s,k,p,1,c,g,i,r.parentNode,Me,pt,r,dt),ye()),k&2&&(h=ne(c[1].packets),ve(),o=xe(o,k,T,1,c,h,u,d.parentNode,Me,gt,d,ct),ye())},i(c){if(!f){for(let k=0;k<_.length;k+=1)O(e[k]);for(let k=0;k<g.length;k+=1)O(s[k]);for(let k=0;k<h.length;k+=1)O(o[k]);f=!0}},o(c){for(let k=0;k<e.length;k+=1)j(e[k]);for(let k=0;k<s.length;k+=1)j(s[k]);for(let k=0;k<o.length;k+=1)j(o[k]);f=!1},d(c){c&&(m(l),m(r),m(d));for(let k=0;k<e.length;k+=1)e[k].d(c);for(let k=0;k<s.length;k+=1)s[k].d(c);for(let k=0;k<o.length;k+=1)o[k].d(c)}}}function Pn(n){let e,t,l,s,i,r,o,u,d,f,_,a,g,p,h,T,c;function k(w){n[2](w)}let M={$$slots:{default:[Nn]},$$scope:{ctx:n}};n[0]!==void 0&&(M.zoom=n[0]),l=new nn({props:M}),fe.push(()=>pe(l,"zoom",k)),o=new En({}),f=new Bn({});function z(w){n[3](w)}let P={};return n[0]!==void 0&&(P.zoom=n[0]),g=new Rn({props:P}),fe.push(()=>pe(g,"zoom",z)),T=new un({}),{c(){e=R("div"),t=R("div"),Q(l.$$.fragment),i=H(),r=R("div"),Q(o.$$.fragment),u=H(),d=R("div"),Q(f.$$.fragment),_=H(),a=R("div"),Q(g.$$.fragment),h=H(),Q(T.$$.fragment),this.h()},l(w){e=N(w,"DIV",{id:!0,class:!0});var I=U(e);t=N(I,"DIV",{id:!0,class:!0});var v=U(t);Z(l.$$.fragment,v),i=F(v),r=N(v,"DIV",{id:!0,class:!0});var y=U(r);Z(o.$$.fragment,y),y.forEach(m),u=F(v),d=N(v,"DIV",{id:!0,class:!0});var Y=U(d);Z(f.$$.fragment,Y),Y.forEach(m),_=F(v),a=N(v,"DIV",{id:!0,class:!0});var E=U(a);Z(g.$$.fragment,E),E.forEach(m),v.forEach(m),h=F(I),Z(T.$$.fragment,I),I.forEach(m),this.h()},h(){b(r,"id","top-left-bar"),b(r,"class","absolute-flex svelte-1kpnzxr"),b(d,"id","bottom-left-bar"),b(d,"class","absolute-flex svelte-1kpnzxr"),b(a,"id","bottom-right-bar"),b(a,"class","absolute-flex svelte-1kpnzxr"),b(t,"id","network"),b(t,"class","svelte-1kpnzxr"),b(e,"id","mpls"),b(e,"class","svelte-1kpnzxr")},m(w,I){L(w,e,I),$(e,t),ee(l,t,null),$(t,i),$(t,r),ee(o,r,null),$(t,u),$(t,d),ee(f,d,null),$(t,_),$(t,a),ee(g,a,null),$(e,h),ee(T,e,null),c=!0},p(w,[I]){const v={};I&16386&&(v.$$scope={dirty:I,ctx:w}),!s&&I&1&&(s=!0,v.zoom=w[0],_e(()=>s=!1)),l.$set(v);const y={};!p&&I&1&&(p=!0,y.zoom=w[0],_e(()=>p=!1)),g.$set(y)},i(w){c||(O(l.$$.fragment,w),O(o.$$.fragment,w),O(f.$$.fragment,w),O(g.$$.fragment,w),O(T.$$.fragment,w),c=!0)},o(w){j(l.$$.fragment,w),j(o.$$.fragment,w),j(f.$$.fragment,w),j(g.$$.fragment,w),j(T.$$.fragment,w),c=!1},d(w){w&&m(e),te(l),te(o),te(f),te(g),te(T)}}}function Dn(n,e,t){let l,s;de(n,Te,u=>t(4,l=u)),de(n,W,u=>t(1,s=u));let i;wt(()=>{window.addEventListener("visibilitychanged",()=>{Ue(Te,l.running=!document.hidden,l)})});function r(u){i=u,t(0,i)}function o(u){i=u,t(0,i)}return[i,s,r,o]}class Mn extends ue{constructor(e){super(),ae(this,e,Dn,Pn,re,{})}}function xn(n){let e,t;return e=new Mn({}),{c(){Q(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){ee(e,l,s),t=!0},p:ie,i(l){t||(O(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}class jn extends ue{constructor(e){super(),ae(this,e,null,xn,re,{})}}export{jn as component};
