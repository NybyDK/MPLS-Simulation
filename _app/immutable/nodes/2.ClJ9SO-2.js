var Ht=Object.defineProperty;var Mt=(l,e,t)=>e in l?Ht(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var A=(l,e,t)=>(Mt(l,typeof e!="symbol"?e+"":e,t),t);import{r as Ce,s as oe,a as Et,u as $t,g as Ct,b as Lt,x as It,e as fe,i as De,n as Z,y as de,c as ge,o as Rt,z as Fe,A as Oe}from"../chunks/scheduler.C5v8YK5g.js";import{n as M,m as N,S as se,i as ue,e as L,c as I,a as z,d as m,l as v,g as E,z as V,s as P,A as le,f as D,h as $,B as $e,C as ae,D as be,E as he,v as X,w as G,x as W,y as K,o as te,r as pe,p as _e,t as ie,b as re,j as ke,F as ye,G as we,q as Be,H as xt}from"../chunks/index.CS2IdBlG.js";import{w as He}from"../chunks/index.CD1dNpfE.js";function ee(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Me(l,e){M(l,1,1,()=>{e.delete(l.key)})}function xe(l,e,t,n,r,o,i,s,u,d,a,c){let f=l.length,_=o.length,h=f;const g={};for(;h--;)g[l[h].key]=h;const k=[],p=new Map,b=new Map,C=[];for(h=_;h--;){const R=c(r,o,h),F=t(R);let B=i.get(F);B?n&&C.push(()=>B.p(R,e)):(B=d(F,R),B.c()),p.set(F,k[h]=B),F in g&&b.set(F,Math.abs(h-g[F]))}const O=new Set,S=new Set;function H(R){N(R,1),R.m(s,a),i.set(R.key,R),a=R.first,_--}for(;f&&_;){const R=k[_-1],F=l[f-1],B=R.key,y=F.key;R===F?(a=R.first,f--,_--):p.has(y)?!i.has(B)||O.has(B)?H(R):S.has(y)?f--:b.get(B)>b.get(y)?(S.add(B),H(R)):(O.add(y),f--):(u(F,i),f--)}for(;f--;){const R=l[f];p.has(R.key)||u(R,i)}for(;_;)H(k[_-1]);return Ce(C),k}function Ae(l,e){const t={},n={},r={$$scope:1};let o=l.length;for(;o--;){const i=l[o],s=e[o];if(s){for(const u in i)u in s||(n[u]=1);for(const u in s)r[u]||(t[u]=s[u],r[u]=1);l[o]=s}else for(const u in i)r[u]=1}for(const i in n)i in t||(t[i]=void 0);return t}function Ue(l){return typeof l=="object"&&l!==null?l:{}}let St=class{constructor(e,t,n){A(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},zt=class{constructor(e,t,n,r){A(this,"ttl",32);A(this,"label",-1);A(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=r;const o=t.firstHop.get(n.address);if(!o)return;const i=Y.getRouter(o);i&&(this.nextHop=i)}decrementTTL(){--this.ttl<=0&&this.drop()}drop(){Y.deletePacket(this.id)}},je=class{constructor(e,t){this.id=e,this.node=t}};class me extends je{constructor(){super(...arguments);A(this,"address",`CE-IP-${this.id}`);A(this,"firstHop",new Map);A(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});A(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});A(this,"updateAddress",(t,n)=>{const r=this.firstHop.get(t);if(!r){alert(`Unable to update old first hop Address '${t}' to '${n}'.`);return}this.firstHop.set(n,r),this.firstHop.delete(t)});A(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop()}get type(){return"CE"}}let Tt=class{constructor(){A(this,"map",new Map);A(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});A(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});A(this,"updateLabel",(e,t)=>{const n=this.map.get(e);if(!n){alert(`Unable to update old LIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,n),this.map.delete(e)});A(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}},Ft=class{constructor(){A(this,"map",new Map);A(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});A(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});A(this,"updateAddress",(e,t)=>{const n=this.map.get(e);if(!n){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,n),this.map.delete(e)});A(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Re extends je{constructor(){super(...arguments);A(this,"FIB",new Ft);A(this,"LIB",new Tt)}receivePacket(t){var r,o,i,s;const n=t.destination;if(t.label===-1){const u=(r=this.FIB.get(n.address))==null?void 0:r.nextHop;if(!u)return;const d=(o=this.FIB.get(n.address))==null?void 0:o.label;if(!d)return;t.label=d;const a=Y.getRouter(parseInt(u));if(!a)return;t.nextHop=a}else{const u=(i=this.LIB.get(t.label))==null?void 0:i.nextHop;if(!u)return;const d=(s=this.LIB.get(t.label))==null?void 0:s.outgoingLabel;if(!d)return;t.label=d;const a=Y.routers.find(c=>c instanceof me&&c.address===u);if(!a)return;t.nextHop=a}t.decrementTTL()}get type(){return"LER"}}class Pe extends je{constructor(){super(...arguments);A(this,"LIB",new Tt)}receivePacket(t){var i,s;const n=(i=this.LIB.get(t.label))==null?void 0:i.nextHop;if(!n)return;const r=(s=this.LIB.get(t.label))==null?void 0:s.outgoingLabel;if(!r)return;t.label=r;const o=Y.getRouter(parseInt(n));o&&(t.nextHop=o,t.decrementTTL())}get type(){return"LSR"}}const Ot={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class At{constructor(){A(this,"store",He({routers:[],links:[],packets:[]}));A(this,"set",this.store.set);A(this,"update",this.store.update);A(this,"subscribe",this.store.subscribe);A(this,"_routers",[]);A(this,"_links",[]);A(this,"_packets",[]);A(this,"routerMap",new Map);A(this,"CEMap",new Map);A(this,"routerCounter",0);A(this,"packetCounter",0)}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!Ot[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new St(`${e.source.id}-${e.target.id}`,e.source,e.target);this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,r=new me(n,{label:`CE ${n}`,x:e,y:t});this.addRouter(r)}createLER(e,t){const n=this.routerCounter++,r=new Re(n,{label:`LER ${n}`,x:e,y:t});this.addRouter(r)}createLSR(e,t){const n=this.routerCounter++,r=new Pe(n,{label:`LSR ${n}`,x:e,y:t});this.addRouter(r)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof me&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),t instanceof me&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}getSureCERouter(e){const t=this.getCERouter(e);if(!t)throw new Error(`Router with address ${e} not found`);return t}addPacket(e,t){const n=new zt(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=0,this.packetCounter=0,this.notify()}notify(){this.store.set(this.networkState)}}const Ut=new At,Y=Ut,Ie=He({running:!0,speedMultiplier:1});class jt{constructor(){A(this,"store",He());A(this,"set",this.store.set);A(this,"update",this.store.update);A(this,"subscribe",this.store.subscribe);A(this,"_map",new Map)}getPath(e,t){const n=this._map.get(e);if(n)return n.get(t)}findShortestPath(e,t){return qe(e,t)}findShortestPaths(){const e=new Map,t=Y.routers.filter(n=>n.type==="CE");for(const n of t){const r=new Map;for(const o of t){if(n===o)continue;const i=qe(n,o);r.set(o.id,i)}e.set(n.id,r)}this._map=e}notify(){this.store.set(this._map)}}function qe(l,e){const t=Y.routers,n=t.length,r=new Array(n).fill(1/0),o=new Array(n).fill(!1),i=new Array(n).fill(null);r[t.indexOf(l)]=0;let s=!1;for(;!s;){let a=null,c=1/0;for(let f=0;f<n;f++)!o[f]&&r[f]<c&&(a=t[f],c=r[f]);if(!a||a.id===e.id){s=!0;continue}o[t.indexOf(a)]=!0;for(const f of Y.links){let _;if(f.source===a)_=f.target;else if(f.target===a)_=f.source;else continue;const h=t.indexOf(_),g=c+f.distance;g<r[h]&&(r[h]=g,i[h]=a)}}const u=[];let d=e;for(;d;){u.unshift(d);const a=t.indexOf(d);d=i[a]}return u}const Yt=new jt,Nt=Yt,Le=He(!1);function qt(l){let e,t,n,r;const o=l[2].default,i=Et(o,l,l[1],null);return{c(){e=L("dialog"),i&&i.c(),this.h()},l(s){e=I(s,"DIALOG",{class:!0});var u=z(e);i&&i.l(u),u.forEach(m),this.h()},h(){v(e,"class","svelte-414ocx")},m(s,u){E(s,e,u),i&&i.m(e,null),l[4](e),t=!0,n||(r=V(e,"close",l[3]),n=!0)},p(s,[u]){i&&i.p&&(!t||u&2)&&$t(i,o,s,s[1],t?Lt(o,s[1],u,null):Ct(s[1]),null)},i(s){t||(N(i,s),t=!0)},o(s){M(i,s),t=!1},d(s){s&&m(e),i&&i.d(s),l[4](null),n=!1,r()}}}function Vt(l,e,t){let{$$slots:n={},$$scope:r}=e,{dialog:o}=e;function i(u){It.call(this,l,u)}function s(u){fe[u?"unshift":"push"](()=>{o=u,t(0,o)})}return l.$$set=u=>{"dialog"in u&&t(0,o=u.dialog),"$$scope"in u&&t(1,r=u.$$scope)},[o,r,n,i,s]}class Ye extends se{constructor(e){super(),ue(this,e,Vt,qt,oe,{dialog:0})}}const Ve=16,Xt=2**20-1;function Bt(l,e){const t=l[0];if(!(t instanceof me)){alert("The path does not start with a CE");return}if(t.firstHop.has(e)){alert("The destination is already in the CE's first hop");return}const n=l.length-2,r=l[n];if(!(r instanceof Re)){alert("Destination CE is not connected directly to a LER");return}let o=Xe(l[n]);r.LIB.receiveEntry(o,-1,e);for(let i=l.length-2;i>0;i--){const s=l[i],u=l[i-1],d=o;o=Xe(s),u instanceof Re?u.FIB.receiveEntry(e,d,s.id.toString()):u instanceof Pe&&u.LIB.receiveEntry(o,d,s.id.toString())}t.firstHop.set(e,l[1].id)}function Gt(l,e){return l instanceof Pe||l instanceof Re?l.LIB.map.has(e):!1}function Xe(l){let e;do e=Math.floor(Math.random()*(Xt-Ve+1)+Ve);while(Gt(l,e));return e}function Ge(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n}function We(l){let e,t,n,r,o,i,s,u,d,a,c="-",f,_,h;function g(...b){return l[4](l[7],...b)}function k(...b){return l[5](l[7],...b)}function p(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),o=P(),i=L("td"),s=L("input"),d=P(),a=L("button"),a.textContent=c,f=P(),this.h()},l(b){e=I(b,"TR",{});var C=z(e);t=I(C,"TD",{});var O=z(t);n=I(O,"INPUT",{type:!0,placeholder:!0}),O.forEach(m),o=D(C),i=I(C,"TD",{});var S=z(i);s=I(S,"INPUT",{type:!0,placeholder:!0}),S.forEach(m),d=D(C),a=I(C,"BUTTON",{"data-svelte-h":!0}),le(a)!=="svelte-696gh"&&(a.textContent=c),f=D(C),C.forEach(m),this.h()},h(){v(n,"type","text"),n.value=r=l[7],v(n,"placeholder","Address"),v(s,"type","text"),s.value=u=l[8],v(s,"placeholder","Link")},m(b,C){E(b,e,C),$(e,t),$(t,n),$(e,o),$(e,i),$(i,s),$(e,d),$(e,a),$(e,f),_||(h=[V(n,"change",g),V(s,"change",k),V(a,"click",p)],_=!0)},p(b,C){l=b,C&1&&r!==(r=l[7])&&n.value!==r&&(n.value=r),C&1&&u!==(u=l[8])&&s.value!==u&&(s.value=u)},d(b){b&&m(e),_=!1,Ce(h)}}}function Wt(l){let e,t="Destinations:",n,r,o,i="<th>Destination</th> <th>First hop</th>",s,u,d,a="+",c,f,_=ee([...l[0].firstHop]),h=[];for(let g=0;g<_.length;g+=1)h[g]=We(Ge(l,_,g));return{c(){e=L("p"),e.textContent=t,n=P(),r=L("table"),o=L("tr"),o.innerHTML=i,s=P();for(let g=0;g<h.length;g+=1)h[g].c();u=P(),d=L("button"),d.textContent=a},l(g){e=I(g,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1ixmdgd"&&(e.textContent=t),n=D(g),r=I(g,"TABLE",{});var k=z(r);o=I(k,"TR",{"data-svelte-h":!0}),le(o)!=="svelte-cu9tpt"&&(o.innerHTML=i),s=D(k);for(let p=0;p<h.length;p+=1)h[p].l(k);k.forEach(m),u=D(g),d=I(g,"BUTTON",{"data-svelte-h":!0}),le(d)!=="svelte-1nn20mc"&&(d.textContent=a)},m(g,k){E(g,e,k),E(g,n,k),E(g,r,k),$(r,o),$(r,s);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(r,null);E(g,u,k),E(g,d,k),c||(f=V(d,"click",function(){De(l[1](l[0].addEmptyEntry))&&l[1](l[0].addEmptyEntry).apply(this,arguments)}),c=!0)},p(g,[k]){if(l=g,k&13){_=ee([...l[0].firstHop]);let p;for(p=0;p<_.length;p+=1){const b=Ge(l,_,p);h[p]?h[p].p(b,k):(h[p]=We(b),h[p].c(),h[p].m(r,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=_.length}},i:Z,o:Z,d(g){g&&(m(e),m(n),m(r),m(u),m(d)),$e(h,g),c=!1,f()}}}function Kt(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function o(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=a.target.value.toUpperCase();n.updateAddress(c,f);const _=Y.getCERouter(f);if(!_){alert("Destination router not found.");return}const h=Nt.findShortestPath(n,_);Bt(h,f),t(0,n)}function i(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=parseInt(a.target.value);n.firstHop.set(c,f)}const s=(a,c)=>{o(c,a)},u=(a,c)=>{i(c,a)},d=a=>{n.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,o,i,s,u,d]}class Jt extends se{constructor(e){super(),ue(this,e,Kt,Wt,oe,{router:0})}}function Ke(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Je(l){let e,t,n,r,o,i,s,u,d,a,c,f,_="-",h,g;function k(...O){return l[3](l[7],...O)}function p(){l[4].call(s,l[9],l[10])}function b(){l[5].call(a,l[9],l[10])}function C(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),o=P(),i=L("td"),s=L("input"),u=P(),d=L("td"),a=L("input"),c=P(),f=L("button"),f.textContent=_,this.h()},l(O){e=I(O,"TR",{});var S=z(e);t=I(S,"TD",{});var H=z(t);n=I(H,"INPUT",{type:!0}),H.forEach(m),o=D(S),i=I(S,"TD",{});var R=z(i);s=I(R,"INPUT",{type:!0}),R.forEach(m),u=D(S),d=I(S,"TD",{});var F=z(d);a=I(F,"INPUT",{type:!0}),F.forEach(m),c=D(S),f=I(S,"BUTTON",{"data-svelte-h":!0}),le(f)!=="svelte-wfbfbi"&&(f.textContent=_),S.forEach(m),this.h()},h(){v(n,"type","number"),n.value=r=l[7],v(s,"type","number"),v(a,"type","text")},m(O,S){E(O,e,S),$(e,t),$(t,n),$(e,o),$(e,i),$(i,s),ae(s,l[8].outgoingLabel),$(e,u),$(e,d),$(d,a),ae(a,l[8].nextHop),$(e,c),$(e,f),h||(g=[V(n,"change",k),V(s,"input",p),V(a,"input",b),V(f,"click",C)],h=!0)},p(O,S){l=O,S&1&&r!==(r=l[7])&&n.value!==r&&(n.value=r),S&1&&be(s.value)!==l[8].outgoingLabel&&ae(s,l[8].outgoingLabel),S&1&&a.value!==l[8].nextHop&&ae(a,l[8].nextHop)},d(O){O&&m(e),h=!1,Ce(g)}}}function Qt(l){let e,t,n="<th>Incoming</th> <th>Outgoing</th> <th>Next hop</th>",r,o,i,s="+",u,d,a=ee([...l[0].LIB.map]),c=[];for(let f=0;f<a.length;f+=1)c[f]=Je(Ke(l,a,f));return{c(){e=L("table"),t=L("tr"),t.innerHTML=n,r=P();for(let f=0;f<c.length;f+=1)c[f].c();o=P(),i=L("button"),i.textContent=s},l(f){e=I(f,"TABLE",{});var _=z(e);t=I(_,"TR",{"data-svelte-h":!0}),le(t)!=="svelte-4lulgl"&&(t.innerHTML=n),r=D(_);for(let h=0;h<c.length;h+=1)c[h].l(_);o=D(_),i=I(_,"BUTTON",{"data-svelte-h":!0}),le(i)!=="svelte-1qyq3ir"&&(i.textContent=s),_.forEach(m)},m(f,_){E(f,e,_),$(e,t),$(e,r);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);$(e,o),$(e,i),u||(d=V(i,"click",function(){De(l[1](l[0].LIB.addEmptyEntry))&&l[1](l[0].LIB.addEmptyEntry).apply(this,arguments)}),u=!0)},p(f,[_]){if(l=f,_&5){a=ee([...l[0].LIB.map]);let h;for(h=0;h<a.length;h+=1){const g=Ke(l,a,h);c[h]?c[h].p(g,_):(c[h]=Je(g),c[h].c(),c[h].m(e,o))}for(;h<c.length;h+=1)c[h].d(1);c.length=a.length}},i:Z,o:Z,d(f){f&&m(e),$e(c,f),u=!1,d()}}}function Zt(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function o(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=parseInt(a.target.value);n.LIB.updateLabel(c,f)}const i=(a,c)=>{o(c,a)};function s(a,c){a[c][1].outgoingLabel=be(this.value),t(0,n)}function u(a,c){a[c][1].nextHop=this.value,t(0,n)}const d=a=>{n.LIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,o,i,s,u,d]}class Pt extends se{constructor(e){super(),ue(this,e,Zt,Qt,oe,{router:0})}}function Qe(l,e,t){const n=l.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function Ze(l){let e,t,n,r,o,i,s,u,d,a,c,f,_="-",h,g;function k(...O){return l[3](l[7],...O)}function p(){l[4].call(s,l[9],l[10])}function b(){l[5].call(a,l[9],l[10])}function C(){return l[6](l[7])}return{c(){e=L("tr"),t=L("td"),n=L("input"),o=P(),i=L("td"),s=L("input"),u=P(),d=L("td"),a=L("input"),c=P(),f=L("button"),f.textContent=_,this.h()},l(O){e=I(O,"TR",{});var S=z(e);t=I(S,"TD",{});var H=z(t);n=I(H,"INPUT",{type:!0}),H.forEach(m),o=D(S),i=I(S,"TD",{});var R=z(i);s=I(R,"INPUT",{type:!0}),R.forEach(m),u=D(S),d=I(S,"TD",{});var F=z(d);a=I(F,"INPUT",{type:!0}),F.forEach(m),c=D(S),f=I(S,"BUTTON",{"data-svelte-h":!0}),le(f)!=="svelte-liojo2"&&(f.textContent=_),S.forEach(m),this.h()},h(){v(n,"type","text"),n.value=r=l[7],v(s,"type","number"),v(a,"type","text")},m(O,S){E(O,e,S),$(e,t),$(t,n),$(e,o),$(e,i),$(i,s),ae(s,l[8].label),$(e,u),$(e,d),$(d,a),ae(a,l[8].nextHop),$(e,c),$(e,f),h||(g=[V(n,"change",k),V(s,"input",p),V(a,"input",b),V(f,"click",C)],h=!0)},p(O,S){l=O,S&1&&r!==(r=l[7])&&n.value!==r&&(n.value=r),S&1&&be(s.value)!==l[8].label&&ae(s,l[8].label),S&1&&a.value!==l[8].nextHop&&ae(a,l[8].nextHop)},d(O){O&&m(e),h=!1,Ce(g)}}}function en(l){let e,t,n="<th>Address</th> <th>Label</th> <th>Next hop</th>",r,o,i,s="+",u,d,a=ee([...l[0].FIB.map]),c=[];for(let f=0;f<a.length;f+=1)c[f]=Ze(Qe(l,a,f));return{c(){e=L("table"),t=L("tr"),t.innerHTML=n,r=P();for(let f=0;f<c.length;f+=1)c[f].c();o=P(),i=L("button"),i.textContent=s},l(f){e=I(f,"TABLE",{});var _=z(e);t=I(_,"TR",{"data-svelte-h":!0}),le(t)!=="svelte-1ntom3r"&&(t.innerHTML=n),r=D(_);for(let h=0;h<c.length;h+=1)c[h].l(_);o=D(_),i=I(_,"BUTTON",{"data-svelte-h":!0}),le(i)!=="svelte-hxdqrl"&&(i.textContent=s),_.forEach(m)},m(f,_){E(f,e,_),$(e,t),$(e,r);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);$(e,o),$(e,i),u||(d=V(i,"click",function(){De(l[1](l[0].FIB.addEmptyEntry))&&l[1](l[0].FIB.addEmptyEntry).apply(this,arguments)}),u=!0)},p(f,[_]){if(l=f,_&5){a=ee([...l[0].FIB.map]);let h;for(h=0;h<a.length;h+=1){const g=Qe(l,a,h);c[h]?c[h].p(g,_):(c[h]=Ze(g),c[h].c(),c[h].m(e,o))}for(;h<c.length;h+=1)c[h].d(1);c.length=a.length}},i:Z,o:Z,d(f){f&&m(e),$e(c,f),u=!1,d()}}}function tn(l,e,t){let{router:n}=e;function r(a){return()=>{a(),t(0,n)}}function o(a,c){if(!(a.target instanceof HTMLInputElement))return;const f=a.target.value;n.FIB.updateAddress(c,f)}const i=(a,c)=>{o(c,a)};function s(a,c){a[c][1].label=be(this.value),t(0,n)}function u(a,c){a[c][1].nextHop=this.value,t(0,n)}const d=a=>{n.FIB.deleteEntry(a),t(0,n)};return l.$$set=a=>{"router"in a&&t(0,n=a.router)},[n,r,o,i,s,u,d]}class nn extends se{constructor(e){super(),ue(this,e,tn,en,oe,{router:0})}}function ln(l){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=I(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,r){E(n,e,r)},p:Z,i:Z,o:Z,d(n){n&&m(e)}}}function rn(l){let e,t,n,r,o,i,s=l[0].id+"",u,d,a,c,f=l[0].type+"",_,h,g,k,p,b,C,O,S,H,R,F,B="Delete Router",y,x,ne,q=l[0]instanceof me&&et(l),J=l[0]instanceof Re&&tt(l),Q=l[0]instanceof Pe&&nt(l);return{c(){e=L("label"),t=ie(`Label:
      `),n=L("input"),r=P(),o=L("p"),i=ie("ID: "),u=ie(s),d=P(),a=L("p"),c=ie("Type: "),_=ie(f),h=P(),g=L("label"),k=ie(`Position:
      `),p=L("input"),b=P(),C=L("input"),O=P(),q&&q.c(),S=P(),J&&J.c(),H=P(),Q&&Q.c(),R=P(),F=L("button"),F.textContent=B,this.h()},l(T){e=I(T,"LABEL",{});var U=z(e);t=re(U,`Label:
      `),n=I(U,"INPUT",{type:!0}),U.forEach(m),r=D(T),o=I(T,"P",{});var Te=z(o);i=re(Te,"ID: "),u=re(Te,s),Te.forEach(m),d=D(T),a=I(T,"P",{});var Ne=z(a);c=re(Ne,"Type: "),_=re(Ne,f),Ne.forEach(m),h=D(T),g=I(T,"LABEL",{});var w=z(g);k=re(w,`Position:
      `),p=I(w,"INPUT",{type:!0}),b=D(w),C=I(w,"INPUT",{type:!0}),w.forEach(m),O=D(T),q&&q.l(T),S=D(T),J&&J.l(T),H=D(T),Q&&Q.l(T),R=D(T),F=I(T,"BUTTON",{"data-svelte-h":!0}),le(F)!=="svelte-1kc1129"&&(F.textContent=B),this.h()},h(){v(n,"type","text"),v(p,"type","number"),p.disabled=l[2],v(C,"type","number"),C.disabled=l[2]},m(T,U){E(T,e,U),$(e,t),$(e,n),ae(n,l[0].node.label),E(T,r,U),E(T,o,U),$(o,i),$(o,u),E(T,d,U),E(T,a,U),$(a,c),$(a,_),E(T,h,U),E(T,g,U),$(g,k),$(g,p),ae(p,l[0].node.x),$(g,b),$(g,C),ae(C,l[0].node.y),E(T,O,U),q&&q.m(T,U),E(T,S,U),J&&J.m(T,U),E(T,H,U),Q&&Q.m(T,U),E(T,R,U),E(T,F,U),y=!0,x||(ne=[V(n,"input",l[4]),V(p,"input",l[5]),V(C,"input",l[6]),V(F,"click",l[3])],x=!0)},p(T,U){U&1&&n.value!==T[0].node.label&&ae(n,T[0].node.label),(!y||U&1)&&s!==(s=T[0].id+"")&&ke(u,s),(!y||U&1)&&f!==(f=T[0].type+"")&&ke(_,f),(!y||U&4)&&(p.disabled=T[2]),U&1&&be(p.value)!==T[0].node.x&&ae(p,T[0].node.x),(!y||U&4)&&(C.disabled=T[2]),U&1&&be(C.value)!==T[0].node.y&&ae(C,T[0].node.y),T[0]instanceof me?q?(q.p(T,U),U&1&&N(q,1)):(q=et(T),q.c(),N(q,1),q.m(S.parentNode,S)):q&&(pe(),M(q,1,1,()=>{q=null}),_e()),T[0]instanceof Re?J?(J.p(T,U),U&1&&N(J,1)):(J=tt(T),J.c(),N(J,1),J.m(H.parentNode,H)):J&&(pe(),M(J,1,1,()=>{J=null}),_e()),T[0]instanceof Pe?Q?(Q.p(T,U),U&1&&N(Q,1)):(Q=nt(T),Q.c(),N(Q,1),Q.m(R.parentNode,R)):Q&&(pe(),M(Q,1,1,()=>{Q=null}),_e())},i(T){y||(N(q),N(J),N(Q),y=!0)},o(T){M(q),M(J),M(Q),y=!1},d(T){T&&(m(e),m(r),m(o),m(d),m(a),m(h),m(g),m(O),m(S),m(H),m(R),m(F)),q&&q.d(T),J&&J.d(T),Q&&Q.d(T),x=!1,Ce(ne)}}}function et(l){let e,t,n=l[0].address+"",r,o,i,s,u;function d(c){l[7](c)}let a={};return l[0]!==void 0&&(a.router=l[0]),i=new Jt({props:a}),fe.push(()=>he(i,"router",d)),{c(){e=L("p"),t=ie("Address: "),r=ie(n),o=P(),X(i.$$.fragment)},l(c){e=I(c,"P",{});var f=z(e);t=re(f,"Address: "),r=re(f,n),f.forEach(m),o=D(c),G(i.$$.fragment,c)},m(c,f){E(c,e,f),$(e,t),$(e,r),E(c,o,f),W(i,c,f),u=!0},p(c,f){(!u||f&1)&&n!==(n=c[0].address+"")&&ke(r,n);const _={};!s&&f&1&&(s=!0,_.router=c[0],de(()=>s=!1)),i.$set(_)},i(c){u||(N(i.$$.fragment,c),u=!0)},o(c){M(i.$$.fragment,c),u=!1},d(c){c&&(m(e),m(o)),K(i,c)}}}function tt(l){let e,t,n,r,o,i;function s(c){l[8](c)}let u={};l[0]!==void 0&&(u.router=l[0]),e=new Pt({props:u}),fe.push(()=>he(e,"router",s));function d(c){l[9](c)}let a={};return l[0]!==void 0&&(a.router=l[0]),r=new nn({props:a}),fe.push(()=>he(r,"router",d)),{c(){X(e.$$.fragment),n=P(),X(r.$$.fragment)},l(c){G(e.$$.fragment,c),n=D(c),G(r.$$.fragment,c)},m(c,f){W(e,c,f),E(c,n,f),W(r,c,f),i=!0},p(c,f){const _={};!t&&f&1&&(t=!0,_.router=c[0],de(()=>t=!1)),e.$set(_);const h={};!o&&f&1&&(o=!0,h.router=c[0],de(()=>o=!1)),r.$set(h)},i(c){i||(N(e.$$.fragment,c),N(r.$$.fragment,c),i=!0)},o(c){M(e.$$.fragment,c),M(r.$$.fragment,c),i=!1},d(c){c&&m(n),K(e,c),K(r,c)}}}function nt(l){let e,t,n;function r(i){l[10](i)}let o={};return l[0]!==void 0&&(o.router=l[0]),e=new Pt({props:o}),fe.push(()=>he(e,"router",r)),{c(){X(e.$$.fragment)},l(i){G(e.$$.fragment,i)},m(i,s){W(e,i,s),n=!0},p(i,s){const u={};!t&&s&1&&(t=!0,u.router=i[0],de(()=>t=!1)),e.$set(u)},i(i){n||(N(e.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function on(l){let e,t,n,r;const o=[rn,ln],i=[];function s(u,d){return u[0]?0:1}return e=s(l),t=i[e]=o[e](l),{c(){t.c(),n=te()},l(u){t.l(u),n=te()},m(u,d){i[e].m(u,d),E(u,n,d),r=!0},p(u,d){let a=e;e=s(u),e===a?i[e].p(u,d):(pe(),M(i[a],1,1,()=>{i[a]=null}),_e(),t=i[e],t?t.p(u,d):(t=i[e]=o[e](u),t.c()),N(t,1),t.m(n.parentNode,n))},i(u){r||(N(t),r=!0)},o(u){M(t),r=!1},d(u){u&&m(n),i[e].d(u)}}}function sn(l){let e,t,n;function r(i){l[11](i)}let o={$$slots:{default:[on]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new Ye({props:o}),fe.push(()=>he(e,"dialog",r)),e.$on("close",l[12]),{c(){X(e.$$.fragment)},l(i){G(e.$$.fragment,i)},m(i,s){W(e,i,s),n=!0},p(i,[s]){const u={};s&8197&&(u.$$scope={dirty:s,ctx:i}),!t&&s&2&&(t=!0,u.dialog=i[1],de(()=>t=!1)),e.$set(u)},i(i){n||(N(e.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function un(l,e,t){let n;ge(l,Le,k=>t(2,n=k));let{router:r}=e,{dialog:o}=e;function i(){!n&&r&&confirm("Are you sure you want to delete this router?")&&(Y.deleteRouter(r.id),o.close())}function s(){r.node.label=this.value,t(0,r)}function u(){r.node.x=be(this.value),t(0,r)}function d(){r.node.y=be(this.value),t(0,r)}function a(k){r=k,t(0,r)}function c(k){r=k,t(0,r)}function f(k){r=k,t(0,r)}function _(k){r=k,t(0,r)}function h(k){o=k,t(1,o)}const g=()=>{Y.notify()};return l.$$set=k=>{"router"in k&&t(0,r=k.router),"dialog"in k&&t(1,o=k.dialog)},[r,o,n,i,s,u,d,a,c,f,_,h,g]}class an extends se{constructor(e){super(),ue(this,e,un,sn,oe,{router:0,dialog:1})}}function fn(l){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=L("p"),e.textContent=t},l(n){e=I(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,r){E(n,e,r)},p:Z,d(n){n&&m(e)}}}function cn(l){let e,t=l[0].distance+"",n,r,o,i,s,u,d,a="Delete Link",c,f;return{c(){e=ie("Distance: "),n=ie(t),r=P(),o=L("label"),i=ie(`Bandwidth:
      `),s=L("input"),u=P(),d=L("button"),d.textContent=a,this.h()},l(_){e=re(_,"Distance: "),n=re(_,t),r=D(_),o=I(_,"LABEL",{class:!0});var h=z(o);i=re(h,`Bandwidth:
      `),s=I(h,"INPUT",{type:!0,class:!0}),h.forEach(m),u=D(_),d=I(_,"BUTTON",{"data-svelte-h":!0}),le(d)!=="svelte-rk1ni8"&&(d.textContent=a),this.h()},h(){v(s,"type","number"),s.disabled=l[2],v(s,"class","svelte-mdz6ho"),v(o,"class","svelte-mdz6ho")},m(_,h){E(_,e,h),E(_,n,h),E(_,r,h),E(_,o,h),$(o,i),$(o,s),ae(s,l[0].bandwidth),E(_,u,h),E(_,d,h),c||(f=[V(s,"input",l[4]),V(d,"click",l[3])],c=!0)},p(_,h){h&1&&t!==(t=_[0].distance+"")&&ke(n,t),h&4&&(s.disabled=_[2]),h&1&&be(s.value)!==_[0].bandwidth&&ae(s,_[0].bandwidth)},d(_){_&&(m(e),m(n),m(r),m(o),m(u),m(d)),c=!1,Ce(f)}}}function dn(l){let e;function t(o,i){return o[0]?cn:fn}let n=t(l),r=n(l);return{c(){r.c(),e=te()},l(o){r.l(o),e=te()},m(o,i){r.m(o,i),E(o,e,i)},p(o,i){n===(n=t(o))&&r?r.p(o,i):(r.d(1),r=n(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&m(e),r.d(o)}}}function hn(l){let e,t,n;function r(i){l[5](i)}let o={$$slots:{default:[dn]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new Ye({props:o}),fe.push(()=>he(e,"dialog",r)),e.$on("close",l[6]),{c(){X(e.$$.fragment)},l(i){G(e.$$.fragment,i)},m(i,s){W(e,i,s),n=!0},p(i,[s]){const u={};s&133&&(u.$$scope={dirty:s,ctx:i}),!t&&s&2&&(t=!0,u.dialog=i[1],de(()=>t=!1)),e.$set(u)},i(i){n||(N(e.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function pn(l,e,t){let n;ge(l,Le,a=>t(2,n=a));let{link:r}=e,{dialog:o}=e;function i(){!n&&r&&confirm("Are you sure you want to delete this link?")&&(Y.deleteLink(r.id),o.close())}function s(){r.bandwidth=be(this.value),t(0,r)}function u(a){o=a,t(1,o)}const d=()=>{Y.notify()};return l.$$set=a=>{"link"in a&&t(0,r=a.link),"dialog"in a&&t(1,o=a.dialog)},[r,o,n,i,s,u,d]}class _n extends se{constructor(e){super(),ue(this,e,pn,hn,oe,{link:0,dialog:1})}}function lt(l){let e,t="Loading...";return{c(){e=L("p"),e.textContent=t,this.h()},l(n){e=I(n,"P",{style:!0,"data-svelte-h":!0}),le(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){Be(e,"font-size","200px")},m(n,r){E(n,e,r)},d(n){n&&m(e)}}}function it(l){let e,t,n,r,o,i;return{c(){e=ye("line"),this.h()},l(s){e=we(s,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),z(e).forEach(m),this.h()},h(){v(e,"class","preview"),v(e,"x1",t=l[4].node.x),v(e,"y1",n=l[4].node.y),v(e,"x2",r=l[17](l[2].x)),v(e,"y2",o=l[18](l[2].y)),v(e,"stroke",i=l[6]===l[11].CONNECTING?"green":"blue")},m(s,u){E(s,e,u)},p(s,u){u[0]&16&&t!==(t=s[4].node.x)&&v(e,"x1",t),u[0]&16&&n!==(n=s[4].node.y)&&v(e,"y1",n),u[0]&4&&r!==(r=s[17](s[2].x))&&v(e,"x2",r),u[0]&4&&o!==(o=s[18](s[2].y))&&v(e,"y2",o),u[0]&64&&i!==(i=s[6]===s[11].CONNECTING?"green":"blue")&&v(e,"stroke",i)},d(s){s&&m(e)}}}function gn(l){let e,t,n,r,o,i,s,u,d,a,c,f,_,h,g,k=!l[9]&&lt(),p=(!l[0]&&l[6]===l[11].CONNECTING||l[6]===l[11].DESTINATION)&&l[4]&&it(l);const b=l[21].default,C=Et(b,l,l[20],null);function O(y){l[24](y)}function S(y){l[25](y)}let H={};l[4]!==void 0&&(H.router=l[4]),l[7]!==void 0&&(H.dialog=l[7]),i=new an({props:H}),fe.push(()=>he(i,"router",O)),fe.push(()=>he(i,"dialog",S));function R(y){l[26](y)}function F(y){l[27](y)}let B={};return l[5]!==void 0&&(B.link=l[5]),l[8]!==void 0&&(B.dialog=l[8]),a=new _n({props:B}),fe.push(()=>he(a,"link",R)),fe.push(()=>he(a,"dialog",F)),{c(){k&&k.c(),e=P(),t=ye("svg"),p&&p.c(),n=te(),C&&C.c(),o=P(),X(i.$$.fragment),d=P(),X(a.$$.fragment),this.h()},l(y){k&&k.l(y),e=D(y),t=we(y,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var x=z(t);p&&p.l(x),n=te(),C&&C.l(x),x.forEach(m),o=D(y),G(i.$$.fragment,y),d=D(y),G(a.$$.fragment,y),this.h()},h(){v(t,"viewBox",r=`${l[1].x} ${l[1].y} ${l[1].width} ${l[1].height}`),v(t,"role","button"),v(t,"tabindex","-1"),v(t,"class","svelte-1cmb9l6"),Be(t,"cursor",l[10][l[6]])},m(y,x){k&&k.m(y,x),E(y,e,x),E(y,t,x),p&&p.m(t,null),$(t,n),C&&C.m(t,null),l[23](t),E(y,o,x),W(i,y,x),E(y,d,x),W(a,y,x),_=!0,h||(g=[V(t,"pointerdown",l[12]),V(t,"pointerup",l[13]),V(t,"wheel",l[14]),V(t,"dblclick",l[15]),V(t,"dragover",xt(l[22])),V(t,"drop",l[16])],h=!0)},p(y,x){y[9]?k&&(k.d(1),k=null):k||(k=lt(),k.c(),k.m(e.parentNode,e)),(!y[0]&&y[6]===y[11].CONNECTING||y[6]===y[11].DESTINATION)&&y[4]?p?p.p(y,x):(p=it(y),p.c(),p.m(t,n)):p&&(p.d(1),p=null),C&&C.p&&(!_||x[0]&1048576)&&$t(C,b,y,y[20],_?Lt(b,y[20],x,null):Ct(y[20]),null),(!_||x[0]&2&&r!==(r=`${y[1].x} ${y[1].y} ${y[1].width} ${y[1].height}`))&&v(t,"viewBox",r),x[0]&1088&&Be(t,"cursor",y[10][y[6]]);const ne={};!s&&x[0]&16&&(s=!0,ne.router=y[4],de(()=>s=!1)),!u&&x[0]&128&&(u=!0,ne.dialog=y[7],de(()=>u=!1)),i.$set(ne);const q={};!c&&x[0]&32&&(c=!0,q.link=y[5],de(()=>c=!1)),!f&&x[0]&256&&(f=!0,q.dialog=y[8],de(()=>f=!1)),a.$set(q)},i(y){_||(N(C,y),N(i.$$.fragment,y),N(a.$$.fragment,y),_=!0)},o(y){M(C,y),M(i.$$.fragment,y),M(a.$$.fragment,y),_=!1},d(y){y&&(m(e),m(t),m(o),m(d)),k&&k.d(y),p&&p.d(),C&&C.d(y),l[23](null),K(i,y),K(a,y),h=!1,Ce(g)}}}function mn(l,e,t){let n,r;ge(l,Le,w=>t(0,r=w));let{$$slots:o={},$$scope:i}=e;var s=(w=>(w[w.NONE=0]="NONE",w[w.DRAGGING=1]="DRAGGING",w[w.PANNING=2]="PANNING",w[w.CONNECTING=3]="CONNECTING",w[w.DESTINATION=4]="DESTINATION",w))(s||{});const u={x:0,y:0,width:0,height:0,get scale(){return c?this.width/c.getBoundingClientRect().width:1}},d={x:0,y:0},a={x:0,y:0};let c=null,f=null,_=null,h=0,g,k,p=!1;Rt(()=>{if(!c)return;new ResizeObserver(b).observe(c),requestAnimationFrame(()=>{c&&(t(1,u.x=c.getBoundingClientRect().width/-2,u),t(1,u.y=c.getBoundingClientRect().height/-2,u))}),t(9,p=!0)});function b(){if(!c)return;const w=u.scale||1;t(1,u.width=c.getBoundingClientRect().width*w,u),t(1,u.height=c.getBoundingClientRect().height*w,u)}function C(w){if(!(w.target instanceof Element))return;w.preventDefault(),c==null||c.addEventListener("pointermove",S),c==null||c.setPointerCapture(w.pointerId);const j=w.target.id;if(j){if(t(4,f=Y.getRouter(parseInt(j))||null),!f)return;w.shiftKey?t(6,h=3):w.ctrlKey&&f instanceof me?t(6,h=4):(a.x=f.node.x,a.y=f.node.y,t(6,h=1))}else t(6,h=2);t(2,d.x=w.clientX,d),t(2,d.y=w.clientY,d)}function O(w){if(w.target instanceof Element){if(w.preventDefault(),f){if(!r&&h===3){const j=document.elementFromPoint(w.clientX,w.clientY),ce=(j==null?void 0:j.tagName)==="circle"?j.id:null,ve=Y.getRouter(parseInt(ce??""));ve&&Y.addLink({source:f,target:ve})}else if(h===4){const j=document.elementFromPoint(w.clientX,w.clientY),ce=(j==null?void 0:j.tagName)==="circle"?j.id:null,ve=Y.getRouter(parseInt(ce??""));if(ve instanceof me){const Dt=Nt.findShortestPath(f,ve);Bt(Dt,ve.address.toUpperCase()),Y.notify()}else alert("Destination must be a CE")}}t(6,h=0),t(4,f=null),c==null||c.releasePointerCapture(w.pointerId),c==null||c.removeEventListener("pointermove",S)}}function S(w){w.preventDefault();const j={x:(w.clientX-d.x)*u.scale,y:(w.clientY-d.y)*u.scale};!r&&h===1&&f?(t(4,f.node.x=a.x+j.x,f),t(4,f.node.y=a.y+j.y,f),Y.notify()):h===2?(t(2,d.x=w.clientX,d),t(2,d.y=w.clientY,d),t(1,u.x-=j.x,u),t(1,u.y-=j.y,u)):(!r&&h===3||h===4)&&(t(2,d.x=w.clientX,d),t(2,d.y=w.clientY,d))}function H(w){w.preventDefault(),t(2,d.x=w.clientX,d),t(2,d.y=w.clientY,d);const j=w.deltaY>0?1.025:.975;R(j,d)}function R(w,j){if(!c||u.scale<.1&&w<1||u.scale>5&&w>1)return;const ce=c.getBoundingClientRect(),ve={x:(j.x-ce.left)/ce.width,y:(j.y-ce.top)/ce.height};t(1,u.x-=u.width*(w-1)*ve.x,u),t(1,u.y-=u.height*(w-1)*ve.y,u),t(1,u.width*=w,u),t(1,u.height*=w,u)}function F(w){if(!(w.target instanceof Element))return;w.preventDefault();const j=document.elementFromPoint(w.clientX,w.clientY);j&&(j.tagName==="circle"?B(j.id):j.tagName==="rect"&&y(j.id))}function B(w){const j=Y.getRouter(parseInt(w));j&&(t(4,f=j),g.showModal())}function y(w){const j=Y.links.find(ce=>w===ce.id);j&&(t(5,_=j),k.showModal())}function x(w){var ce;switch(w.preventDefault(),(ce=w.dataTransfer)==null?void 0:ce.getData("text/plain")){case"CE":Y.createCE(ne(w.clientX),q(w.clientY));break;case"LER":Y.createLER(ne(w.clientX),q(w.clientY));break;case"LSR":Y.createLSR(ne(w.clientX),q(w.clientY));break}}function ne(w){return c?(w-c.getBoundingClientRect().left)*u.scale+u.x:w}function q(w){return c?(w-c.getBoundingClientRect().top)*u.scale+u.y:w}function J(w){It.call(this,l,w)}function Q(w){fe[w?"unshift":"push"](()=>{c=w,t(3,c)})}function T(w){f=w,t(4,f)}function U(w){g=w,t(7,g)}function Te(w){_=w,t(5,_)}function Ne(w){k=w,t(8,k)}return l.$$set=w=>{"$$scope"in w&&t(20,i=w.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(10,n={0:"move",1:r?"default":"grabbing",2:"grabbing",3:r?"default":"crosshair",4:"crosshair"})},[r,u,d,c,f,_,h,g,k,p,n,s,C,O,H,F,x,ne,q,R,i,o,J,Q,T,U,Te,Ne]}class bn extends se{constructor(e){super(),ue(this,e,mn,gn,oe,{zoom:19},null,[-1,-1])}get zoom(){return this.$$.ctx[19]}}function kn(l){let e,t,n,r;return{c(){e=L("button"),t=ie(l[0]),this.h()},l(o){e=I(o,"BUTTON",{style:!0,class:!0});var i=z(e);t=re(i,l[0]),i.forEach(m),this.h()},h(){v(e,"style",l[2]),v(e,"class","svelte-1aag39e")},m(o,i){E(o,e,i),$(e,t),n||(r=V(e,"click",function(){De(l[1])&&l[1].apply(this,arguments)}),n=!0)},p(o,[i]){l=o,i&1&&ke(t,l[0]),i&4&&v(e,"style",l[2])},i:Z,o:Z,d(o){o&&m(e),n=!1,r()}}}function vn(l,e,t){let{text:n}=e,{callback:r=()=>{}}=e,{style:o=void 0}=e;return l.$$set=i=>{"text"in i&&t(0,n=i.text),"callback"in i&&t(1,r=i.callback),"style"in i&&t(2,o=i.style)},[n,r,o]}class Ee extends se{constructor(e){super(),ue(this,e,vn,kn,oe,{text:0,callback:1,style:2})}}function yn(l){let e,t,n=l[0].address+"",r,o,i,s="→",u,d,a=l[1].address+"",c,f,_,h;return _=new Ee({props:{text:"Play",callback:l[2]}}),{c(){e=L("div"),t=L("p"),r=ie(n),o=P(),i=L("p"),i.textContent=s,u=P(),d=L("p"),c=ie(a),f=P(),X(_.$$.fragment),this.h()},l(g){e=I(g,"DIV",{class:!0});var k=z(e);t=I(k,"P",{});var p=z(t);r=re(p,n),p.forEach(m),o=D(k),i=I(k,"P",{"data-svelte-h":!0}),le(i)!=="svelte-1giyjq6"&&(i.textContent=s),u=D(k),d=I(k,"P",{});var b=z(d);c=re(b,a),b.forEach(m),f=D(k),G(_.$$.fragment,k),k.forEach(m),this.h()},h(){v(e,"class","svelte-phufxh")},m(g,k){E(g,e,k),$(e,t),$(t,r),$(e,o),$(e,i),$(e,u),$(e,d),$(d,c),$(e,f),W(_,e,null),h=!0},p(g,[k]){(!h||k&1)&&n!==(n=g[0].address+"")&&ke(r,n),(!h||k&2)&&a!==(a=g[1].address+"")&&ke(c,a)},i(g){h||(N(_.$$.fragment,g),h=!0)},o(g){M(_.$$.fragment,g),h=!1},d(g){g&&m(e),K(_)}}}function wn(l,e,t){let{source:n}=e,{destination:r}=e;function o(){Y.addPacket(n,r)}return l.$$set=i=>{"source"in i&&t(0,n=i.source),"destination"in i&&t(1,r=i.destination)},[n,r,o]}class En extends se{constructor(e){super(),ue(this,e,wn,yn,oe,{source:0,destination:1})}}function rt(l,e,t){const n=l.slice();return n[2]=e[t],n}function ot(l,e,t){const n=l.slice();return n[5]=e[t][0],n}function st(l){let e,t;return e=new En({props:{source:l[2],destination:Y.getSureCERouter(l[5])}}),{c(){X(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){const o={};r&1&&(o.source=n[2]),r&1&&(o.destination=Y.getSureCERouter(n[5])),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ut(l){let e,t,n=ee([...l[2].firstHop]),r=[];for(let i=0;i<n.length;i+=1)r[i]=st(ot(l,n,i));const o=i=>M(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=te()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=te()},m(i,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(i,s);E(i,e,s),t=!0},p(i,s){if(s&1){n=ee([...i[2].firstHop]);let u;for(u=0;u<n.length;u+=1){const d=ot(i,n,u);r[u]?(r[u].p(d,s),N(r[u],1)):(r[u]=st(d),r[u].c(),N(r[u],1),r[u].m(e.parentNode,e))}for(pe(),u=n.length;u<r.length;u+=1)o(u);_e()}},i(i){if(!t){for(let s=0;s<n.length;s+=1)N(r[s]);t=!0}},o(i){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)M(r[s]);t=!1},d(i){i&&m(e),$e(r,i)}}}function $n(l){let e,t,n=ee(l[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=ut(rt(l,n,i));const o=i=>M(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=te()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=te()},m(i,s){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(i,s);E(i,e,s),t=!0},p(i,[s]){if(s&1){n=ee(i[0]);let u;for(u=0;u<n.length;u+=1){const d=rt(i,n,u);r[u]?(r[u].p(d,s),N(r[u],1)):(r[u]=ut(d),r[u].c(),N(r[u],1),r[u].m(e.parentNode,e))}for(pe(),u=n.length;u<r.length;u+=1)o(u);_e()}},i(i){if(!t){for(let s=0;s<n.length;s+=1)N(r[s]);t=!0}},o(i){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)M(r[s]);t=!1},d(i){i&&m(e),$e(r,i)}}}function Cn(l,e,t){let n,r;return ge(l,Y,o=>t(1,r=o)),l.$$.update=()=>{l.$$.dirty&2&&t(0,n=r.routers.filter(o=>o instanceof me))},[n,r]}class Ln extends se{constructor(e){super(),ue(this,e,Cn,$n,oe,{})}}function at(l,e,t){const n=l.slice();return n[13]=e[t],n}function ft(l){let e,t;const n=[l[13],{style:"padding: 10px 20px"}];let r={};for(let o=0;o<n.length;o+=1)r=Oe(r,n[o]);return e=new Ee({props:r}),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,i){W(e,o,i),t=!0},p(o,i){const s=i&32?Ae(n,[Ue(o[13]),n[1]]):{};e.$set(s)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){M(e.$$.fragment,o),t=!1},d(o){K(e,o)}}}function In(l){let e,t,n,r,o,i,s,u,d,a,c,f=l[1].speedMultiplier+"",_,h,g,k,p,b,C,O,S,H=ee(l[5]),R=[];for(let B=0;B<H.length;B+=1)R[B]=ft(at(l,H,B));const F=B=>M(R[B],1,1,()=>{R[B]=null});return p=new Ln({}),{c(){e=L("div"),t=L("div"),r=P(),o=L("div"),i=L("div"),s=L("div");for(let B=0;B<R.length;B+=1)R[B].c();u=P(),d=L("div"),a=L("p"),c=ie("Speed Multiplier: "),_=ie(f),h=P(),g=L("input"),k=P(),X(p.$$.fragment),this.h()},l(B){e=I(B,"DIV",{id:!0,style:!0,class:!0});var y=z(e);t=I(y,"DIV",{id:!0,class:!0}),z(t).forEach(m),y.forEach(m),r=D(B),o=I(B,"DIV",{id:!0,style:!0,class:!0});var x=z(o);i=I(x,"DIV",{id:!0,class:!0});var ne=z(i);s=I(ne,"DIV",{id:!0,class:!0});var q=z(s);for(let T=0;T<R.length;T+=1)R[T].l(q);q.forEach(m),u=D(ne),d=I(ne,"DIV",{id:!0,class:!0});var J=z(d);a=I(J,"P",{});var Q=z(a);c=re(Q,"Speed Multiplier: "),_=re(Q,f),Q.forEach(m),h=D(J),g=I(J,"INPUT",{type:!0,min:!0,max:!0,step:!0}),J.forEach(m),k=D(ne),G(p.$$.fragment,ne),ne.forEach(m),x.forEach(m),this.h()},h(){v(t,"id","resize-bar"),v(t,"class","svelte-1jmh3n8"),v(e,"id","visual-resize-bar"),v(e,"style",n=`width: ${l[0]?1:0}px`),v(e,"class","svelte-1jmh3n8"),v(s,"id","control-panel-buttons"),v(s,"class","svelte-1jmh3n8"),v(g,"type","range"),v(g,"min","0.1"),v(g,"max","2"),v(g,"step","0.1"),v(d,"id","slider"),v(d,"class","svelte-1jmh3n8"),v(i,"id","control-panel-content"),v(i,"class","svelte-1jmh3n8"),v(o,"id","control-panel"),v(o,"style",b=`width: ${l[4]}px; transition: ${l[3]};`),v(o,"class","svelte-1jmh3n8")},m(B,y){E(B,e,y),$(e,t),l[9](t),E(B,r,y),E(B,o,y),$(o,i),$(i,s);for(let x=0;x<R.length;x+=1)R[x]&&R[x].m(s,null);$(i,u),$(i,d),$(d,a),$(a,c),$(a,_),$(d,h),$(d,g),ae(g,l[1].speedMultiplier),$(i,k),W(p,i,null),C=!0,O||(S=[V(t,"pointerdown",l[6]),V(g,"change",l[10]),V(g,"input",l[10])],O=!0)},p(B,[y]){if((!C||y&1&&n!==(n=`width: ${B[0]?1:0}px`))&&v(e,"style",n),y&32){H=ee(B[5]);let x;for(x=0;x<H.length;x+=1){const ne=at(B,H,x);R[x]?(R[x].p(ne,y),N(R[x],1)):(R[x]=ft(ne),R[x].c(),N(R[x],1),R[x].m(s,null))}for(pe(),x=H.length;x<R.length;x+=1)F(x);_e()}(!C||y&2)&&f!==(f=B[1].speedMultiplier+"")&&ke(_,f),y&2&&ae(g,B[1].speedMultiplier),(!C||y&24&&b!==(b=`width: ${B[4]}px; transition: ${B[3]};`))&&v(o,"style",b)},i(B){if(!C){for(let y=0;y<H.length;y+=1)N(R[y]);N(p.$$.fragment,B),C=!0}},o(B){R=R.filter(Boolean);for(let y=0;y<R.length;y+=1)M(R[y]);M(p.$$.fragment,B),C=!1},d(B){B&&(m(e),m(r),m(o)),l[9](null),$e(R,B),K(p),O=!1,Ce(S)}}}function Rn(l,e,t){let n,r,o,i,s,u;ge(l,Le,k=>t(0,i=k)),ge(l,Ie,k=>t(1,s=k)),ge(l,Y,k=>t(8,u=k));let d,a="width 250ms";function c(k){i&&(t(3,a="none"),d.setPointerCapture(k.pointerId),d.addEventListener("pointermove",f),d.addEventListener("pointerup",_))}function f(k){t(4,o=window.innerWidth-k.clientX),o<=20&&t(4,o=0),o>=window.innerWidth-20&&t(4,o=window.innerWidth-20)}function _(k){d.removeEventListener("pointermove",f),d.removeEventListener("pointerup",_),d.releasePointerCapture(k.pointerId),t(3,a="width 250ms")}function h(k){fe[k?"unshift":"push"](()=>{d=k,t(2,d)})}function g(){s.speedMultiplier=be(this.value),Ie.set(s)}return l.$$.update=()=>{l.$$.dirty&256&&t(7,n=u.routers.filter(k=>k instanceof me)),l.$$.dirty&130&&t(5,r=[{text:s.running?"Pause":"Resume",callback:()=>{Fe(Ie,s.running=!s.running,s)}},{text:"Reset",callback:()=>{Y.clearPackets()}},{text:"Play All",callback:()=>{for(const k of n)for(const[p]of k.firstHop)Y.addPacket(k,Y.getSureCERouter(p))}}]),l.$$.dirty&1&&t(4,o=i?300:0)},[i,s,d,a,o,r,c,n,u,h,g]}class Tn extends se{constructor(e){super(),ue(this,e,Rn,In,oe,{})}}function Nn(l){let e;return{c(){e=ye("circle"),this.h()},l(t){e=we(t,"circle",{r:!0,class:!0}),z(e).forEach(m),this.h()},h(){v(e,"r","5"),v(e,"class","svelte-cb3n47")},m(t,n){E(t,e,n),l[4](e)},p:Z,i:Z,o:Z,d(t){t&&m(e),l[4](null)}}}function Bn(l,e,t){let n;ge(l,Ie,f=>t(3,n=f));let{packet:r}=e,o,i,s;function u(){if(!r.nextHop){r.drop(),alert("Packet has no next hop.");return}const f=Math.sqrt((r.node.x-r.nextHop.node.x)**2+(r.node.y-r.nextHop.node.y)**2);o=Math.round(f/250*1e3)}function d(){if(!r.nextHop){r.drop(),alert("Packet has no next hop.");return}u(),s&&(t(2,i=s.animate([{transform:`translate(${r.node.x}px, ${r.node.y}px)`},{transform:`translate(${r.nextHop.node.x}px, ${r.nextHop.node.y}px)`}],{duration:o,easing:"linear"})),t(2,i.onfinish=a,i))}function a(){if(!r.nextHop){r.drop(),alert("Packet has no next hop.");return}t(1,r.node=r.nextHop.node,r),r.nextHop.receivePacket(r),d()}requestAnimationFrame(d);function c(f){fe[f?"unshift":"push"](()=>{s=f,t(0,s)})}return l.$$set=f=>{"packet"in f&&t(1,r=f.packet)},l.$$.update=()=>{l.$$.dirty&12&&i&&t(2,i.playbackRate=n.speedMultiplier,i),l.$$.dirty&12&&i&&(n.running?i.play():i.pause())},[s,r,i,n,c]}class Pn extends se{constructor(e){super(),ue(this,e,Bn,Nn,oe,{packet:1})}}function Dn(l){let e,t,n,r,o,i,s,u,d=l[0].distance+"",a,c,f,_;return{c(){e=ye("line"),t=P(),n=ye("rect"),s=P(),u=ye("text"),a=ie(d),c=ie(" km"),this.h()},l(h){e=we(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),z(e).forEach(m),t=D(h),n=we(h,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),z(n).forEach(m),s=D(h),u=we(h,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var g=z(u);a=re(g,d),c=re(g," km"),g.forEach(m),this.h()},h(){v(e,"x1",l[4]),v(e,"y1",l[2]),v(e,"x2",l[3]),v(e,"y2",l[1]),v(n,"id",r=l[0].id),v(n,"x",o=l[5].x-Se/2),v(n,"y",i=l[5].y-ze/2),v(n,"width",Se),v(n,"height",ze),v(n,"class","svelte-zjn2k6"),v(u,"x",f=l[5].x),v(u,"y",_=l[5].y),v(u,"dominant-baseline","central"),v(u,"class","svelte-zjn2k6")},m(h,g){E(h,e,g),E(h,t,g),E(h,n,g),E(h,s,g),E(h,u,g),$(u,a),$(u,c)},p(h,[g]){g&16&&v(e,"x1",h[4]),g&4&&v(e,"y1",h[2]),g&8&&v(e,"x2",h[3]),g&2&&v(e,"y2",h[1]),g&1&&r!==(r=h[0].id)&&v(n,"id",r),g&32&&o!==(o=h[5].x-Se/2)&&v(n,"x",o),g&32&&i!==(i=h[5].y-ze/2)&&v(n,"y",i),g&1&&d!==(d=h[0].distance+"")&&ke(a,d),g&32&&f!==(f=h[5].x)&&v(u,"x",f),g&32&&_!==(_=h[5].y)&&v(u,"y",_)},i:Z,o:Z,d(h){h&&(m(e),m(t),m(n),m(s),m(u))}}}const Se=50,ze=20;function ct(l,e){return(l+e)/2}function Hn(l,e,t){let n,r,o,i,s,{link:u}=e;return l.$$set=d=>{"link"in d&&t(0,u=d.link)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=u.source.node.x),l.$$.dirty&1&&t(3,r=u.target.node.x),l.$$.dirty&1&&t(2,o=u.source.node.y),l.$$.dirty&1&&t(1,i=u.target.node.y),l.$$.dirty&30&&t(5,s={x:ct(n,r),y:ct(o,i)})},[u,i,o,r,n,s]}class Mn extends se{constructor(e){super(),ue(this,e,Hn,Dn,oe,{link:0})}}function xn(l){let e,t,n,r,o,i,s,u=l[0].node.label+"",d,a,c;return{c(){e=ye("circle"),i=P(),s=ye("text"),d=ie(u),this.h()},l(f){e=we(f,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),z(e).forEach(m),i=D(f),s=we(f,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var _=z(s);d=re(_,u),_.forEach(m),this.h()},h(){v(e,"id",t=l[0].id.toString()),v(e,"cx",n=l[0].node.x),v(e,"cy",r=l[0].node.y),v(e,"r","20"),v(e,"fill",o=l[1][l[0].type]),v(e,"class","svelte-17jcsko"),v(s,"x",a=l[0].node.x),v(s,"y",c=l[0].node.y),v(s,"dominant-baseline","central"),v(s,"class","svelte-17jcsko")},m(f,_){E(f,e,_),E(f,i,_),E(f,s,_),$(s,d)},p(f,[_]){_&1&&t!==(t=f[0].id.toString())&&v(e,"id",t),_&1&&n!==(n=f[0].node.x)&&v(e,"cx",n),_&1&&r!==(r=f[0].node.y)&&v(e,"cy",r),_&1&&o!==(o=f[1][f[0].type])&&v(e,"fill",o),_&1&&u!==(u=f[0].node.label+"")&&ke(d,u),_&1&&a!==(a=f[0].node.x)&&v(s,"x",a),_&1&&c!==(c=f[0].node.y)&&v(s,"y",c)},i:Z,o:Z,d(f){f&&(m(e),m(i),m(s))}}}function Sn(l,e,t){let{router:n}=e;const r={CE:"#7FC8F8",LER:"#FFE45E",LSR:"#FF6392"};return l.$$set=o=>{"router"in o&&t(0,n=o.router)},[n,r]}class zn extends se{constructor(e){super(),ue(this,e,Sn,xn,oe,{router:0})}}function Fn(l){let e,t,n,r;return{c(){e=L("div"),t=ie(l[0]),this.h()},l(o){e=I(o,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var i=z(e);t=re(i,l[0]),i.forEach(m),this.h()},h(){v(e,"draggable","true"),v(e,"role","button"),v(e,"tabindex","-1"),Be(e,"background-color",l[1]),v(e,"class","svelte-blffat")},m(o,i){E(o,e,i),$(e,t),n||(r=V(e,"dragstart",l[2]),n=!0)},p(o,[i]){i&1&&ke(t,o[0]),i&2&&Be(e,"background-color",o[1])},i:Z,o:Z,d(o){o&&m(e),n=!1,r()}}}function On(l,e,t){let n;ge(l,Le,u=>t(4,n=u));let{text:r}=e,{type:o}=e,{color:i}=e;function s(u){var d;if(n){alert("Network is locked.");return}(d=u.dataTransfer)==null||d.setData("text/plain",o)}return l.$$set=u=>{"text"in u&&t(0,r=u.text),"type"in u&&t(3,o=u.type),"color"in u&&t(1,i=u.color)},[r,i,s,o]}class An extends se{constructor(e){super(),ue(this,e,On,Fn,oe,{text:0,type:3,color:1})}}function dt(l,e,t){const n=l.slice();return n[4]=e[t],n}function ht(l,e,t){const n=l.slice();return n[7]=e[t],n}function pt(l){let e,t,n,r=ee(l[2]),o=[];for(let a=0;a<r.length;a+=1)o[a]=_t(ht(l,r,a));const i=a=>M(o[a],1,1,()=>{o[a]=null});let s=ee(l[1]),u=[];for(let a=0;a<s.length;a+=1)u[a]=gt(dt(l,s,a));const d=a=>M(u[a],1,1,()=>{u[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();e=P();for(let a=0;a<u.length;a+=1)u[a].c();t=te()},l(a){for(let c=0;c<o.length;c+=1)o[c].l(a);e=D(a);for(let c=0;c<u.length;c+=1)u[c].l(a);t=te()},m(a,c){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(a,c);E(a,e,c);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(a,c);E(a,t,c),n=!0},p(a,c){if(c&4){r=ee(a[2]);let f;for(f=0;f<r.length;f+=1){const _=ht(a,r,f);o[f]?(o[f].p(_,c),N(o[f],1)):(o[f]=_t(_),o[f].c(),N(o[f],1),o[f].m(e.parentNode,e))}for(pe(),f=r.length;f<o.length;f+=1)i(f);_e()}if(c&2){s=ee(a[1]);let f;for(f=0;f<s.length;f+=1){const _=dt(a,s,f);u[f]?(u[f].p(_,c),N(u[f],1)):(u[f]=gt(_),u[f].c(),N(u[f],1),u[f].m(t.parentNode,t))}for(pe(),f=s.length;f<u.length;f+=1)d(f);_e()}},i(a){if(!n){for(let c=0;c<r.length;c+=1)N(o[c]);for(let c=0;c<s.length;c+=1)N(u[c]);n=!0}},o(a){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)M(o[c]);u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)M(u[c]);n=!1},d(a){a&&(m(e),m(t)),$e(o,a),$e(u,a)}}}function _t(l){let e,t;const n=[l[7]];let r={};for(let o=0;o<n.length;o+=1)r=Oe(r,n[o]);return e=new An({props:r}),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,i){W(e,o,i),t=!0},p(o,i){const s=i&4?Ae(n,[Ue(o[7])]):{};e.$set(s)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){M(e.$$.fragment,o),t=!1},d(o){K(e,o)}}}function gt(l){let e,t;const n=[l[4]];let r={};for(let o=0;o<n.length;o+=1)r=Oe(r,n[o]);return e=new Ee({props:r}),{c(){X(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,i){W(e,o,i),t=!0},p(o,i){const s=i&2?Ae(n,[Ue(o[4])]):{};e.$set(s)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){M(e.$$.fragment,o),t=!1},d(o){K(e,o)}}}function Un(l){let e,t,n,r;e=new Ee({props:{text:l[0]?"Edit":"Simulation",callback:l[3],style:`width: 100px; background-color: ${l[0]?"#3CB371":"#6495ED"};`}});let o=!l[0]&&pt(l);return{c(){X(e.$$.fragment),t=P(),o&&o.c(),n=te()},l(i){G(e.$$.fragment,i),t=D(i),o&&o.l(i),n=te()},m(i,s){W(e,i,s),E(i,t,s),o&&o.m(i,s),E(i,n,s),r=!0},p(i,[s]){const u={};s&1&&(u.text=i[0]?"Edit":"Simulation"),s&1&&(u.callback=i[3]),s&1&&(u.style=`width: 100px; background-color: ${i[0]?"#3CB371":"#6495ED"};`),e.$set(u),i[0]?o&&(pe(),M(o,1,1,()=>{o=null}),_e()):o?(o.p(i,s),s&1&&N(o,1)):(o=pt(i),o.c(),N(o,1),o.m(n.parentNode,n))},i(i){r||(N(e.$$.fragment,i),N(o),r=!0)},o(i){M(e.$$.fragment,i),M(o),r=!1},d(i){i&&(m(t),m(n)),K(e,i),o&&o.d(i)}}}function jn(l,e,t){let n,r;ge(l,Le,s=>t(0,r=s));const o=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],i=()=>{Fe(Le,r=!r,r),Y.clearPackets()};return l.$$.update=()=>{l.$$.dirty&1&&t(1,n=[{text:"Clear",callback:()=>{if(r){alert("Network is locked.");return}confirm("Are you sure you want to clear the network?")&&Y.clear()}}])},[r,n,o,i]}class Yn extends se{constructor(e){super(),ue(this,e,jn,Un,oe,{})}}function qn(l){let e,t="Drag and drop routers to add them to the network.",n,r,o="Hold the shift key and drag routers to make links.",i,s,u="Double click a router to configure it.",d,a,c="The clear button will delete the entire network.",f,_,h,g,k="Press Esc to close this popup.";return{c(){e=L("p"),e.textContent=t,n=P(),r=L("p"),r.textContent=o,i=P(),s=L("p"),s.textContent=u,d=P(),a=L("p"),a.textContent=c,f=P(),_=L("br"),h=P(),g=L("p"),g.textContent=k},l(p){e=I(p,"P",{"data-svelte-h":!0}),le(e)!=="svelte-bhocp0"&&(e.textContent=t),n=D(p),r=I(p,"P",{"data-svelte-h":!0}),le(r)!=="svelte-ddjc2m"&&(r.textContent=o),i=D(p),s=I(p,"P",{"data-svelte-h":!0}),le(s)!=="svelte-11scjjz"&&(s.textContent=u),d=D(p),a=I(p,"P",{"data-svelte-h":!0}),le(a)!=="svelte-vcl8s3"&&(a.textContent=c),f=D(p),_=I(p,"BR",{}),h=D(p),g=I(p,"P",{"data-svelte-h":!0}),le(g)!=="svelte-1dvt5v1"&&(g.textContent=k)},m(p,b){E(p,e,b),E(p,n,b),E(p,r,b),E(p,i,b),E(p,s,b),E(p,d,b),E(p,a,b),E(p,f,b),E(p,_,b),E(p,h,b),E(p,g,b)},p:Z,d(p){p&&(m(e),m(n),m(r),m(i),m(s),m(d),m(a),m(f),m(_),m(h),m(g))}}}function Vn(l){let e,t,n,r,o,i;t=new Ee({props:{text:"Help",callback:l[1]}});function s(d){l[2](d)}let u={$$slots:{default:[qn]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.dialog=l[0]),r=new Ye({props:u}),fe.push(()=>he(r,"dialog",s)),{c(){e=L("div"),X(t.$$.fragment),n=P(),X(r.$$.fragment)},l(d){e=I(d,"DIV",{});var a=z(e);G(t.$$.fragment,a),a.forEach(m),n=D(d),G(r.$$.fragment,d)},m(d,a){E(d,e,a),W(t,e,null),E(d,n,a),W(r,d,a),i=!0},p(d,[a]){const c={};a&1&&(c.callback=d[1]),t.$set(c);const f={};a&8&&(f.$$scope={dirty:a,ctx:d}),!o&&a&1&&(o=!0,f.dialog=d[0],de(()=>o=!1)),r.$set(f)},i(d){i||(N(t.$$.fragment,d),N(r.$$.fragment,d),i=!0)},o(d){M(t.$$.fragment,d),M(r.$$.fragment,d),i=!1},d(d){d&&(m(e),m(n)),K(t),K(r,d)}}}function Xn(l,e,t){let n;const r=()=>{n.showModal()};function o(i){n=i,t(0,n)}return[n,r,o]}class Gn extends se{constructor(e){super(),ue(this,e,Xn,Vn,oe,{})}}function Wn(l){let e,t,n,r,o,i;return e=new Ee({props:{text:" - ",callback:l[1]}}),n=new Ee({props:{text:"Fullscreen",callback:l[2]}}),o=new Ee({props:{text:" + ",callback:l[3]}}),{c(){X(e.$$.fragment),t=P(),X(n.$$.fragment),r=P(),X(o.$$.fragment)},l(s){G(e.$$.fragment,s),t=D(s),G(n.$$.fragment,s),r=D(s),G(o.$$.fragment,s)},m(s,u){W(e,s,u),E(s,t,u),W(n,s,u),E(s,r,u),W(o,s,u),i=!0},p(s,[u]){const d={};u&1&&(d.callback=s[1]),e.$set(d);const a={};u&1&&(a.callback=s[3]),o.$set(a)},i(s){i||(N(e.$$.fragment,s),N(n.$$.fragment,s),N(o.$$.fragment,s),i=!0)},o(s){M(e.$$.fragment,s),M(n.$$.fragment,s),M(o.$$.fragment,s),i=!1},d(s){s&&(m(t),m(r)),K(e,s),K(n,s),K(o,s)}}}function Kn(l,e,t){let{zoom:n}=e;const r=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,s)},o=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},i=()=>{const s={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,s)};return l.$$set=s=>{"zoom"in s&&t(0,n=s.zoom)},[n,r,o,i]}class Jn extends se{constructor(e){super(),ue(this,e,Kn,Wn,oe,{zoom:0})}}function mt(l,e,t){const n=l.slice();return n[5]=e[t],n}function bt(l,e,t){const n=l.slice();return n[8]=e[t],n}function kt(l,e,t){const n=l.slice();return n[11]=e[t],n}function vt(l,e){let t,n,r;return n=new Mn({props:{link:e[11]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(o){t=te(),G(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,i){E(o,t,i),W(n,o,i),r=!0},p(o,i){e=o;const s={};i&2&&(s.link=e[11]),n.$set(s)},i(o){r||(N(n.$$.fragment,o),r=!0)},o(o){M(n.$$.fragment,o),r=!1},d(o){o&&m(t),K(n,o)}}}function yt(l,e){let t,n,r;return n=new zn({props:{router:e[8]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(o){t=te(),G(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,i){E(o,t,i),W(n,o,i),r=!0},p(o,i){e=o;const s={};i&2&&(s.router=e[8]),n.$set(s)},i(o){r||(N(n.$$.fragment,o),r=!0)},o(o){M(n.$$.fragment,o),r=!1},d(o){o&&m(t),K(n,o)}}}function wt(l,e){let t,n,r;return n=new Pn({props:{packet:e[5]}}),{key:l,first:null,c(){t=te(),X(n.$$.fragment),this.h()},l(o){t=te(),G(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,i){E(o,t,i),W(n,o,i),r=!0},p(o,i){e=o;const s={};i&2&&(s.packet=e[5]),n.$set(s)},i(o){r||(N(n.$$.fragment,o),r=!0)},o(o){M(n.$$.fragment,o),r=!1},d(o){o&&m(t),K(n,o)}}}function Qn(l){let e=[],t=new Map,n,r=[],o=new Map,i,s=[],u=new Map,d,a,c=ee(l[1].links);const f=p=>p[11].id;for(let p=0;p<c.length;p+=1){let b=kt(l,c,p),C=f(b);t.set(C,e[p]=vt(C,b))}let _=ee(l[1].routers);const h=p=>p[8].id;for(let p=0;p<_.length;p+=1){let b=bt(l,_,p),C=h(b);o.set(C,r[p]=yt(C,b))}let g=ee(l[1].packets);const k=p=>p[5].id;for(let p=0;p<g.length;p+=1){let b=mt(l,g,p),C=k(b);u.set(C,s[p]=wt(C,b))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();n=P();for(let p=0;p<r.length;p+=1)r[p].c();i=P();for(let p=0;p<s.length;p+=1)s[p].c();d=te()},l(p){for(let b=0;b<e.length;b+=1)e[b].l(p);n=D(p);for(let b=0;b<r.length;b+=1)r[b].l(p);i=D(p);for(let b=0;b<s.length;b+=1)s[b].l(p);d=te()},m(p,b){for(let C=0;C<e.length;C+=1)e[C]&&e[C].m(p,b);E(p,n,b);for(let C=0;C<r.length;C+=1)r[C]&&r[C].m(p,b);E(p,i,b);for(let C=0;C<s.length;C+=1)s[C]&&s[C].m(p,b);E(p,d,b),a=!0},p(p,b){b&2&&(c=ee(p[1].links),pe(),e=xe(e,b,f,1,p,c,t,n.parentNode,Me,vt,n,kt),_e()),b&2&&(_=ee(p[1].routers),pe(),r=xe(r,b,h,1,p,_,o,i.parentNode,Me,yt,i,bt),_e()),b&2&&(g=ee(p[1].packets),pe(),s=xe(s,b,k,1,p,g,u,d.parentNode,Me,wt,d,mt),_e())},i(p){if(!a){for(let b=0;b<c.length;b+=1)N(e[b]);for(let b=0;b<_.length;b+=1)N(r[b]);for(let b=0;b<g.length;b+=1)N(s[b]);a=!0}},o(p){for(let b=0;b<e.length;b+=1)M(e[b]);for(let b=0;b<r.length;b+=1)M(r[b]);for(let b=0;b<s.length;b+=1)M(s[b]);a=!1},d(p){p&&(m(n),m(i),m(d));for(let b=0;b<e.length;b+=1)e[b].d(p);for(let b=0;b<r.length;b+=1)r[b].d(p);for(let b=0;b<s.length;b+=1)s[b].d(p)}}}function Zn(l){let e,t,n,r,o,i,s,u,d,a,c,f,_,h,g,k,p;function b(H){l[2](H)}let C={$$slots:{default:[Qn]},$$scope:{ctx:l}};l[0]!==void 0&&(C.zoom=l[0]),n=new bn({props:C}),fe.push(()=>he(n,"zoom",b)),s=new Yn({}),a=new Gn({});function O(H){l[3](H)}let S={};return l[0]!==void 0&&(S.zoom=l[0]),_=new Jn({props:S}),fe.push(()=>he(_,"zoom",O)),k=new Tn({}),{c(){e=L("div"),t=L("div"),X(n.$$.fragment),o=P(),i=L("div"),X(s.$$.fragment),u=P(),d=L("div"),X(a.$$.fragment),c=P(),f=L("div"),X(_.$$.fragment),g=P(),X(k.$$.fragment),this.h()},l(H){e=I(H,"DIV",{id:!0,class:!0});var R=z(e);t=I(R,"DIV",{id:!0,class:!0});var F=z(t);G(n.$$.fragment,F),o=D(F),i=I(F,"DIV",{id:!0,class:!0});var B=z(i);G(s.$$.fragment,B),B.forEach(m),u=D(F),d=I(F,"DIV",{id:!0,class:!0});var y=z(d);G(a.$$.fragment,y),y.forEach(m),c=D(F),f=I(F,"DIV",{id:!0,class:!0});var x=z(f);G(_.$$.fragment,x),x.forEach(m),F.forEach(m),g=D(R),G(k.$$.fragment,R),R.forEach(m),this.h()},h(){v(i,"id","top-left-bar"),v(i,"class","absolute-flex svelte-1kpnzxr"),v(d,"id","bottom-left-bar"),v(d,"class","absolute-flex svelte-1kpnzxr"),v(f,"id","bottom-right-bar"),v(f,"class","absolute-flex svelte-1kpnzxr"),v(t,"id","network"),v(t,"class","svelte-1kpnzxr"),v(e,"id","mpls"),v(e,"class","svelte-1kpnzxr")},m(H,R){E(H,e,R),$(e,t),W(n,t,null),$(t,o),$(t,i),W(s,i,null),$(t,u),$(t,d),W(a,d,null),$(t,c),$(t,f),W(_,f,null),$(e,g),W(k,e,null),p=!0},p(H,[R]){const F={};R&16386&&(F.$$scope={dirty:R,ctx:H}),!r&&R&1&&(r=!0,F.zoom=H[0],de(()=>r=!1)),n.$set(F);const B={};!h&&R&1&&(h=!0,B.zoom=H[0],de(()=>h=!1)),_.$set(B)},i(H){p||(N(n.$$.fragment,H),N(s.$$.fragment,H),N(a.$$.fragment,H),N(_.$$.fragment,H),N(k.$$.fragment,H),p=!0)},o(H){M(n.$$.fragment,H),M(s.$$.fragment,H),M(a.$$.fragment,H),M(_.$$.fragment,H),M(k.$$.fragment,H),p=!1},d(H){H&&m(e),K(n),K(s),K(a),K(_),K(k)}}}function el(l,e,t){let n,r;ge(l,Ie,u=>t(4,n=u)),ge(l,Y,u=>t(1,r=u));let o;Rt(()=>{window.addEventListener("visibilitychanged",()=>{Fe(Ie,n.running=!document.hidden,n)})});function i(u){o=u,t(0,o)}function s(u){o=u,t(0,o)}return[o,r,i,s]}class tl extends se{constructor(e){super(),ue(this,e,el,Zn,oe,{})}}function nl(l){let e,t;return e=new tl({}),{c(){X(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p:Z,i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}class dl extends se{constructor(e){super(),ue(this,e,null,nl,oe,{})}}export{dl as component};
