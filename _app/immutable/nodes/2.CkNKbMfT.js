var Gr=Object.defineProperty;var Xr=(r,e,t)=>e in r?Gr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ce=(r,e,t)=>(Xr(r,typeof e!="symbol"?e+"":e,t),t);import{r as Rt,x as Pr,s as Le,i as Nr,n as Se,a as Sr,u as Br,g as Dr,b as Hr,y as Or,e as je,z as qe,o as An,A as sn,c as Fe,B as st}from"../chunks/scheduler.CY_Sai-S.js";import{n as j,m as B,S as Re,i as Te,e as w,t as _e,c as E,a as A,b as be,d,l as k,g as v,h as I,z as me,j as We,A as Ye,v as ee,w as te,x as ne,y as re,s as T,B as Q,f as P,r as He,p as Oe,C as ht,q as tt,D as De,E as nt,o as Ie,F as dt,G as ft,H as Jr,I as qn}from"../chunks/index.B338ho9k.js";import{w as In}from"../chunks/index.DXlJru-X.js";function Ee(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Tn(r,e){j(r,1,1,()=>{e.delete(r.key)})}function Pn(r,e,t,n,s,i,a,l,o,c,u,f){let h=r.length,_=i.length,y=h;const g={};for(;y--;)g[r[y].key]=y;const b=[],m=new Map,p=new Map,$=[];for(y=_;y--;){const D=f(s,i,y),U=t(D);let X=a.get(U);X?n&&$.push(()=>X.p(D,e)):(X=c(U,D),X.c()),m.set(U,b[y]=X),U in g&&p.set(U,Math.abs(y-g[U]))}const S=new Set,N=new Set;function H(D){B(D,1),D.m(l,u),a.set(D.key,D),u=D.first,_--}for(;h&&_;){const D=b[_-1],U=r[h-1],X=D.key,O=U.key;D===U?(u=D.first,h--,_--):m.has(O)?!a.has(X)||S.has(X)?H(D):N.has(O)?h--:p.get(X)>p.get(O)?(N.add(X),H(D)):(S.add(O),h--):(o(U,a),h--)}for(;h--;){const D=r[h];m.has(D.key)||o(D,a)}for(;_;)H(b[_-1]);return Rt($),b}function an(r,e){const t={},n={},s={$$scope:1};let i=r.length;for(;i--;){const a=r[i],l=e[i];if(l){for(const o in a)o in l||(n[o]=1);for(const o in l)s[o]||(t[o]=l[o],s[o]=1);r[i]=l}else for(const o in a)s[o]=1}for(const a in n)a in t||(t[a]=void 0);return t}function ln(r){return typeof r=="object"&&r!==null?r:{}}const Xe=In({running:!0,enableFallback:!1,speedMultiplier:1,maxPackets:100});let Kr=class{constructor(e,t,n){ce(this,"bandwidth",0);this.id=e,this.source=t,this.target=n}get distance(){return Math.round(Math.sqrt((this.source.node.x-this.target.node.x)**2+(this.source.node.y-this.target.node.y)**2))}},Mn=class{constructor(e,t){this.id=e,this.node=t}};class Ge extends Mn{constructor(){super(...arguments);ce(this,"address",`CE-IP-${this.id}`);ce(this,"firstHop",new Map);ce(this,"addEmptyEntry",()=>{this.firstHop.set("",0)});ce(this,"receiveEntry",(t,n)=>{this.firstHop.set(t,n)});ce(this,"updateAddress",(t,n)=>{if(t===n)return;const s=this.firstHop.get(t);if(s===void 0){alert(`Unable to update old first hop Address '${t}' to '${n}'.`);return}this.firstHop.set(n,s),this.firstHop.delete(t)});ce(this,"deleteEntry",t=>{this.firstHop.delete(t)})}receivePacket(t){t.drop("CE received packet.")}clearTables(){this.firstHop.clear()}get type(){return"CE"}}let Qr=class{constructor(e=void 0){ce(this,"map");ce(this,"addEmptyEntry",()=>{this.map.set("0",{label:0,nextHop:"0"})});ce(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{label:t,nextHop:n})});ce(this,"updateAddress",(e,t)=>{if(e===t)return;const n=this.map.get(e);if(n===void 0){alert(`Unable to update old FIB address '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Address '${t}' already exists in FIB.`);return}this.map.set(t,n),this.map.delete(e)});ce(this,"deleteEntry",e=>{this.map.delete(e)});this.map=e||new Map}get(e){return this.map.get(e)}},Zr=class{constructor(){ce(this,"map",new Map);ce(this,"addEmptyEntry",()=>{this.map.set(0,{outgoingLabel:0,nextHop:"0"})});ce(this,"receiveEntry",(e,t,n)=>{this.map.set(e,{outgoingLabel:t,nextHop:n})});ce(this,"updateLabel",(e,t)=>{if(e===t)return;const n=this.map.get(e);if(!n){alert(`Unable to update old LFIB label '${e}' to '${t}'.`);return}if(this.map.get(t)){alert(`Label entry '${t}' already exists.`);return}this.map.set(t,n),this.map.delete(e)});ce(this,"deleteEntry",e=>{this.map.delete(e)})}get(e){return this.map.get(e)}};class Qe extends Mn{constructor(){super(...arguments);ce(this,"FIB",new Qr);ce(this,"LFIB",new Zr)}receivePacket(t){var n,s,i,a;if(t.fallbackRoute)return t.fallback(this);if(t.label===-1){const l=t.destination,o=(n=this.FIB.get(l.address))==null?void 0:n.nextHop;if(!o)return t.fallback(this);const c=(s=this.FIB.get(l.address))==null?void 0:s.label;if(!c)return t.fallback(this);t.label=c;const u=W.getRouter(parseInt(o));if(!u)return t.fallback(this);t.nextHop=u}else{const l=(i=this.LFIB.get(t.label))==null?void 0:i.nextHop;if(!l)return t.fallback(this);const o=(a=this.LFIB.get(t.label))==null?void 0:a.outgoingLabel;if(!o)return t.fallback(this);t.label=o;const c=W.getCERouter(l);if(!c)return t.fallback(this);t.nextHop=c}t.decrementTTL()}clearTables(){this.FIB.map.clear(),this.LFIB.map.clear()}get type(){return"LER"}}function Fn(r,e){const t=W.routers,n=t.length,s=new Array(n).fill(1/0),i=new Array(n).fill(!1),a=new Array(n).fill(null);s[t.indexOf(r)]=0;let l=!1,o=!1;for(;!l;){let f=null,h=1/0;for(const[_,y]of t.entries())if(!i[_]&&s[_]<h){if(y instanceof Qe){if(!o)o=!0;else if(!W.links.some(b=>b.source===y&&b.target===e||b.target===y&&b.source===e))continue}f=y,h=s[_]}if(!f||f.id===e.id){l=!0;continue}i[t.indexOf(f)]=!0;for(const _ of W.links){let y;if(_.source===f)y=_.target;else if(_.target===f)y=_.source;else continue;const g=t.indexOf(y),b=h+_.distance;b<s[g]&&(s[g]=b,a[g]=f)}}const c=[];let u=e;for(;u;){c.unshift(u);const f=t.indexOf(u);u=a[f]}return c}let es=class{constructor(e,t,n,s){ce(this,"ttl",32);ce(this,"label",-1);ce(this,"fallbackRoute");ce(this,"nextHop");this.id=e,this.source=t,this.destination=n,this.node=s;const i=t.firstHop.get(n.address);if(!i){this.drop("No next hop router id found.");return}const a=W.getRouter(i);if(!a){this.drop("No next hop router found.");return}this.nextHop=a}decrementTTL(){--this.ttl<=0&&this.drop()}fallback(e){if(!Pr(Xe).enableFallback)return this.drop("Fallback is disabled.");if(this.label=-1,this.decrementTTL(),this.fallbackRoute)return this.setFallbackNextHop();if(this.fallbackRoute=Fn(e,this.destination),!(this.fallbackRoute[this.fallbackRoute.length-1]instanceof Ge))return this.drop("The destination is not a CE.");this.fallbackRoute.shift(),this.setFallbackNextHop()}validateNextHop(e){return W.doesLinkExist({source:e,target:this.nextHop})||W.doesLinkExist({source:this.nextHop,target:e})}validateFirstHop(){return W.doesLinkExist({source:this.source,target:this.nextHop})||W.doesLinkExist({source:this.nextHop,target:this.source})}setFallbackNextHop(){var t;const e=(t=this.fallbackRoute)==null?void 0:t.shift();this.fallbackRoute&&e?this.nextHop=e:this.drop("Unable to set fallback IP routing next hop")}drop(e="Unknown"){console.warn("Packet dropped: ",e),W.deletePacket(this.id)}};class Bt extends Mn{constructor(){super(...arguments);ce(this,"LFIB",new Zr)}receivePacket(t){var a,l;if(t.fallbackRoute)return t.fallback(this);const n=(a=this.LFIB.get(t.label))==null?void 0:a.nextHop;if(!n)return t.fallback(this);const s=(l=this.LFIB.get(t.label))==null?void 0:l.outgoingLabel;if(!s)return t.fallback(this);t.label=s;const i=W.getRouter(parseInt(n));if(!i)return t.fallback(this);t.nextHop=i,t.decrementTTL()}clearTables(){this.LFIB.map.clear()}get type(){return"LSR"}}const ts={CE:["LER"],LER:["CE","LSR"],LSR:["LER","LSR"]};class ns{constructor(){ce(this,"store",In({routers:[],links:[],packets:[]}));ce(this,"set",this.store.set);ce(this,"update",this.store.update);ce(this,"subscribe",this.store.subscribe);ce(this,"_routers",[]);ce(this,"_links",[]);ce(this,"_packets",[]);ce(this,"routerMap",new Map);ce(this,"CEMap",new Map);ce(this,"routerCounter",1);ce(this,"packetCounter",1);ce(this,"maxPackets",Pr(Xe).maxPackets);ce(this,"setRouterCount",e=>this.routerCounter=e);Xe.subscribe(e=>{this.maxPackets=e.maxPackets,this._packets=this._packets.slice(-this.maxPackets),this.notify()})}get routers(){return this._routers}get links(){return this._links}get packets(){return this._packets}get networkState(){return{routers:this.routers,links:this.links,packets:this.packets}}addLink(e){if(e.source===e.target||!ts[e.source.type].includes(e.target.type)||this.doesLinkExist(e)||this.doesLinkExist({source:e.target,target:e.source}))return;const t=new Kr(`${e.source.id}-${e.target.id}`,e.source,e.target);e.bandwidth!==void 0&&(t.bandwidth=e.bandwidth),this._links.push(t),this.notify()}deleteLink(e){this._links=this._links.filter(t=>t.id!==e),this.notify()}doesLinkExist(e){return this._links.some(t=>t.source===e.source&&t.target===e.target)}createCE(e,t){const n=this.routerCounter++,s=new Ge(n,{label:`CE ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}createLER(e,t){const n=this.routerCounter++,s=new Qe(n,{label:`LER ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}createLSR(e,t){const n=this.routerCounter++,s=new Bt(n,{label:`LSR ${n}`,x:Math.round(e),y:Math.round(t)});this.addRouter(s)}addRouter(e){this._routers.push(e),this.routerMap.set(e.id,e),e instanceof Ge&&this.CEMap.set(e.address,e),this.notify()}deleteRouter(e){const t=this.getRouter(e);t&&(this._routers=this._routers.filter(n=>n.id!==e),this._links=this._links.filter(n=>n.source.id!==e&&n.target.id!==e),this.routerMap.delete(e),t instanceof Ge&&this.CEMap.delete(t.address),this.notify())}getRouter(e){return this.routerMap.get(e)}getSureRouter(e){const t=this.getRouter(e);if(!t)throw new Error(`Router with id ${e} not found`);return t}getCERouter(e){return this.CEMap.get(e)}addPacket(e,t){if(this._packets.length>=this.maxPackets)return;const n=new es(this.packetCounter++,e,t,{x:e.node.x,y:e.node.y});this._packets.push(n),this.notify()}deletePacket(e){this._packets=this._packets.filter(t=>t.id!==e),this.notify()}clearTables(){for(const e of this._routers)e.clearTables();this.notify()}clearLinks(){this._links=[],this.notify()}clearPackets(){this._packets=[],this.packetCounter=0,this.notify()}clear(){this._routers=[],this._links=[],this._packets=[],this.routerMap.clear(),this.CEMap.clear(),this.routerCounter=1,this.packetCounter=1,this.notify()}notify(){this.store.set(this.networkState)}}const rs=new ns,W=rs;var ge;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},r.getValidEnumValues=s=>{const i=r.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of i)a[l]=s[l];return r.objectValues(a)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},r.find=(s,i)=>{for(const a of s)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ge||(ge={}));var Hn;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Hn||(Hn={}));const V=ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Et=r=>{switch(typeof r){case"undefined":return V.undefined;case"string":return V.string;case"number":return isNaN(r)?V.nan:V.number;case"boolean":return V.boolean;case"function":return V.function;case"bigint":return V.bigint;case"symbol":return V.symbol;case"object":return Array.isArray(r)?V.array:r===null?V.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?V.promise:typeof Map<"u"&&r instanceof Map?V.map:typeof Set<"u"&&r instanceof Set?V.set:typeof Date<"u"&&r instanceof Date?V.date:V.object;default:return V.unknown}},Z=ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ss=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class at extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let l=n,o=0;for(;o<a.path.length;){const c=a.path[o];o===a.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(t(a))):l[c]=l[c]||{_errors:[]},l=l[c],o++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}at.create=r=>new at(r);const qt=(r,e)=>{let t;switch(r.code){case Z.invalid_type:r.received===V.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case Z.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,ge.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:t=`Unrecognized key(s) in object: ${ge.joinValues(r.keys,", ")}`;break;case Z.invalid_union:t="Invalid input";break;case Z.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ge.joinValues(r.options)}`;break;case Z.invalid_enum_value:t=`Invalid enum value. Expected ${ge.joinValues(r.options)}, received '${r.received}'`;break;case Z.invalid_arguments:t="Invalid function arguments";break;case Z.invalid_return_type:t="Invalid function return type";break;case Z.invalid_date:t="Invalid date";break;case Z.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:ge.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case Z.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case Z.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case Z.custom:t="Invalid input";break;case Z.invalid_intersection_types:t="Intersection results could not be merged";break;case Z.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case Z.not_finite:t="Number must be finite";break;default:t=e.defaultError,ge.assertNever(r)}return{message:t}};let jr=qt;function is(r){jr=r}function _n(){return jr}const bn=r=>{const{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],a={...s,path:i};let l="";const o=n.filter(c=>!!c).slice().reverse();for(const c of o)l=c(a,{data:e,defaultError:l}).message;return{...s,path:i,message:s.message||l}},as=[];function q(r,e){const t=bn({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,_n(),qt].filter(n=>!!n)});r.common.issues.push(t)}class ze{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return se;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t)n.push({key:await s.key,value:await s.value});return ze.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return se;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const se=Object.freeze({status:"aborted"}),Ar=r=>({status:"dirty",value:r}),Ve=r=>({status:"valid",value:r}),On=r=>r.status==="aborted",Zn=r=>r.status==="dirty",Yt=r=>r.status==="valid",yn=r=>typeof Promise<"u"&&r instanceof Promise;var G;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(G||(G={}));class pt{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Yn=(r,e)=>{if(Yt(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new at(r.common.issues);return this._error=t,this._error}}};function ae(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,l)=>a.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:n??l.defaultError}:{message:t??l.defaultError},description:s}}class ue{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Et(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ze,ctx:{common:e.parent.common,data:e.data,parsedType:Et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(yn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Yn(s,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(yn(s)?s:Promise.resolve(s));return Yn(n,i)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const a=e(s),l=()=>i.addIssue({code:Z.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(o=>o?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new ot({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return yt.create(this,this._def)}nullable(){return Ot.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return lt.create(this,this._def)}promise(){return Vt.create(this,this._def)}or(e){return Jt.create([this,e],this._def)}and(e){return Kt.create(this,e,this._def)}transform(e){return new ot({...ae(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new rn({...ae(this._def),innerType:this,defaultValue:t,typeName:J.ZodDefault})}brand(){return new Fr({typeName:J.ZodBranded,type:this,...ae(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new wn({...ae(this._def),innerType:this,catchValue:t,typeName:J.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return on.create(this,e)}readonly(){return Cn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ls=/^c[^\s-]{8,}$/i,os=/^[a-z][a-z0-9]*$/,us=/^[0-9A-HJKMNP-TV-Z]{26}$/,cs=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ds=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fs="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Nn;const hs=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ps=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ms=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function gs(r,e){return!!((e==="v4"||!e)&&hs.test(r)||(e==="v6"||!e)&&ps.test(r))}class it extends ue{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==V.string){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_type,expected:V.string,received:i.parsedType}),se}const n=new ze;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,l=e.data.length<i.value;(a||l)&&(s=this._getOrReturnCtx(e,s),a?q(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&q(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")ds.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"email",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Nn||(Nn=new RegExp(fs,"u")),Nn.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"emoji",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")cs.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"uuid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")ls.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cuid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")os.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cuid2",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")us.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"ulid",code:Z.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),q(s,{validation:"url",code:Z.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"regex",code:Z.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),q(s,{code:Z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),q(s,{code:Z.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),q(s,{code:Z.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?ms(i).test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:Z.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?gs(e.data,i.version)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"ip",code:Z.invalid_string,message:i.message}),n.dirty()):ge.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:Z.invalid_string,...G.errToObj(n)})}_addCheck(e){return new it({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...G.errToObj(e)})}url(e){return this._addCheck({kind:"url",...G.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...G.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...G.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...G.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...G.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...G.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...G.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...G.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...G.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...G.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...G.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...G.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...G.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...G.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...G.errToObj(t)})}nonempty(e){return this.min(1,G.errToObj(e))}trim(){return new it({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new it({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new it({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}it.create=r=>{var e;return new it({checks:[],typeName:J.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...ae(r)})};function _s(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class Ct extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==V.number){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_type,expected:V.number,received:i.parsedType}),se}let n;const s=new ze;for(const i of this._def.checks)i.kind==="int"?ge.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:Z.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?_s(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:Z.not_finite,message:i.message}),s.dirty()):ge.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,G.toString(t))}gt(e,t){return this.setLimit("min",e,!1,G.toString(t))}lte(e,t){return this.setLimit("max",e,!0,G.toString(t))}lt(e,t){return this.setLimit("max",e,!1,G.toString(t))}setLimit(e,t,n,s){return new Ct({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:G.toString(s)}]})}_addCheck(e){return new Ct({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:G.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:G.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:G.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:G.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:G.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ge.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ct.create=r=>new Ct({checks:[],typeName:J.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...ae(r)});class It extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==V.bigint){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_type,expected:V.bigint,received:i.parsedType}),se}let n;const s=new ze;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),q(n,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ge.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,G.toString(t))}gt(e,t){return this.setLimit("min",e,!1,G.toString(t))}lte(e,t){return this.setLimit("max",e,!0,G.toString(t))}lt(e,t){return this.setLimit("max",e,!1,G.toString(t))}setLimit(e,t,n,s){return new It({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:G.toString(s)}]})}_addCheck(e){return new It({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:G.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}It.create=r=>{var e;return new It({checks:[],typeName:J.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...ae(r)})};class Wt extends ue{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==V.boolean){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.boolean,received:n.parsedType}),se}return Ve(e.data)}}Wt.create=r=>new Wt({typeName:J.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...ae(r)});class Dt extends ue{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==V.date){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_type,expected:V.date,received:i.parsedType}),se}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return q(i,{code:Z.invalid_date}),se}const n=new ze;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:Z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:Z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):ge.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Dt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:G.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:G.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Dt.create=r=>new Dt({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:J.ZodDate,...ae(r)});class vn extends ue{_parse(e){if(this._getType(e)!==V.symbol){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.symbol,received:n.parsedType}),se}return Ve(e.data)}}vn.create=r=>new vn({typeName:J.ZodSymbol,...ae(r)});class Gt extends ue{_parse(e){if(this._getType(e)!==V.undefined){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.undefined,received:n.parsedType}),se}return Ve(e.data)}}Gt.create=r=>new Gt({typeName:J.ZodUndefined,...ae(r)});class Xt extends ue{_parse(e){if(this._getType(e)!==V.null){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.null,received:n.parsedType}),se}return Ve(e.data)}}Xt.create=r=>new Xt({typeName:J.ZodNull,...ae(r)});class zt extends ue{constructor(){super(...arguments),this._any=!0}_parse(e){return Ve(e.data)}}zt.create=r=>new zt({typeName:J.ZodAny,...ae(r)});class St extends ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ve(e.data)}}St.create=r=>new St({typeName:J.ZodUnknown,...ae(r)});class vt extends ue{_parse(e){const t=this._getOrReturnCtx(e);return q(t,{code:Z.invalid_type,expected:V.never,received:t.parsedType}),se}}vt.create=r=>new vt({typeName:J.ZodNever,...ae(r)});class kn extends ue{_parse(e){if(this._getType(e)!==V.undefined){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.void,received:n.parsedType}),se}return Ve(e.data)}}kn.create=r=>new kn({typeName:J.ZodVoid,...ae(r)});class lt extends ue{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==V.array)return q(t,{code:Z.invalid_type,expected:V.array,received:t.parsedType}),se;if(s.exactLength!==null){const a=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(a||l)&&(q(t,{code:a?Z.too_big:Z.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(q(t,{code:Z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(q(t,{code:Z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,l)=>s.type._parseAsync(new pt(t,a,t.path,l)))).then(a=>ze.mergeArray(n,a));const i=[...t.data].map((a,l)=>s.type._parseSync(new pt(t,a,t.path,l)));return ze.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new lt({...this._def,minLength:{value:e,message:G.toString(t)}})}max(e,t){return new lt({...this._def,maxLength:{value:e,message:G.toString(t)}})}length(e,t){return new lt({...this._def,exactLength:{value:e,message:G.toString(t)}})}nonempty(e){return this.min(1,e)}}lt.create=(r,e)=>new lt({type:r,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...ae(e)});function Mt(r){if(r instanceof $e){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=yt.create(Mt(n))}return new $e({...r._def,shape:()=>e})}else return r instanceof lt?new lt({...r._def,type:Mt(r.element)}):r instanceof yt?yt.create(Mt(r.unwrap())):r instanceof Ot?Ot.create(Mt(r.unwrap())):r instanceof mt?mt.create(r.items.map(e=>Mt(e))):r}class $e extends ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ge.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==V.object){const c=this._getOrReturnCtx(e);return q(c,{code:Z.invalid_type,expected:V.object,received:c.parsedType}),se}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof vt&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||l.push(c);const o=[];for(const c of a){const u=i[c],f=s.data[c];o.push({key:{status:"valid",value:c},value:u._parse(new pt(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof vt){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of l)o.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")l.length>0&&(q(s,{code:Z.unrecognized_keys,keys:l}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of l){const f=s.data[u];o.push({key:{status:"valid",value:u},value:c._parse(new pt(s,f,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of o){const f=await u.key;c.push({key:f,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>ze.mergeObjectSync(n,c)):ze.mergeObjectSync(n,o)}get shape(){return this._def.shape()}strict(e){return G.errToObj,new $e({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,a,l;const o=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&a!==void 0?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(l=G.errToObj(e).message)!==null&&l!==void 0?l:o}:{message:o}}}:{}})}strip(){return new $e({...this._def,unknownKeys:"strip"})}passthrough(){return new $e({...this._def,unknownKeys:"passthrough"})}extend(e){return new $e({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $e({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new $e({...this._def,catchall:e})}pick(e){const t={};return ge.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new $e({...this._def,shape:()=>t})}omit(e){const t={};return ge.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new $e({...this._def,shape:()=>t})}deepPartial(){return Mt(this)}partial(e){const t={};return ge.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new $e({...this._def,shape:()=>t})}required(e){const t={};return ge.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof yt;)i=i._def.innerType;t[n]=i}}),new $e({...this._def,shape:()=>t})}keyof(){return Mr(ge.objectKeys(this.shape))}}$e.create=(r,e)=>new $e({shape:()=>r,unknownKeys:"strip",catchall:vt.create(),typeName:J.ZodObject,...ae(e)});$e.strictCreate=(r,e)=>new $e({shape:()=>r,unknownKeys:"strict",catchall:vt.create(),typeName:J.ZodObject,...ae(e)});$e.lazycreate=(r,e)=>new $e({shape:r,unknownKeys:"strip",catchall:vt.create(),typeName:J.ZodObject,...ae(e)});class Jt extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const a=i.map(l=>new at(l.ctx.common.issues));return q(t,{code:Z.invalid_union,unionErrors:a}),se}if(t.common.async)return Promise.all(n.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const o of n){const c={...t,common:{...t.common,issues:[]},parent:null},u=o._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=a.map(o=>new at(o));return q(t,{code:Z.invalid_union,unionErrors:l}),se}}get options(){return this._def.options}}Jt.create=(r,e)=>new Jt({options:r,typeName:J.ZodUnion,...ae(e)});const gn=r=>r instanceof en?gn(r.schema):r instanceof ot?gn(r.innerType()):r instanceof tn?[r.value]:r instanceof $t?r.options:r instanceof nn?Object.keys(r.enum):r instanceof rn?gn(r._def.innerType):r instanceof Gt?[void 0]:r instanceof Xt?[null]:null;class $n extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==V.object)return q(t,{code:Z.invalid_type,expected:V.object,received:t.parsedType}),se;const n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(q(t,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const i of t){const a=gn(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new $n({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ae(n)})}}function jn(r,e){const t=Et(r),n=Et(e);if(r===e)return{valid:!0,data:r};if(t===V.object&&n===V.object){const s=ge.objectKeys(e),i=ge.objectKeys(r).filter(l=>s.indexOf(l)!==-1),a={...r,...e};for(const l of i){const o=jn(r[l],e[l]);if(!o.valid)return{valid:!1};a[l]=o.data}return{valid:!0,data:a}}else if(t===V.array&&n===V.array){if(r.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<r.length;i++){const a=r[i],l=e[i],o=jn(a,l);if(!o.valid)return{valid:!1};s.push(o.data)}return{valid:!0,data:s}}else return t===V.date&&n===V.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Kt extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(On(i)||On(a))return se;const l=jn(i.value,a.value);return l.valid?((Zn(i)||Zn(a))&&t.dirty(),{status:t.value,value:l.data}):(q(n,{code:Z.invalid_intersection_types}),se)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Kt.create=(r,e,t)=>new Kt({left:r,right:e,typeName:J.ZodIntersection,...ae(t)});class mt extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.array)return q(n,{code:Z.invalid_type,expected:V.array,received:n.parsedType}),se;if(n.data.length<this._def.items.length)return q(n,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),se;!this._def.rest&&n.data.length>this._def.items.length&&(q(n,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((a,l)=>{const o=this._def.items[l]||this._def.rest;return o?o._parse(new pt(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>ze.mergeArray(t,a)):ze.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new mt({...this._def,rest:e})}}mt.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mt({items:r,typeName:J.ZodTuple,rest:null,...ae(e)})};class Qt extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.object)return q(n,{code:Z.invalid_type,expected:V.object,received:n.parsedType}),se;const s=[],i=this._def.keyType,a=this._def.valueType;for(const l in n.data)s.push({key:i._parse(new pt(n,l,n.path,l)),value:a._parse(new pt(n,n.data[l],n.path,l))});return n.common.async?ze.mergeObjectAsync(t,s):ze.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof ue?new Qt({keyType:e,valueType:t,typeName:J.ZodRecord,...ae(n)}):new Qt({keyType:it.create(),valueType:e,typeName:J.ZodRecord,...ae(t)})}}class xn extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.map)return q(n,{code:Z.invalid_type,expected:V.map,received:n.parsedType}),se;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([l,o],c)=>({key:s._parse(new pt(n,l,n.path,[c,"key"])),value:i._parse(new pt(n,o,n.path,[c,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const o of a){const c=await o.key,u=await o.value;if(c.status==="aborted"||u.status==="aborted")return se;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(c.value,u.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const o of a){const c=o.key,u=o.value;if(c.status==="aborted"||u.status==="aborted")return se;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(c.value,u.value)}return{status:t.value,value:l}}}}xn.create=(r,e,t)=>new xn({valueType:e,keyType:r,typeName:J.ZodMap,...ae(t)});class Ht extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.set)return q(n,{code:Z.invalid_type,expected:V.set,received:n.parsedType}),se;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(q(n,{code:Z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(q(n,{code:Z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function a(o){const c=new Set;for(const u of o){if(u.status==="aborted")return se;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const l=[...n.data.values()].map((o,c)=>i._parse(new pt(n,o,n.path,c)));return n.common.async?Promise.all(l).then(o=>a(o)):a(l)}min(e,t){return new Ht({...this._def,minSize:{value:e,message:G.toString(t)}})}max(e,t){return new Ht({...this._def,maxSize:{value:e,message:G.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ht.create=(r,e)=>new Ht({valueType:r,minSize:null,maxSize:null,typeName:J.ZodSet,...ae(e)});class Ft extends ue{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==V.function)return q(t,{code:Z.invalid_type,expected:V.function,received:t.parsedType}),se;function n(l,o){return bn({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_n(),qt].filter(c=>!!c),issueData:{code:Z.invalid_arguments,argumentsError:o}})}function s(l,o){return bn({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_n(),qt].filter(c=>!!c),issueData:{code:Z.invalid_return_type,returnTypeError:o}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Vt){const l=this;return Ve(async function(...o){const c=new at([]),u=await l._def.args.parseAsync(o,i).catch(_=>{throw c.addIssue(n(o,_)),c}),f=await Reflect.apply(a,this,u);return await l._def.returns._def.type.parseAsync(f,i).catch(_=>{throw c.addIssue(s(f,_)),c})})}else{const l=this;return Ve(function(...o){const c=l._def.args.safeParse(o,i);if(!c.success)throw new at([n(o,c.error)]);const u=Reflect.apply(a,this,c.data),f=l._def.returns.safeParse(u,i);if(!f.success)throw new at([s(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ft({...this._def,args:mt.create(e).rest(St.create())})}returns(e){return new Ft({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Ft({args:e||mt.create([]).rest(St.create()),returns:t||St.create(),typeName:J.ZodFunction,...ae(n)})}}class en extends ue{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}en.create=(r,e)=>new en({getter:r,typeName:J.ZodLazy,...ae(e)});class tn extends ue{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return q(t,{received:t.data,code:Z.invalid_literal,expected:this._def.value}),se}return{status:"valid",value:e.data}}get value(){return this._def.value}}tn.create=(r,e)=>new tn({value:r,typeName:J.ZodLiteral,...ae(e)});function Mr(r,e){return new $t({values:r,typeName:J.ZodEnum,...ae(e)})}class $t extends ue{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return q(t,{expected:ge.joinValues(n),received:t.parsedType,code:Z.invalid_type}),se}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),n=this._def.values;return q(t,{received:t.data,code:Z.invalid_enum_value,options:n}),se}return Ve(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return $t.create(e)}exclude(e){return $t.create(this.options.filter(t=>!e.includes(t)))}}$t.create=Mr;class nn extends ue{_parse(e){const t=ge.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==V.string&&n.parsedType!==V.number){const s=ge.objectValues(t);return q(n,{expected:ge.joinValues(s),received:n.parsedType,code:Z.invalid_type}),se}if(t.indexOf(e.data)===-1){const s=ge.objectValues(t);return q(n,{received:n.data,code:Z.invalid_enum_value,options:s}),se}return Ve(e.data)}get enum(){return this._def.values}}nn.create=(r,e)=>new nn({values:r,typeName:J.ZodNativeEnum,...ae(e)});class Vt extends ue{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==V.promise&&t.common.async===!1)return q(t,{code:Z.invalid_type,expected:V.promise,received:t.parsedType}),se;const n=t.parsedType===V.promise?t.data:Promise.resolve(t.data);return Ve(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Vt.create=(r,e)=>new Vt({type:r,typeName:J.ZodPromise,...ae(e)});class ot extends ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{q(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(a).then(l=>this._def.schema._parseAsync({data:l,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}if(s.type==="refinement"){const a=l=>{const o=s.refinement(l,i);if(n.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?se:(l.status==="dirty"&&t.dirty(),a(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?se:(l.status==="dirty"&&t.dirty(),a(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Yt(a))return a;const l=s.transform(a.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Yt(a)?Promise.resolve(s.transform(a.value,i)).then(l=>({status:t.value,value:l})):a);ge.assertNever(s)}}ot.create=(r,e,t)=>new ot({schema:r,typeName:J.ZodEffects,effect:e,...ae(t)});ot.createWithPreprocess=(r,e,t)=>new ot({schema:e,effect:{type:"preprocess",transform:r},typeName:J.ZodEffects,...ae(t)});class yt extends ue{_parse(e){return this._getType(e)===V.undefined?Ve(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yt.create=(r,e)=>new yt({innerType:r,typeName:J.ZodOptional,...ae(e)});class Ot extends ue{_parse(e){return this._getType(e)===V.null?Ve(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ot.create=(r,e)=>new Ot({innerType:r,typeName:J.ZodNullable,...ae(e)});class rn extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===V.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}rn.create=(r,e)=>new rn({innerType:r,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ae(e)});class wn extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yn(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new at(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new at(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}wn.create=(r,e)=>new wn({innerType:r,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ae(e)});class En extends ue{_parse(e){if(this._getType(e)!==V.nan){const n=this._getOrReturnCtx(e);return q(n,{code:Z.invalid_type,expected:V.nan,received:n.parsedType}),se}return{status:"valid",value:e.data}}}En.create=r=>new En({typeName:J.ZodNaN,...ae(r)});const bs=Symbol("zod_brand");class Fr extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class on extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?se:i.status==="dirty"?(t.dirty(),Ar(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?se:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new on({in:e,out:t,typeName:J.ZodPipeline})}}class Cn extends ue{_parse(e){const t=this._def.innerType._parse(e);return Yt(t)&&(t.value=Object.freeze(t.value)),t}}Cn.create=(r,e)=>new Cn({innerType:r,typeName:J.ZodReadonly,...ae(e)});const zr=(r,e={},t)=>r?zt.create().superRefine((n,s)=>{var i,a;if(!r(n)){const l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,o=(a=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,c=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...c,fatal:o})}}):zt.create(),ys={object:$e.lazycreate};var J;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(J||(J={}));const vs=(r,e={message:`Input not instance of ${r.name}`})=>zr(t=>t instanceof r,e),Vr=it.create,Ur=Ct.create,ks=En.create,xs=It.create,qr=Wt.create,ws=Dt.create,Es=vn.create,Cs=Gt.create,Is=Xt.create,$s=zt.create,Ls=St.create,Rs=vt.create,Ts=kn.create,Ps=lt.create,Ns=$e.create,Ss=$e.strictCreate,Bs=Jt.create,Ds=$n.create,Hs=Kt.create,Os=mt.create,Zs=Qt.create,js=xn.create,As=Ht.create,Ms=Ft.create,Fs=en.create,zs=tn.create,Vs=$t.create,Us=nn.create,qs=Vt.create,Wn=ot.create,Ys=yt.create,Ws=Ot.create,Gs=ot.createWithPreprocess,Xs=on.create,Js=()=>Vr().optional(),Ks=()=>Ur().optional(),Qs=()=>qr().optional(),ei={string:r=>it.create({...r,coerce:!0}),number:r=>Ct.create({...r,coerce:!0}),boolean:r=>Wt.create({...r,coerce:!0}),bigint:r=>It.create({...r,coerce:!0}),date:r=>Dt.create({...r,coerce:!0})},ti=se;var de=Object.freeze({__proto__:null,defaultErrorMap:qt,setErrorMap:is,getErrorMap:_n,makeIssue:bn,EMPTY_PATH:as,addIssueToContext:q,ParseStatus:ze,INVALID:se,DIRTY:Ar,OK:Ve,isAborted:On,isDirty:Zn,isValid:Yt,isAsync:yn,get util(){return ge},get objectUtil(){return Hn},ZodParsedType:V,getParsedType:Et,ZodType:ue,ZodString:it,ZodNumber:Ct,ZodBigInt:It,ZodBoolean:Wt,ZodDate:Dt,ZodSymbol:vn,ZodUndefined:Gt,ZodNull:Xt,ZodAny:zt,ZodUnknown:St,ZodNever:vt,ZodVoid:kn,ZodArray:lt,ZodObject:$e,ZodUnion:Jt,ZodDiscriminatedUnion:$n,ZodIntersection:Kt,ZodTuple:mt,ZodRecord:Qt,ZodMap:xn,ZodSet:Ht,ZodFunction:Ft,ZodLazy:en,ZodLiteral:tn,ZodEnum:$t,ZodNativeEnum:nn,ZodPromise:Vt,ZodEffects:ot,ZodTransformer:ot,ZodOptional:yt,ZodNullable:Ot,ZodDefault:rn,ZodCatch:wn,ZodNaN:En,BRAND:bs,ZodBranded:Fr,ZodPipeline:on,ZodReadonly:Cn,custom:zr,Schema:ue,ZodSchema:ue,late:ys,get ZodFirstPartyTypeKind(){return J},coerce:ei,any:$s,array:Ps,bigint:xs,boolean:qr,date:ws,discriminatedUnion:Ds,effect:Wn,enum:Vs,function:Ms,instanceof:vs,intersection:Hs,lazy:Fs,literal:zs,map:js,nan:ks,nativeEnum:Us,never:Rs,null:Is,nullable:Ws,number:Ur,object:Ns,oboolean:Qs,onumber:Ks,optional:Ys,ostring:Js,pipeline:Xs,preprocess:Gs,promise:qs,record:Zs,set:As,strictObject:Ss,string:Vr,symbol:Es,transformer:Wn,tuple:Os,undefined:Cs,union:Bs,unknown:Ls,void:Ts,NEVER:ti,ZodIssueCode:Z,quotelessJson:ss,ZodError:at});const ni=de.object({label:de.string(),x:de.number(),y:de.number()}),Yr=de.record(de.coerce.number(),de.object({outgoingLabel:de.number(),nextHop:de.string()})),ri=de.record(de.string(),de.object({label:de.number(),nextHop:de.string()})),si=de.record(de.number()),ii=de.object({address:de.string(),firstHop:si.or(de.object({})),type:de.literal("CE")}),ai=de.object({LFIB:Yr.or(de.object({})),FIB:ri.or(de.object({})),type:de.literal("LER")}),li=de.object({LFIB:Yr.or(de.object({})),type:de.literal("LSR")}),oi=de.object({id:de.number(),node:ni}).and(de.union([ii,ai,li])),ui=de.object({id:de.string(),source:de.number(),target:de.number(),bandwidth:de.number()}),ci=de.object({routers:de.array(oi),links:de.array(ui)});function Sn(r){W.clear();const e=ci.safeParse(r);if(!e.success)return console.warn("Failed to load network data",e.error),!1;let t=0;for(const n of e.data.routers)switch(t=Math.max(t,n.id),n.type){case"LER":{const s=new Qe(n.id,n.node);Object.entries(n.LFIB).forEach(([i,a])=>{s.LFIB.receiveEntry(parseInt(i),a.outgoingLabel,a.nextHop)}),Object.entries(n.FIB).forEach(([i,a])=>{s.FIB.receiveEntry(i,a.label,a.nextHop)}),W.addRouter(s);break}case"LSR":{const s=new Bt(n.id,n.node);Object.entries(n.LFIB).forEach(([i,a])=>{s.LFIB.receiveEntry(parseInt(i),a.outgoingLabel,a.nextHop)}),W.addRouter(s);break}case"CE":{const s=new Ge(n.id,n.node);Object.entries(n.firstHop).forEach(([i,a])=>{s.receiveEntry(i,a)}),W.addRouter(s);break}}W.setRouterCount(t+1);for(const n of e.data.links){const s=W.getRouter(n.source),i=W.getRouter(n.target);s&&i&&W.addLink({source:s,target:i,bandwidth:n.bandwidth})}return!0}function di(r){let e,t,n,s;return{c(){e=w("button"),t=_e(r[0]),this.h()},l(i){e=E(i,"BUTTON",{style:!0,class:!0});var a=A(e);t=be(a,r[0]),a.forEach(d),this.h()},h(){k(e,"style",r[2]),k(e,"class","svelte-13ziii4")},m(i,a){v(i,e,a),I(e,t),n||(s=me(e,"click",function(){Nr(r[1])&&r[1].apply(this,arguments)}),n=!0)},p(i,[a]){r=i,a&1&&We(t,r[0]),a&4&&k(e,"style",r[2])},i:Se,o:Se,d(i){i&&d(e),n=!1,s()}}}function fi(r,e,t){let{text:n}=e,{callback:s=()=>{}}=e,{style:i=void 0}=e;return r.$$set=a=>{"text"in a&&t(0,n=a.text),"callback"in a&&t(1,s=a.callback),"style"in a&&t(2,i=a.style)},[n,s,i]}class et extends Re{constructor(e){super(),Te(this,e,fi,di,Le,{text:0,callback:1,style:2})}}function hi(r){let e,t,n,s;const i=r[2].default,a=Sr(i,r,r[1],null);return{c(){e=w("dialog"),a&&a.c(),this.h()},l(l){e=E(l,"DIALOG",{class:!0});var o=A(e);a&&a.l(o),o.forEach(d),this.h()},h(){k(e,"class","svelte-p5wejv")},m(l,o){v(l,e,o),a&&a.m(e,null),r[4](e),t=!0,n||(s=me(e,"close",r[3]),n=!0)},p(l,[o]){a&&a.p&&(!t||o&2)&&Br(a,i,l,l[1],t?Hr(i,l[1],o,null):Dr(l[1]),null)},i(l){t||(B(a,l),t=!0)},o(l){j(a,l),t=!1},d(l){l&&d(e),a&&a.d(l),r[4](null),n=!1,s()}}}function pi(r,e,t){let{$$slots:n={},$$scope:s}=e,{dialog:i}=e;function a(o){Or.call(this,r,o)}function l(o){je[o?"unshift":"push"](()=>{i=o,t(0,i)})}return r.$$set=o=>{"dialog"in o&&t(0,i=o.dialog),"$$scope"in o&&t(1,s=o.$$scope)},[i,s,n,a,l]}class un extends Re{constructor(e){super(),Te(this,e,pi,hi,Le,{dialog:0})}}const mi=[{id:1,node:{label:"CE 1",x:-350,y:-25},address:"CE-IP-1",firstHop:{"CE-IP-5":2,"CE-IP-6":2},type:"CE"},{id:2,node:{label:"LER 2",x:-200,y:-25},FIB:{"CE-IP-5":{label:306030,nextHop:"3"},"CE-IP-6":{label:61379,nextHop:"3"}},LFIB:{},type:"LER"},{id:3,node:{label:"LSR 3",x:-100,y:-25},LFIB:{61379:{outgoingLabel:974214,nextHop:"4"},306030:{outgoingLabel:349733,nextHop:"4"}},type:"LSR"},{id:4,node:{label:"LER 4",x:0,y:-25},FIB:{},LFIB:{349733:{outgoingLabel:-1,nextHop:"CE-IP-5"},974214:{outgoingLabel:-1,nextHop:"CE-IP-6"}},type:"LER"},{id:5,node:{label:"CE 5",x:125,y:-100},address:"CE-IP-5",firstHop:{},type:"CE"},{id:6,node:{label:"CE 6",x:125,y:50},address:"CE-IP-6",firstHop:{},type:"CE"}],gi=[{bandwidth:0,id:"1-2",source:1,target:2},{bandwidth:0,id:"2-3",source:2,target:3},{bandwidth:0,id:"3-4",source:3,target:4},{bandwidth:0,id:"4-5",source:4,target:5},{bandwidth:0,id:"4-6",source:4,target:6}],_i={routers:mi,links:gi},bi=[{id:1,node:{label:"LSR 1",x:45,y:-189},LFIB:{510069:{outgoingLabel:323562,nextHop:"4"},681382:{outgoingLabel:323540,nextHop:"4"}},type:"LSR"},{id:2,node:{label:"LSR 2",x:-100,y:149},LFIB:{27503:{outgoingLabel:1037790,nextHop:"5"},98952:{outgoingLabel:326833,nextHop:"5"},272693:{outgoingLabel:971198,nextHop:"5"},470359:{outgoingLabel:546541,nextHop:"3"},773817:{outgoingLabel:258109,nextHop:"9"}},type:"LSR"},{id:3,node:{label:"LSR 3",x:-170,y:-60},LFIB:{546541:{outgoingLabel:54803,nextHop:"6"},605492:{outgoingLabel:894316,nextHop:"6"},906528:{outgoingLabel:714735,nextHop:"6"}},type:"LSR"},{id:4,node:{label:"LSR 4",x:246,y:-60},LFIB:{206524:{outgoingLabel:916756,nextHop:"15"},323540:{outgoingLabel:900200,nextHop:"15"},323562:{outgoingLabel:974115,nextHop:"5"},445570:{outgoingLabel:207845,nextHop:"14"},848070:{outgoingLabel:807284,nextHop:"15"}},type:"LSR"},{id:5,node:{label:"LSR 5",x:170,y:156},LFIB:{149417:{outgoingLabel:773817,nextHop:"2"},326833:{outgoingLabel:321563,nextHop:"13"},420034:{outgoingLabel:848070,nextHop:"4"},495820:{outgoingLabel:605492,nextHop:"3"},655741:{outgoingLabel:445570,nextHop:"4"},971198:{outgoingLabel:956025,nextHop:"12"},974115:{outgoingLabel:474381,nextHop:"12"},1028802:{outgoingLabel:476950,nextHop:"13"},1037790:{outgoingLabel:206524,nextHop:"4"}},type:"LSR"},{id:6,node:{label:"LER 6",x:-289,y:-78},FIB:{},LFIB:{54803:{outgoingLabel:-1,nextHop:"CE-IP-20"},714735:{outgoingLabel:-1,nextHop:"CE-IP-21"},894316:{outgoingLabel:-1,nextHop:"CE-IP-21"}},type:"LER"},{id:7,node:{label:"LSR 7",x:-58,y:-366},LFIB:{495501:{outgoingLabel:681382,nextHop:"1"},842839:{outgoingLabel:906528,nextHop:"3"},1029149:{outgoingLabel:510069,nextHop:"1"}},type:"LSR"},{id:8,node:{label:"LSR 8",x:140,y:-371},LFIB:{},type:"LSR"},{id:9,node:{label:"LSR 9",x:-127,y:300},LFIB:{258109:{outgoingLabel:1036116,nextHop:"11"},608972:{outgoingLabel:27503,nextHop:"2"},703550:{outgoingLabel:470359,nextHop:"2"},864775:{outgoingLabel:98952,nextHop:"2"}},type:"LSR"},{id:10,node:{label:"LER 10",x:-260,y:324},FIB:{"CE-IP-34":{label:272693,nextHop:"2"}},LFIB:{},type:"LER"},{id:11,node:{label:"LER 11",x:-310,y:223},FIB:{"CE-IP-26":{label:608972,nextHop:"9"},"CE-IP-20":{label:703550,nextHop:"9"},"CE-IP-30":{label:864775,nextHop:"9"}},LFIB:{1036116:{outgoingLabel:-1,nextHop:"CE-IP-24"}},type:"LER"},{id:12,node:{label:"LER 12",x:223,y:263},FIB:{"CE-IP-26":{label:420034,nextHop:"5"},"CE-IP-33":{label:1028802,nextHop:"5"},"CE-IP-24":{label:149417,nextHop:"5"}},LFIB:{474381:{outgoingLabel:-1,nextHop:"CE-IP-34"},956025:{outgoingLabel:-1,nextHop:"CE-IP-34"}},type:"LER"},{id:13,node:{label:"LER 13",x:455,y:271},FIB:{"CE-IP-29":{label:655741,nextHop:"5"},"CE-IP-21":{label:495820,nextHop:"5"}},LFIB:{321563:{outgoingLabel:-1,nextHop:"CE-IP-30"},476950:{outgoingLabel:-1,nextHop:"CE-IP-33"}},type:"LER"},{id:14,node:{label:"LER 14",x:340,y:-19},FIB:{},LFIB:{207845:{outgoingLabel:-1,nextHop:"CE-IP-29"}},type:"LER"},{id:15,node:{label:"LER 15",x:331,y:-99},FIB:{},LFIB:{807284:{outgoingLabel:-1,nextHop:"CE-IP-26"},900200:{outgoingLabel:-1,nextHop:"CE-IP-26"},916756:{outgoingLabel:-1,nextHop:"CE-IP-26"}},type:"LER"},{id:16,node:{label:"LER 16",x:35,y:-484},FIB:{"CE-IP-21":{label:842839,nextHop:"7"},"CE-IP-26":{label:495501,nextHop:"7"},"CE-IP-34":{label:1029149,nextHop:"7"}},LFIB:{},type:"LER"},{id:17,node:{label:"CE 17",x:-52,y:-600},address:"CE-IP-17",firstHop:{"CE-IP-21":16},type:"CE"},{id:18,node:{label:"CE 18",x:34,y:-644},address:"CE-IP-18",firstHop:{"CE-IP-26":16},type:"CE"},{id:19,node:{label:"CE 19",x:122,y:-600},address:"CE-IP-19",firstHop:{"CE-IP-34":16},type:"CE"},{id:20,node:{label:"CE 20",x:-426,y:-47},address:"CE-IP-20",firstHop:{},type:"CE"},{id:21,node:{label:"CE 21",x:-427,y:-134},address:"CE-IP-21",firstHop:{},type:"CE"},{id:22,node:{label:"CE 22",x:-395,y:131},address:"CE-IP-22",firstHop:{"CE-IP-20":11},type:"CE"},{id:23,node:{label:"CE 23",x:-421,y:206},address:"CE-IP-23",firstHop:{"CE-IP-26":11},type:"CE"},{id:24,node:{label:"CE 24",x:-404,y:297},address:"CE-IP-24",firstHop:{"CE-IP-30":11},type:"CE"},{id:25,node:{label:"CE 25",x:-404,y:375},address:"CE-IP-25",firstHop:{"CE-IP-34":10},type:"CE"},{id:26,node:{label:"CE 26",x:466,y:-202},address:"CE-IP-26",firstHop:{},type:"CE"},{id:27,node:{label:"CE 27",x:468,y:-104},address:"CE-IP-27",firstHop:{},type:"CE"},{id:28,node:{label:"CE 28",x:467,y:2},address:"CE-IP-28",firstHop:{},type:"CE"},{id:29,node:{label:"CE 29",x:463,y:90},address:"CE-IP-29",firstHop:{},type:"CE"},{id:30,node:{label:"CE 30",x:618,y:195},address:"CE-IP-30",firstHop:{"CE-IP-29":13,"CE-IP-21":13},type:"CE"},{id:31,node:{label:"CE 31",x:643,y:273},address:"CE-IP-31",firstHop:{},type:"CE"},{id:32,node:{label:"CE 32",x:623,y:355},address:"CE-IP-32",firstHop:{},type:"CE"},{id:33,node:{label:"CE 33",x:540,y:400},address:"CE-IP-33",firstHop:{},type:"CE"},{id:34,node:{label:"CE 34",x:244,y:354},address:"CE-IP-34",firstHop:{"CE-IP-26":12,"CE-IP-33":12,"CE-IP-24":12},type:"CE"}],yi=[{bandwidth:0,id:"3-1",source:3,target:1},{bandwidth:0,id:"1-4",source:1,target:4},{bandwidth:0,id:"4-5",source:4,target:5},{bandwidth:0,id:"5-2",source:5,target:2},{bandwidth:0,id:"2-3",source:2,target:3},{bandwidth:0,id:"3-5",source:3,target:5},{bandwidth:0,id:"7-1",source:7,target:1},{bandwidth:0,id:"8-1",source:8,target:1},{bandwidth:0,id:"17-16",source:17,target:16},{bandwidth:0,id:"18-16",source:18,target:16},{bandwidth:0,id:"19-16",source:19,target:16},{bandwidth:0,id:"16-7",source:16,target:7},{bandwidth:0,id:"16-8",source:16,target:8},{bandwidth:0,id:"7-3",source:7,target:3},{bandwidth:0,id:"25-10",source:25,target:10},{bandwidth:0,id:"10-9",source:10,target:9},{bandwidth:0,id:"9-2",source:9,target:2},{bandwidth:0,id:"10-2",source:10,target:2},{bandwidth:0,id:"11-9",source:11,target:9},{bandwidth:0,id:"22-11",source:22,target:11},{bandwidth:0,id:"23-11",source:23,target:11},{bandwidth:0,id:"24-11",source:24,target:11},{bandwidth:0,id:"20-6",source:20,target:6},{bandwidth:0,id:"6-3",source:6,target:3},{bandwidth:0,id:"21-6",source:21,target:6},{bandwidth:0,id:"4-15",source:4,target:15},{bandwidth:0,id:"4-14",source:4,target:14},{bandwidth:0,id:"5-13",source:5,target:13},{bandwidth:0,id:"5-12",source:5,target:12},{bandwidth:0,id:"15-27",source:15,target:27},{bandwidth:0,id:"15-26",source:15,target:26},{bandwidth:0,id:"14-28",source:14,target:28},{bandwidth:0,id:"14-29",source:14,target:29},{bandwidth:0,id:"33-13",source:33,target:13},{bandwidth:0,id:"32-13",source:32,target:13},{bandwidth:0,id:"13-31",source:13,target:31},{bandwidth:0,id:"13-30",source:13,target:30},{bandwidth:0,id:"34-12",source:34,target:12}],vi={routers:bi,links:yi};function Gn(r,e,t){const n=r.slice();return n[3]=e[t],n}function Xn(r){let e,t;const n=[r[3]];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new et({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&2?an(n,[ln(i[3])]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function ki(r){let e,t="Welcome",n,s,i="This tool is designed to mimic the basics of MPLS",a,l,o="Choose a network:",c,u,f,h=Ee(r[1]),_=[];for(let g=0;g<h.length;g+=1)_[g]=Xn(Gn(r,h,g));const y=g=>j(_[g],1,1,()=>{_[g]=null});return{c(){e=w("h1"),e.textContent=t,n=T(),s=w("p"),s.textContent=i,a=T(),l=w("p"),l.textContent=o,c=T(),u=w("div");for(let g=0;g<_.length;g+=1)_[g].c();this.h()},l(g){e=E(g,"H1",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-4p3d56"&&(e.textContent=t),n=P(g),s=E(g,"P",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1helk6g"&&(s.textContent=i),a=P(g),l=E(g,"P",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1vyl31e"&&(l.textContent=o),c=P(g),u=E(g,"DIV",{class:!0});var b=A(u);for(let m=0;m<_.length;m+=1)_[m].l(b);b.forEach(d),this.h()},h(){k(e,"class","svelte-1os0cpz"),k(s,"class","svelte-1os0cpz"),k(l,"class","svelte-1os0cpz"),k(u,"class","buttons svelte-1os0cpz")},m(g,b){v(g,e,b),v(g,n,b),v(g,s,b),v(g,a,b),v(g,l,b),v(g,c,b),v(g,u,b);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(u,null);f=!0},p(g,b){if(b&2){h=Ee(g[1]);let m;for(m=0;m<h.length;m+=1){const p=Gn(g,h,m);_[m]?(_[m].p(p,b),B(_[m],1)):(_[m]=Xn(p),_[m].c(),B(_[m],1),_[m].m(u,null))}for(He(),m=h.length;m<_.length;m+=1)y(m);Oe()}},i(g){if(!f){for(let b=0;b<h.length;b+=1)B(_[b]);f=!0}},o(g){_=_.filter(Boolean);for(let b=0;b<_.length;b+=1)j(_[b]);f=!1},d(g){g&&(d(e),d(n),d(s),d(a),d(l),d(c),d(u)),ht(_,g)}}}function xi(r){let e,t,n;function s(a){r[2](a)}let i={$$slots:{default:[ki]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.dialog=r[0]),e=new un({props:i}),je.push(()=>Ye(e,"dialog",s)),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,l){ne(e,a,l),n=!0},p(a,[l]){const o={};l&66&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.dialog=a[0],qe(()=>t=!1)),e.$set(o)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){j(e.$$.fragment,a),n=!1},d(a){re(e,a)}}}function wi(r,e,t){let n,s;An(()=>{t(0,s.inert=!0,s),s.showModal(),t(0,s.inert=!1,s)});function i(a){s=a,t(0,s)}return r.$$.update=()=>{r.$$.dirty&1&&t(1,n=[{text:"Blank",callback:()=>{s.close()}},{text:"Small",callback:()=>{Sn(_i),s.close()}},{text:"Large",callback:()=>{Sn(vi),s.close()}},{text:"Import",callback:()=>{const a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=l=>{if(!(l.target instanceof HTMLInputElement)||l.target.files.length===0)return;const o=l.target.files[0],c=new FileReader;c.addEventListener("load",u=>{if(!u.target||typeof u.target.result!="string")return;Sn(JSON.parse(u.target.result))&&s.close()}),c.readAsText(o)},a.click()}}])},[s,n,i]}class Ei extends Re{constructor(e){super(),Te(this,e,wi,xi,Le,{})}}const Ci={placing:null},ct=In(Ci),Lt=In(!1),Jn=16,Ii=2**20-1;function Wr(r,e){const t=r[0];if(!(t instanceof Ge)){alert("The path does not start with a CE");return}const n=r[1];if(!(n instanceof Qe)){alert("The source CE is not directly connected to an LER");return}if(t.firstHop.set(e,n.id),n.FIB.get(e))return;const s=r.length-2,i=r[s];if(!(i instanceof Qe)){alert("Destination CE is not connected directly to a LER");return}let a=Kn(r[s]);i.LFIB.receiveEntry(a,-1,e);for(let l=r.length-2;l>0;l--){const o=r[l],c=r[l-1],u=a;a=Kn(o),c instanceof Qe?c.FIB.receiveEntry(e,u,o.id.toString()):c instanceof Bt&&c.LFIB.receiveEntry(a,u,o.id.toString())}}function $i(r,e){return r instanceof Bt||r instanceof Qe?r.LFIB.map.has(e):!1}function Kn(r){let e;do e=Math.floor(Math.random()*(Ii-Jn+1)+Jn);while($i(r,e));return e}function Li(r){let e,t,n,s;return{c(){e=w("button"),t=_e(r[0]),this.h()},l(i){e=E(i,"BUTTON",{class:!0});var a=A(e);t=be(a,r[0]),a.forEach(d),this.h()},h(){k(e,"class","svelte-ritw78")},m(i,a){v(i,e,a),I(e,t),n||(s=me(e,"click",function(){Nr(r[1])&&r[1].apply(this,arguments)}),n=!0)},p(i,[a]){r=i,a&1&&We(t,r[0])},i:Se,o:Se,d(i){i&&d(e),n=!1,s()}}}function Ri(r,e,t){let{text:n}=e,{callback:s}=e;return r.$$set=i=>{"text"in i&&t(0,n=i.text),"callback"in i&&t(1,s=i.callback)},[n,s]}class kt extends Re{constructor(e){super(),Te(this,e,Ri,Li,Le,{text:0,callback:1})}}function Qn(r,e,t){const n=r.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function er(r){let e,t,n,s,i,a,l,o,c,u,f,h,_,y,g,b,m,p;function $(...D){return r[5](r[9],...D)}function S(...D){return r[6](r[9],...D)}function N(){return r[7](r[9])}f=new kt({props:{text:"LDP",callback:N}});function H(){return r[8](r[9])}return y=new kt({props:{text:"-",callback:H}}),{c(){e=w("tr"),t=w("td"),n=w("input"),i=T(),a=w("td"),l=w("input"),c=T(),u=w("td"),ee(f.$$.fragment),h=T(),_=w("td"),ee(y.$$.fragment),g=T(),this.h()},l(D){e=E(D,"TR",{});var U=A(e);t=E(U,"TD",{});var X=A(t);n=E(X,"INPUT",{type:!0,placeholder:!0}),X.forEach(d),i=P(U),a=E(U,"TD",{});var O=A(a);l=E(O,"INPUT",{type:!0,placeholder:!0}),O.forEach(d),c=P(U),u=E(U,"TD",{title:!0});var x=A(u);te(f.$$.fragment,x),x.forEach(d),h=P(U),_=E(U,"TD",{});var F=A(_);te(y.$$.fragment,F),F.forEach(d),g=P(U),U.forEach(d),this.h()},h(){k(n,"type","text"),n.value=s=r[9],k(n,"placeholder","Address"),k(l,"type","text"),l.value=o=r[10],k(l,"placeholder","Link"),k(u,"title","Generates shortest path")},m(D,U){v(D,e,U),I(e,t),I(t,n),I(e,i),I(e,a),I(a,l),I(e,c),I(e,u),ne(f,u,null),I(e,h),I(e,_),ne(y,_,null),I(e,g),b=!0,m||(p=[me(n,"change",$),me(l,"change",S)],m=!0)},p(D,U){r=D,(!b||U&1&&s!==(s=r[9])&&n.value!==s)&&(n.value=s),(!b||U&1&&o!==(o=r[10])&&l.value!==o)&&(l.value=o);const X={};U&1&&(X.callback=N),f.$set(X);const O={};U&1&&(O.callback=H),y.$set(O)},i(D){b||(B(f.$$.fragment,D),B(y.$$.fragment,D),b=!0)},o(D){j(f.$$.fragment,D),j(y.$$.fragment,D),b=!1},d(D){D&&d(e),re(f),re(y),m=!1,Rt(p)}}}function Ti(r){let e,t,n,s="(?)",i,a,l,o,c,u="Destination",f,h,_="First hop",y,g,b,m="(?)",p,$,S,N,H,D,U,X,O=Ee([...r[0].firstHop]),x=[];for(let R=0;R<O.length;R+=1)x[R]=er(Qn(r,O,R));const F=R=>j(x[R],1,1,()=>{x[R]=null});return U=new kt({props:{text:"+",callback:r[1](r[0].addEmptyEntry)}}),{c(){e=w("p"),t=_e("Destinations: "),n=w("span"),n.textContent=s,i=T(),a=w("table"),l=w("thead"),o=w("tr"),c=w("th"),c.textContent=u,f=T(),h=w("th"),h.textContent=_,y=T(),g=w("th"),b=w("span"),b.textContent=m,p=T(),$=w("th"),S=T(),N=w("tbody");for(let R=0;R<x.length;R+=1)x[R].c();H=T(),D=w("div"),ee(U.$$.fragment),this.h()},l(R){e=E(R,"P",{title:!0});var M=A(e);t=be(M,"Destinations: "),n=E(M,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-1w7wt1o"&&(n.textContent=s),M.forEach(d),i=P(R),a=E(R,"TABLE",{});var pe=A(a);l=E(pe,"THEAD",{});var ie=A(l);o=E(ie,"TR",{});var he=A(o);c=E(he,"TH",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-1o2x94e"&&(c.textContent=u),f=P(he),h=E(he,"TH",{class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-131gjt9"&&(h.textContent=_),y=P(he),g=E(he,"TH",{class:!0});var we=A(g);b=E(we,"SPAN",{title:!0,"data-svelte-h":!0}),Q(b)!=="svelte-1vkgmco"&&(b.textContent=m),we.forEach(d),p=P(he),$=E(he,"TH",{class:!0}),A($).forEach(d),he.forEach(d),ie.forEach(d),S=P(pe),N=E(pe,"TBODY",{});var fe=A(N);for(let Ce=0;Ce<x.length;Ce+=1)x[Ce].l(fe);fe.forEach(d),pe.forEach(d),H=P(R),D=E(R,"DIV",{class:!0});var Ze=A(D);te(U.$$.fragment,Ze),Ze.forEach(d),this.h()},h(){tt(n,"color","grey"),k(e,"title","Maps IP addresses to IDs of the first LERs in the LSPs found by Dijkstra's"),k(c,"class","svelte-1d4gizi"),k(h,"class","svelte-1d4gizi"),k(b,"title","Generates shortest path"),tt(b,"color","grey"),k(g,"class","svelte-1d4gizi"),k($,"class","svelte-1d4gizi"),k(D,"class","svelte-1d4gizi")},m(R,M){v(R,e,M),I(e,t),I(e,n),v(R,i,M),v(R,a,M),I(a,l),I(l,o),I(o,c),I(o,f),I(o,h),I(o,y),I(o,g),I(g,b),I(o,p),I(o,$),I(a,S),I(a,N);for(let pe=0;pe<x.length;pe+=1)x[pe]&&x[pe].m(N,null);v(R,H,M),v(R,D,M),ne(U,D,null),X=!0},p(R,[M]){if(M&29){O=Ee([...R[0].firstHop]);let ie;for(ie=0;ie<O.length;ie+=1){const he=Qn(R,O,ie);x[ie]?(x[ie].p(he,M),B(x[ie],1)):(x[ie]=er(he),x[ie].c(),B(x[ie],1),x[ie].m(N,null))}for(He(),ie=O.length;ie<x.length;ie+=1)F(ie);Oe()}const pe={};M&1&&(pe.callback=R[1](R[0].addEmptyEntry)),U.$set(pe)},i(R){if(!X){for(let M=0;M<O.length;M+=1)B(x[M]);B(U.$$.fragment,R),X=!0}},o(R){x=x.filter(Boolean);for(let M=0;M<x.length;M+=1)j(x[M]);j(U.$$.fragment,R),X=!1},d(R){R&&(d(e),d(i),d(a),d(H),d(D)),ht(x,R),re(U)}}}function Pi(r,e,t){let{router:n}=e;function s(h){return()=>{h(),t(0,n)}}function i(h,_){if(!(h.target instanceof HTMLInputElement))return;const y=h.target.value.toUpperCase(),g=W.getCERouter(y);if(n.address===y){alert("Destination router cannot be the same as the source router.");return}if(!g){alert("Destination router not found."),h.target.value=_;return}n.updateAddress(_,y),t(0,n)}function a(h){const _=W.getCERouter(h);if(!_){alert("Destination router not found.");return}const y=Fn(n,_);if(y.length<=1){alert("No path found");return}Wr(y,h),t(0,n)}function l(h,_){if(!(h.target instanceof HTMLInputElement))return;const y=parseInt(h.target.value);n.firstHop.set(_,y)}const o=(h,_)=>{i(_,h)},c=(h,_)=>{l(_,h)},u=h=>{a(h)},f=h=>{n.firstHop.delete(h),t(0,n)};return r.$$set=h=>{"router"in h&&t(0,n=h.router)},[n,s,i,a,l,o,c,u,f]}class Ni extends Re{constructor(e){super(),Te(this,e,Pi,Ti,Le,{router:0})}}function tr(r,e,t){const n=r.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function nr(r){let e,t,n,s,i,a,l,o,c,u,f,h,_,y,g,b;function m(...N){return r[3](r[7],...N)}function p(){r[4].call(l,r[9],r[10])}function $(){r[5].call(u,r[9],r[10])}function S(){return r[6](r[7])}return h=new kt({props:{text:"-",callback:S}}),{c(){e=w("tr"),t=w("td"),n=w("input"),i=T(),a=w("td"),l=w("input"),o=T(),c=w("td"),u=w("input"),f=T(),ee(h.$$.fragment),_=T(),this.h()},l(N){e=E(N,"TR",{});var H=A(e);t=E(H,"TD",{});var D=A(t);n=E(D,"INPUT",{type:!0}),D.forEach(d),i=P(H),a=E(H,"TD",{});var U=A(a);l=E(U,"INPUT",{type:!0}),U.forEach(d),o=P(H),c=E(H,"TD",{});var X=A(c);u=E(X,"INPUT",{type:!0}),X.forEach(d),f=P(H),te(h.$$.fragment,H),_=P(H),H.forEach(d),this.h()},h(){k(n,"type","number"),n.value=s=r[7],k(l,"type","number"),k(u,"type","text")},m(N,H){v(N,e,H),I(e,t),I(t,n),I(e,i),I(e,a),I(a,l),De(l,r[8].outgoingLabel),I(e,o),I(e,c),I(c,u),De(u,r[8].nextHop),I(e,f),ne(h,e,null),I(e,_),y=!0,g||(b=[me(n,"change",m),me(l,"input",p),me(u,"input",$)],g=!0)},p(N,H){r=N,(!y||H&1&&s!==(s=r[7])&&n.value!==s)&&(n.value=s),H&1&&nt(l.value)!==r[8].outgoingLabel&&De(l,r[8].outgoingLabel),H&1&&u.value!==r[8].nextHop&&De(u,r[8].nextHop);const D={};H&1&&(D.callback=S),h.$set(D)},i(N){y||(B(h.$$.fragment,N),y=!0)},o(N){j(h.$$.fragment,N),y=!1},d(N){N&&d(e),re(h),g=!1,Rt(b)}}}function Si(r){let e,t,n,s="(?)",i,a,l,o="<tr><th>Incoming</th> <th>Outgoing</th> <th>Next hop</th> <th></th></tr>",c,u,f,h,_,y,g=Ee([...r[0].LFIB.map]),b=[];for(let p=0;p<g.length;p+=1)b[p]=nr(tr(r,g,p));const m=p=>j(b[p],1,1,()=>{b[p]=null});return _=new kt({props:{text:"+",callback:r[1](r[0].LFIB.addEmptyEntry)}}),{c(){e=w("p"),t=_e("LFIB: "),n=w("span"),n.textContent=s,i=T(),a=w("table"),l=w("thead"),l.innerHTML=o,c=T(),u=w("tbody");for(let p=0;p<b.length;p+=1)b[p].c();f=T(),h=w("div"),ee(_.$$.fragment),this.h()},l(p){e=E(p,"P",{title:!0});var $=A(e);t=be($,"LFIB: "),n=E($,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-1w7wt1o"&&(n.textContent=s),$.forEach(d),i=P(p),a=E(p,"TABLE",{});var S=A(a);l=E(S,"THEAD",{"data-svelte-h":!0}),Q(l)!=="svelte-1fy2y89"&&(l.innerHTML=o),c=P(S),u=E(S,"TBODY",{});var N=A(u);for(let D=0;D<b.length;D+=1)b[D].l(N);N.forEach(d),S.forEach(d),f=P(p),h=E(p,"DIV",{class:!0});var H=A(h);te(_.$$.fragment,H),H.forEach(d),this.h()},h(){tt(n,"color","grey"),k(e,"title","Maps incoming labels to outgoing labels and router IDs"),k(h,"class","svelte-f8qi58")},m(p,$){v(p,e,$),I(e,t),I(e,n),v(p,i,$),v(p,a,$),I(a,l),I(a,c),I(a,u);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(u,null);v(p,f,$),v(p,h,$),ne(_,h,null),y=!0},p(p,[$]){if($&5){g=Ee([...p[0].LFIB.map]);let N;for(N=0;N<g.length;N+=1){const H=tr(p,g,N);b[N]?(b[N].p(H,$),B(b[N],1)):(b[N]=nr(H),b[N].c(),B(b[N],1),b[N].m(u,null))}for(He(),N=g.length;N<b.length;N+=1)m(N);Oe()}const S={};$&1&&(S.callback=p[1](p[0].LFIB.addEmptyEntry)),_.$set(S)},i(p){if(!y){for(let $=0;$<g.length;$+=1)B(b[$]);B(_.$$.fragment,p),y=!0}},o(p){b=b.filter(Boolean);for(let $=0;$<b.length;$+=1)j(b[$]);j(_.$$.fragment,p),y=!1},d(p){p&&(d(e),d(i),d(a),d(f),d(h)),ht(b,p),re(_)}}}function Bi(r,e,t){let{router:n}=e;function s(u){return()=>{u(),t(0,n)}}function i(u,f){if(!(u.target instanceof HTMLInputElement))return;const h=parseInt(u.target.value);n.LFIB.updateLabel(f,h)}const a=(u,f)=>{i(f,u)};function l(u,f){u[f][1].outgoingLabel=nt(this.value),t(0,n)}function o(u,f){u[f][1].nextHop=this.value,t(0,n)}const c=u=>{n.LFIB.deleteEntry(u),t(0,n)};return r.$$set=u=>{"router"in u&&t(0,n=u.router)},[n,s,i,a,l,o,c]}class Di extends Re{constructor(e){super(),Te(this,e,Bi,Si,Le,{router:0})}}function rr(r,e,t){const n=r.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e,n[10]=t,n}function sr(r){let e,t,n,s,i,a,l,o,c,u,f,h,_,y,g,b;function m(...N){return r[3](r[7],...N)}function p(){r[4].call(l,r[9],r[10])}function $(){r[5].call(u,r[9],r[10])}function S(){return r[6](r[7])}return h=new kt({props:{text:"-",callback:S}}),{c(){e=w("tr"),t=w("td"),n=w("input"),i=T(),a=w("td"),l=w("input"),o=T(),c=w("td"),u=w("input"),f=T(),ee(h.$$.fragment),_=T(),this.h()},l(N){e=E(N,"TR",{});var H=A(e);t=E(H,"TD",{});var D=A(t);n=E(D,"INPUT",{type:!0}),D.forEach(d),i=P(H),a=E(H,"TD",{});var U=A(a);l=E(U,"INPUT",{type:!0}),U.forEach(d),o=P(H),c=E(H,"TD",{});var X=A(c);u=E(X,"INPUT",{type:!0}),X.forEach(d),f=P(H),te(h.$$.fragment,H),_=P(H),H.forEach(d),this.h()},h(){k(n,"type","text"),n.value=s=r[7],k(l,"type","number"),k(u,"type","text")},m(N,H){v(N,e,H),I(e,t),I(t,n),I(e,i),I(e,a),I(a,l),De(l,r[8].label),I(e,o),I(e,c),I(c,u),De(u,r[8].nextHop),I(e,f),ne(h,e,null),I(e,_),y=!0,g||(b=[me(n,"change",m),me(l,"input",p),me(u,"input",$)],g=!0)},p(N,H){r=N,(!y||H&1&&s!==(s=r[7])&&n.value!==s)&&(n.value=s),H&1&&nt(l.value)!==r[8].label&&De(l,r[8].label),H&1&&u.value!==r[8].nextHop&&De(u,r[8].nextHop);const D={};H&1&&(D.callback=S),h.$set(D)},i(N){y||(B(h.$$.fragment,N),y=!0)},o(N){j(h.$$.fragment,N),y=!1},d(N){N&&d(e),re(h),g=!1,Rt(b)}}}function Hi(r){let e,t,n,s="(?)",i,a,l,o="<tr><th>Address</th> <th>Label</th> <th>Next hop</th> <th></th></tr>",c,u,f,h,_,y,g=Ee([...r[0].FIB.map]),b=[];for(let p=0;p<g.length;p+=1)b[p]=sr(rr(r,g,p));const m=p=>j(b[p],1,1,()=>{b[p]=null});return _=new kt({props:{text:"+",callback:r[1](r[0].FIB.addEmptyEntry)}}),{c(){e=w("p"),t=_e("FIB: "),n=w("span"),n.textContent=s,i=T(),a=w("table"),l=w("thead"),l.innerHTML=o,c=T(),u=w("tbody");for(let p=0;p<b.length;p+=1)b[p].c();f=T(),h=w("div"),ee(_.$$.fragment),this.h()},l(p){e=E(p,"P",{title:!0});var $=A(e);t=be($,"FIB: "),n=E($,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-1w7wt1o"&&(n.textContent=s),$.forEach(d),i=P(p),a=E(p,"TABLE",{});var S=A(a);l=E(S,"THEAD",{"data-svelte-h":!0}),Q(l)!=="svelte-1qhs6t7"&&(l.innerHTML=o),c=P(S),u=E(S,"TBODY",{});var N=A(u);for(let D=0;D<b.length;D+=1)b[D].l(N);N.forEach(d),S.forEach(d),f=P(p),h=E(p,"DIV",{class:!0});var H=A(h);te(_.$$.fragment,H),H.forEach(d),this.h()},h(){tt(n,"color","grey"),k(e,"title","Maps IP addresses to labels and router IDs"),k(h,"class","svelte-f8qi58")},m(p,$){v(p,e,$),I(e,t),I(e,n),v(p,i,$),v(p,a,$),I(a,l),I(a,c),I(a,u);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(u,null);v(p,f,$),v(p,h,$),ne(_,h,null),y=!0},p(p,[$]){if($&5){g=Ee([...p[0].FIB.map]);let N;for(N=0;N<g.length;N+=1){const H=rr(p,g,N);b[N]?(b[N].p(H,$),B(b[N],1)):(b[N]=sr(H),b[N].c(),B(b[N],1),b[N].m(u,null))}for(He(),N=g.length;N<b.length;N+=1)m(N);Oe()}const S={};$&1&&(S.callback=p[1](p[0].FIB.addEmptyEntry)),_.$set(S)},i(p){if(!y){for(let $=0;$<g.length;$+=1)B(b[$]);B(_.$$.fragment,p),y=!0}},o(p){b=b.filter(Boolean);for(let $=0;$<b.length;$+=1)j(b[$]);j(_.$$.fragment,p),y=!1},d(p){p&&(d(e),d(i),d(a),d(f),d(h)),ht(b,p),re(_)}}}function Oi(r,e,t){let{router:n}=e;function s(u){return()=>{u(),t(0,n)}}function i(u,f){if(!(u.target instanceof HTMLInputElement))return;const h=u.target.value;n.FIB.updateAddress(f,h)}const a=(u,f)=>{i(f,u)};function l(u,f){u[f][1].label=nt(this.value),t(0,n)}function o(u,f){u[f][1].nextHop=this.value,t(0,n)}const c=u=>{n.FIB.deleteEntry(u),t(0,n)};return r.$$set=u=>{"router"in u&&t(0,n=u.router)},[n,s,i,a,l,o,c]}class Zi extends Re{constructor(e){super(),Te(this,e,Oi,Hi,Le,{router:0})}}function ji(r){let e,t="You somehow double-clicked on a router that can't be found?";return{c(){e=w("p"),e.textContent=t},l(n){e=E(n,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-1214eal"&&(e.textContent=t)},m(n,s){v(n,e,s)},p:Se,i:Se,o:Se,d(n){n&&d(e)}}}function Ai(r){let e,t,n,s,i,a,l,o,c,u,f,h,_,y,g=r[0].id+"",b,m,p,$,S,N,H,D,U,X,O=r[0]instanceof Ge&&ir(r),x=r[0]instanceof Qe&&ar(r),F=(r[0]instanceof Qe||r[0]instanceof Bt)&&lr(r);return H=new kt({props:{text:"Delete Router",callback:r[3]}}),{c(){e=w("div"),t=w("div"),n=w("label"),s=_e(`Label:
          `),i=w("input"),a=T(),l=w("label"),o=_e(`Position:
        `),c=w("input"),u=T(),f=w("input"),h=T(),_=w("p"),y=_e("ID: "),b=_e(g),m=T(),O&&O.c(),p=T(),x&&x.c(),$=T(),F&&F.c(),S=T(),N=w("div"),ee(H.$$.fragment),this.h()},l(R){e=E(R,"DIV",{});var M=A(e);t=E(M,"DIV",{});var pe=A(t);n=E(pe,"LABEL",{});var ie=A(n);s=be(ie,`Label:
          `),i=E(ie,"INPUT",{type:!0,class:!0}),ie.forEach(d),pe.forEach(d),a=P(M),l=E(M,"LABEL",{});var he=A(l);o=be(he,`Position:
        `),c=E(he,"INPUT",{type:!0,class:!0}),u=P(he),f=E(he,"INPUT",{type:!0,class:!0}),he.forEach(d),h=P(M),_=E(M,"P",{});var we=A(_);y=be(we,"ID: "),b=be(we,g),we.forEach(d),M.forEach(d),m=P(R),O&&O.l(R),p=P(R),x&&x.l(R),$=P(R),F&&F.l(R),S=P(R),N=E(R,"DIV",{class:!0});var fe=A(N);te(H.$$.fragment,fe),fe.forEach(d),this.h()},h(){k(i,"type","text"),k(i,"class","svelte-cihl2i"),k(c,"type","number"),c.disabled=r[2],k(c,"class","svelte-cihl2i"),k(f,"type","number"),f.disabled=r[2],k(f,"class","svelte-cihl2i"),k(N,"class","margin-top svelte-cihl2i")},m(R,M){v(R,e,M),I(e,t),I(t,n),I(n,s),I(n,i),De(i,r[0].node.label),I(e,a),I(e,l),I(l,o),I(l,c),De(c,r[0].node.x),I(l,u),I(l,f),De(f,r[0].node.y),I(e,h),I(e,_),I(_,y),I(_,b),v(R,m,M),O&&O.m(R,M),v(R,p,M),x&&x.m(R,M),v(R,$,M),F&&F.m(R,M),v(R,S,M),v(R,N,M),ne(H,N,null),D=!0,U||(X=[me(i,"input",r[4]),me(c,"input",r[5]),me(f,"input",r[6]),me(e,"input",r[7])],U=!0)},p(R,M){M&1&&i.value!==R[0].node.label&&De(i,R[0].node.label),(!D||M&4)&&(c.disabled=R[2]),M&1&&nt(c.value)!==R[0].node.x&&De(c,R[0].node.x),(!D||M&4)&&(f.disabled=R[2]),M&1&&nt(f.value)!==R[0].node.y&&De(f,R[0].node.y),(!D||M&1)&&g!==(g=R[0].id+"")&&We(b,g),R[0]instanceof Ge?O?(O.p(R,M),M&1&&B(O,1)):(O=ir(R),O.c(),B(O,1),O.m(p.parentNode,p)):O&&(He(),j(O,1,1,()=>{O=null}),Oe()),R[0]instanceof Qe?x?(x.p(R,M),M&1&&B(x,1)):(x=ar(R),x.c(),B(x,1),x.m($.parentNode,$)):x&&(He(),j(x,1,1,()=>{x=null}),Oe()),R[0]instanceof Qe||R[0]instanceof Bt?F?(F.p(R,M),M&1&&B(F,1)):(F=lr(R),F.c(),B(F,1),F.m(S.parentNode,S)):F&&(He(),j(F,1,1,()=>{F=null}),Oe())},i(R){D||(B(O),B(x),B(F),B(H.$$.fragment,R),D=!0)},o(R){j(O),j(x),j(F),j(H.$$.fragment,R),D=!1},d(R){R&&(d(e),d(m),d(p),d($),d(S),d(N)),O&&O.d(R),x&&x.d(R),F&&F.d(R),re(H),U=!1,Rt(X)}}}function ir(r){let e,t="Address:",n,s,i=r[0].address+"",a,l,o,c,u,f,h,_;function y(b){r[9](b)}let g={};return r[0]!==void 0&&(g.router=r[0]),c=new Ni({props:g}),je.push(()=>Ye(c,"router",y)),{c(){e=w("p"),e.textContent=t,n=T(),s=w("button"),a=_e(i),l=T(),o=w("div"),ee(c.$$.fragment),this.h()},l(b){e=E(b,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-18hoeeh"&&(e.textContent=t),n=P(b),s=E(b,"BUTTON",{class:!0});var m=A(s);a=be(m,i),m.forEach(d),l=P(b),o=E(b,"DIV",{class:!0});var p=A(o);te(c.$$.fragment,p),p.forEach(d),this.h()},h(){tt(e,"display","inline"),k(s,"class","svelte-cihl2i"),k(o,"class","margin-top svelte-cihl2i")},m(b,m){v(b,e,m),v(b,n,m),v(b,s,m),I(s,a),v(b,l,m),v(b,o,m),ne(c,o,null),f=!0,h||(_=me(s,"click",r[8]),h=!0)},p(b,m){(!f||m&1)&&i!==(i=b[0].address+"")&&We(a,i);const p={};!u&&m&1&&(u=!0,p.router=b[0],qe(()=>u=!1)),c.$set(p)},i(b){f||(B(c.$$.fragment,b),f=!0)},o(b){j(c.$$.fragment,b),f=!1},d(b){b&&(d(e),d(n),d(s),d(l),d(o)),re(c),h=!1,_()}}}function ar(r){let e,t,n,s;function i(l){r[10](l)}let a={};return r[0]!==void 0&&(a.router=r[0]),t=new Zi({props:a}),je.push(()=>Ye(t,"router",i)),{c(){e=w("div"),ee(t.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var o=A(e);te(t.$$.fragment,o),o.forEach(d),this.h()},h(){k(e,"class","margin-top svelte-cihl2i")},m(l,o){v(l,e,o),ne(t,e,null),s=!0},p(l,o){const c={};!n&&o&1&&(n=!0,c.router=l[0],qe(()=>n=!1)),t.$set(c)},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){j(t.$$.fragment,l),s=!1},d(l){l&&d(e),re(t)}}}function lr(r){let e,t,n,s;function i(l){r[11](l)}let a={};return r[0]!==void 0&&(a.router=r[0]),t=new Di({props:a}),je.push(()=>Ye(t,"router",i)),{c(){e=w("div"),ee(t.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var o=A(e);te(t.$$.fragment,o),o.forEach(d),this.h()},h(){k(e,"class","margin-top svelte-cihl2i")},m(l,o){v(l,e,o),ne(t,e,null),s=!0},p(l,o){const c={};!n&&o&1&&(n=!0,c.router=l[0],qe(()=>n=!1)),t.$set(c)},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){j(t.$$.fragment,l),s=!1},d(l){l&&d(e),re(t)}}}function Mi(r){let e,t,n,s;const i=[Ai,ji],a=[];function l(o,c){return o[0]?0:1}return e=l(r),t=a[e]=i[e](r),{c(){t.c(),n=Ie()},l(o){t.l(o),n=Ie()},m(o,c){a[e].m(o,c),v(o,n,c),s=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(He(),j(a[u],1,1,()=>{a[u]=null}),Oe(),t=a[e],t?t.p(o,c):(t=a[e]=i[e](o),t.c()),B(t,1),t.m(n.parentNode,n))},i(o){s||(B(t),s=!0)},o(o){j(t),s=!1},d(o){o&&d(n),a[e].d(o)}}}function Fi(r){let e,t,n;function s(a){r[12](a)}let i={$$slots:{default:[Mi]},$$scope:{ctx:r}};return r[1]!==void 0&&(i.dialog=r[1]),e=new un({props:i}),je.push(()=>Ye(e,"dialog",s)),e.$on("close",r[13]),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,l){ne(e,a,l),n=!0},p(a,[l]){const o={};l&16389&&(o.$$scope={dirty:l,ctx:a}),!t&&l&2&&(t=!0,o.dialog=a[1],qe(()=>t=!1)),e.$set(o)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){j(e.$$.fragment,a),n=!1},d(a){re(e,a)}}}function zi(r,e,t){let n;Fe(r,Lt,m=>t(2,n=m));let{router:s}=e,{dialog:i}=e;function a(){if(!n&&s){if(!confirm("Are you sure you want to delete this router?"))return;W.deleteRouter(s.id),i.close()}else alert("You can't delete a router while the network is locked.")}function l(){s.node.label=this.value,t(0,s)}function o(){s.node.x=nt(this.value),t(0,s)}function c(){s.node.y=nt(this.value),t(0,s)}const u=()=>{W.notify()},f=async()=>{s instanceof Ge&&await navigator.clipboard.writeText(s.address)};function h(m){s=m,t(0,s)}function _(m){s=m,t(0,s)}function y(m){s=m,t(0,s)}function g(m){i=m,t(1,i)}const b=()=>{W.notify()};return r.$$set=m=>{"router"in m&&t(0,s=m.router),"dialog"in m&&t(1,i=m.dialog)},[s,i,n,a,l,o,c,u,f,h,_,y,g,b]}class Vi extends Re{constructor(e){super(),Te(this,e,zi,Fi,Le,{router:0,dialog:1})}}function Ui(r){let e,t="You somehow double-clicked on a link that can't be found?";return{c(){e=w("p"),e.textContent=t},l(n){e=E(n,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-1tevm7q"&&(e.textContent=t)},m(n,s){v(n,e,s)},p:Se,i:Se,o:Se,d(n){n&&d(e)}}}function qi(r){let e,t=r[0].distance+"",n,s,i,a,l,o,c,u,f,h,_;return u=new kt({props:{text:"Delete Link",callback:r[3]}}),{c(){e=_e("Distance: "),n=_e(t),s=_e(` km
    `),i=w("label"),a=_e(`Bandwidth:
      `),l=w("input"),o=T(),c=w("div"),ee(u.$$.fragment),this.h()},l(y){e=be(y,"Distance: "),n=be(y,t),s=be(y,` km
    `),i=E(y,"LABEL",{class:!0});var g=A(i);a=be(g,`Bandwidth:
      `),l=E(g,"INPUT",{type:!0,class:!0}),g.forEach(d),o=P(y),c=E(y,"DIV",{class:!0});var b=A(c);te(u.$$.fragment,b),b.forEach(d),this.h()},h(){k(l,"type","number"),l.disabled=r[2],k(l,"class","svelte-11gx5jd"),k(i,"class","svelte-11gx5jd"),k(c,"class","svelte-11gx5jd")},m(y,g){v(y,e,g),v(y,n,g),v(y,s,g),v(y,i,g),I(i,a),I(i,l),De(l,r[0].bandwidth),v(y,o,g),v(y,c,g),ne(u,c,null),f=!0,h||(_=me(l,"input",r[4]),h=!0)},p(y,g){(!f||g&1)&&t!==(t=y[0].distance+"")&&We(n,t),(!f||g&4)&&(l.disabled=y[2]),g&1&&nt(l.value)!==y[0].bandwidth&&De(l,y[0].bandwidth)},i(y){f||(B(u.$$.fragment,y),f=!0)},o(y){j(u.$$.fragment,y),f=!1},d(y){y&&(d(e),d(n),d(s),d(i),d(o),d(c)),re(u),h=!1,_()}}}function Yi(r){let e,t,n,s;const i=[qi,Ui],a=[];function l(o,c){return o[0]?0:1}return e=l(r),t=a[e]=i[e](r),{c(){t.c(),n=Ie()},l(o){t.l(o),n=Ie()},m(o,c){a[e].m(o,c),v(o,n,c),s=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(He(),j(a[u],1,1,()=>{a[u]=null}),Oe(),t=a[e],t?t.p(o,c):(t=a[e]=i[e](o),t.c()),B(t,1),t.m(n.parentNode,n))},i(o){s||(B(t),s=!0)},o(o){j(t),s=!1},d(o){o&&d(n),a[e].d(o)}}}function Wi(r){let e,t,n;function s(a){r[5](a)}let i={$$slots:{default:[Yi]},$$scope:{ctx:r}};return r[1]!==void 0&&(i.dialog=r[1]),e=new un({props:i}),je.push(()=>Ye(e,"dialog",s)),e.$on("close",r[6]),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,l){ne(e,a,l),n=!0},p(a,[l]){const o={};l&133&&(o.$$scope={dirty:l,ctx:a}),!t&&l&2&&(t=!0,o.dialog=a[1],qe(()=>t=!1)),e.$set(o)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){j(e.$$.fragment,a),n=!1},d(a){re(e,a)}}}function Gi(r,e,t){let n;Fe(r,Lt,u=>t(2,n=u));let{link:s}=e,{dialog:i}=e;function a(){if(!n&&s){if(!confirm("Are you sure you want to delete this link?"))return;W.deleteLink(s.id),i.close()}else alert("You can't delete a link while the network is locked.")}function l(){s.bandwidth=nt(this.value),t(0,s)}function o(u){i=u,t(1,i)}const c=()=>{W.notify()};return r.$$set=u=>{"link"in u&&t(0,s=u.link),"dialog"in u&&t(1,i=u.dialog)},[s,i,n,a,l,o,c]}class Xi extends Re{constructor(e){super(),Te(this,e,Gi,Wi,Le,{link:0,dialog:1})}}function or(r){let e,t="Loading...";return{c(){e=w("p"),e.textContent=t,this.h()},l(n){e=E(n,"P",{style:!0,"data-svelte-h":!0}),Q(e)!=="svelte-qybri"&&(e.textContent=t),this.h()},h(){tt(e,"font-size","200px")},m(n,s){v(n,e,s)},d(n){n&&d(e)}}}function ur(r){let e,t,n,s,i,a;return{c(){e=dt("line"),this.h()},l(l){e=ft(l,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),A(e).forEach(d),this.h()},h(){k(e,"class","preview"),k(e,"x1",t=r[5].node.x),k(e,"y1",n=r[5].node.y),k(e,"x2",s=r[21](r[2].x)),k(e,"y2",i=r[22](r[2].y)),k(e,"stroke",a=r[7]===r[13].CONNECTING?"green":"blue")},m(l,o){v(l,e,o)},p(l,o){o[0]&32&&t!==(t=l[5].node.x)&&k(e,"x1",t),o[0]&32&&n!==(n=l[5].node.y)&&k(e,"y1",n),o[0]&4&&s!==(s=l[21](l[2].x))&&k(e,"x2",s),o[0]&4&&i!==(i=l[22](l[2].y))&&k(e,"y2",i),o[0]&128&&a!==(a=l[7]===l[13].CONNECTING?"green":"blue")&&k(e,"stroke",a)},d(l){l&&d(e)}}}function cr(r){let e,t,n,s,i,a=r[12].placing+"",l,o,c;return{c(){e=dt("image"),i=dt("text"),l=_e(a),this.h()},l(u){e=ft(u,"image",{x:!0,y:!0,width:!0,height:!0,href:!0}),A(e).forEach(d),i=ft(u,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var f=A(i);l=be(f,a),f.forEach(d),this.h()},h(){k(e,"x",t=r[21](r[3].x)-45/2),k(e,"y",n=r[22](r[3].y)-45/2),k(e,"width","45"),k(e,"height","45"),k(e,"href",s=`Router/${r[12].placing}.svg`),k(i,"x",o=r[21](r[3].x)),k(i,"y",c=r[22](r[3].y)),k(i,"dominant-baseline","central"),k(i,"font-size","smaller"),k(i,"class","svelte-huetud")},m(u,f){v(u,e,f),v(u,i,f),I(i,l)},p(u,f){f[0]&8&&t!==(t=u[21](u[3].x)-45/2)&&k(e,"x",t),f[0]&8&&n!==(n=u[22](u[3].y)-45/2)&&k(e,"y",n),f[0]&4096&&s!==(s=`Router/${u[12].placing}.svg`)&&k(e,"href",s),f[0]&4096&&a!==(a=u[12].placing+"")&&We(l,a),f[0]&8&&o!==(o=u[21](u[3].x))&&k(i,"x",o),f[0]&8&&c!==(c=u[22](u[3].y))&&k(i,"y",c)},d(u){u&&(d(e),d(i))}}}function Ji(r){let e,t,n,s,i,a,l,o,c,u,f,h,_,y,g,b=!r[10]&&or(),m=(!r[0]&&r[7]===r[13].CONNECTING||r[7]===r[13].ADDING_DESTINATION)&&r[5]&&ur(r);const p=r[25].default,$=Sr(p,r,r[24],null);let S=r[7]===r[13].ADDING_ROUTERS&&r[12].placing&&cr(r);function N(x){r[28](x)}function H(x){r[29](x)}let D={};r[5]!==void 0&&(D.router=r[5]),r[8]!==void 0&&(D.dialog=r[8]),a=new Vi({props:D}),je.push(()=>Ye(a,"router",N)),je.push(()=>Ye(a,"dialog",H));function U(x){r[30](x)}function X(x){r[31](x)}let O={};return r[6]!==void 0&&(O.link=r[6]),r[9]!==void 0&&(O.dialog=r[9]),u=new Xi({props:O}),je.push(()=>Ye(u,"link",U)),je.push(()=>Ye(u,"dialog",X)),{c(){b&&b.c(),e=T(),t=dt("svg"),m&&m.c(),n=Ie(),$&&$.c(),S&&S.c(),i=T(),ee(a.$$.fragment),c=T(),ee(u.$$.fragment),this.h()},l(x){b&&b.l(x),e=P(x),t=ft(x,"svg",{viewBox:!0,role:!0,tabindex:!0,class:!0});var F=A(t);m&&m.l(F),n=Ie(),$&&$.l(F),S&&S.l(F),F.forEach(d),i=P(x),te(a.$$.fragment,x),c=P(x),te(u.$$.fragment,x),this.h()},h(){k(t,"viewBox",s=`${r[1].x} ${r[1].y} ${r[1].width} ${r[1].height}`),k(t,"role","button"),k(t,"tabindex","-1"),k(t,"class","svelte-huetud"),tt(t,"cursor",r[11][r[7]])},m(x,F){b&&b.m(x,F),v(x,e,F),v(x,t,F),m&&m.m(t,null),I(t,n),$&&$.m(t,null),S&&S.m(t,null),r[27](t),v(x,i,F),ne(a,x,F),v(x,c,F),ne(u,x,F),_=!0,y||(g=[me(window,"keydown",r[15]),me(t,"pointerdown",r[16]),me(t,"pointermove",r[14]),me(t,"pointerup",r[17]),me(t,"wheel",r[18]),me(t,"dblclick",r[19]),me(t,"dragover",Jr(r[26])),me(t,"drop",r[20])],y=!0)},p(x,F){x[10]?b&&(b.d(1),b=null):b||(b=or(),b.c(),b.m(e.parentNode,e)),(!x[0]&&x[7]===x[13].CONNECTING||x[7]===x[13].ADDING_DESTINATION)&&x[5]?m?m.p(x,F):(m=ur(x),m.c(),m.m(t,n)):m&&(m.d(1),m=null),$&&$.p&&(!_||F[0]&16777216)&&Br($,p,x,x[24],_?Hr(p,x[24],F,null):Dr(x[24]),null),x[7]===x[13].ADDING_ROUTERS&&x[12].placing?S?S.p(x,F):(S=cr(x),S.c(),S.m(t,null)):S&&(S.d(1),S=null),(!_||F[0]&2&&s!==(s=`${x[1].x} ${x[1].y} ${x[1].width} ${x[1].height}`))&&k(t,"viewBox",s),F[0]&2176&&tt(t,"cursor",x[11][x[7]]);const R={};!l&&F[0]&32&&(l=!0,R.router=x[5],qe(()=>l=!1)),!o&&F[0]&256&&(o=!0,R.dialog=x[8],qe(()=>o=!1)),a.$set(R);const M={};!f&&F[0]&64&&(f=!0,M.link=x[6],qe(()=>f=!1)),!h&&F[0]&512&&(h=!0,M.dialog=x[9],qe(()=>h=!1)),u.$set(M)},i(x){_||(B($,x),B(a.$$.fragment,x),B(u.$$.fragment,x),_=!0)},o(x){j($,x),j(a.$$.fragment,x),j(u.$$.fragment,x),_=!1},d(x){x&&(d(e),d(t),d(i),d(c)),b&&b.d(x),m&&m.d(),$&&$.d(x),S&&S.d(),r[27](null),re(a,x),re(u,x),y=!1,Rt(g)}}}function Ki(r,e,t){let n,s,i,a;Fe(r,Lt,C=>t(0,s=C)),Fe(r,ct,C=>t(12,i=C)),Fe(r,Xe,C=>t(33,a=C));let{$$slots:l={},$$scope:o}=e;var c=(C=>(C[C.NONE=0]="NONE",C[C.DRAGGING=1]="DRAGGING",C[C.PANNING=2]="PANNING",C[C.CONNECTING=3]="CONNECTING",C[C.ADDING_DESTINATION=4]="ADDING_DESTINATION",C[C.ADDING_ROUTERS=5]="ADDING_ROUTERS",C))(c||{});const u={x:0,y:0,width:0,height:0,get scale(){return y?this.width/y.getBoundingClientRect().width:1}},f={x:0,y:0},h={x:0,y:0},_={x:0,y:0};let y=null,g=null,b=null,m=0,p,$,S=!1;ct.subscribe(C=>{C.placing&&["CE","LER","LSR"].includes(C.placing)?t(7,m=5):t(7,m=0)}),An(()=>{if(!y)return;new ResizeObserver(N).observe(y),requestAnimationFrame(()=>{y&&(t(1,u.x=y.getBoundingClientRect().width/-2,u),t(1,u.y=y.getBoundingClientRect().height/-2,u))}),t(10,S=!0)});function N(){if(!y)return;const C=u.scale||1;t(1,u.width=y.getBoundingClientRect().width*C,u),t(1,u.height=y.getBoundingClientRect().height*C,u)}function H(C){t(3,_.x=C.clientX,_),t(3,_.y=C.clientY,_)}function D(C){for(const le of document.querySelectorAll("dialog"))if(le.hasAttribute("open"))return;switch(C.code){case"Escape":st(ct,i.placing=null,i);break;case"Tab":if(p.open||$.open)return;C.preventDefault(),st(Lt,s=!s,s),st(ct,i.placing=null,i),W.clearPackets();break;case"Digit1":U("CE");break;case"Digit2":U("LER");break;case"Digit3":U("LSR");break;case"Space":C.preventDefault(),st(Xe,a.running=!a.running,a)}}function U(C){s||st(ct,i.placing=C,i)}function X(C){if(!(C.target instanceof Element))return;if(C.preventDefault(),m===5&&!s){switch(i.placing){case"CE":W.createCE(we(C.clientX),fe(C.clientY));break;case"LER":W.createLER(we(C.clientX),fe(C.clientY));break;case"LSR":W.createLSR(we(C.clientX),fe(C.clientY));break}C.shiftKey||st(ct,i.placing=null,i);return}y==null||y.addEventListener("pointermove",x),y==null||y.setPointerCapture(C.pointerId);const le=C.target.id;if(le){if(t(5,g=W.getRouter(parseInt(le))||null),!g)return;C.shiftKey?t(7,m=3):C.altKey&&g instanceof Ge?t(7,m=4):(h.x=g.node.x,h.y=g.node.y,t(7,m=1))}else t(7,m=2);t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f)}function O(C){if(C.target instanceof Element&&m!==5){C.preventDefault();e:if(g&&m===4){const le=document.elementFromPoint(C.clientX,C.clientY),ve=(le==null?void 0:le.tagName)==="image"?le.id:null,Pe=W.getRouter(parseInt(ve??""));if(!Pe||g===Pe)break e;if(!(Pe instanceof Ge)){alert("Destination must be a CE");break e}const Me=Fn(g,Pe);if(Me.length<=1){alert("No path found");break e}Wr(Me,Pe.address),W.notify()}t(7,m=0),t(5,g=null),y==null||y.releasePointerCapture(C.pointerId),y==null||y.removeEventListener("pointermove",x)}}function x(C){C.preventDefault();const le={x:(C.clientX-f.x)*u.scale,y:(C.clientY-f.y)*u.scale};if(!s&&m===1&&g)t(5,g.node.x=Math.round(h.x+le.x),g),t(5,g.node.y=Math.round(h.y+le.y),g),W.notify();else if(m===2)t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f),t(1,u.x-=le.x,u),t(1,u.y-=le.y,u);else if(m===4)t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f);else if(!s&&m===3){t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f);const ve=document.elementFromPoint(C.clientX,C.clientY);if(!ve)return;const Pe=W.getRouter(parseInt(ve.id));ve.tagName==="image"&&Pe&&g&&(W.addLink({source:g,target:Pe}),t(5,g=Pe))}}function F(C){C.preventDefault(),t(2,f.x=C.clientX,f),t(2,f.y=C.clientY,f);const le=C.deltaY>0?1.025:.975;R(le,f)}function R(C,le){if(!y||u.scale<.1&&C<1||u.scale>5&&C>1)return;const ve=y.getBoundingClientRect(),Pe={x:(le.x-ve.left)/ve.width,y:(le.y-ve.top)/ve.height};t(1,u.x-=u.width*(C-1)*Pe.x,u),t(1,u.y-=u.height*(C-1)*Pe.y,u),t(1,u.width*=C,u),t(1,u.height*=C,u)}function M(C){if(!(C.target instanceof Element))return;C.preventDefault();const le=document.elementFromPoint(C.clientX,C.clientY);le&&(le.tagName==="image"?pe(le.id):le.tagName==="rect"&&ie(le.id))}function pe(C){const le=W.getRouter(parseInt(C));le&&(t(5,g=le),p.showModal())}function ie(C){const le=W.links.find(ve=>C===ve.id);le&&(t(6,b=le),$.showModal())}function he(C){var ve;C.preventDefault();const le=(ve=C.dataTransfer)==null?void 0:ve.getData("text/plain");if(le)switch(le){case"CE":W.createCE(we(C.clientX),fe(C.clientY));break;case"LER":W.createLER(we(C.clientX),fe(C.clientY));break;case"LSR":W.createLSR(we(C.clientX),fe(C.clientY));break}}function we(C){return y?(C-y.getBoundingClientRect().left)*u.scale+u.x:C}function fe(C){return y?(C-y.getBoundingClientRect().top)*u.scale+u.y:C}function Ze(C){Or.call(this,r,C)}function Ce(C){je[C?"unshift":"push"](()=>{y=C,t(4,y)})}function Ne(C){g=C,t(5,g)}function Ae(C){p=C,t(8,p)}function z(C){b=C,t(6,b)}function oe(C){$=C,t(9,$)}return r.$$set=C=>{"$$scope"in C&&t(24,o=C.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(11,n={0:"move",1:s?"not-allowed":"grabbing",2:"grabbing",3:s?"not-allowed":"crosshair",4:"crosshair",5:"none"})},[s,u,f,_,y,g,b,m,p,$,S,n,i,c,H,D,X,O,F,M,he,we,fe,R,o,l,Ze,Ce,Ne,Ae,z,oe]}class Qi extends Re{constructor(e){super(),Te(this,e,Ki,Ji,Le,{zoom:23},null,[-1,-1])}get zoom(){return this.$$.ctx[23]}}function dr(r){let e,t,n=r[0].address+"",s,i,a,l="",o,c,u=r[1].address+"",f,h,_,y,g,b;return _=new et({props:{text:"Play",callback:r[2]}}),g=new et({props:{text:"Delete",callback:r[3]}}),{c(){e=w("div"),t=w("p"),s=_e(n),i=T(),a=w("p"),a.textContent=l,o=T(),c=w("p"),f=_e(u),h=T(),ee(_.$$.fragment),y=T(),ee(g.$$.fragment),this.h()},l(m){e=E(m,"DIV",{class:!0});var p=A(e);t=E(p,"P",{class:!0});var $=A(t);s=be($,n),$.forEach(d),i=P(p),a=E(p,"P",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-1giyjq6"&&(a.textContent=l),o=P(p),c=E(p,"P",{class:!0});var S=A(c);f=be(S,u),S.forEach(d),h=P(p),te(_.$$.fragment,p),y=P(p),te(g.$$.fragment,p),p.forEach(d),this.h()},h(){k(t,"class","svelte-ikhsiz"),k(a,"class","svelte-ikhsiz"),k(c,"class","svelte-ikhsiz"),k(e,"class","svelte-ikhsiz")},m(m,p){v(m,e,p),I(e,t),I(t,s),I(e,i),I(e,a),I(e,o),I(e,c),I(c,f),I(e,h),ne(_,e,null),I(e,y),ne(g,e,null),b=!0},p(m,p){(!b||p&1)&&n!==(n=m[0].address+"")&&We(s,n),(!b||p&2)&&u!==(u=m[1].address+"")&&We(f,u)},i(m){b||(B(_.$$.fragment,m),B(g.$$.fragment,m),b=!0)},o(m){j(_.$$.fragment,m),j(g.$$.fragment,m),b=!1},d(m){m&&d(e),re(_),re(g)}}}function ea(r){let e,t,n=r[1]&&dr(r);return{c(){n&&n.c(),e=Ie()},l(s){n&&n.l(s),e=Ie()},m(s,i){n&&n.m(s,i),v(s,e,i),t=!0},p(s,[i]){s[1]?n?(n.p(s,i),i&2&&B(n,1)):(n=dr(s),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(He(),j(n,1,1,()=>{n=null}),Oe())},i(s){t||(B(n),t=!0)},o(s){j(n),t=!1},d(s){s&&d(e),n&&n.d(s)}}}function ta(r,e,t){let{source:n}=e,{destination:s}=e;function i(){s&&W.addPacket(n,s)}function a(){!confirm("Are you sure you want to delete this LSP?")||!s||(n.deleteEntry(s.address),W.notify())}return r.$$set=l=>{"source"in l&&t(0,n=l.source),"destination"in l&&t(1,s=l.destination)},[n,s,i,a]}class na extends Re{constructor(e){super(),Te(this,e,ta,ea,Le,{source:0,destination:1})}}function fr(r,e,t){const n=r.slice();return n[2]=e[t],n}function hr(r,e,t){const n=r.slice();return n[5]=e[t][0],n}function pr(r){let e,t;return e=new na({props:{source:r[2],destination:W.getCERouter(r[5])}}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.source=n[2]),s&1&&(i.destination=W.getCERouter(n[5])),e.$set(i)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}function mr(r){let e,t,n=Ee([...r[2].firstHop]),s=[];for(let a=0;a<n.length;a+=1)s[a]=pr(hr(r,n,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ie()},l(a){for(let l=0;l<s.length;l+=1)s[l].l(a);e=Ie()},m(a,l){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(a,l);v(a,e,l),t=!0},p(a,l){if(l&1){n=Ee([...a[2].firstHop]);let o;for(o=0;o<n.length;o+=1){const c=hr(a,n,o);s[o]?(s[o].p(c,l),B(s[o],1)):(s[o]=pr(c),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(He(),o=n.length;o<s.length;o+=1)i(o);Oe()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)B(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&d(e),ht(s,a)}}}function ra(r){let e,t,n=Ee(r[0]),s=[];for(let a=0;a<n.length;a+=1)s[a]=mr(fr(r,n,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){e=w("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0});var l=A(e);for(let o=0;o<s.length;o+=1)s[o].l(l);l.forEach(d),this.h()},h(){k(e,"class","svelte-kwkmok")},m(a,l){v(a,e,l);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(a,[l]){if(l&1){n=Ee(a[0]);let o;for(o=0;o<n.length;o+=1){const c=fr(a,n,o);s[o]?(s[o].p(c,l),B(s[o],1)):(s[o]=mr(c),s[o].c(),B(s[o],1),s[o].m(e,null))}for(He(),o=n.length;o<s.length;o+=1)i(o);Oe()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)B(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&d(e),ht(s,a)}}}function sa(r,e,t){let n,s;return Fe(r,W,i=>t(1,s=i)),r.$$.update=()=>{r.$$.dirty&2&&t(0,n=s.routers.filter(i=>i instanceof Ge))},[n,s]}class ia extends Re{constructor(e){super(),Te(this,e,sa,ra,Le,{})}}function gr(r,e,t){const n=r.slice();return n[15]=e[t],n}function _r(r){let e,t;const n=[r[15],{style:"padding: 10px 20px"}];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new et({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&64?an(n,[ln(i[15]),n[1]]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function aa(r){let e,t,n,s,i,a,l,o="Simulation Panel",c,u,f="Packet Controls",h,_,y,g=r[2].packets.length+"",b,m,p,$,S,N,H,D,U=r[1].speedMultiplier.toFixed(1)+"",X,O,x,F,R,M,pe,ie=r[1].maxPackets+"",he,we,fe,Ze,Ce,Ne,Ae,z="Fallback to normal IP routing?",oe,C,le,ve,Pe,Me,rt,Ut,Je=Ee(r[6]),ye=[];for(let K=0;K<Je.length;K+=1)ye[K]=_r(gr(r,Je,K));const Zt=K=>j(ye[K],1,1,()=>{ye[K]=null});return ve=new ia({}),{c(){e=w("div"),t=w("div"),s=T(),i=w("div"),a=w("div"),l=w("h1"),l.textContent=o,c=T(),u=w("p"),u.textContent=f,h=T(),_=w("p"),y=_e("Count: "),b=_e(g),m=T(),p=w("div");for(let K=0;K<ye.length;K+=1)ye[K].c();$=T(),S=w("div"),N=w("div"),H=w("p"),D=_e("Speed Multiplier: "),X=_e(U),O=T(),x=w("input"),F=T(),R=w("div"),M=w("p"),pe=_e("Max Packets: "),he=_e(ie),we=T(),fe=w("input"),Ze=T(),Ce=w("div"),Ne=w("label"),Ae=w("p"),Ae.textContent=z,oe=T(),C=w("input"),le=T(),ee(ve.$$.fragment),this.h()},l(K){e=E(K,"DIV",{id:!0,style:!0,class:!0});var ke=A(e);t=E(ke,"DIV",{id:!0,class:!0}),A(t).forEach(d),ke.forEach(d),s=P(K),i=E(K,"DIV",{id:!0,style:!0,class:!0});var xe=A(i);a=E(xe,"DIV",{id:!0,class:!0});var Be=A(a);l=E(Be,"H1",{id:!0,class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-9oxc0e"&&(l.textContent=o),c=P(Be),u=E(Be,"P",{id:!0,class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1cfybk8"&&(u.textContent=f),h=P(Be),_=E(Be,"P",{id:!0,class:!0});var xt=A(_);y=be(xt,"Count: "),b=be(xt,g),xt.forEach(d),m=P(Be),p=E(Be,"DIV",{id:!0,class:!0});var ut=A(p);for(let At=0;At<ye.length;At+=1)ye[At].l(ut);ut.forEach(d),$=P(Be),S=E(Be,"DIV",{class:!0});var gt=A(S);N=E(gt,"DIV",{class:!0});var _t=A(N);H=E(_t,"P",{class:!0});var wt=A(H);D=be(wt,"Speed Multiplier: "),X=be(wt,U),wt.forEach(d),O=P(_t),x=E(_t,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),_t.forEach(d),F=P(gt),R=E(gt,"DIV",{class:!0});var bt=A(R);M=E(bt,"P",{class:!0});var Ue=A(M);pe=be(Ue,"Max Packets: "),he=be(Ue,ie),Ue.forEach(d),we=P(bt),fe=E(bt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),bt.forEach(d),Ze=P(gt),Ce=E(gt,"DIV",{class:!0});var jt=A(Ce);Ne=E(jt,"LABEL",{class:!0});var Ke=A(Ne);Ae=E(Ke,"P",{class:!0,"data-svelte-h":!0}),Q(Ae)!=="svelte-1re47ui"&&(Ae.textContent=z),oe=P(Ke),C=E(Ke,"INPUT",{type:!0,class:!0}),Ke.forEach(d),jt.forEach(d),gt.forEach(d),le=P(Be),te(ve.$$.fragment,Be),Be.forEach(d),xe.forEach(d),this.h()},h(){k(t,"id","resize-bar"),k(t,"class","svelte-1ac9h3y"),k(e,"id","visual-resize-bar"),k(e,"style",n=`width: ${r[0]?1:0}px`),k(e,"class","svelte-1ac9h3y"),k(l,"id","simulation-panel-title"),k(l,"class","svelte-1ac9h3y"),k(u,"id","packet-controls-title"),k(u,"class","svelte-1ac9h3y"),k(_,"id","packet-controls-count"),k(_,"class","svelte-1ac9h3y"),k(p,"id","control-panel-buttons"),k(p,"class","svelte-1ac9h3y"),k(H,"class","svelte-1ac9h3y"),k(x,"type","range"),k(x,"min","0.1"),k(x,"max","2"),k(x,"step","0.001"),k(x,"class","svelte-1ac9h3y"),k(N,"class","input-box svelte-1ac9h3y"),k(M,"class","svelte-1ac9h3y"),k(fe,"type","range"),k(fe,"min","1"),k(fe,"max","500"),k(fe,"step","1"),k(fe,"class","svelte-1ac9h3y"),k(R,"class","input-box svelte-1ac9h3y"),k(Ae,"class","svelte-1ac9h3y"),k(C,"type","checkbox"),k(C,"class","svelte-1ac9h3y"),k(Ne,"class","svelte-1ac9h3y"),k(Ce,"class","input-box svelte-1ac9h3y"),k(S,"class","inputs svelte-1ac9h3y"),k(a,"id","control-panel-content"),k(a,"class","svelte-1ac9h3y"),k(i,"id","control-panel"),k(i,"style",Pe=`width: ${r[5]}px; transition: ${r[4]};`),k(i,"class","svelte-1ac9h3y")},m(K,ke){v(K,e,ke),I(e,t),r[9](t),v(K,s,ke),v(K,i,ke),I(i,a),I(a,l),I(a,c),I(a,u),I(a,h),I(a,_),I(_,y),I(_,b),I(a,m),I(a,p);for(let xe=0;xe<ye.length;xe+=1)ye[xe]&&ye[xe].m(p,null);I(a,$),I(a,S),I(S,N),I(N,H),I(H,D),I(H,X),I(N,O),I(N,x),De(x,r[1].speedMultiplier),I(S,F),I(S,R),I(R,M),I(M,pe),I(M,he),I(R,we),I(R,fe),De(fe,r[1].maxPackets),I(S,Ze),I(S,Ce),I(Ce,Ne),I(Ne,Ae),I(Ne,oe),I(Ne,C),C.checked=r[1].enableFallback,I(a,le),ne(ve,a,null),Me=!0,rt||(Ut=[me(t,"pointerdown",r[7]),me(x,"change",r[10]),me(x,"input",r[10]),me(fe,"change",r[11]),me(fe,"input",r[11]),me(C,"change",r[12])],rt=!0)},p(K,[ke]){if((!Me||ke&1&&n!==(n=`width: ${K[0]?1:0}px`))&&k(e,"style",n),(!Me||ke&4)&&g!==(g=K[2].packets.length+"")&&We(b,g),ke&64){Je=Ee(K[6]);let xe;for(xe=0;xe<Je.length;xe+=1){const Be=gr(K,Je,xe);ye[xe]?(ye[xe].p(Be,ke),B(ye[xe],1)):(ye[xe]=_r(Be),ye[xe].c(),B(ye[xe],1),ye[xe].m(p,null))}for(He(),xe=Je.length;xe<ye.length;xe+=1)Zt(xe);Oe()}(!Me||ke&2)&&U!==(U=K[1].speedMultiplier.toFixed(1)+"")&&We(X,U),ke&2&&De(x,K[1].speedMultiplier),(!Me||ke&2)&&ie!==(ie=K[1].maxPackets+"")&&We(he,ie),ke&2&&De(fe,K[1].maxPackets),ke&2&&(C.checked=K[1].enableFallback),(!Me||ke&48&&Pe!==(Pe=`width: ${K[5]}px; transition: ${K[4]};`))&&k(i,"style",Pe)},i(K){if(!Me){for(let ke=0;ke<Je.length;ke+=1)B(ye[ke]);B(ve.$$.fragment,K),Me=!0}},o(K){ye=ye.filter(Boolean);for(let ke=0;ke<ye.length;ke+=1)j(ye[ke]);j(ve.$$.fragment,K),Me=!1},d(K){K&&(d(e),d(s),d(i)),r[9](null),ht(ye,K),re(ve),rt=!1,Rt(Ut)}}}function la(r,e,t){let n,s,i,a,l,o;Fe(r,Lt,p=>t(0,a=p)),Fe(r,Xe,p=>t(1,l=p)),Fe(r,W,p=>t(2,o=p));let c,u="width 200ms";function f(p){a&&(t(4,u="none"),c.setPointerCapture(p.pointerId),c.addEventListener("pointermove",h),c.addEventListener("pointerup",_))}function h(p){t(5,i=window.innerWidth-p.clientX),i<=20&&t(5,i=0),i>=window.innerWidth-350&&t(5,i=window.innerWidth-350)}function _(p){c.removeEventListener("pointermove",h),c.removeEventListener("pointerup",_),c.releasePointerCapture(p.pointerId),t(4,u="width 200ms")}function y(p){je[p?"unshift":"push"](()=>{c=p,t(3,c)})}function g(){l.speedMultiplier=nt(this.value),Xe.set(l)}function b(){l.maxPackets=nt(this.value),Xe.set(l)}function m(){l.enableFallback=this.checked,Xe.set(l)}return r.$$.update=()=>{r.$$.dirty&4&&t(8,n=o.routers.filter(p=>p instanceof Ge)),r.$$.dirty&258&&t(6,s=[{text:l.running?" Pause":" Play",callback:()=>{st(Xe,l.running=!l.running,l)}},{text:"Reset",callback:()=>{W.clearPackets()}},{text:"Play All",callback:()=>{for(const p of n)for(const[$]of p.firstHop){const S=W.getCERouter($);S&&W.addPacket(p,S)}}}]),r.$$.dirty&1&&t(5,i=a?350:0)},[a,l,o,c,u,i,s,f,n,y,g,b,m]}class oa extends Re{constructor(e){super(),Te(this,e,la,aa,Le,{})}}function ua(r){let e;return{c(){e=dt("circle"),this.h()},l(t){e=ft(t,"circle",{r:!0,class:!0}),A(e).forEach(d),this.h()},h(){k(e,"r","5"),k(e,"class","svelte-rvo2j9"),qn(e,"labeled",r[0].label!==-1)},m(t,n){v(t,e,n),r[4](e)},p(t,[n]){n&1&&qn(e,"labeled",t[0].label!==-1)},i:Se,o:Se,d(t){t&&d(e),r[4](null)}}}function ca(r,e,t){let n;Fe(r,Xe,h=>t(3,n=h));let{packet:s}=e,i,a,l;function o(){const h=Math.sqrt((s.node.x-s.nextHop.node.x)**2+(s.node.y-s.nextHop.node.y)**2);i=Math.round(h/250*1e3)}function c(){if(o(),!l)return;const h=s.node,_=s.nextHop.node;t(2,a=l.animate({transform:[`translate(${h.x}px, ${h.y}px)`,`translate(${_.x}px, ${_.y}px)`]},{duration:i,easing:"linear"})),t(2,a.onfinish=u,a)}function u(){t(0,s.node=s.nextHop.node,s);const h=s.nextHop;if(h.receivePacket(s),h!==s.nextHop){if(!s.validateNextHop(h))return s.drop("Invalid next hop");c()}}s.validateFirstHop()?requestAnimationFrame(c):s.drop("Invalid first hop");function f(h){je[h?"unshift":"push"](()=>{l=h,t(1,l)})}return r.$$set=h=>{"packet"in h&&t(0,s=h.packet)},r.$$.update=()=>{r.$$.dirty&12&&a&&t(2,a.playbackRate=n.speedMultiplier,a),r.$$.dirty&12&&a&&requestAnimationFrame(()=>{n.running?a==null||a.play():a==null||a.pause()})},[s,l,a,n,f]}class da extends Re{constructor(e){super(),Te(this,e,ca,ua,Le,{packet:0})}}function fa(r){let e,t,n,s,i,a,l,o,c=r[0].distance+"",u,f,h,_;return{c(){e=dt("line"),t=T(),n=dt("rect"),l=T(),o=dt("text"),u=_e(c),f=_e(" km"),this.h()},l(y){e=ft(y,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),A(e).forEach(d),t=P(y),n=ft(y,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,class:!0}),A(n).forEach(d),l=P(y),o=ft(y,"text",{x:!0,y:!0,"dominant-baseline":!0,class:!0});var g=A(o);u=be(g,c),f=be(g," km"),g.forEach(d),this.h()},h(){k(e,"x1",r[4]),k(e,"y1",r[2]),k(e,"x2",r[3]),k(e,"y2",r[1]),k(n,"id",s=r[0].id),k(n,"x",i=r[5].x-Bn/2),k(n,"y",a=r[5].y-Dn/2),k(n,"width",Bn),k(n,"height",Dn),k(n,"class","svelte-zjn2k6"),k(o,"x",h=r[5].x),k(o,"y",_=r[5].y),k(o,"dominant-baseline","central"),k(o,"class","svelte-zjn2k6")},m(y,g){v(y,e,g),v(y,t,g),v(y,n,g),v(y,l,g),v(y,o,g),I(o,u),I(o,f)},p(y,[g]){g&16&&k(e,"x1",y[4]),g&4&&k(e,"y1",y[2]),g&8&&k(e,"x2",y[3]),g&2&&k(e,"y2",y[1]),g&1&&s!==(s=y[0].id)&&k(n,"id",s),g&32&&i!==(i=y[5].x-Bn/2)&&k(n,"x",i),g&32&&a!==(a=y[5].y-Dn/2)&&k(n,"y",a),g&1&&c!==(c=y[0].distance+"")&&We(u,c),g&32&&h!==(h=y[5].x)&&k(o,"x",h),g&32&&_!==(_=y[5].y)&&k(o,"y",_)},i:Se,o:Se,d(y){y&&(d(e),d(t),d(n),d(l),d(o))}}}const Bn=50,Dn=20;function br(r,e){return(r+e)/2}function ha(r,e,t){let n,s,i,a,l,{link:o}=e;return r.$$set=c=>{"link"in c&&t(0,o=c.link)},r.$$.update=()=>{r.$$.dirty&1&&t(4,n=o.source.node.x),r.$$.dirty&1&&t(3,s=o.target.node.x),r.$$.dirty&1&&t(2,i=o.source.node.y),r.$$.dirty&1&&t(1,a=o.target.node.y),r.$$.dirty&30&&t(5,l={x:br(n,s),y:br(i,a)})},[o,a,i,s,n,l]}class pa extends Re{constructor(e){super(),Te(this,e,ha,fa,Le,{link:0})}}function ma(r){let e,t,n,s,i,a,l,o=r[0].node.label+"",c,u,f;return{c(){e=dt("image"),a=T(),l=dt("text"),c=_e(o),this.h()},l(h){e=ft(h,"image",{id:!0,x:!0,y:!0,width:!0,height:!0,href:!0,class:!0}),A(e).forEach(d),a=P(h),l=ft(h,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-size":!0,class:!0});var _=A(l);c=be(_,o),_.forEach(d),this.h()},h(){k(e,"id",t=r[0].id.toString()),k(e,"x",n=r[0].node.x-45/2),k(e,"y",s=r[0].node.y-45/2),k(e,"width","45"),k(e,"height","45"),k(e,"href",i=`Router/${r[0].type}.svg`),k(e,"class","svelte-1eo9fnr"),k(l,"x",u=r[0].node.x),k(l,"y",f=r[0].node.y+10),k(l,"dominant-baseline","central"),k(l,"font-size","smaller"),k(l,"class","svelte-1eo9fnr")},m(h,_){v(h,e,_),v(h,a,_),v(h,l,_),I(l,c)},p(h,[_]){_&1&&t!==(t=h[0].id.toString())&&k(e,"id",t),_&1&&n!==(n=h[0].node.x-45/2)&&k(e,"x",n),_&1&&s!==(s=h[0].node.y-45/2)&&k(e,"y",s),_&1&&i!==(i=`Router/${h[0].type}.svg`)&&k(e,"href",i),_&1&&o!==(o=h[0].node.label+"")&&We(c,o),_&1&&u!==(u=h[0].node.x)&&k(l,"x",u),_&1&&f!==(f=h[0].node.y+10)&&k(l,"y",f)},i:Se,o:Se,d(h){h&&(d(e),d(a),d(l))}}}function ga(r,e,t){let{router:n}=e;return r.$$set=s=>{"router"in s&&t(0,n=s.router)},[n]}class _a extends Re{constructor(e){super(),Te(this,e,ga,ma,Le,{router:0})}}function ba(r){let e,t,n,s;return{c(){e=w("div"),t=_e(r[0]),this.h()},l(i){e=E(i,"DIV",{draggable:!0,role:!0,tabindex:!0,style:!0,class:!0});var a=A(e);t=be(a,r[0]),a.forEach(d),this.h()},h(){k(e,"draggable","true"),k(e,"role","button"),k(e,"tabindex","-1"),tt(e,"background-color",r[1]),k(e,"class","svelte-dfkep2")},m(i,a){v(i,e,a),I(e,t),n||(s=[me(e,"dragstart",r[2]),me(e,"click",r[3])],n=!0)},p(i,[a]){a&1&&We(t,i[0]),a&2&&tt(e,"background-color",i[1])},i:Se,o:Se,d(i){i&&d(e),n=!1,Rt(s)}}}function ya(r,e,t){let n,s;Fe(r,ct,u=>t(5,n=u)),Fe(r,Lt,u=>t(6,s=u));let{text:i}=e,{type:a}=e,{color:l}=e;function o(u){var f;if(s){alert("Network is locked.");return}(f=u.dataTransfer)==null||f.setData("text/plain",a)}function c(){st(ct,n.placing=a,n)}return r.$$set=u=>{"text"in u&&t(0,i=u.text),"type"in u&&t(4,a=u.type),"color"in u&&t(1,l=u.color)},[i,l,o,c,a]}class va extends Re{constructor(e){super(),Te(this,e,ya,ba,Le,{text:0,type:4,color:1})}}function yr(r,e,t){const n=r.slice();return n[7]=e[t],n}function vr(r,e,t){const n=r.slice();return n[7]=e[t],n}function kr(r,e,t){const n=r.slice();return n[10]=e[t],n}function ka(r){let e,t,n=Ee(r[0]),s=[];for(let a=0;a<n.length;a+=1)s[a]=xr(yr(r,n,a));const i=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ie()},l(a){for(let l=0;l<s.length;l+=1)s[l].l(a);e=Ie()},m(a,l){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(a,l);v(a,e,l),t=!0},p(a,l){if(l&1){n=Ee(a[0]);let o;for(o=0;o<n.length;o+=1){const c=yr(a,n,o);s[o]?(s[o].p(c,l),B(s[o],1)):(s[o]=xr(c),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(He(),o=n.length;o<s.length;o+=1)i(o);Oe()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)B(s[l]);t=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);t=!1},d(a){a&&d(e),ht(s,a)}}}function xa(r){let e,t,n,s=Ee(r[4]),i=[];for(let u=0;u<s.length;u+=1)i[u]=wr(kr(r,s,u));const a=u=>j(i[u],1,1,()=>{i[u]=null});let l=Ee(r[1]),o=[];for(let u=0;u<l.length;u+=1)o[u]=Er(vr(r,l,u));const c=u=>j(o[u],1,1,()=>{o[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=T();for(let u=0;u<o.length;u+=1)o[u].c();t=Ie()},l(u){for(let f=0;f<i.length;f+=1)i[f].l(u);e=P(u);for(let f=0;f<o.length;f+=1)o[f].l(u);t=Ie()},m(u,f){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(u,f);v(u,e,f);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(u,f);v(u,t,f),n=!0},p(u,f){if(f&16){s=Ee(u[4]);let h;for(h=0;h<s.length;h+=1){const _=kr(u,s,h);i[h]?(i[h].p(_,f),B(i[h],1)):(i[h]=wr(_),i[h].c(),B(i[h],1),i[h].m(e.parentNode,e))}for(He(),h=s.length;h<i.length;h+=1)a(h);Oe()}if(f&2){l=Ee(u[1]);let h;for(h=0;h<l.length;h+=1){const _=vr(u,l,h);o[h]?(o[h].p(_,f),B(o[h],1)):(o[h]=Er(_),o[h].c(),B(o[h],1),o[h].m(t.parentNode,t))}for(He(),h=l.length;h<o.length;h+=1)c(h);Oe()}},i(u){if(!n){for(let f=0;f<s.length;f+=1)B(i[f]);for(let f=0;f<l.length;f+=1)B(o[f]);n=!0}},o(u){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)j(i[f]);o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)j(o[f]);n=!1},d(u){u&&(d(e),d(t)),ht(i,u),ht(o,u)}}}function xr(r){let e,t;const n=[r[7]];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new et({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&1?an(n,[ln(i[7])]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function wr(r){let e,t;const n=[r[10]];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new va({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&16?an(n,[ln(i[10])]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function Er(r){let e,t;const n=[r[7]];let s={};for(let i=0;i<n.length;i+=1)s=sn(s,n[i]);return e=new et({props:s}),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,a){ne(e,i,a),t=!0},p(i,a){const l=a&2?an(n,[ln(i[7])]):{};e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function wa(r){let e,t,n,s,i,a;e=new et({props:{text:r[2]?"Edit":"Simulation",callback:r[6],style:`width: 100px; background-color: ${r[2]?"#3CB371":"#6495ED"};`}});const l=[xa,ka],o=[];function c(u,f){return u[2]?1:0}return n=c(r),s=o[n]=l[n](r),{c(){ee(e.$$.fragment),t=T(),s.c(),i=Ie()},l(u){te(e.$$.fragment,u),t=P(u),s.l(u),i=Ie()},m(u,f){ne(e,u,f),v(u,t,f),o[n].m(u,f),v(u,i,f),a=!0},p(u,[f]){const h={};f&4&&(h.text=u[2]?"Edit":"Simulation"),f&12&&(h.callback=u[6]),f&4&&(h.style=`width: 100px; background-color: ${u[2]?"#3CB371":"#6495ED"};`),e.$set(h);let _=n;n=c(u),n===_?o[n].p(u,f):(He(),j(o[_],1,1,()=>{o[_]=null}),Oe(),s=o[n],s?s.p(u,f):(s=o[n]=l[n](u),s.c()),B(s,1),s.m(i.parentNode,i))},i(u){a||(B(e.$$.fragment,u),B(s),a=!0)},o(u){j(e.$$.fragment,u),j(s),a=!1},d(u){u&&(d(t),d(i)),re(e,u),o[n].d(u)}}}function Ea(r,e,t){let n,s,i,a,l;Fe(r,W,u=>t(5,i=u)),Fe(r,Lt,u=>t(2,a=u)),Fe(r,ct,u=>t(3,l=u));const o=[{text:"+ Customer",type:"CE",color:"#7FC8F8"},{text:"+ Edge",type:"LER",color:"#FFE45E"},{text:"+ Switch",type:"LSR",color:"#FF6392"}],c=()=>{st(Lt,a=!a,a),st(ct,l.placing=null,l),W.clearPackets()};return r.$$.update=()=>{r.$$.dirty&32&&t(0,s=[{text:"Clear Tables",callback:()=>{confirm("Are you sure you want to clear the routing tables?")&&W.clearTables()}},{text:"Export",callback:()=>{const u={routers:i.routers.map(g=>{if(g instanceof Ge)return{...g,type:g.type,firstHop:Object.fromEntries(g.firstHop)};if(g instanceof Qe)return{...g,type:g.type,FIB:Object.fromEntries(g.FIB.map),LFIB:Object.fromEntries(g.LFIB.map)};if(g instanceof Bt)return{...g,type:g.type,LFIB:Object.fromEntries(g.LFIB.map)}}),links:i.links.map(g=>({...g,source:g.source.id,target:g.target.id}))},f=JSON.stringify(u,null,2),h=new Blob([f],{type:"application/json"}),_=window.URL.createObjectURL(h),y=document.createElement("a");y.href=_,y.download="network.json",y.click(),window.URL.revokeObjectURL(_)}}]),r.$$.dirty&1&&t(1,n=[{text:"Clear Network",callback:()=>{confirm("Are you sure you want to clear the network?")&&W.clear()}},{text:"Clear Links",callback:()=>{confirm("Are you sure you want to clear the links?")&&W.clearLinks()}},...s])},[s,n,a,l,o,i,c]}class Ca extends Re{constructor(e){super(),Te(this,e,Ea,wa,Le,{})}}function Ia(r){let e,t="Drag and drop routers to add them to the network.",n,s,i,a,l=`Instead of drag and drop, you can also click and hold shift while continuously clicking to add
    many routers.`,o,c,u,f,h=`Pressing 1, 2 or 3 will respectively select CE, LER or LSR, this works with the holding of shift
    to insert routers.`,_,y,g,b,m="CEs can only connect to LERs",p,$,S="LERs can only connect to CEs and LSRs",N,H,D="LSRs can only connect to LERs and other LSRs",U,X,O,x,F="Pressing Space will pause/resume the packet animations.",R,M,pe,ie,he="Pressing Tab will open the simulation panel.",we,fe,Ze,Ce,Ne="Hold Shift, then click and drag between routers to create links",Ae,z,oe,C,le="Hold alt, then click and drag between CE's to create destinations",ve,Pe,Me,rt,Ut="Double click a router or link to configure it.",Je,ye,Zt,K,ke="The clear button will delete the entire network.",xe,Be,xt,ut,gt="The export button will download your network as a .json file",_t,wt,bt,Ue,jt,Ke,At="red",Ln,Tt,zn="blue",Rn,cn,dn,fn,Pt,Vn="If you are experiencing packets going offroad, please lower the max packets count.",hn,pn,mn,Nt,Un="Press Esc to close this popup.";return{c(){e=w("p"),e.textContent=t,n=T(),s=w("br"),i=T(),a=w("p"),a.textContent=l,o=T(),c=w("br"),u=T(),f=w("p"),f.textContent=h,_=T(),y=w("br"),g=T(),b=w("p"),b.textContent=m,p=T(),$=w("p"),$.textContent=S,N=T(),H=w("p"),H.textContent=D,U=T(),X=w("br"),O=T(),x=w("p"),x.textContent=F,R=T(),M=w("br"),pe=T(),ie=w("p"),ie.textContent=he,we=T(),fe=w("br"),Ze=T(),Ce=w("p"),Ce.textContent=Ne,Ae=T(),z=w("br"),oe=T(),C=w("p"),C.textContent=le,ve=T(),Pe=w("br"),Me=T(),rt=w("p"),rt.textContent=Ut,Je=T(),ye=w("br"),Zt=T(),K=w("p"),K.textContent=ke,xe=T(),Be=w("br"),xt=T(),ut=w("p"),ut.textContent=gt,_t=T(),wt=w("br"),bt=T(),Ue=w("p"),jt=_e("Packets colored "),Ke=w("span"),Ke.textContent=At,Ln=_e(` do not have a label, and packets colored
    `),Tt=w("span"),Tt.textContent=zn,Rn=_e(" have a label"),cn=T(),dn=w("br"),fn=T(),Pt=w("p"),Pt.textContent=Vn,hn=T(),pn=w("br"),mn=T(),Nt=w("p"),Nt.textContent=Un,this.h()},l(L){e=E(L,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-bhocp0"&&(e.textContent=t),n=P(L),s=E(L,"BR",{}),i=P(L),a=E(L,"P",{"data-svelte-h":!0}),Q(a)!=="svelte-12tzi3f"&&(a.textContent=l),o=P(L),c=E(L,"BR",{}),u=P(L),f=E(L,"P",{"data-svelte-h":!0}),Q(f)!=="svelte-1gxe9lx"&&(f.textContent=h),_=P(L),y=E(L,"BR",{}),g=P(L),b=E(L,"P",{"data-svelte-h":!0}),Q(b)!=="svelte-1rkor0y"&&(b.textContent=m),p=P(L),$=E(L,"P",{"data-svelte-h":!0}),Q($)!=="svelte-1o2dgqj"&&($.textContent=S),N=P(L),H=E(L,"P",{"data-svelte-h":!0}),Q(H)!=="svelte-shdl6a"&&(H.textContent=D),U=P(L),X=E(L,"BR",{}),O=P(L),x=E(L,"P",{"data-svelte-h":!0}),Q(x)!=="svelte-19sx7cb"&&(x.textContent=F),R=P(L),M=E(L,"BR",{}),pe=P(L),ie=E(L,"P",{"data-svelte-h":!0}),Q(ie)!=="svelte-1omjt2g"&&(ie.textContent=he),we=P(L),fe=E(L,"BR",{}),Ze=P(L),Ce=E(L,"P",{"data-svelte-h":!0}),Q(Ce)!=="svelte-15ud2zb"&&(Ce.textContent=Ne),Ae=P(L),z=E(L,"BR",{}),oe=P(L),C=E(L,"P",{"data-svelte-h":!0}),Q(C)!=="svelte-12b16vw"&&(C.textContent=le),ve=P(L),Pe=E(L,"BR",{}),Me=P(L),rt=E(L,"P",{"data-svelte-h":!0}),Q(rt)!=="svelte-qvtprs"&&(rt.textContent=Ut),Je=P(L),ye=E(L,"BR",{}),Zt=P(L),K=E(L,"P",{"data-svelte-h":!0}),Q(K)!=="svelte-vcl8s3"&&(K.textContent=ke),xe=P(L),Be=E(L,"BR",{}),xt=P(L),ut=E(L,"P",{"data-svelte-h":!0}),Q(ut)!=="svelte-1ww5ij7"&&(ut.textContent=gt),_t=P(L),wt=E(L,"BR",{}),bt=P(L),Ue=E(L,"P",{});var Y=A(Ue);jt=be(Y,"Packets colored "),Ke=E(Y,"SPAN",{"data-svelte-h":!0}),Q(Ke)!=="svelte-isvkwn"&&(Ke.textContent=At),Ln=be(Y,` do not have a label, and packets colored
    `),Tt=E(Y,"SPAN",{"data-svelte-h":!0}),Q(Tt)!=="svelte-jcjrgt"&&(Tt.textContent=zn),Rn=be(Y," have a label"),Y.forEach(d),cn=P(L),dn=E(L,"BR",{}),fn=P(L),Pt=E(L,"P",{"data-svelte-h":!0}),Q(Pt)!=="svelte-15en2mv"&&(Pt.textContent=Vn),hn=P(L),pn=E(L,"BR",{}),mn=P(L),Nt=E(L,"P",{"data-svelte-h":!0}),Q(Nt)!=="svelte-1dvt5v1"&&(Nt.textContent=Un),this.h()},h(){tt(Ke,"color","#da443f"),tt(Tt,"color","#6495ed")},m(L,Y){v(L,e,Y),v(L,n,Y),v(L,s,Y),v(L,i,Y),v(L,a,Y),v(L,o,Y),v(L,c,Y),v(L,u,Y),v(L,f,Y),v(L,_,Y),v(L,y,Y),v(L,g,Y),v(L,b,Y),v(L,p,Y),v(L,$,Y),v(L,N,Y),v(L,H,Y),v(L,U,Y),v(L,X,Y),v(L,O,Y),v(L,x,Y),v(L,R,Y),v(L,M,Y),v(L,pe,Y),v(L,ie,Y),v(L,we,Y),v(L,fe,Y),v(L,Ze,Y),v(L,Ce,Y),v(L,Ae,Y),v(L,z,Y),v(L,oe,Y),v(L,C,Y),v(L,ve,Y),v(L,Pe,Y),v(L,Me,Y),v(L,rt,Y),v(L,Je,Y),v(L,ye,Y),v(L,Zt,Y),v(L,K,Y),v(L,xe,Y),v(L,Be,Y),v(L,xt,Y),v(L,ut,Y),v(L,_t,Y),v(L,wt,Y),v(L,bt,Y),v(L,Ue,Y),I(Ue,jt),I(Ue,Ke),I(Ue,Ln),I(Ue,Tt),I(Ue,Rn),v(L,cn,Y),v(L,dn,Y),v(L,fn,Y),v(L,Pt,Y),v(L,hn,Y),v(L,pn,Y),v(L,mn,Y),v(L,Nt,Y)},p:Se,d(L){L&&(d(e),d(n),d(s),d(i),d(a),d(o),d(c),d(u),d(f),d(_),d(y),d(g),d(b),d(p),d($),d(N),d(H),d(U),d(X),d(O),d(x),d(R),d(M),d(pe),d(ie),d(we),d(fe),d(Ze),d(Ce),d(Ae),d(z),d(oe),d(C),d(ve),d(Pe),d(Me),d(rt),d(Je),d(ye),d(Zt),d(K),d(xe),d(Be),d(xt),d(ut),d(_t),d(wt),d(bt),d(Ue),d(cn),d(dn),d(fn),d(Pt),d(hn),d(pn),d(mn),d(Nt))}}}function $a(r){let e,t,n,s,i,a;t=new et({props:{text:"Help",callback:r[1]}});function l(c){r[2](c)}let o={$$slots:{default:[Ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.dialog=r[0]),s=new un({props:o}),je.push(()=>Ye(s,"dialog",l)),{c(){e=w("div"),ee(t.$$.fragment),n=T(),ee(s.$$.fragment)},l(c){e=E(c,"DIV",{});var u=A(e);te(t.$$.fragment,u),u.forEach(d),n=P(c),te(s.$$.fragment,c)},m(c,u){v(c,e,u),ne(t,e,null),v(c,n,u),ne(s,c,u),a=!0},p(c,[u]){const f={};u&1&&(f.callback=c[1]),t.$set(f);const h={};u&8&&(h.$$scope={dirty:u,ctx:c}),!i&&u&1&&(i=!0,h.dialog=c[0],qe(()=>i=!1)),s.$set(h)},i(c){a||(B(t.$$.fragment,c),B(s.$$.fragment,c),a=!0)},o(c){j(t.$$.fragment,c),j(s.$$.fragment,c),a=!1},d(c){c&&(d(e),d(n)),re(t),re(s,c)}}}function La(r,e,t){let n;const s=()=>{n.showModal()};function i(a){n=a,t(0,n)}return[n,s,i]}class Ra extends Re{constructor(e){super(),Te(this,e,La,$a,Le,{})}}function Ta(r){let e,t,n,s,i,a;return e=new et({props:{text:" - ",callback:r[1]}}),n=new et({props:{text:"Fullscreen",callback:r[2]}}),i=new et({props:{text:" + ",callback:r[3]}}),{c(){ee(e.$$.fragment),t=T(),ee(n.$$.fragment),s=T(),ee(i.$$.fragment)},l(l){te(e.$$.fragment,l),t=P(l),te(n.$$.fragment,l),s=P(l),te(i.$$.fragment,l)},m(l,o){ne(e,l,o),v(l,t,o),ne(n,l,o),v(l,s,o),ne(i,l,o),a=!0},p(l,[o]){const c={};o&1&&(c.callback=l[1]),e.$set(c);const u={};o&1&&(u.callback=l[3]),i.$set(u)},i(l){a||(B(e.$$.fragment,l),B(n.$$.fragment,l),B(i.$$.fragment,l),a=!0)},o(l){j(e.$$.fragment,l),j(n.$$.fragment,l),j(i.$$.fragment,l),a=!1},d(l){l&&(d(t),d(s)),re(e,l),re(n,l),re(i,l)}}}function Pa(r,e,t){let{zoom:n}=e;const s=()=>{const l={x:window.innerWidth/2,y:window.innerHeight/2};n(1.1,l)},i=async()=>{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()},a=()=>{const l={x:window.innerWidth/2,y:window.innerHeight/2};n(.9,l)};return r.$$set=l=>{"zoom"in l&&t(0,n=l.zoom)},[n,s,i,a]}class Na extends Re{constructor(e){super(),Te(this,e,Pa,Ta,Le,{zoom:0})}}function Sa(r){let e,t="Attribution: The following Icon has been used",n,s,i,a,l="https://commons.wikimedia.org/wiki/File:Router.svg#",o,c,u,f,h="Share Alike: We hereby grant permission to",_,y,g=`Copy, distribute and/or modify this document under the terms of the GNU Free Documentation
    License.`,b,m,p="Version 1.2 or any later version published by the Free Software Foundation;",$,S,N="with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.",H,D,U="A copy of the license is included in the section entitled GNU Free Documentation License.",X,O,x,F,R="The Icon used for CE routers is almost identical to the one on Wikimedia (aspect ratio changed)",M,pe,ie,he,we=`The Icon used for LSR/LER routers is almost identical, except with different colors. (aspect
    ratio changed)`,fe,Ze,Ce,Ne,Ae="Press Esc to close this popup";return{c(){e=w("p"),e.textContent=t,n=T(),s=w("br"),i=T(),a=w("p"),a.textContent=l,o=T(),c=w("br"),u=T(),f=w("p"),f.textContent=h,_=T(),y=w("p"),y.textContent=g,b=T(),m=w("p"),m.textContent=p,$=T(),S=w("p"),S.textContent=N,H=T(),D=w("p"),D.textContent=U,X=T(),O=w("br"),x=T(),F=w("p"),F.textContent=R,M=T(),pe=w("br"),ie=T(),he=w("p"),he.textContent=we,fe=T(),Ze=w("br"),Ce=T(),Ne=w("p"),Ne.textContent=Ae},l(z){e=E(z,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-t8z8ph"&&(e.textContent=t),n=P(z),s=E(z,"BR",{}),i=P(z),a=E(z,"P",{"data-svelte-h":!0}),Q(a)!=="svelte-dbjryl"&&(a.textContent=l),o=P(z),c=E(z,"BR",{}),u=P(z),f=E(z,"P",{"data-svelte-h":!0}),Q(f)!=="svelte-1y4tl2"&&(f.textContent=h),_=P(z),y=E(z,"P",{"data-svelte-h":!0}),Q(y)!=="svelte-17660lf"&&(y.textContent=g),b=P(z),m=E(z,"P",{"data-svelte-h":!0}),Q(m)!=="svelte-vqht9l"&&(m.textContent=p),$=P(z),S=E(z,"P",{"data-svelte-h":!0}),Q(S)!=="svelte-1x9q3li"&&(S.textContent=N),H=P(z),D=E(z,"P",{"data-svelte-h":!0}),Q(D)!=="svelte-hnn81q"&&(D.textContent=U),X=P(z),O=E(z,"BR",{}),x=P(z),F=E(z,"P",{"data-svelte-h":!0}),Q(F)!=="svelte-q0q94c"&&(F.textContent=R),M=P(z),pe=E(z,"BR",{}),ie=P(z),he=E(z,"P",{"data-svelte-h":!0}),Q(he)!=="svelte-vmr7sg"&&(he.textContent=we),fe=P(z),Ze=E(z,"BR",{}),Ce=P(z),Ne=E(z,"P",{"data-svelte-h":!0}),Q(Ne)!=="svelte-mgckcf"&&(Ne.textContent=Ae)},m(z,oe){v(z,e,oe),v(z,n,oe),v(z,s,oe),v(z,i,oe),v(z,a,oe),v(z,o,oe),v(z,c,oe),v(z,u,oe),v(z,f,oe),v(z,_,oe),v(z,y,oe),v(z,b,oe),v(z,m,oe),v(z,$,oe),v(z,S,oe),v(z,H,oe),v(z,D,oe),v(z,X,oe),v(z,O,oe),v(z,x,oe),v(z,F,oe),v(z,M,oe),v(z,pe,oe),v(z,ie,oe),v(z,he,oe),v(z,fe,oe),v(z,Ze,oe),v(z,Ce,oe),v(z,Ne,oe)},p:Se,d(z){z&&(d(e),d(n),d(s),d(i),d(a),d(o),d(c),d(u),d(f),d(_),d(y),d(b),d(m),d($),d(S),d(H),d(D),d(X),d(O),d(x),d(F),d(M),d(pe),d(ie),d(he),d(fe),d(Ze),d(Ce),d(Ne))}}}function Ba(r){let e,t,n,s,i,a;t=new et({props:{text:"Credits",callback:r[1]}});function l(c){r[2](c)}let o={$$slots:{default:[Sa]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.dialog=r[0]),s=new un({props:o}),je.push(()=>Ye(s,"dialog",l)),{c(){e=w("div"),ee(t.$$.fragment),n=T(),ee(s.$$.fragment)},l(c){e=E(c,"DIV",{});var u=A(e);te(t.$$.fragment,u),u.forEach(d),n=P(c),te(s.$$.fragment,c)},m(c,u){v(c,e,u),ne(t,e,null),v(c,n,u),ne(s,c,u),a=!0},p(c,[u]){const f={};u&1&&(f.callback=c[1]),t.$set(f);const h={};u&8&&(h.$$scope={dirty:u,ctx:c}),!i&&u&1&&(i=!0,h.dialog=c[0],qe(()=>i=!1)),s.$set(h)},i(c){a||(B(t.$$.fragment,c),B(s.$$.fragment,c),a=!0)},o(c){j(t.$$.fragment,c),j(s.$$.fragment,c),a=!1},d(c){c&&(d(e),d(n)),re(t),re(s,c)}}}function Da(r,e,t){let n;const s=()=>{n.showModal()};function i(a){n=a,t(0,n)}return[n,s,i]}class Ha extends Re{constructor(e){super(),Te(this,e,Da,Ba,Le,{})}}function Cr(r,e,t){const n=r.slice();return n[5]=e[t],n}function Ir(r,e,t){const n=r.slice();return n[8]=e[t],n}function $r(r,e,t){const n=r.slice();return n[11]=e[t],n}function Lr(r,e){let t,n,s;return n=new pa({props:{link:e[11]}}),{key:r,first:null,c(){t=Ie(),ee(n.$$.fragment),this.h()},l(i){t=Ie(),te(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){v(i,t,a),ne(n,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.link=e[11]),n.$set(l)},i(i){s||(B(n.$$.fragment,i),s=!0)},o(i){j(n.$$.fragment,i),s=!1},d(i){i&&d(t),re(n,i)}}}function Rr(r,e){let t,n,s;return n=new _a({props:{router:e[8]}}),{key:r,first:null,c(){t=Ie(),ee(n.$$.fragment),this.h()},l(i){t=Ie(),te(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){v(i,t,a),ne(n,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.router=e[8]),n.$set(l)},i(i){s||(B(n.$$.fragment,i),s=!0)},o(i){j(n.$$.fragment,i),s=!1},d(i){i&&d(t),re(n,i)}}}function Tr(r,e){let t,n,s;return n=new da({props:{packet:e[5]}}),{key:r,first:null,c(){t=Ie(),ee(n.$$.fragment),this.h()},l(i){t=Ie(),te(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){v(i,t,a),ne(n,i,a),s=!0},p(i,a){e=i;const l={};a&2&&(l.packet=e[5]),n.$set(l)},i(i){s||(B(n.$$.fragment,i),s=!0)},o(i){j(n.$$.fragment,i),s=!1},d(i){i&&d(t),re(n,i)}}}function Oa(r){let e=[],t=new Map,n,s=[],i=new Map,a,l=[],o=new Map,c,u,f=Ee(r[1].links);const h=m=>m[11].id;for(let m=0;m<f.length;m+=1){let p=$r(r,f,m),$=h(p);t.set($,e[m]=Lr($,p))}let _=Ee(r[1].routers);const y=m=>m[8].id;for(let m=0;m<_.length;m+=1){let p=Ir(r,_,m),$=y(p);i.set($,s[m]=Rr($,p))}let g=Ee(r[1].packets);const b=m=>m[5].id;for(let m=0;m<g.length;m+=1){let p=Cr(r,g,m),$=b(p);o.set($,l[m]=Tr($,p))}return{c(){for(let m=0;m<e.length;m+=1)e[m].c();n=T();for(let m=0;m<s.length;m+=1)s[m].c();a=T();for(let m=0;m<l.length;m+=1)l[m].c();c=Ie()},l(m){for(let p=0;p<e.length;p+=1)e[p].l(m);n=P(m);for(let p=0;p<s.length;p+=1)s[p].l(m);a=P(m);for(let p=0;p<l.length;p+=1)l[p].l(m);c=Ie()},m(m,p){for(let $=0;$<e.length;$+=1)e[$]&&e[$].m(m,p);v(m,n,p);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(m,p);v(m,a,p);for(let $=0;$<l.length;$+=1)l[$]&&l[$].m(m,p);v(m,c,p),u=!0},p(m,p){p&2&&(f=Ee(m[1].links),He(),e=Pn(e,p,h,1,m,f,t,n.parentNode,Tn,Lr,n,$r),Oe()),p&2&&(_=Ee(m[1].routers),He(),s=Pn(s,p,y,1,m,_,i,a.parentNode,Tn,Rr,a,Ir),Oe()),p&2&&(g=Ee(m[1].packets),He(),l=Pn(l,p,b,1,m,g,o,c.parentNode,Tn,Tr,c,Cr),Oe())},i(m){if(!u){for(let p=0;p<f.length;p+=1)B(e[p]);for(let p=0;p<_.length;p+=1)B(s[p]);for(let p=0;p<g.length;p+=1)B(l[p]);u=!0}},o(m){for(let p=0;p<e.length;p+=1)j(e[p]);for(let p=0;p<s.length;p+=1)j(s[p]);for(let p=0;p<l.length;p+=1)j(l[p]);u=!1},d(m){m&&(d(n),d(a),d(c));for(let p=0;p<e.length;p+=1)e[p].d(m);for(let p=0;p<s.length;p+=1)s[p].d(m);for(let p=0;p<l.length;p+=1)l[p].d(m)}}}function Za(r){let e,t,n,s,i,a,l,o,c,u,f,h,_,y,g,b,m,p,$,S,N;t=new Ei({});function H(O){r[2](O)}let D={$$slots:{default:[Oa]},$$scope:{ctx:r}};r[0]!==void 0&&(D.zoom=r[0]),i=new Qi({props:D}),je.push(()=>Ye(i,"zoom",H)),c=new Ca({}),h=new Ra({}),y=new Ha({});function U(O){r[3](O)}let X={};return r[0]!==void 0&&(X.zoom=r[0]),m=new Na({props:X}),je.push(()=>Ye(m,"zoom",U)),S=new oa({}),{c(){e=w("div"),ee(t.$$.fragment),n=T(),s=w("div"),ee(i.$$.fragment),l=T(),o=w("div"),ee(c.$$.fragment),u=T(),f=w("div"),ee(h.$$.fragment),_=T(),ee(y.$$.fragment),g=T(),b=w("div"),ee(m.$$.fragment),$=T(),ee(S.$$.fragment),this.h()},l(O){e=E(O,"DIV",{id:!0,class:!0});var x=A(e);te(t.$$.fragment,x),n=P(x),s=E(x,"DIV",{id:!0,class:!0});var F=A(s);te(i.$$.fragment,F),l=P(F),o=E(F,"DIV",{id:!0,class:!0});var R=A(o);te(c.$$.fragment,R),R.forEach(d),u=P(F),f=E(F,"DIV",{id:!0,class:!0});var M=A(f);te(h.$$.fragment,M),_=P(M),te(y.$$.fragment,M),M.forEach(d),g=P(F),b=E(F,"DIV",{id:!0,class:!0});var pe=A(b);te(m.$$.fragment,pe),pe.forEach(d),F.forEach(d),$=P(x),te(S.$$.fragment,x),x.forEach(d),this.h()},h(){k(o,"id","top-left-bar"),k(o,"class","absolute-flex svelte-1kpnzxr"),k(f,"id","bottom-left-bar"),k(f,"class","absolute-flex svelte-1kpnzxr"),k(b,"id","bottom-right-bar"),k(b,"class","absolute-flex svelte-1kpnzxr"),k(s,"id","network"),k(s,"class","svelte-1kpnzxr"),k(e,"id","mpls"),k(e,"class","svelte-1kpnzxr")},m(O,x){v(O,e,x),ne(t,e,null),I(e,n),I(e,s),ne(i,s,null),I(s,l),I(s,o),ne(c,o,null),I(s,u),I(s,f),ne(h,f,null),I(f,_),ne(y,f,null),I(s,g),I(s,b),ne(m,b,null),I(e,$),ne(S,e,null),N=!0},p(O,[x]){const F={};x&16386&&(F.$$scope={dirty:x,ctx:O}),!a&&x&1&&(a=!0,F.zoom=O[0],qe(()=>a=!1)),i.$set(F);const R={};!p&&x&1&&(p=!0,R.zoom=O[0],qe(()=>p=!1)),m.$set(R)},i(O){N||(B(t.$$.fragment,O),B(i.$$.fragment,O),B(c.$$.fragment,O),B(h.$$.fragment,O),B(y.$$.fragment,O),B(m.$$.fragment,O),B(S.$$.fragment,O),N=!0)},o(O){j(t.$$.fragment,O),j(i.$$.fragment,O),j(c.$$.fragment,O),j(h.$$.fragment,O),j(y.$$.fragment,O),j(m.$$.fragment,O),j(S.$$.fragment,O),N=!1},d(O){O&&d(e),re(t),re(i),re(c),re(h),re(y),re(m),re(S)}}}function ja(r,e,t){let n,s;Fe(r,Xe,o=>t(4,n=o)),Fe(r,W,o=>t(1,s=o));let i;An(()=>{window.addEventListener("visibilitychanged",()=>{st(Xe,n.running=!document.hidden,n)})});function a(o){i=o,t(0,i)}function l(o){i=o,t(0,i)}return[i,s,a,l]}class Aa extends Re{constructor(e){super(),Te(this,e,ja,Za,Le,{})}}function Ma(r){let e,t;return e=new Aa({}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,s){ne(e,n,s),t=!0},p:Se,i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}class Ja extends Re{constructor(e){super(),Te(this,e,null,Ma,Le,{})}}export{Ja as component};
